{"version":3,"file":"lib.min.js","sources":["lib.js"],"names":["loadCSS","href","before","media","ss","window","document","createElement","ref","getElementsByTagName","rel","parentNode","insertBefore","setTimeout","loadJS","src","script","global","factory","module","exports","w","Error","this","noGlobal","isArraylike","obj","length","type","jQuery","isWindow","nodeType","winnow","elements","qualifier","not","isFunction","grep","elem","i","call","risSimple","test","filter","indexOf","sibling","cur","dir","createOptions","options","object","optionsCache","each","match","rnotwhite","_","flag","completed","removeEventListener","ready","Data","Object","defineProperty","cache","get","expando","uid","dataAttr","key","data","name","undefined","replace","rmultiDash","toLowerCase","getAttribute","rbrace","parseJSON","e","data_user","set","returnTrue","returnFalse","safeActiveElement","activeElement","err","manipulationTarget","content","nodeName","firstChild","appendChild","ownerDocument","disableScript","restoreScript","rscriptTypeMasked","exec","removeAttribute","setGlobalEval","elems","refElements","l","data_priv","cloneCopyEvent","dest","pdataOld","pdataCur","udataOld","udataCur","events","hasData","access","handle","event","add","extend","getAll","context","tag","ret","querySelectorAll","merge","fixInput","rcheckableType","checked","defaultValue","actualDisplay","doc","style","appendTo","body","display","getDefaultComputedStyle","css","detach","defaultDisplay","elemdisplay","iframe","documentElement","contentDocument","write","close","curCSS","computed","width","minWidth","maxWidth","getStyles","getPropertyValue","contains","rnumnonpx","rmargin","addGetHookIf","conditionFn","hookFn","apply","arguments","vendorPropName","capName","toUpperCase","slice","origName","cssPrefixes","setPositiveNumber","value","subtract","matches","rnumsplit","Math","max","augmentWidthOrHeight","extra","isBorderBox","styles","val","cssExpand","getWidthOrHeight","valueIsBorderBox","offsetWidth","offsetHeight","support","boxSizingReliable","parseFloat","showHide","show","hidden","values","index","isHidden","Tween","prop","end","easing","prototype","init","createFxNow","fxNow","now","genFx","includeWidth","which","attrs","height","opacity","createTween","animation","tween","collection","tweeners","concat","defaultPrefilter","props","opts","toggle","hooks","oldfire","checkDisplay","anim","orig","dataShow","queue","_queueHooks","unqueued","empty","fire","always","overflow","overflowX","overflowY","rfxtypes","isEmptyObject","done","hide","remove","start","propFilter","specialEasing","camelCase","isArray","cssHooks","expand","Animation","properties","result","stopped","animationPrefilters","deferred","Deferred","tick","currentTime","remaining","startTime","duration","temp","percent","tweens","run","notifyWith","resolveWith","promise","originalProperties","originalOptions","push","stop","gotoEnd","rejectWith","map","fx","timer","progress","complete","fail","addToPrefiltersOrTransports","structure","dataTypeExpression","func","dataType","dataTypes","unshift","inspectPrefiltersOrTransports","jqXHR","inspect","selected","inspected","prefilterOrFactory","dataTypeOrTransport","seekingTransport","transports","ajaxExtend","target","deep","flatOptions","ajaxSettings","ajaxHandleResponses","s","responses","ct","finalDataType","firstDataType","contents","shift","mimeType","getResponseHeader","converters","ajaxConvert","response","isSuccess","conv2","current","conv","tmp","prev","responseFields","dataFilter","split","state","error","buildParams","prefix","traditional","v","rbracket","getWindow","defaultView","arr","class2type","toString","hasOwn","hasOwnProperty","version","selector","fn","rtrim","rmsPrefix","rdashAlpha","fcamelCase","all","letter","jquery","constructor","toArray","num","pushStack","prevObject","callback","args","first","eq","last","len","j","sort","splice","copy","copyIsArray","clone","isPlainObject","random","isReady","msg","noop","Array","isNumeric","globalEval","code","indirect","eval","trim","text","head","removeChild","string","makeArray","results","inArray","second","invert","callbackInverse","callbackExpect","arg","guid","proxy","Date","Sizzle","seed","m","groups","old","nid","newContext","newSelector","preferredDoc","setDocument","documentIsHTML","rquickExpr","getElementById","id","getElementsByClassName","qsa","rbuggyQSA","tokenize","rescape","setAttribute","toSelector","rsibling","testContext","join","qsaError","select","createCache","keys","Expr","cacheLength","markFunction","assert","div","addHandle","handler","attrHandle","siblingCheck","a","b","diff","sourceIndex","MAX_NEGATIVE","nextSibling","createInputPseudo","createButtonPseudo","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","base","checkNonElements","doneName","xml","oldCache","outerCache","newCache","dirruns","elementMatcher","matchers","multipleContexts","contexts","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","preMap","postMap","preexisting","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","relative","implicitRelative","matchContext","matchAnyContext","outermostContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","find","dirrunsUnique","pop","uniqueSort","getText","isXML","compile","sortInput","hasDuplicate","docElem","rbuggyMatches","classCache","tokenCache","compilerCache","sortOrder","push_native","list","booleans","whitespace","characterEncoding","identifier","attributes","pseudos","rwhitespace","RegExp","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","runescape","funescape","escaped","escapedWhitespace","high","String","fromCharCode","unloadHandler","childNodes","els","node","hasCompare","parent","top","addEventListener","attachEvent","className","createComment","getById","getElementsByName","attrId","getAttributeNode","innerHTML","input","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","msMatchesSelector","disconnectedMatch","compareDocumentPosition","adown","bup","compare","sortDetached","aup","ap","bp","expr","attr","specified","duplicates","detectDuplicates","sortStable","textContent","nodeValue","selectors","createPseudo",">"," ","+","~","excess","unquoted","nodeNameSelector","pattern","operator","check","what","simple","forward","ofType","nodeIndex","useCache","lastChild","pseudo","idx","matched","has","innerText","lang","elemLang","hash","location","root","focus","hasFocus","tabIndex","enabled","disabled","selectedIndex","header","button","even","odd","lt","gt","radio","checkbox","file","password","image","submit","reset","filters","parseOnly","soFar","preFilters","cached","token","compiled","div1","unique","isXMLDoc","rneedsContext","rsingleTag","self","is","rootjQuery","parseHTML","rparentsprev","guaranteedUnique","children","next","until","truncate","n","targets","closest","pos","prevAll","addBack","parents","parentsUntil","nextAll","nextUntil","prevUntil","siblings","reverse","Callbacks","memory","fired","firing","firingStart","firingLength","firingIndex","stack","once","stopOnFalse","disable","lock","locked","fireWith","tuples","then","fns","newDefer","tuple","returned","resolve","reject","notify","pipe","stateString","when","subordinate","progressValues","progressContexts","resolveContexts","resolveValues","updateFunc","readyList","readyWait","holdReady","hold","wait","triggerHandler","off","readyState","chainable","emptyGet","raw","bulk","acceptData","owner","accepts","descriptor","unlock","defineProperties","stored","camel","discard","removeData","_data","_removeData","camelKey","dequeue","startLength","setter","clearQueue","count","defer","pnum","source","el","fragment","createDocumentFragment","checkClone","cloneNode","noCloneChecked","strundefined","focusinBubbles","rkeyEvent","rmouseEvent","rfocusMorph","rtypenamespace","types","handleObjIn","eventHandle","t","handleObj","special","handlers","namespaces","origType","elemData","triggered","dispatch","delegateType","bindType","namespace","delegateCount","setup","mappedTypes","origCount","teardown","removeEvent","trigger","onlyHandlers","bubbleType","ontype","eventPath","Event","isTrigger","namespace_re","noBubble","parentWindow","isPropagationStopped","preventDefault","isDefaultPrevented","_default","fix","handlerQueue","delegateTarget","preDispatch","currentTarget","isImmediatePropagationStopped","stopPropagation","postDispatch","sel","fixHooks","keyHooks","original","charCode","keyCode","mouseHooks","eventDoc","pageX","clientX","scrollLeft","clientLeft","pageY","clientY","scrollTop","clientTop","originalEvent","fixHook","load","blur","click","beforeunload","returnValue","simulate","bubble","isSimulated","defaultPrevented","timeStamp","stopImmediatePropagation","mouseenter","mouseleave","pointerenter","pointerleave","related","relatedTarget","attaches","on","one","origFn","rxhtmlTag","rtagName","rhtml","rnoInnerhtml","rchecked","rscriptType","rcleanScript","wrapMap","option","thead","col","tr","td","optgroup","tbody","tfoot","colgroup","caption","th","dataAndEvents","deepDataAndEvents","srcElements","destElements","inPage","buildFragment","scripts","selection","wrap","nodes","createTextNode","cleanData","append","domManip","prepend","after","keepData","html","replaceWith","replaceChild","hasScripts","iNoClone","_evalUrl","prependTo","insertAfter","replaceAll","insert","opener","getComputedStyle","computePixelPositionAndBoxSizingReliable","cssText","container","divStyle","pixelPositionVal","boxSizingReliableVal","backgroundClip","clearCloneStyle","pixelPosition","reliableMarginRight","marginDiv","marginRight","swap","rdisplayswap","rrelNum","cssShow","position","visibility","cssNormalTransform","letterSpacing","fontWeight","cssNumber","columnCount","fillOpacity","flexGrow","flexShrink","lineHeight","order","orphans","widows","zIndex","zoom","cssProps","float","margin","padding","border","suffix","expanded","parts","unit","propHooks","eased","step","linear","p","swing","cos","PI","timerId","rfxnum","rrun","*","scale","maxIterations","tweener","prefilter","speed","opt","speeds","fadeTo","to","animate","optall","doAnimation","finish","stopQueue","timers","cssFn","slideDown","slideUp","slideToggle","fadeIn","fadeOut","fadeToggle","interval","setInterval","clearInterval","slow","fast","delay","time","timeout","clearTimeout","checkOn","optSelected","optDisabled","radioValue","nodeHook","boolHook","removeAttr","nType","attrHooks","propName","attrNames","propFix","getter","rfocusable","removeProp","for","class","notxml","hasAttribute","rclass","addClass","classes","clazz","finalValue","proceed","removeClass","toggleClass","stateVal","classNames","hasClass","rreturn","valHooks","optionSet","hover","fnOver","fnOut","bind","unbind","delegate","undelegate","nonce","rquery","JSON","parse","parseXML","DOMParser","parseFromString","rhash","rts","rheaders","rlocalProtocol","rnoContent","rprotocol","rurl","prefilters","allTypes","ajaxLocation","ajaxLocParts","active","lastModified","etag","url","isLocal","processData","async","contentType","json","* text","text html","text json","text xml","ajaxSetup","settings","ajaxPrefilter","ajaxTransport","ajax","status","nativeStatusText","headers","success","modified","statusText","timeoutTimer","transport","responseHeadersString","ifModified","cacheURL","callbackContext","statusCode","fireGlobals","globalEventContext","completeDeferred","responseHeaders","requestHeaders","requestHeadersNames","strAbort","getAllResponseHeaders","setRequestHeader","lname","overrideMimeType","abort","finalText","method","crossDomain","param","hasContent","beforeSend","send","getJSON","getScript","throws","wrapAll","firstElementChild","wrapInner","unwrap","visible","r20","rCRLF","rsubmitterTypes","rsubmittable","encodeURIComponent","serialize","serializeArray","xhr","XMLHttpRequest","xhrId","xhrCallbacks","xhrSuccessStatus",1223,"xhrSupported","cors","open","username","xhrFields","onload","onerror","responseText","text script","charset","scriptCharset","evt","oldCallbacks","rjsonp","jsonp","jsonpCallback","originalSettings","callbackName","overwritten","responseContainer","jsonProp","keepScripts","parsed","_load","params","animated","offset","setOffset","curPosition","curLeft","curCSSTop","curTop","curOffset","curCSSLeft","calculatePosition","curElem","left","using","win","box","getBoundingClientRect","pageYOffset","pageXOffset","offsetParent","parentOffset","scrollTo","Height","Width","defaultExtra","funcName","size","andSelf","define","amd","_jQuery","_$","$","noConflict","doCopy","pInt","mag","parseInt","isString","isObject","isNumber","log2lin","math","log","LN10","lin2log","pow","erase","item","defined","UNDEFINED","splat","isIE","hasSVG","attribs","nopad","NONE","extendClass","members","pad","number","getTZOffset","timestamp","getTimezoneOffset","timezoneOffset","formatSingle","format","decimals","floatRegex","decRegex","defaultOptions","Highcharts","numberFormat","decimalPoint","thousandsSep","dateFormat","str","ctx","segment","valueAndFormat","path","splitter","isInside","getMagnitude","mathFloor","normalizeTickInterval","multiples","magnitude","allowDecimals","preventExceed","normalized","retInterval","pick","stableSort","sortFunction","sortValue","ss_i","arrayMin","min","arrayMax","destroyObjectProperties","except","destroy","discardElement","element","garbageBin","DIV","console","correctFloat","toPrecision","setAnimation","chart","globalAnimation","setTimeMethods","globalOptions","useUTC","GET","SET","makeTime","year","month","date","hours","minutes","seconds","d","UTC","getTime","getMinutes","getHours","getDay","getDate","getMonth","getFullYear","setMinutes","setHours","setDate","setMonth","setFullYear","setOptions","getOptions","SVGElement","Tick","axis","noLabel","isNew","addLabel","StackItem","isNegative","x","stackOption","inverted","total","points","alignOptions","align","verticalAlign","y","textAlign","Scroller","chartOptions","navigatorOptions","navigator","navigatorEnabled","scrollbarOptions","scrollbar","scrollbarEnabled","scrollbarHeight","handles","scrollbarButtons","elementsToDestroy","setBaseSeries","outlineHeight","RangeSelector","Renderer","hasTouch","pathAnim","timeUnits","AxisPlotLineOrBandExtension","mathRound","round","floor","mathCeil","ceil","mathMax","mathMin","mathAbs","abs","mathCos","mathSin","sin","mathPI","deg2rad","userAgent","isOpera","opera","docMode8","documentMode","isWebKit","isFirefox","isTouchDevice","SVG_NS","createElementNS","createSVGRect","hasBidiBug","useCanVG","getContext","symbolSizes","idCounter","charts","chartCount","PRODUCT","VERSION","ABSOLUTE","RELATIVE","HIDDEN","PREFIX","VISIBLE","PX","M","L","numRegex","NORMAL_STATE","HOVER_STATE","SELECT_STATE","marginNames","STROKE_WIDTH","seriesTypes","capitalize","isNaN","day","dayOfMonth","fullYear","langWeekdays","weekdays","replacements","substr","A","shortMonths","B","months","Y","H","I","P","S","getSeconds","dateFormats","millisecond","minute","hour","week","decPoint","c","toFixed","fromD","toD","endLength","startBaseLine","endBaseLine","bezier","numParams","sixify","isArea","startVal","HighchartsAdapter","Fx","easeOutQuad","addAnimSetter","ends","started","forEach","highcharts","constr","renderTo","adapterRun","addEvent","eventType","fireEvent","eventArguments","defaultFunction","detachedType","layerX","layerY","washMouseEvent","$el","hasAnim","globalAdapter","adapter","colors","symbols","loading","numericSymbols","resetZoom","resetZoomTitle","canvasToolsURL","VMLRadialGradientURL","borderColor","borderRadius","defaultSeriesType","ignoreHiddenSeries","spacing","backgroundColor","plotBorderColor","resetZoomButton","theme","title","color","fontSize","subtitle","plotOptions","line","allowPointSelect","showCheckbox","lineWidth","marker","radius","lineColor","states","lineWidthPlus","radiusPlus","fillColor","point","dataLabels","formatter","textShadow","cropThreshold","pointRange","halo","stickyTracking","turboThreshold","labels","legend","layout","labelFormatter","navigation","activeColor","inactiveColor","shadow","itemStyle","itemHoverStyle","itemHiddenStyle","itemCheckboxStyle","symbolPadding","labelStyle","tooltip","borderWidth","dateTimeLabelFormats","footerFormat","headerFormat","pointFormat","snap","cursor","whiteSpace","credits","defaultPlotOptions","defaultSeriesOptions","rgbaRegEx","hexRegEx","rgbRegEx","Color","stops","rgba","brighten","alpha","setOpacity","textProps","renderer","wrapper","animOptions","colorGradient","colorObject","gradName","gradAttr","gradients","gradientObject","stopColor","stopOpacity","radialReference","linearGradient","radialGradient","x1","y1","x2","y2","gradientUnits","cx","cy","r","defs","stopObject","stop-color","stop-opacity","applyTextShadow","tspans","hasContrast","supports","forExport","getContrast","fill","fakeTS","ySetter","xSetter","strokeWidth","tspan","stroke","stroke-opacity","stroke-width","stroke-linejoin","hasSetSymbolSize","skipAttr","_defaultGetter","symbolName","symbolAttr","rotation","doTransform","_defaultSetter","shadows","updateShadows","updateTransform","cutHeight","currentClassName","clip","clipRect","crisp","rect","normalizer","textWidth","hyphenate","elemWrapper","oldStyles","newStyles","serializedCss","hasNew","added","buildText","svgElement","ontouchstart","touchEventFired","onclick","setRadialReference","coordinates","translate","translateX","translateY","transform","scaleX","scaleY","toFront","alignByTranslate","vAlign","alignTo","alignedObjects","right","center","bottom","middle","placed","alignAttr","getBBox","reload","bBox","toggleTextShadowShim","cacheKey","rad","textStr","elemStyle","namespaceURI","htmlGetBBox","isSVG","inherit","inserted","parentGroup","parentInverted","handleZ","zIndexSetter","onAdd","safeRemoveChild","grandParent","parentToClean","onmouseout","onmouseover","onmousemove","clipPath","shadowOptions","group","cutOff","shadowWidth","shadowElementOpacity","offsetX","offsetY","isShadow","xGetter","dSetter","dashstyleSetter","alignSetter","opacitySetter","titleSetter","titleNode","textSetter","fillSetter","otherElement","otherZIndex","parentWrapper","yGetter","translateXSetter","translateYSetter","rotationSetter","verticalAlignSetter","scaleXSetter","scaleYSetter","strokeSetter","hasStroke","SVGRenderer","Element","boxWrapper","desc","loc","getStyle","setSize","subPixelFix","fontFamily","rendererDefs","draw","lines","styleRegex","hrefRegex","textNode","hasMarkup","parentX","textStyles","textLineHeight","ellipsis","textOverflow","tempParent","getLineHeight","fontMetrics","h","unescapeAngleBrackets","inputStr","lineNo","spans","spanNo","span","spanStyle","dx","tooLong","wasTooLong","actualWidth","words","hasWhiteSpace","rest","dy","softLineNo","wordStr","measureSpanWidth","substring","normalState","hoverState","pressedState","disabledState","shape","stateOptions","stateStyle","normalStyle","hoverStyle","pressedStyle","disabledStyle","label","curState","verticalGradient","setState","crispLine","circle","arc","innerR","symbol","rSetter","rx","ry","g","preserveAspectRatio","setAttributeNS","imageElement","imageSrc","imageSize","centerImage","symbolFn","imageRegex","img","isImg","cpw","square","triangle","triangle-down","diamond","innerRadius","cosStart","sinStart","cosEnd","sinEnd","longArc","callout","arrowLength","halfDistance","safeDistance","anchorX","anchorY","useHTML","fakeSVG","parentVal","baseline","f","rotCorr","alterY","updateBoxSize","boxX","boxY","paddingLeft","baselineOffset","needsBox","alignFactor","deferredAttr","updateTextPadding","boxAttr","wrapperX","wrapperY","crispAdjust","widthSetter","heightSetter","paddingSetter","paddingLeftSetter","anchorXSetter","anchorYSetter","baseCss","htmlCss","tagName","offsetLeft","offsetTop","htmlUpdateTransform","alignOnAdd","alignCorrection","marginLeft","marginTop","child","invertChild","currentTextTransform","cTT","setSpanRotation","elemWidth","getSpanCorrection","xCorr","yCorr","rotationStyle","cssTransformKey","transformOrigin","svgGroupWrapper","htmlGroup","htmlGroupStyle","visibilitySetter","VMLRenderer","VMLElement","markup","isDiv","prepVML","deferUpdateTransform","costheta","sintheta","quad","elemHeight","nonLeft","pathToVML","isArc","clipMembers","cssRet","destroyClip","getCSS","srcElement","cutOffPath","modifiedPath","setAttr","classSetter","strokeElem","filled","stroke-widthSetter","stroked","updateClipping","VMLRendererExtension","isIE8","isVML","hcv","createStyleSheet","styleSheets","isObj","isShape","member","fillType","regexRgba","opacity1","opacity2","color1","color2","firstStop","lastStop","gradient","fillAttr","addFillNode","atan","sizex","sizey","applyRadialGradient","propNodes","vmlStyle","coordsize","isCircle","ren","parentStyle","imgStyle","flip","measuringSpan","CanVGRenderer","CanVGController","drawDeferred","callIndex","callLength","deferredRenderCalls","scriptLocation","dateTimeLabelFormat","categories","names","labelOptions","tickPositions","isFirst","isLast","tickPositionInfo","info","isDatetimeAxis","higherRanks","unitName","isLog","labelGroup","labelLength","getLabelSize","horiz","handleOverflow","xy","leftPos","rightPos","pxPos","chartWidth","leftBound","labelLeft","rightBound","labelRight","factor","labelAlign","labelWidth","slotWidth","getPosition","tickmarkOffset","cHeight","oldChartHeight","chartHeight","transB","opposite","oldChartWidth","getLabelPosition","transA","reversed","staggerLines","tickRotCorr","yOffset","side","labelOffset","getMarkPath","tickLength","tickWidth","render","gridLinePath","markPath","gridLine","gridPrefix","tickPrefix","gridLineWidth","gridLineColor","dashStyle","tickColor","tickPosition","mark","reverseCrisp","isActive","getPlotLinePath","dashstyle","gridGroup","axisGroup","showFirstLabel","showLastLabel","isRadial","PlotLineOrBand","xs","ys","plotLine","optionsLabel","from","isBand","svgElem","getPlotBandPath","onGetPath","plotLinesAndBands","toPath","addPlotBand","addPlotBandOrLine","addPlotLine","coll","userOptions","removePlotBandOrLine","plotLines","plotBands","Axis","endOnTick","minPadding","maxPadding","minorGridLineColor","minorGridLineWidth","minorTickColor","minorTickLength","minorTickPosition","startOfWeek","startOnTick","tickmarkPlacement","tickPixelInterval","defaultYAxisOptions","stackLabels","defaultLeftAxisOptions","defaultRightAxisOptions","defaultBottomAxisOptions","autoRotation","defaultTopAxisOptions","isXAxis","isX","defaultLabelFormatter","minPixelPadding","zoomEnabled","isLinked","linkedTo","ticks","labelEdge","minorTicks","alternateBands","minRange","userMinRange","maxZoom","range","stacks","oldStacks","crosshair","crosshairs","axes","isColorAxis","xAxis","series","removePlotBand","removePlotLine","val2lin","lin2val","multi","formatOption","numericSymbolDetector","tickInterval","getSeriesExtremes","hasVisibleSeries","dataMin","dataMax","ignoreMinPadding","ignoreMaxPadding","buildStacks","xData","seriesDataMin","seriesDataMax","seriesOptions","threshold","getExtremes","backwards","cvsCoord","handleLog","pointPlacement","sign","cvsOffset","localA","oldTransA","localMin","oldMin","doPostTranslate","sector","toPixels","paneCoordinates","toValue","pixel","force","translatedValue","skip","axisLeft","axisTop","cWidth","between","getLinearTickPositions","lastPos","roundedMin","roundedMax","getMinorTickPositions","minorTickInterval","minorTickPositions","getLogTickPositions","getTimeTicks","normalizeTimeTickInterval","trimTicks","adjustForMinRange","zoomOffset","closestDataRange","distance","loopLength","minArgs","maxArgs","spaceAvailable","xIncrement","setAxisTranslation","saveOld","closestPointRange","ordinalCorrection","axisPointRange","minPointOffset","pointRangePadding","linkedParent","hasCategories","seriesPointRange","seriesClosestPointRange","single","noSharedTooltip","ordinalSlope","translationSlope","setTickInterval","secondPass","linkedParentExtremes","minTickInterval","tickIntervalOption","tickPixelIntervalOption","getTickAmount","userMin","userMax","beforePadding","usePercentage","ceiling","tickAmount","oldMax","beforeSetTickPositions","postProcessTickInterval","unsquish","setTickPositions","tickPositionsOption","tickPositioner","units","ordinalPositions","adjustTickAmount","hasOther","others","alignTicks","pane","finalTickAmt","currentTickAmount","setScale","isDirtyData","isDirtyAxisLength","oldAxisLength","setAxisSize","isDirty","forceRedraw","oldUserMin","oldUserMax","cum","setExtremes","newMin","newMax","redraw","serie","kdTree","eventArgs","isDirtyExtremes","allowZoomOutside","displayBtn","offsetRight","plotWidth","plotHeight","plotTop","plotLeft","percentRegex","getThreshold","realMin","realMax","autoLabelAlign","angle","newTickInterval","slotSize","rotationOption","labelMetrics","bestScore","Number","MAX_VALUE","getStep","spaceNeeded","rot","score","labelRotation","renderUnsquish","innerWidth","specCss","getOffset","showAxis","titleOffsetOption","labelOffsetPadded","lineHeightCorrection","invertedSide","titleOffset","titleMargin","axisTitleOptions","axisOffset","clipOffset","directionFactor","showEmpty","gridZIndex",1,3,"axisTitle","low","axisTitleMargin","getLinePath","lineLeft","lineTop","getTitlePosition","axisLength","alongAxis","offAxis","linePath","stackLabelOptions","alternateGridColor","hasRendered","slideInTicks","overlap","_addedPlotLB","plotLineOptions","forDestruction","destroyInactiveItems","axisLine","renderStackTotals","keepEvents","stackKey","cross","drawCrosshair","categorized","plotX","plotY","chartX","chartY","stackY","hideCrosshair","normalizedInterval","minYear","minDate","unitRange","setMilliseconds","getMilliseconds","setSeconds","minMonth","minDateDate","localTimezoneOffset","totalRange","unitsOption","lessThan","minor","positions","_minorAutoInterval","intermediate","break2","filteredTickIntervalOption","totalPixelLength","Tooltip","shared","hideTimer","tooltipTimeout","move","skipAnchor","followPointer","hoverPoints","hideDelay","hoverSeries","getAnchor","mouseEvent","yAxis","tooltipPos","pointer","normalize","plotLow","plotHigh","boxWidth","boxHeight","swapped","preferFarSide","ttBelow","negative","firstDimension","dim","outerSize","innerSize","roomLeft","roomRight","alignedLeft","alignedRight","secondDimension","defaultFormatter","items","tooltipFooterHeaderFormatter","bodyFormatter","refresh","anchor","currentSeries","textConfig","pointConfig","tooltipOptions","getLabelConfig","category","updatePosition","positioner","getXDateFormat","xDateFormat","lastN","blank","strpos","isFooter","footOrHead","isDateTime","formatString","pointFormatter","tooltipFormatter","hoverChartIndex","Pointer","zoomX","zoomY","chartEvents","zoomType","zoomHor","zoomVert","hasZoom","runChartClick","pinchDown","lastValidTouch","followTouchMove","setDOMEvents","chartPosition","ePos","touches","changedTouches","getCoordinates","runPointActions","trueXkd","trueX","kdpoint","kdpointT","hoverPoint","rdistance","kdpoints","directTouch","searchPoint","enableMouseTracking","dist","distX","kdDimensions","distR","onMouseOver","_onDocumentMouseMove","onDocumentMouseMove","allowMove","tooltipPoints","onMouseOut","hoverX","scaleGroups","seriesAttribs","getPlotBox","markerGroup","dataLabelsGroup","clipBox","dragStart","mouseIsDown","cancelClick","mouseDownX","mouseDownY","drag","clickedInside","panKey","hasDragged","sqrt","isInsidePlot","hasCartesianSeries","selectionMarker","selectionMarkerFill","panning","pan","drop","hasPinched","runZoom","selectionData","selectionBox","selectionLeft","selectionTop","selectionWidth","selectionHeight","selectionMin","selectionMax","_cursor","onContainerMouseDown","onDocumentMouseUp","inClass","onContainerMouseLeave","onContainerMouseMove","openMenu","elemClassName","onTrackerMouseOut","toElement","relatedSeries","onContainerClick","cancelBubble","firePointEvent","onmousedown","onContainerTouchStart","ontouchmove","onContainerTouchMove","onDocumentTouchEnd","pinchTranslate","pinchHor","pinchTranslateDirection","pinchVert","forcedScale","selectionWH","selectionXY","clipXY","outOfBounds","transformScale","scaleKey","XY","sChartXY","wh","plotLeftTop","bounds","singleTouch","touch0Start","touch0Now","touch1Start","touch1Now","pinch","touchesLength","fireClickEvent","runTrackerClick","absMin","absMax","res","plotBox","PointerEvent","MSPointerEvent","hasPointerEvent","getWebkitTouches","fake","translateMSPointer","wktype","pointerType","MSPOINTER_TYPE_TOUCH","onContainerPointerDown","pointerId","onContainerPointerMove","onDocumentPointerUp","batchMSEvents","-ms-touch-action","touch-action","Legend","itemMarginTop","initialItemX","initialItemY","maxItemWidth","itemHeight","symbolWidth","pages","positionCheckboxes","colorizeItem","legendItem","legendLine","legendSymbol","hiddenColor","textColor","symbolColor","legendColor","markerOptions","isMarker","convertAttribs","positionItem","ltr","rtl","legendItemPos","_legendItemPos","itemX","itemY","legendGroup","legendWidth","destroyItem","clearItems","getAllItems","scrollOffset","clipHeight","legendHeight","allItems","checkboxOffset","renderTitle","titleOptions","titleHeight","contentGroup","renderItem","itemWidth","horizontal","itemDistance","widthOption","itemMarginBottom","li","drawLegendSymbol","createCheckboxForItem","scrollGroup","labelFormat","setItemEvents","legendItemWidth","legendItemHeight","lastLineHeight","lastItemY","showInLegend","legendItems","legendType","adjustMargins","alignment","floating","alignments","legendBorderWidth","legendBackgroundColor","legendIndex","isResizing","lastY","optionsY","alignTop","spaceHeight","spacingBox","maxHeight","navOptions","arrowSize","nav","currentPage","fullHeight","up","scroll","pager","down","scrollBy","pageCount","LegendSymbolMixin","drawRectangle","symbolHeight","symbolRadius","drawLineMarker","legendOptions","legendItemGroup","verticalCenter","runPositionItem","Chart","callbacks","optionsChart","splashArray","showAxes","reflow","initReflow","pointCount","colorCounter","symbolCounter","firstRender","initSeries","hasStackedSeries","hasDirtyStacks","redrawLegend","isDirtyLegend","isDirtyBox","seriesLength","isHiddenChart","afterRedraw","cloneRenderTo","layOutTitles","stacking","getStacks","maxTicks","getMargins","drawChartBox","isCartesian","getAxes","optionsArray","xAxisOptions","yAxisOptions","axisOptions","getSelectedPoints","getSelectedSeries","setTitle","subtitleOptions","chartTitleOptions","chartSubtitleOptions","requiresDirtyBox","autoWidth","getChartSize","heightOption","renderToClone","containerWidth","containerHeight","revert","setProperty","getContainer","oldChartIndex","containerId","indexAttrName","skipClone","-webkit-tap-highlight-color","create","chartIndex","skipAxes","resetMargins","extraBottomMargin","marginBottom","extraTopMargin","getAxisMargins","setChartSize","doReflow","hasUserSize","reflowTimeout","fireEndResize","clipX","clipY","plotBorderWidth","plotSizeX","plotSizeY","mgn","bgAttr","chartBackground","plotBackground","plotBorder","plotBGImage","chartBorderWidth","chartBackgroundColor","plotBackgroundColor","plotBackgroundImage","plotShadow","propFromSeries","klass","linkSeries","chartSeries","linkedSeries","renderSeries","renderLabels","tempWidth","tempHeight","redoHorizontal","redoVertical","seriesGroup","showCredits","isReadyToRender","canvg","detachEvent","serieOptions","oVar","tArray","CenteredSeriesMixin","getCenter","handleSlicingRoom","isPercent","slicingRoom","slicedOffset","centerOption","smallestSize","Point","applyOptions","pointAttr","colorByPoint","pointValKey","optionsToObject","autoIncrement","firstItemType","pointArrayMap","valueCount","_hasPointLabels","_hasPointMarkers","graphic","dataLabel","destroyElements","percentage","stackTotal","seriesTooltipOptions","valueDecimals","valuePrefix","valueSuffix","importEvents","ctrlKey","metaKey","shiftKey","Series","pointClass","sorted","requireSorting","pointAttrToOptions","axisTypes","parallelArrays","sortByIndex","_i","bindAxes","getColor","getSymbol","setData","AXIS","optionalAxis","updateParallelArrays","toYData","pointInterval","pointIntervalUnit","pointStart","getSegments","lastNull","segments","pointsLength","connectNulls","itemOptions","zones","userPlotOptions","typeOptions","zoneAxis","negativeColor","negativeFillColor","getCyclic","defaults","indexName","counterName","seriesMarkerOption","updatePoints","dataLength","pt","oldData","oldDataLength","firstPoint","yData","cropped","hasGroupedData","update","croppedData","xExtremes","processedXData","processedYData","cropStart","forceCrop","cropData","cropEnd","cropShoulder","generatePoints","dataOptions","processedDataLength","yDataLength","validValue","withinRange","activeYData","activeCounter","xMin","xMax","stackedYData","getExtremesFromAll","lastPlotX","hasModifyValue","modifyValue","dynamicallyPlaced","closestPointRangePx","pointStack","stackValues","xValue","yValue","yBottom","negStacks","pointXOffset","barW","Infinity","setClip","seriesClipBox","sharedClipKey","markerClipRect","afterAnimate","drawPoints","isImage","pointMarkerOptions","hasPointMarker","seriesMarkerOptions","seriesPointAttr","globallyEnabled","base1","base2","base3","conversion","getAttribs","pointStateOptionsHover","normalOptions","stateOptionsHover","seriesColor","seriesNegativeColor","normalDefaults","hasPointSpecificOptions","defaultLineColor","defaultFillColor","brightness","issue134","animationTimeout","getSegmentPath","segmentPath","lastPoint","getPointSpline","getGraphPath","graphPath","singlePoints","drawGraph","roundCap","linecap","fillGraph","graphKey","graph","applyZones","translatedFrom","translatedTo","clipAttr","clips","area","chartSizeMax","ignoreZones","invertGroups","setInvert","groupName","plotGroup","animDuration","chartSeriesGroup","drawDataLabels","drawTracker","wasDirtyData","kdAxisArray","kdComparer","searchKDTree","buildKDTree","_kdtree","depth","dimensions","median","startRecursive","kdSync","_distance","p1","p2","kdX","kdY","distY","_search","search","tree","tdist","sideA","sideB","nPoint1","nPoint2","xOffset","xWidth","stackItem","neg","yZero","stackBox","crop","reversedStacks","setStackedPoints","setPercentStacks","oneStack","stackCategory","stackTotalGroup","other","pointKey","negKey","pointExtremes","totalFactor","addSeries","addAxis","showLoading","loadingDiv","loadingOptions","setLoadingSize","loadingSpan","loadingShown","showDuration","hideLoading","hideDuration","runEvent","fixedBox","updateTotals","removePoint","addPoint","isInTheMiddle","currentShift","graphNeg","areaNeg","isRemoving","newOptions","oldOptions","oldType","proto","preserve","axisSeries","newTitleOptions","setCategories","LineSeries","AreaSeries","pointMap","stackPoint","areaSegmentPath","segLength","translatedThreshold","closedStacks","closeSegment","areaPath","areaKey","spline","SplineSeries","leftContX","leftContY","rightContX","rightContY","smoothing","denom","nextPoint","correction","lastX","nextX","nextY","areaspline","areaProto","AreaSplineSeries","column","groupPadding","pointPadding","minPointLength","ColumnSeries","trackerGroups","otherSeries","getColumnMetrics","columnIndex","reversedXAxis","stackGroups","grouping","otherOptions","otherYAxis","categoryWidth","groupWidth","pointOffsetWidth","optionPointWidth","pointWidth","colIndex","columnMetrics","metrics","seriesBarW","xCrisp","yCrisp","fromTop","barX","barY","barH","shapeType","shapeArgs","animationLimit","borderAttr","bar","BarSeries","scatter","ScatterSeries","takeOrdinalPosition","pie","ignoreHiddenPoint","PiePoint","toggleSlice","setVisible","vis","doRedraw","sliced","translation","slicedTranslation","shadowGroup","haloPath","PieSeries","startAngleRad","radiusX","radiusY","cumulative","precision","connectorOffset","startAngle","endAngleRad","endAngle","circ","labelDistance","getX","asin","half","labelPos","groupTranslation","sortByAngle","pointOptions","generalOptions","dlProcessOptions","labelConfig","connector","moreStyle","dlOptions","inside","alignDataLabel","forceDL","justifyDataLabel","justified","connectorPath","dataLabelWidth","labelHeight","rankArr","connectorPadding","connectorWidth","softConnector","distanceOption","seriesCenter","centerY","outside","halves","slotsLength","slotIndex","slots","usedSlots","rank","slotI","slot","naturalY","justify","_attr","_pos","connX","connY","verifyDataLabelOverflow","placeDataLabels","connectorColor","moved","minSize","newSize","dlBox","below","collectAndHide","allowOverlap","labelrank","hideOverlappingLabels","label1","label2","intersectRect","pos1","pos2","size1","size2","oldOpacity","newOpacity","isOld","TrackerMixin","drawTrackerPoint","_hasTracking","drawTrackerGraph","singlePoint","trackByArea","trackerPath","trackerPathLength","tracker","TRACKER_FILL","strLegendItemClick","fnLegendItemClick","browserEvent","defaultChecked","showResetZoom","btnOptions","relativeTo","zoomOut","resetSelection","hasZoomed","displayButton","axisData","mousePos","startPos","halfPointRange","extremes","goingLeft","accumulate","loopPoint","hasImportedEvents","haloOptions","newSymbol","normalDisabled","markerStateOptions","stateDisabled","stateMarkerGraphic","pointMarker","currentSymbol","mouseOver","mouseOut","showOrHide","oldVisibility","ordinal","ordinalIndex","closestDistance","findHigherRanks","segmentPositions","hasCrossedHigherRank","posLength","outsideMax","groupPositions","lastGroupPosition","breaks","itemToRemove","translated","lastTranslated","medianDistance","translatedArr","distances","minIndex","maxIndex","slope","useOrdinal","keepOrdinalPadding","ordinalOffset","groupIntervalFactor","toIndex","ordinalLength","fromIndex","linearEquivalentLeft","linearEquivalentRight","getExtendedPositions","fakeAxis","fakeSeries","currentDataGrouping","destroyGroupedData","dataGrouping","forced","approximation","getGroupIntervalFactor","runBase","trimmedRange","searchAxisLeft","searchAxisRight","pointPixelWidth","movedUnits","extendedAxis","fixedRange","toFixedRange","gapSize","no","stripArguments","isInBreak","brk","repeat","inclusive","isInAnyBreak","testKeep","inbrk","keep","showPoints","newPositions","nval","breakArray","inBrk","breakArrayT","breakSize","DATA_GROUPING","seriesProto","tooltipProto","baseProcessData","baseGeneratePoints","baseDestroy","baseTooltipFooterHeaderFormatter","NUMBER","commonOptions","groupPixelWidth","specificOptions","arearange","areasplinerange","columnrange","candlestick","ohlc","defaultDataGroupingUnits","approximations","sum","hasNulls","average","groupData","pointX","pointY","groupedY","groupedXData","groupedYData","handleYData","approximationFn","pointArrayMapLength","dataGroupingOptions","groupingEnabled","allowDG","_stock","hasProcessed","getGroupPixelWidth","nonGroupedPointRange","groupedXandY","smoothed","groupedData","xDateFormatEnd","labelFormats","formattedKey","dgOptions","doGrouping","OHLCSeries","upColorProp","upColor","seriesDownPointAttr","plotOpen","plotClose","crispCorr","halfWidth","crispX","CandlestickSeries","upLineColor","hoverStroke","selectStroke","topBox","bottomBox","hasTopWhisker","hasBottomWhisker","flags","stackDistance","leftPoint","rightPoint","optionsOnSeries","onSeries","onData","xAxisExt","stackIndex","outsideRight","raised","_y","otherPoint","labelTopOrBottomY","numExt","extreme","numbers","maskFill","maskInside","outlineColor","outlineWidth","barBackgroundColor","barBorderRadius","barBorderWidth","barBorderColor","buttonArrowColor","buttonBackgroundColor","buttonBorderColor","buttonBorderRadius","buttonBorderWidth","rifleColor","trackBackgroundColor","trackBorderColor","trackBorderWidth","liveRedraw","drawHandle","tempElem","scroller","handlesOptions","rendered","scrollerLeft","drawScrollbarButton","scrollbarGroup","scrollerWidth","pxMin","pxMax","navigatorLeft","navigatorWidth","zoomedMin","zoomedMax","scrX","scrWidth","centerBarX","verb","unionExtremes","navigatorGroup","scrollbarTrack","scrollbarMinWidth","halfOutline","scrollbarPad","scrollbarStrokeWidth","outlineTop","getUnionExtremes","fixedWidth","leftShade","rightShade","outline","trackBorderRadius","scrollbarRifles","addEvents","_events","mouseDownHandler","mouseMoveHandler","mouseUpHandler","removeEvents","baseSeries","updatedDataHandler","dragOffset","fixedMax","ext","isOnNavigator","baseXAxis","handleSensitivity","grabbedLeft","otherHandlePos","fixedExtreme","grabbedRight","grabbedCenter","fixedMin","triggerOp","DOMEvent","xAxisIndex","yAxisIndex","addBaseSeries","scrollTrackWidth","valueRange","returnFalseOnNoBaseSeries","baseAxis","navAxis","navAxisOptions","baseAxisOptions","baseSeriesOption","mergedNavSeriesOptions","navigatorData","baseOptions","baseData","navigatorSeriesOptions","hasNavigatorData","padXAxis","isInternal","adaptToUpdatedData","updatedData","stickToMin","stickToMax","baseExtremes","baseMin","baseMax","baseDataMin","baseDataMax","navigatorSeries","navXData","hasSetExtremes","previousZoom","rangeSelector","buttonTheme","inputPosition","rangeSelectorZoom","rangeSelectorFrom","rangeSelectorTo","clickButton","baseXAxisOptions","rangeMin","timeName","buttons","rangeOptions","buttonOptions","_range","MIN_VALUE","rangeSelectorButton","setSelected","defaultButtons","selectedOption","blurInputs","minInput","maxInput","computeButtonRange","updateButtonStates","updating","allButtonsEnabled","isTooGreatRange","isTooSmallRange","isAllButAlreadyShowingAll","isYTDButNotAvailable","fixedTimes","setInputValue","HCTime","inputEditDateFormat","inputDateFormat","drawInput","dateBox","chartStyle","isMin","inputGroup","inputBoxWidth","inputBoxHeight","inputBoxBorderColor","inputStyle","onfocus","onblur","onchange","inputValue","inputDateParser","yAlign","buttonLeft","buttonTop","buttonBBox","navButtonOptions","exporting","buttonPosition","inputEnabled","buttonGroup","zoomText","buttonSpacing","changeRatio","renderScroller","renderRangeSelector","afterSetExtremesHandlerScroller","afterSetExtremesHandlerRangeSelector","destroyEvents","StockChart","disableStartOnTick","lineOptions","columnOptions","pinchType","pinchX","pinchY","panes","_labelPanes","axes2","uniqueAxes","rax","axis2","crispPolyLine","crossLabelArray","crosslabel","posx","posy","crossBox","limit","crossLabel","formatFormat","seriesInit","seriesProcessData","pointTooltipFormatter","setCompare","compareValue","change","changeDecimals","svg","canvas","vml","product","buttonOffset","printChart","downloadPNG","downloadJPEG","downloadPDF","downloadSVG","contextButtonTitle","menuStyle","background","menuItemStyle","menuItemHoverStyle","symbolFill","symbolSize","symbolStroke","symbolStrokeWidth","symbolX","symbolY","contextButton","menuClassName","_titleKey","menuItems","textKey","print","separator","exportChart","post","formAttributes","form","action","enctype","sanitizeSVG","$1","$2","$3","getSVG","additionalOptions","chartCopy","sandbox","sourceWidth","sourceHeight","cssWidth","cssHeight","ns","axisType","axisCopy","getSVGForExport","chartExportingOptions","filename","origDisplay","origParent","isPrinting","contextMenu","innerMenu","cacheName","menu","menuPadding","boxShadow","docMouseUpHandler","MozBoxShadow","WebkitBoxShadow","exportDivElements","exportMenuWidth","exportMenuHeight","addButton","btnCount","exportSVGElements","stroke-linecap","destroyExport","exportingOptions","dfl","defaultParsingFlags","unusedTokens","unusedInput","charsLeftOver","nullInput","invalidMonth","invalidFormat","userInvalidated","iso","printMsg","moment","suppressDeprecationWarnings","warn","deprecate","firstTime","deprecateSimple","deprecations","padToken","leftZeroFill","ordinalizeToken","period","localeData","Locale","Moment","config","skipOverflow","checkOverflow","copyConfig","_d","Duration","normalizedInput","normalizeObjectUnits","years","quarters","quarter","weeks","days","milliseconds","_milliseconds","_days","_months","_locale","_bubble","valueOf","_isAMomentObject","_f","_l","_strict","_tzm","_isUTC","_offset","_pf","momentProperties","absRound","targetLength","forceSign","output","positiveMomentsDifference","isAfter","momentsDifference","makeAs","isBefore","createAdder","direction","dur","addOrSubtractDurationFromMoment","mom","isAdding","updateOffset","setTime","rawSetter","rawGetter","rawMonthSetter","isDate","compareArrays","array1","array2","dontConvert","lengthDiff","diffs","toInt","normalizeUnits","lowered","unitAliases","camelFunctions","inputObject","normalizedProp","makeList","field","utc","argumentForCoercion","coercedNumber","isFinite","daysInMonth","getUTCDate","weeksInYear","dow","doy","weekOfYear","daysInYear","isLeapYear","_a","MONTH","DATE","YEAR","HOUR","MINUTE","SECOND","MILLISECOND","_overflowDayOfYear","isValid","_isValid","normalizeLocale","chooseLocale","locale","loadLocale","oldLocale","locales","hasModule","require","model","zone","local","removeFormattingTokens","makeFormatFunction","array","formattingTokens","formatTokenFunctions","Function","formatMoment","expandFormat","formatFunctions","invalidDate","replaceLongDateFormatTokens","longDateFormat","localFormattingTokens","lastIndex","getParseRegexForToken","strict","parseTokenOneDigit","parseTokenThreeDigits","parseTokenFourDigits","parseTokenOneToFourDigits","parseTokenSignedNumber","parseTokenSixDigits","parseTokenOneToSixDigits","parseTokenTwoDigits","parseTokenOneToThreeDigits","parseTokenWord","_meridiemParse","parseTokenTimestampMs","parseTokenTimezone","parseTokenT","parseTokenDigits","parseTokenOneOrTwoDigits","parseTokenOrdinal","regexpEscape","unescapeFormat","timezoneMinutesFromString","possibleTzMatches","tzChunk","parseTimezoneChunker","addTimeToArrayFromToken","datePartArray","monthsParse","_dayOfYear","parseTwoDigitYear","_isPm","isPM","_useUTC","weekdaysParse","_w","invalidWeekday","dayOfYearFromWeekInfo","weekYear","weekday","GG","W","E","_week","gg","dayOfYearFromWeeks","dayOfYear","dateFromConfig","currentDate","yearToUse","currentDateArray","makeUTCDate","getUTCMonth","makeDate","setUTCMinutes","getUTCMinutes","dateFromObject","getUTCFullYear","makeDateFromStringAndFormat","ISO_8601","parseISO","parsedInput","skipped","stringLength","totalParsedInputLength","p3","p4","makeDateFromStringAndArray","tempConfig","bestMoment","scoreToBeat","currentScore","NaN","isoRegex","isoDates","isoTimes","makeDateFromString","createFromInputFallback","makeDateFromInput","aspNetJsonRegex","ms","setUTCFullYear","parseWeekday","substituteTimeAgo","withoutSuffix","isFuture","relativeTime","posNegDuration","as","relativeTimeThresholds","firstDayOfWeek","firstDayOfWeekOfYear","adjustedMoment","daysToDayOfWeek","daysToAdd","getUTCDay","makeMoment","invalid","preparse","isMoment","pickBy","moments","makeAccessor","keepTime","daysToYears","yearsToDays","makeDurationGetter","makeGlobal","shouldDeprecate","ender","oldGlobalMoment","globalScope","aspNetTimeSpanJsonRegex","isoDurationRegex","isoFormat","unitMillisecondFactors","Milliseconds","Seconds","Minutes","Hours","Days","Months","Years","D","Q","DDD","dayofyear","isoweekday","isoweek","weekyear","isoweekyear","ordinalizeTokens","paddedTokens","MMM","monthsShort","MMMM","dd","weekdaysMin","ddd","weekdaysShort","dddd","isoWeek","YY","YYYY","YYYYY","YYYYYY","gggg","ggggg","isoWeekYear","GGGG","GGGGG","isoWeekday","meridiem","SS","SSS","SSSS","Z","ZZ","z","zoneAbbr","zz","zoneName","X","unix","lists","DDDD","_monthsShort","monthName","regex","_monthsParse","_weekdays","_weekdaysShort","_weekdaysMin","weekdayName","_weekdaysParse","_longDateFormat","LT","LL","LLL","LLLL","charAt","isLower","_calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","calendar","_relativeTime","future","past","mm","hh","MM","yy","pastFuture","_ordinal","postformat","_invalidDate","parseIso","diffRes","isDuration","inp","defaultFormat","relativeTimeThreshold","defineLocale","_abbr","abbr","langData","parseZone","toDate","toISOString","isDSTShifted","parsingFlags","invalidAt","keepLocalTime","inputString","asFloat","that","zoneDiff","startOf","humanize","fromNow","sod","isDST","endOf","isSame","localAdjust","_changeInProgress","hasAlignedHourOffset","isoWeeksInYear","weekInfo","dates","isoWeeks","toJSON","withSuffix","toIsoString","asSeconds","asMilliseconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","Map","EventTarget","listeners","throwError","MessageEvent","lastEventId","getDuration","def","MINIMUM_DURATION","MAXIMUM_DURATION","EventSource","currentState","CLOSED","timeout0","onProgress","isLoadEnd","OPEN","CONNECTING","isWrongStatusCodeOrContentType","isXHR","contentTypeRegExp","wasActivity","retry","initialRetry","dispatchEvent","onopen","message","charOffset","AFTER_CR","FIELD_START","dataBuffer","lastEventIdBuffer","eventTypeBuffer","heartbeatTimeout","onTimeout","onmessage","FIELD","VALUE_START","VALUE","WAITING","onProgress2","onLoadEnd","withCredentials","Boolean","isCORSSupported","Transport","sendAsBinary","onloadend","onabort","onreadystatechange","onprogress","responseType","F","delete","typeListeners","listener","filtered","XHR","XDR","XDomainRequest","NativeEventSource","downloadAttrSupported","download","getCSV","row","maxRows","columns","csv","itemDelimiter","lineDelimiter","includeInCSVExport","xTitle","downloadCSV","_OldCookies","Cookies","api","encode","decode","decodeURIComponent","stringifyCookieValue","stringify","parseCookieValue","pluses","read","converter","expires","cookie","toUTCString","domain","secure","cookies","removeCookie","sparkline","getDefaults","createClass","SPFormat","clipval","quartile","normalizeValue","normalizeValues","addCSS","ensureArray","formatNumber","RangeMap","MouseHandler","barHighlightMixin","tristate","discrete","bullet","defaultStyles","initStyles","VShape","VCanvas_base","VCanvas_canvas","VCanvas_vml","pending","UNSET_OPTION","shapeCount","common","defaultPixelsPerValue","composite","tagValuesAttribute","tagOptionsPrefix","enableTagOptions","enableHighlight","highlightLighten","tooltipSkipNull","tooltipPrefix","tooltipSuffix","disableHiddenCheck","numberFormatter","numberDigitGroupCount","numberDigitGroupSep","numberDecimalMark","disableTooltips","disableInteraction","spotColor","highlightSpotColor","highlightLineColor","spotRadius","minSpotColor","maxSpotColor","normalRangeMin","normalRangeMax","normalRangeColor","drawNormalOnTop","chartRangeMin","chartRangeMax","chartRangeMinX","chartRangeMaxX","tooltipFormat","barColor","negBarColor","stackedBarColor","zeroColor","nullColor","zeroAxis","barWidth","barSpacing","chartRangeClip","colorMap","posBarColor","zeroBarColor","tooltipValueLookups","-1","0","thresholdColor","thresholdValue","targetColor","targetWidth","performanceColor","rangeColors","fields","sliceColors","boxLineColor","boxFillColor","whiskerColor","outlierLineColor","outlierFillColor","medianColor","showOutliers","outlierIQR","tooltipFormatFieldlistKey","lq","med","uq","lo","ro","lw","rw","Class","_super","cls","SPFormatClass","fre","precre","fclass","fieldset","lookups","lookupkey","fieldvalue","prec","lookup","spformat","q","vl","nf","vals","groupsize","groupsep","decsep","ignoreNull","iefail","WebkitAppearance","simpledraw","useExisting","interact","mhandler","innerHeight","registerCanvas","cleardraw","RangeMapClass","rangelist","range_map","currentPageX","currentPageY","splist","over","displayTooltips","highlightEnabled","registerSparkline","sp","updateDisplay","$canvas","mouseclick","removeTooltip","clickEvent","sparklines","mousemove","currentEl","spcount","needsRefresh","clearRegionHighlight","tooltiphtml","changeEvent","localX","localY","setRegionHighlight","getCurrentRegionTooltip","setContent","disableHighlight","sizeStyle","tooltipClassname","sizetipStyle","tooltipOffsetX","tooltipOffsetY","sizetip","updateWindowDims","scrollRight","getSize","mousex","mousey","userValues","$this","alert","sparkline_display_visible","pl","extendedOptions","tagOptionType","tagValCache","getTagSetting","mergedOptions","pairs","keyval","defaultval","tagOption","_base","currentRegion","initTarget","interactive","canvasWidth","pixelWidth","canvasHeight","pixelHeight","getRegion","newRegion","removeHighlight","renderHighlight","changeHighlight","formats","formatlen","showFields","showFieldsKey","newFields","fv","fieldlen","entries","getCurrentRegionFields","isNull","calcHighlightColor","mult","rgbnew","highlightColor","lighten","highlight","newShapes","shapeids","regionShapes","renderRegion","replaceWithShapes","newShape","replaceWithShape","shapes","ids","vertices","regionMap","xvalues","yvalues","yminmax","hightlightSpotId","lastShapeId","highlightSpot","highlightLine","vertex","drawCircle","highlightSpotId","insertAfterShape","drawLine","canvasTop","highlightLineId","removeShapeId","scanValues","isStr","valcount","maxy","maxyorg","miny","minyorg","maxx","minx","processRangeOptions","drawNormalRange","canvasLeft","rangey","ytop","drawRect","rangex","yvallast","paths","xnext","xpos","xposnext","yvalcount","lineShapes","fillShapes","plen","valueSpots","hlSpotsEnabled","drawShape","getLastShapeId","isStackString","groupMin","groupMax","stackRanges","numValues","vlen","xaxisOffset","clipMin","clipMax","stacked","vlist","slen","svals","yoffset","yMaxCalc","stackMin","stackMax","totalBarWidth","stackTotals","stackRangesNeg","canvasHeightEf","colorMapByIndex","colorMapByValue","calcColor","stacknum","valuenum","newColor","yoffsetNeg","minPlotted","allMin","halfHeight","pheight","valueShapes","regiondata","shapeid","getShapeAt","fieldkey","region","renderRange","renderPerformance","renderTarget","rn","rangeval","rangewidth","perfval","perfwidth","targetval","targettop","targetheight","t0","newslice","renderSlice","drawPieSlice","quartiles","loutlier","routlier","lwhisker","rwhisker","iqr","q1","q2","q3","unitSize","minValue","maxValue","appendShape","_pxregex","_genShape","getElement","_insert","_calculatePixelDims","shapetype","shapeargs","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","ratio","shapeseq","currentTargetShapeId","_getContext","strokeStyle","fillStyle","clearRect","_drawShape","beginPath","moveTo","lineTo","targetX","targetY","isPointInPath","_drawCircle","_drawPieSlice","closePath","_drawRect","sid","shapemap","groupel","insertAdjacentHTML","prerender","initial","closed","vel","vpath","startx","starty","endx","endy","existing","outerHTML","symbolMap","2","4","5","6","7","8","9","numberMap","","","","","","","","","","","pluralForm","plurals","pluralize","u","processRelativeTime","monthsShortDot","plural","monthsNominative","monthsSubjective","momentToFormat","word","forms","relativeTimeWithPlural","monthsCaseReplace","nominative","accusative","nounCase","monthsShortCaseReplace","weekdaysCaseReplace","meridiemParse","ll","lll","llll","hm","Picker","PickerConstructor","ELEMENT","NAME","COMPONENT","OPTIONS","createWrappedComponent","component","STATE","CLASSES","frame","holder","prepareElement","$ELEMENT","SETTINGS","editable","handleKeydownEvent","aria","haspopup","readonly","owns","prepareElementRoot","$root","prepareElementHolder","$holder","keydown","focus.toOpen","handleFocusToOpenEvent","focusin","focused","mousedown click","$target","targetData","targetDisabled","navDisabled","getActiveElement","closeOnSelect","clear","closeOnClear","prepareElementHidden","hiddenName","hiddenPrefix","hiddenSuffix","_hidden","formatSubmit","focusPickerOnceOpened","IS_DEFAULT_THEME","supportsTransitions","keycode","isKeycodeDelete","klasses","PickerInstance","$node","methods","autofocus","readOnly","picker","containerHidden","onStart","onRender","onStop","onOpen","onClose","onSet","isUsingDefaultTheme","entireComponent","dontGiveFocus","opened","$html","getScrollbarWidth","$document","keycodeToMove","go","highlighted","giveFocus","thing","thingItem","thingValue","thingIsObject","thingObject","muted","internal","thingName","thingMethod","namesCount","_trigger","methodList","currentStyle","$window","$outer","widthWithoutScroll","$inner","widthWithScroll","attribute","ariaSet","ariaAttr","attrVal","transition","groupObject","loopObjectScope","nodesList","counter","lead","scope","digits","isInteger","Component","componentData","DatePicker","elementValue","elementDataValue","valueString","isRTL","view","enable","collectionDisabled",40,38,39,37,"timeChange","highlightedObject","targetDate","selectMonth","selectYear","includeToday","buttonToday","DAYS_IN_WEEK","WEEKS_IN_CALENDAR","calendarItem","isInfiniteValue","createRange","createDate","dateUnit","overlapRanges","two","navigate","targetDateObject","targetYear","targetMonth","isTargetArray","isTargetObject","viewsetObject","measure","viewset","dateObject","validate","hasEnabledBeforeTarget","hasEnabledAfterTarget","reachedMin","reachedMax","originalDateObject","isFlippedBase","minLimitObject","maxLimitObject","hasEnabledWeekdays","dateTime","dateToVerify","isDisabledMatch","dateToDisable","firstDay","parsingObject","formattingLabel","formatLength","yyyy","getWordLengthFromCollection","getFirstWordLength","weekdaysFull","mmm","mmmm","monthsFull","itemObject","isDateExact","isDateOverlap","flipEnable","deactivate","datesToDisable","disabledItems","unitToDisable","matchFound","activate","datesToEnable","disabledItemsCount","unitToEnable","disabledUnit","isExactRange","isOpen","nowObject","selectedObject","disabledCollection","tableHead","fullCollection","showWeekdaysFull","createMonthNav","role","controls","labelMonthNext","labelMonthPrev","createMonthLabel","monthsCollection","showMonthsShort","selectMonths","loopedMonth","labelMonthSelect","createYearLabel","focusedYear","numberYears","selectYears","maxYear","lowestYear","highestYear","availableYears","neededYears","loopedYear","labelYearSelect","rowCounter","shiftDateBy","isSelected","isHighlighted","isDisabled","formattedDate","infocus","outfocus","activedescendant","table","today","buttonClear","buttonClose","footer","navPrev","navNext","TimePicker","clock","$pickerHolder","$viewset","vendors","vendor","animations","clientHeight","HOURS_IN_DAY","MINUTES_IN_HOUR","HOURS_TO_NOON","MINUTES_IN_DAY","clockItem","mins","createTime","timeUnit","isBelowInterval","nowMinutes","isValueInteger","minTime","timeObject","timeToVerify","timeToDisable","minLimit","maxLimit","parseValue","HH","isTimeExact","isTimeOverlap","timesToDisable","timesToEnable","isRangeMatched","loopedTime","timeMinutes","formattedTime","formatLabel","listItem","firstrun","is_supported","history","pushState","replaceState","loaded_scripts","pjax_shell","connect","invoke","pjax","triggerEvent","event_name","createEvent","initEvent","st","useClass","loggedin","parseOptions","attach","protocol","host","pathname","ignoreFileTypes","update_url","classList","parseLinks","dom_obj","tmp_opt","excludeClass","get_container_node","smartLoad","querySelector","updateContent","tmpTitle","parseJS","runScripts","sc","request","parseLinksOnload","autoAnalytics","_gaq","ga","page","returnToTop","xmlhttp","ActiveXObject","o","pjax_obj"],"mappings":"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","sourcesContent":["/*!\r\n * jQuery JavaScript Library v2.1.4\r\n * http://jquery.com/\r\n *\r\n * Includes Sizzle.js\r\n * http://sizzlejs.com/\r\n *\r\n * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors\r\n * Released under the MIT license\r\n * http://jquery.org/license\r\n *\r\n * Date: 2015-04-28T16:01Z\r\n */\r\n\r\n(function( global, factory ) {\r\n\r\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\r\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\r\n\t\t// is present, execute the factory and get jQuery.\r\n\t\t// For environments that do not have a `window` with a `document`\r\n\t\t// (such as Node.js), expose a factory as module.exports.\r\n\t\t// This accentuates the need for the creation of a real `window`.\r\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\r\n\t\t// See ticket #14549 for more info.\r\n\t\tmodule.exports = global.document ?\r\n\t\t\tfactory( global, true ) :\r\n\t\t\tfunction( w ) {\r\n\t\t\t\tif ( !w.document ) {\r\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\r\n\t\t\t\t}\r\n\t\t\t\treturn factory( w );\r\n\t\t\t};\r\n\t} else {\r\n\t\tfactory( global );\r\n\t}\r\n\r\n// Pass this if window is not defined yet\r\n}(typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\r\n\r\n// Support: Firefox 18+\r\n// Can't be in strict mode, several libs including ASP.NET trace\r\n// the stack via arguments.caller.callee and Firefox dies if\r\n// you try to trace through \"use strict\" call chains. (#13335)\r\n//\r\n\r\nvar arr = [];\r\n\r\nvar slice = arr.slice;\r\n\r\nvar concat = arr.concat;\r\n\r\nvar push = arr.push;\r\n\r\nvar indexOf = arr.indexOf;\r\n\r\nvar class2type = {};\r\n\r\nvar toString = class2type.toString;\r\n\r\nvar hasOwn = class2type.hasOwnProperty;\r\n\r\nvar support = {};\r\n\r\n\r\n\r\nvar\r\n\t// Use the correct document accordingly with window argument (sandbox)\r\n\tdocument = window.document,\r\n\r\n\tversion = \"2.1.4\",\r\n\r\n\t// Define a local copy of jQuery\r\n\tjQuery = function( selector, context ) {\r\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\r\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\r\n\t\treturn new jQuery.fn.init( selector, context );\r\n\t},\r\n\r\n\t// Support: Android<4.1\r\n\t// Make sure we trim BOM and NBSP\r\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\r\n\r\n\t// Matches dashed string for camelizing\r\n\trmsPrefix = /^-ms-/,\r\n\trdashAlpha = /-([\\da-z])/gi,\r\n\r\n\t// Used by jQuery.camelCase as callback to replace()\r\n\tfcamelCase = function( all, letter ) {\r\n\t\treturn letter.toUpperCase();\r\n\t};\r\n\r\njQuery.fn = jQuery.prototype = {\r\n\t// The current version of jQuery being used\r\n\tjquery: version,\r\n\r\n\tconstructor: jQuery,\r\n\r\n\t// Start with an empty selector\r\n\tselector: \"\",\r\n\r\n\t// The default length of a jQuery object is 0\r\n\tlength: 0,\r\n\r\n\ttoArray: function() {\r\n\t\treturn slice.call( this );\r\n\t},\r\n\r\n\t// Get the Nth element in the matched element set OR\r\n\t// Get the whole matched element set as a clean array\r\n\tget: function( num ) {\r\n\t\treturn num != null ?\r\n\r\n\t\t\t// Return just the one element from the set\r\n\t\t\t( num < 0 ? this[ num + this.length ] : this[ num ] ) :\r\n\r\n\t\t\t// Return all the elements in a clean array\r\n\t\t\tslice.call( this );\r\n\t},\r\n\r\n\t// Take an array of elements and push it onto the stack\r\n\t// (returning the new matched element set)\r\n\tpushStack: function( elems ) {\r\n\r\n\t\t// Build a new jQuery matched element set\r\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\r\n\r\n\t\t// Add the old object onto the stack (as a reference)\r\n\t\tret.prevObject = this;\r\n\t\tret.context = this.context;\r\n\r\n\t\t// Return the newly-formed element set\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t// Execute a callback for every element in the matched set.\r\n\t// (You can seed the arguments with an array of args, but this is\r\n\t// only used internally.)\r\n\teach: function( callback, args ) {\r\n\t\treturn jQuery.each( this, callback, args );\r\n\t},\r\n\r\n\tmap: function( callback ) {\r\n\t\treturn this.pushStack( jQuery.map(this, function( elem, i ) {\r\n\t\t\treturn callback.call( elem, i, elem );\r\n\t\t}));\r\n\t},\r\n\r\n\tslice: function() {\r\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\r\n\t},\r\n\r\n\tfirst: function() {\r\n\t\treturn this.eq( 0 );\r\n\t},\r\n\r\n\tlast: function() {\r\n\t\treturn this.eq( -1 );\r\n\t},\r\n\r\n\teq: function( i ) {\r\n\t\tvar len = this.length,\r\n\t\t\tj = +i + ( i < 0 ? len : 0 );\r\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );\r\n\t},\r\n\r\n\tend: function() {\r\n\t\treturn this.prevObject || this.constructor(null);\r\n\t},\r\n\r\n\t// For internal use only.\r\n\t// Behaves like an Array's method, not like a jQuery method.\r\n\tpush: push,\r\n\tsort: arr.sort,\r\n\tsplice: arr.splice\r\n};\r\n\r\njQuery.extend = jQuery.fn.extend = function() {\r\n\tvar options, name, src, copy, copyIsArray, clone,\r\n\t\ttarget = arguments[0] || {},\r\n\t\ti = 1,\r\n\t\tlength = arguments.length,\r\n\t\tdeep = false;\r\n\r\n\t// Handle a deep copy situation\r\n\tif ( typeof target === \"boolean\" ) {\r\n\t\tdeep = target;\r\n\r\n\t\t// Skip the boolean and the target\r\n\t\ttarget = arguments[ i ] || {};\r\n\t\ti++;\r\n\t}\r\n\r\n\t// Handle case when target is a string or something (possible in deep copy)\r\n\tif ( typeof target !== \"object\" && !jQuery.isFunction(target) ) {\r\n\t\ttarget = {};\r\n\t}\r\n\r\n\t// Extend jQuery itself if only one argument is passed\r\n\tif ( i === length ) {\r\n\t\ttarget = this;\r\n\t\ti--;\r\n\t}\r\n\r\n\tfor ( ; i < length; i++ ) {\r\n\t\t// Only deal with non-null/undefined values\r\n\t\tif ( (options = arguments[ i ]) != null ) {\r\n\t\t\t// Extend the base object\r\n\t\t\tfor ( name in options ) {\r\n\t\t\t\tsrc = target[ name ];\r\n\t\t\t\tcopy = options[ name ];\r\n\r\n\t\t\t\t// Prevent never-ending loop\r\n\t\t\t\tif ( target === copy ) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Recurse if we're merging plain objects or arrays\r\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {\r\n\t\t\t\t\tif ( copyIsArray ) {\r\n\t\t\t\t\t\tcopyIsArray = false;\r\n\t\t\t\t\t\tclone = src && jQuery.isArray(src) ? src : [];\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject(src) ? src : {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Never move original objects, clone them\r\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\r\n\r\n\t\t\t\t// Don't bring in undefined values\r\n\t\t\t\t} else if ( copy !== undefined ) {\r\n\t\t\t\t\ttarget[ name ] = copy;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Return the modified object\r\n\treturn target;\r\n};\r\n\r\njQuery.extend({\r\n\t// Unique for each copy of jQuery on the page\r\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\r\n\r\n\t// Assume jQuery is ready without the ready module\r\n\tisReady: true,\r\n\r\n\terror: function( msg ) {\r\n\t\tthrow new Error( msg );\r\n\t},\r\n\r\n\tnoop: function() {},\r\n\r\n\tisFunction: function( obj ) {\r\n\t\treturn jQuery.type(obj) === \"function\";\r\n\t},\r\n\r\n\tisArray: Array.isArray,\r\n\r\n\tisWindow: function( obj ) {\r\n\t\treturn obj != null && obj === obj.window;\r\n\t},\r\n\r\n\tisNumeric: function( obj ) {\r\n\t\t// parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\r\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\r\n\t\t// subtraction forces infinities to NaN\r\n\t\t// adding 1 corrects loss of precision from parseFloat (#15100)\r\n\t\treturn !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;\r\n\t},\r\n\r\n\tisPlainObject: function( obj ) {\r\n\t\t// Not plain objects:\r\n\t\t// - Any object or value whose internal [[Class]] property is not \"[object Object]\"\r\n\t\t// - DOM nodes\r\n\t\t// - window\r\n\t\tif ( jQuery.type( obj ) !== \"object\" || obj.nodeType || jQuery.isWindow( obj ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ( obj.constructor &&\r\n\t\t\t\t!hasOwn.call( obj.constructor.prototype, \"isPrototypeOf\" ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// If the function hasn't returned already, we're confident that\r\n\t\t// |obj| is a plain object, created by {} or constructed with new Object\r\n\t\treturn true;\r\n\t},\r\n\r\n\tisEmptyObject: function( obj ) {\r\n\t\tvar name;\r\n\t\tfor ( name in obj ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\ttype: function( obj ) {\r\n\t\tif ( obj == null ) {\r\n\t\t\treturn obj + \"\";\r\n\t\t}\r\n\t\t// Support: Android<4.0, iOS<6 (functionish RegExp)\r\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\r\n\t\t\tclass2type[ toString.call(obj) ] || \"object\" :\r\n\t\t\ttypeof obj;\r\n\t},\r\n\r\n\t// Evaluates a script in a global context\r\n\tglobalEval: function( code ) {\r\n\t\tvar script,\r\n\t\t\tindirect = eval;\r\n\r\n\t\tcode = jQuery.trim( code );\r\n\r\n\t\tif ( code ) {\r\n\t\t\t// If the code includes a valid, prologue position\r\n\t\t\t// strict mode pragma, execute code by injecting a\r\n\t\t\t// script tag into the document.\r\n\t\t\tif ( code.indexOf(\"use strict\") === 1 ) {\r\n\t\t\t\tscript = document.createElement(\"script\");\r\n\t\t\t\tscript.text = code;\r\n\t\t\t\tdocument.head.appendChild( script ).parentNode.removeChild( script );\r\n\t\t\t} else {\r\n\t\t\t// Otherwise, avoid the DOM node creation, insertion\r\n\t\t\t// and removal by using an indirect global eval\r\n\t\t\t\tindirect( code );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Convert dashed to camelCase; used by the css and data modules\r\n\t// Support: IE9-11+\r\n\t// Microsoft forgot to hump their vendor prefix (#9572)\r\n\tcamelCase: function( string ) {\r\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\r\n\t},\r\n\r\n\tnodeName: function( elem, name ) {\r\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\r\n\t},\r\n\r\n\t// args is for internal usage only\r\n\teach: function( obj, callback, args ) {\r\n\t\tvar value,\r\n\t\t\ti = 0,\r\n\t\t\tlength = obj.length,\r\n\t\t\tisArray = isArraylike( obj );\r\n\r\n\t\tif ( args ) {\r\n\t\t\tif ( isArray ) {\r\n\t\t\t\tfor ( ; i < length; i++ ) {\r\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\r\n\r\n\t\t\t\t\tif ( value === false ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor ( i in obj ) {\r\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\r\n\r\n\t\t\t\t\tif ( value === false ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t// A special, fast, case for the most common use of each\r\n\t\t} else {\r\n\t\t\tif ( isArray ) {\r\n\t\t\t\tfor ( ; i < length; i++ ) {\r\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\r\n\r\n\t\t\t\t\tif ( value === false ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor ( i in obj ) {\r\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\r\n\r\n\t\t\t\t\tif ( value === false ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\t},\r\n\r\n\t// Support: Android<4.1\r\n\ttrim: function( text ) {\r\n\t\treturn text == null ?\r\n\t\t\t\"\" :\r\n\t\t\t( text + \"\" ).replace( rtrim, \"\" );\r\n\t},\r\n\r\n\t// results is for internal usage only\r\n\tmakeArray: function( arr, results ) {\r\n\t\tvar ret = results || [];\r\n\r\n\t\tif ( arr != null ) {\r\n\t\t\tif ( isArraylike( Object(arr) ) ) {\r\n\t\t\t\tjQuery.merge( ret,\r\n\t\t\t\t\ttypeof arr === \"string\" ?\r\n\t\t\t\t\t[ arr ] : arr\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tpush.call( ret, arr );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\tinArray: function( elem, arr, i ) {\r\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\r\n\t},\r\n\r\n\tmerge: function( first, second ) {\r\n\t\tvar len = +second.length,\r\n\t\t\tj = 0,\r\n\t\t\ti = first.length;\r\n\r\n\t\tfor ( ; j < len; j++ ) {\r\n\t\t\tfirst[ i++ ] = second[ j ];\r\n\t\t}\r\n\r\n\t\tfirst.length = i;\r\n\r\n\t\treturn first;\r\n\t},\r\n\r\n\tgrep: function( elems, callback, invert ) {\r\n\t\tvar callbackInverse,\r\n\t\t\tmatches = [],\r\n\t\t\ti = 0,\r\n\t\t\tlength = elems.length,\r\n\t\t\tcallbackExpect = !invert;\r\n\r\n\t\t// Go through the array, only saving the items\r\n\t\t// that pass the validator function\r\n\t\tfor ( ; i < length; i++ ) {\r\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\r\n\t\t\tif ( callbackInverse !== callbackExpect ) {\r\n\t\t\t\tmatches.push( elems[ i ] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn matches;\r\n\t},\r\n\r\n\t// arg is for internal usage only\r\n\tmap: function( elems, callback, arg ) {\r\n\t\tvar value,\r\n\t\t\ti = 0,\r\n\t\t\tlength = elems.length,\r\n\t\t\tisArray = isArraylike( elems ),\r\n\t\t\tret = [];\r\n\r\n\t\t// Go through the array, translating each of the items to their new values\r\n\t\tif ( isArray ) {\r\n\t\t\tfor ( ; i < length; i++ ) {\r\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\r\n\r\n\t\t\t\tif ( value != null ) {\r\n\t\t\t\t\tret.push( value );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t// Go through every key on the object,\r\n\t\t} else {\r\n\t\t\tfor ( i in elems ) {\r\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\r\n\r\n\t\t\t\tif ( value != null ) {\r\n\t\t\t\t\tret.push( value );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Flatten any nested arrays\r\n\t\treturn concat.apply( [], ret );\r\n\t},\r\n\r\n\t// A global GUID counter for objects\r\n\tguid: 1,\r\n\r\n\t// Bind a function to a context, optionally partially applying any\r\n\t// arguments.\r\n\tproxy: function( fn, context ) {\r\n\t\tvar tmp, args, proxy;\r\n\r\n\t\tif ( typeof context === \"string\" ) {\r\n\t\t\ttmp = fn[ context ];\r\n\t\t\tcontext = fn;\r\n\t\t\tfn = tmp;\r\n\t\t}\r\n\r\n\t\t// Quick check to determine if target is callable, in the spec\r\n\t\t// this throws a TypeError, but we will just return undefined.\r\n\t\tif ( !jQuery.isFunction( fn ) ) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\t// Simulated bind\r\n\t\targs = slice.call( arguments, 2 );\r\n\t\tproxy = function() {\r\n\t\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\r\n\t\t};\r\n\r\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\r\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\r\n\r\n\t\treturn proxy;\r\n\t},\r\n\r\n\tnow: Date.now,\r\n\r\n\t// jQuery.support is not used in Core but other projects attach their\r\n\t// properties to it so it needs to exist.\r\n\tsupport: support\r\n});\r\n\r\n// Populate the class2type map\r\njQuery.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\r\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\r\n});\r\n\r\nfunction isArraylike( obj ) {\r\n\r\n\t// Support: iOS 8.2 (not reproducible in simulator)\r\n\t// `in` check used to prevent JIT error (gh-2145)\r\n\t// hasOwn isn't used here due to false negatives\r\n\t// regarding Nodelist length in IE\r\n\tvar length = \"length\" in obj && obj.length,\r\n\t\ttype = jQuery.type( obj );\r\n\r\n\tif ( type === \"function\" || jQuery.isWindow( obj ) ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif ( obj.nodeType === 1 && length ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn type === \"array\" || length === 0 ||\r\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\r\n}\r\nvar Sizzle =\r\n/*!\r\n * Sizzle CSS Selector Engine v2.2.0-pre\r\n * http://sizzlejs.com/\r\n *\r\n * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors\r\n * Released under the MIT license\r\n * http://jquery.org/license\r\n *\r\n * Date: 2014-12-16\r\n */\r\n(function( window ) {\r\n\r\nvar i,\r\n\tsupport,\r\n\tExpr,\r\n\tgetText,\r\n\tisXML,\r\n\ttokenize,\r\n\tcompile,\r\n\tselect,\r\n\toutermostContext,\r\n\tsortInput,\r\n\thasDuplicate,\r\n\r\n\t// Local document vars\r\n\tsetDocument,\r\n\tdocument,\r\n\tdocElem,\r\n\tdocumentIsHTML,\r\n\trbuggyQSA,\r\n\trbuggyMatches,\r\n\tmatches,\r\n\tcontains,\r\n\r\n\t// Instance-specific data\r\n\texpando = \"sizzle\" + 1 * new Date(),\r\n\tpreferredDoc = window.document,\r\n\tdirruns = 0,\r\n\tdone = 0,\r\n\tclassCache = createCache(),\r\n\ttokenCache = createCache(),\r\n\tcompilerCache = createCache(),\r\n\tsortOrder = function( a, b ) {\r\n\t\tif ( a === b ) {\r\n\t\t\thasDuplicate = true;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\r\n\t// General-purpose constants\r\n\tMAX_NEGATIVE = 1 << 31,\r\n\r\n\t// Instance methods\r\n\thasOwn = ({}).hasOwnProperty,\r\n\tarr = [],\r\n\tpop = arr.pop,\r\n\tpush_native = arr.push,\r\n\tpush = arr.push,\r\n\tslice = arr.slice,\r\n\t// Use a stripped-down indexOf as it's faster than native\r\n\t// http://jsperf.com/thor-indexof-vs-for/5\r\n\tindexOf = function( list, elem ) {\r\n\t\tvar i = 0,\r\n\t\t\tlen = list.length;\r\n\t\tfor ( ; i < len; i++ ) {\r\n\t\t\tif ( list[i] === elem ) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t},\r\n\r\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\r\n\r\n\t// Regular expressions\r\n\r\n\t// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace\r\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\r\n\t// http://www.w3.org/TR/css3-syntax/#characters\r\n\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\r\n\r\n\t// Loosely modeled on CSS identifier characters\r\n\t// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors\r\n\t// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\r\n\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),\r\n\r\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\r\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")(?:\" + whitespace +\r\n\t\t// Operator (capture 2)\r\n\t\t\"*([*^$|!~]?=)\" + whitespace +\r\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\r\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace +\r\n\t\t\"*\\\\]\",\r\n\r\n\tpseudos = \":(\" + characterEncoding + \")(?:\\\\((\" +\r\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\r\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\r\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\r\n\t\t// 2. simple (capture 6)\r\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\r\n\t\t// 3. anything else (capture 2)\r\n\t\t\".*\" +\r\n\t\t\")\\\\)|)\",\r\n\r\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\r\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\r\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\r\n\r\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\r\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\r\n\r\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\r\n\r\n\trpseudo = new RegExp( pseudos ),\r\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\r\n\r\n\tmatchExpr = {\r\n\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),\r\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),\r\n\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),\r\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\r\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\r\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\r\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\r\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\r\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\r\n\t\t// For use in libraries implementing .is()\r\n\t\t// We use this for POS matching in `select`\r\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\r\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\r\n\t},\r\n\r\n\trinputs = /^(?:input|select|textarea|button)$/i,\r\n\trheader = /^h\\d$/i,\r\n\r\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\r\n\r\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\r\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\r\n\r\n\trsibling = /[+~]/,\r\n\trescape = /'|\\\\/g,\r\n\r\n\t// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\r\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\r\n\tfunescape = function( _, escaped, escapedWhitespace ) {\r\n\t\tvar high = \"0x\" + escaped - 0x10000;\r\n\t\t// NaN means non-codepoint\r\n\t\t// Support: Firefox<24\r\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\r\n\t\treturn high !== high || escapedWhitespace ?\r\n\t\t\tescaped :\r\n\t\t\thigh < 0 ?\r\n\t\t\t\t// BMP codepoint\r\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\r\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\r\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\r\n\t},\r\n\r\n\t// Used for iframes\r\n\t// See setDocument()\r\n\t// Removing the function wrapper causes a \"Permission Denied\"\r\n\t// error in IE\r\n\tunloadHandler = function() {\r\n\t\tsetDocument();\r\n\t};\r\n\r\n// Optimize for push.apply( _, NodeList )\r\ntry {\r\n\tpush.apply(\r\n\t\t(arr = slice.call( preferredDoc.childNodes )),\r\n\t\tpreferredDoc.childNodes\r\n\t);\r\n\t// Support: Android<4.0\r\n\t// Detect silently failing push.apply\r\n\tarr[ preferredDoc.childNodes.length ].nodeType;\r\n} catch ( e ) {\r\n\tpush = { apply: arr.length ?\r\n\r\n\t\t// Leverage slice if possible\r\n\t\tfunction( target, els ) {\r\n\t\t\tpush_native.apply( target, slice.call(els) );\r\n\t\t} :\r\n\r\n\t\t// Support: IE<9\r\n\t\t// Otherwise append directly\r\n\t\tfunction( target, els ) {\r\n\t\t\tvar j = target.length,\r\n\t\t\t\ti = 0;\r\n\t\t\t// Can't trust NodeList.length\r\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\r\n\t\t\ttarget.length = j - 1;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction Sizzle( selector, context, results, seed ) {\r\n\tvar match, elem, m, nodeType,\r\n\t\t// QSA vars\r\n\t\ti, groups, old, nid, newContext, newSelector;\r\n\r\n\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\r\n\t\tsetDocument( context );\r\n\t}\r\n\r\n\tcontext = context || document;\r\n\tresults = results || [];\r\n\tnodeType = context.nodeType;\r\n\r\n\tif ( typeof selector !== \"string\" || !selector ||\r\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tif ( !seed && documentIsHTML ) {\r\n\r\n\t\t// Try to shortcut find operations when possible (e.g., not under DocumentFragment)\r\n\t\tif ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {\r\n\t\t\t// Speed-up: Sizzle(\"#ID\")\r\n\t\t\tif ( (m = match[1]) ) {\r\n\t\t\t\tif ( nodeType === 9 ) {\r\n\t\t\t\t\telem = context.getElementById( m );\r\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\r\n\t\t\t\t\t// nodes that are no longer in the document (jQuery #6963)\r\n\t\t\t\t\tif ( elem && elem.parentNode ) {\r\n\t\t\t\t\t\t// Handle the case where IE, Opera, and Webkit return items\r\n\t\t\t\t\t\t// by name instead of ID\r\n\t\t\t\t\t\tif ( elem.id === m ) {\r\n\t\t\t\t\t\t\tresults.push( elem );\r\n\t\t\t\t\t\t\treturn results;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn results;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Context is not a document\r\n\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&\r\n\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {\r\n\t\t\t\t\t\tresults.push( elem );\r\n\t\t\t\t\t\treturn results;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t// Speed-up: Sizzle(\"TAG\")\r\n\t\t\t} else if ( match[2] ) {\r\n\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\r\n\t\t\t\treturn results;\r\n\r\n\t\t\t// Speed-up: Sizzle(\".CLASS\")\r\n\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName ) {\r\n\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\r\n\t\t\t\treturn results;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// QSA path\r\n\t\tif ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\r\n\t\t\tnid = old = expando;\r\n\t\t\tnewContext = context;\r\n\t\t\tnewSelector = nodeType !== 1 && selector;\r\n\r\n\t\t\t// qSA works strangely on Element-rooted queries\r\n\t\t\t// We can work around this by specifying an extra ID on the root\r\n\t\t\t// and working up from there (Thanks to Andrew Dupont for the technique)\r\n\t\t\t// IE 8 doesn't work on object elements\r\n\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {\r\n\t\t\t\tgroups = tokenize( selector );\r\n\r\n\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {\r\n\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontext.setAttribute( \"id\", nid );\r\n\t\t\t\t}\r\n\t\t\t\tnid = \"[id='\" + nid + \"'] \";\r\n\r\n\t\t\t\ti = groups.length;\r\n\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );\r\n\t\t\t\t}\r\n\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;\r\n\t\t\t\tnewSelector = groups.join(\",\");\r\n\t\t\t}\r\n\r\n\t\t\tif ( newSelector ) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tpush.apply( results,\r\n\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn results;\r\n\t\t\t\t} catch(qsaError) {\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tif ( !old ) {\r\n\t\t\t\t\t\tcontext.removeAttribute(\"id\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// All others\r\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\r\n}\r\n\r\n/**\r\n * Create key-value caches of limited size\r\n * @returns {Function(string, Object)} Returns the Object data after storing it on itself with\r\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\r\n *\tdeleting the oldest entry\r\n */\r\nfunction createCache() {\r\n\tvar keys = [];\r\n\r\n\tfunction cache( key, value ) {\r\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\r\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\r\n\t\t\t// Only keep the most recent entries\r\n\t\t\tdelete cache[ keys.shift() ];\r\n\t\t}\r\n\t\treturn (cache[ key + \" \" ] = value);\r\n\t}\r\n\treturn cache;\r\n}\r\n\r\n/**\r\n * Mark a function for special use by Sizzle\r\n * @param {Function} fn The function to mark\r\n */\r\nfunction markFunction( fn ) {\r\n\tfn[ expando ] = true;\r\n\treturn fn;\r\n}\r\n\r\n/**\r\n * Support testing using an element\r\n * @param {Function} fn Passed the created div and expects a boolean result\r\n */\r\nfunction assert( fn ) {\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\ttry {\r\n\t\treturn !!fn( div );\r\n\t} catch (e) {\r\n\t\treturn false;\r\n\t} finally {\r\n\t\t// Remove from its parent by default\r\n\t\tif ( div.parentNode ) {\r\n\t\t\tdiv.parentNode.removeChild( div );\r\n\t\t}\r\n\t\t// release memory in IE\r\n\t\tdiv = null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Adds the same handler for all of the specified attrs\r\n * @param {String} attrs Pipe-separated list of attributes\r\n * @param {Function} handler The method that will be applied\r\n */\r\nfunction addHandle( attrs, handler ) {\r\n\tvar arr = attrs.split(\"|\"),\r\n\t\ti = attrs.length;\r\n\r\n\twhile ( i-- ) {\r\n\t\tExpr.attrHandle[ arr[i] ] = handler;\r\n\t}\r\n}\r\n\r\n/**\r\n * Checks document order of two siblings\r\n * @param {Element} a\r\n * @param {Element} b\r\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\r\n */\r\nfunction siblingCheck( a, b ) {\r\n\tvar cur = b && a,\r\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\r\n\t\t\t( ~b.sourceIndex || MAX_NEGATIVE ) -\r\n\t\t\t( ~a.sourceIndex || MAX_NEGATIVE );\r\n\r\n\t// Use IE sourceIndex if available on both nodes\r\n\tif ( diff ) {\r\n\t\treturn diff;\r\n\t}\r\n\r\n\t// Check if b follows a\r\n\tif ( cur ) {\r\n\t\twhile ( (cur = cur.nextSibling) ) {\r\n\t\t\tif ( cur === b ) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn a ? 1 : -1;\r\n}\r\n\r\n/**\r\n * Returns a function to use in pseudos for input types\r\n * @param {String} type\r\n */\r\nfunction createInputPseudo( type ) {\r\n\treturn function( elem ) {\r\n\t\tvar name = elem.nodeName.toLowerCase();\r\n\t\treturn name === \"input\" && elem.type === type;\r\n\t};\r\n}\r\n\r\n/**\r\n * Returns a function to use in pseudos for buttons\r\n * @param {String} type\r\n */\r\nfunction createButtonPseudo( type ) {\r\n\treturn function( elem ) {\r\n\t\tvar name = elem.nodeName.toLowerCase();\r\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\r\n\t};\r\n}\r\n\r\n/**\r\n * Returns a function to use in pseudos for positionals\r\n * @param {Function} fn\r\n */\r\nfunction createPositionalPseudo( fn ) {\r\n\treturn markFunction(function( argument ) {\r\n\t\targument = +argument;\r\n\t\treturn markFunction(function( seed, matches ) {\r\n\t\t\tvar j,\r\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\r\n\t\t\t\ti = matchIndexes.length;\r\n\r\n\t\t\t// Match elements found at the specified indexes\r\n\t\t\twhile ( i-- ) {\r\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\r\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * Checks a node for validity as a Sizzle context\r\n * @param {Element|Object=} context\r\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\r\n */\r\nfunction testContext( context ) {\r\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\r\n}\r\n\r\n// Expose support vars for convenience\r\nsupport = Sizzle.support = {};\r\n\r\n/**\r\n * Detects XML nodes\r\n * @param {Element|Object} elem An element or a document\r\n * @returns {Boolean} True iff elem is a non-HTML XML node\r\n */\r\nisXML = Sizzle.isXML = function( elem ) {\r\n\t// documentElement is verified for cases where it doesn't yet exist\r\n\t// (such as loading iframes in IE - #4833)\r\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\r\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\r\n};\r\n\r\n/**\r\n * Sets document-related variables once based on the current document\r\n * @param {Element|Object} [doc] An element or document object to use to set the document\r\n * @returns {Object} Returns the current document\r\n */\r\nsetDocument = Sizzle.setDocument = function( node ) {\r\n\tvar hasCompare, parent,\r\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\r\n\r\n\t// If no document and documentElement is available, return\r\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\r\n\t\treturn document;\r\n\t}\r\n\r\n\t// Set our document\r\n\tdocument = doc;\r\n\tdocElem = doc.documentElement;\r\n\tparent = doc.defaultView;\r\n\r\n\t// Support: IE>8\r\n\t// If iframe document is assigned to \"document\" variable and if iframe has been reloaded,\r\n\t// IE will throw \"permission denied\" error when accessing \"document\" variable, see jQuery #13936\r\n\t// IE6-8 do not support the defaultView property so parent will be undefined\r\n\tif ( parent && parent !== parent.top ) {\r\n\t\t// IE11 does not have attachEvent, so all must suffer\r\n\t\tif ( parent.addEventListener ) {\r\n\t\t\tparent.addEventListener( \"unload\", unloadHandler, false );\r\n\t\t} else if ( parent.attachEvent ) {\r\n\t\t\tparent.attachEvent( \"onunload\", unloadHandler );\r\n\t\t}\r\n\t}\r\n\r\n\t/* Support tests\r\n\t---------------------------------------------------------------------- */\r\n\tdocumentIsHTML = !isXML( doc );\r\n\r\n\t/* Attributes\r\n\t---------------------------------------------------------------------- */\r\n\r\n\t// Support: IE<8\r\n\t// Verify that getAttribute really returns attributes and not properties\r\n\t// (excepting IE8 booleans)\r\n\tsupport.attributes = assert(function( div ) {\r\n\t\tdiv.className = \"i\";\r\n\t\treturn !div.getAttribute(\"className\");\r\n\t});\r\n\r\n\t/* getElement(s)By*\r\n\t---------------------------------------------------------------------- */\r\n\r\n\t// Check if getElementsByTagName(\"*\") returns only elements\r\n\tsupport.getElementsByTagName = assert(function( div ) {\r\n\t\tdiv.appendChild( doc.createComment(\"\") );\r\n\t\treturn !div.getElementsByTagName(\"*\").length;\r\n\t});\r\n\r\n\t// Support: IE<9\r\n\tsupport.getElementsByClassName = rnative.test( doc.getElementsByClassName );\r\n\r\n\t// Support: IE<10\r\n\t// Check if getElementById returns elements by name\r\n\t// The broken getElementById methods don't pick up programatically-set names,\r\n\t// so use a roundabout getElementsByName test\r\n\tsupport.getById = assert(function( div ) {\r\n\t\tdocElem.appendChild( div ).id = expando;\r\n\t\treturn !doc.getElementsByName || !doc.getElementsByName( expando ).length;\r\n\t});\r\n\r\n\t// ID find and filter\r\n\tif ( support.getById ) {\r\n\t\tExpr.find[\"ID\"] = function( id, context ) {\r\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\r\n\t\t\t\tvar m = context.getElementById( id );\r\n\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\r\n\t\t\t\t// nodes that are no longer in the document #6963\r\n\t\t\t\treturn m && m.parentNode ? [ m ] : [];\r\n\t\t\t}\r\n\t\t};\r\n\t\tExpr.filter[\"ID\"] = function( id ) {\r\n\t\t\tvar attrId = id.replace( runescape, funescape );\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\r\n\t\t\t};\r\n\t\t};\r\n\t} else {\r\n\t\t// Support: IE6/7\r\n\t\t// getElementById is not reliable as a find shortcut\r\n\t\tdelete Expr.find[\"ID\"];\r\n\r\n\t\tExpr.filter[\"ID\"] =  function( id ) {\r\n\t\t\tvar attrId = id.replace( runescape, funescape );\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" && elem.getAttributeNode(\"id\");\r\n\t\t\t\treturn node && node.value === attrId;\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n\r\n\t// Tag\r\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\r\n\t\tfunction( tag, context ) {\r\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\r\n\t\t\t\treturn context.getElementsByTagName( tag );\r\n\r\n\t\t\t// DocumentFragment nodes don't have gEBTN\r\n\t\t\t} else if ( support.qsa ) {\r\n\t\t\t\treturn context.querySelectorAll( tag );\r\n\t\t\t}\r\n\t\t} :\r\n\r\n\t\tfunction( tag, context ) {\r\n\t\t\tvar elem,\r\n\t\t\t\ttmp = [],\r\n\t\t\t\ti = 0,\r\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\r\n\t\t\t\tresults = context.getElementsByTagName( tag );\r\n\r\n\t\t\t// Filter out possible comments\r\n\t\t\tif ( tag === \"*\" ) {\r\n\t\t\t\twhile ( (elem = results[i++]) ) {\r\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\r\n\t\t\t\t\t\ttmp.push( elem );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn tmp;\r\n\t\t\t}\r\n\t\t\treturn results;\r\n\t\t};\r\n\r\n\t// Class\r\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\r\n\t\tif ( documentIsHTML ) {\r\n\t\t\treturn context.getElementsByClassName( className );\r\n\t\t}\r\n\t};\r\n\r\n\t/* QSA/matchesSelector\r\n\t---------------------------------------------------------------------- */\r\n\r\n\t// QSA and matchesSelector support\r\n\r\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\r\n\trbuggyMatches = [];\r\n\r\n\t// qSa(:focus) reports false when true (Chrome 21)\r\n\t// We allow this because of a bug in IE8/9 that throws an error\r\n\t// whenever `document.activeElement` is accessed on an iframe\r\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\r\n\t// See http://bugs.jquery.com/ticket/13378\r\n\trbuggyQSA = [];\r\n\r\n\tif ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {\r\n\t\t// Build QSA regex\r\n\t\t// Regex strategy adopted from Diego Perini\r\n\t\tassert(function( div ) {\r\n\t\t\t// Select is set to empty string on purpose\r\n\t\t\t// This is to test IE's treatment of not explicitly\r\n\t\t\t// setting a boolean content attribute,\r\n\t\t\t// since its presence should be enough\r\n\t\t\t// http://bugs.jquery.com/ticket/12359\r\n\t\t\tdocElem.appendChild( div ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\r\n\t\t\t\t\"<select id='\" + expando + \"-\\f]' msallowcapture=''>\" +\r\n\t\t\t\t\"<option selected=''></option></select>\";\r\n\r\n\t\t\t// Support: IE8, Opera 11-12.16\r\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\r\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\r\n\t\t\t// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\r\n\t\t\tif ( div.querySelectorAll(\"[msallowcapture^='']\").length ) {\r\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\r\n\t\t\t}\r\n\r\n\t\t\t// Support: IE8\r\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\r\n\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\r\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\r\n\t\t\t}\r\n\r\n\t\t\t// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+\r\n\t\t\tif ( !div.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\r\n\t\t\t\trbuggyQSA.push(\"~=\");\r\n\t\t\t}\r\n\r\n\t\t\t// Webkit/Opera - :checked should return selected option elements\r\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\r\n\t\t\t// IE8 throws error here and will not see later tests\r\n\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\r\n\t\t\t\trbuggyQSA.push(\":checked\");\r\n\t\t\t}\r\n\r\n\t\t\t// Support: Safari 8+, iOS 8+\r\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\r\n\t\t\t// In-page `selector#id sibing-combinator selector` fails\r\n\t\t\tif ( !div.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\r\n\t\t\t\trbuggyQSA.push(\".#.+[+~]\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tassert(function( div ) {\r\n\t\t\t// Support: Windows 8 Native Apps\r\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\r\n\t\t\tvar input = doc.createElement(\"input\");\r\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\r\n\t\t\tdiv.appendChild( input ).setAttribute( \"name\", \"D\" );\r\n\r\n\t\t\t// Support: IE8\r\n\t\t\t// Enforce case-sensitivity of name attribute\r\n\t\t\tif ( div.querySelectorAll(\"[name=d]\").length ) {\r\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\r\n\t\t\t}\r\n\r\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\r\n\t\t\t// IE8 throws error here and will not see later tests\r\n\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\r\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\r\n\t\t\t}\r\n\r\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\r\n\t\t\tdiv.querySelectorAll(\"*,:x\");\r\n\t\t\trbuggyQSA.push(\",.*:\");\r\n\t\t});\r\n\t}\r\n\r\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||\r\n\t\tdocElem.webkitMatchesSelector ||\r\n\t\tdocElem.mozMatchesSelector ||\r\n\t\tdocElem.oMatchesSelector ||\r\n\t\tdocElem.msMatchesSelector) )) ) {\r\n\r\n\t\tassert(function( div ) {\r\n\t\t\t// Check to see if it's possible to do matchesSelector\r\n\t\t\t// on a disconnected node (IE 9)\r\n\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );\r\n\r\n\t\t\t// This should fail with an exception\r\n\t\t\t// Gecko does not error, returns false instead\r\n\t\t\tmatches.call( div, \"[s!='']:x\" );\r\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\r\n\t\t});\r\n\t}\r\n\r\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\r\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\r\n\r\n\t/* Contains\r\n\t---------------------------------------------------------------------- */\r\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\r\n\r\n\t// Element contains another\r\n\t// Purposefully does not implement inclusive descendent\r\n\t// As in, an element does not contain itself\r\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\r\n\t\tfunction( a, b ) {\r\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\r\n\t\t\t\tbup = b && b.parentNode;\r\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\r\n\t\t\t\tadown.contains ?\r\n\t\t\t\t\tadown.contains( bup ) :\r\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\r\n\t\t\t));\r\n\t\t} :\r\n\t\tfunction( a, b ) {\r\n\t\t\tif ( b ) {\r\n\t\t\t\twhile ( (b = b.parentNode) ) {\r\n\t\t\t\t\tif ( b === a ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t/* Sorting\r\n\t---------------------------------------------------------------------- */\r\n\r\n\t// Document order sorting\r\n\tsortOrder = hasCompare ?\r\n\tfunction( a, b ) {\r\n\r\n\t\t// Flag for duplicate removal\r\n\t\tif ( a === b ) {\r\n\t\t\thasDuplicate = true;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t// Sort on method existence if only one input has compareDocumentPosition\r\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\r\n\t\tif ( compare ) {\r\n\t\t\treturn compare;\r\n\t\t}\r\n\r\n\t\t// Calculate position if both inputs belong to the same document\r\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\r\n\t\t\ta.compareDocumentPosition( b ) :\r\n\r\n\t\t\t// Otherwise we know they are disconnected\r\n\t\t\t1;\r\n\r\n\t\t// Disconnected nodes\r\n\t\tif ( compare & 1 ||\r\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\r\n\r\n\t\t\t// Choose the first element that is related to our preferred document\r\n\t\t\tif ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tif ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\r\n\t\t\t// Maintain original order\r\n\t\t\treturn sortInput ?\r\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\r\n\t\t\t\t0;\r\n\t\t}\r\n\r\n\t\treturn compare & 4 ? -1 : 1;\r\n\t} :\r\n\tfunction( a, b ) {\r\n\t\t// Exit early if the nodes are identical\r\n\t\tif ( a === b ) {\r\n\t\t\thasDuplicate = true;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tvar cur,\r\n\t\t\ti = 0,\r\n\t\t\taup = a.parentNode,\r\n\t\t\tbup = b.parentNode,\r\n\t\t\tap = [ a ],\r\n\t\t\tbp = [ b ];\r\n\r\n\t\t// Parentless nodes are either documents or disconnected\r\n\t\tif ( !aup || !bup ) {\r\n\t\t\treturn a === doc ? -1 :\r\n\t\t\t\tb === doc ? 1 :\r\n\t\t\t\taup ? -1 :\r\n\t\t\t\tbup ? 1 :\r\n\t\t\t\tsortInput ?\r\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\r\n\t\t\t\t0;\r\n\r\n\t\t// If the nodes are siblings, we can do a quick check\r\n\t\t} else if ( aup === bup ) {\r\n\t\t\treturn siblingCheck( a, b );\r\n\t\t}\r\n\r\n\t\t// Otherwise we need full lists of their ancestors for comparison\r\n\t\tcur = a;\r\n\t\twhile ( (cur = cur.parentNode) ) {\r\n\t\t\tap.unshift( cur );\r\n\t\t}\r\n\t\tcur = b;\r\n\t\twhile ( (cur = cur.parentNode) ) {\r\n\t\t\tbp.unshift( cur );\r\n\t\t}\r\n\r\n\t\t// Walk down the tree looking for a discrepancy\r\n\t\twhile ( ap[i] === bp[i] ) {\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\treturn i ?\r\n\t\t\t// Do a sibling check if the nodes have a common ancestor\r\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\r\n\r\n\t\t\t// Otherwise nodes in our document sort first\r\n\t\t\tap[i] === preferredDoc ? -1 :\r\n\t\t\tbp[i] === preferredDoc ? 1 :\r\n\t\t\t0;\r\n\t};\r\n\r\n\treturn doc;\r\n};\r\n\r\nSizzle.matches = function( expr, elements ) {\r\n\treturn Sizzle( expr, null, null, elements );\r\n};\r\n\r\nSizzle.matchesSelector = function( elem, expr ) {\r\n\t// Set document vars if needed\r\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\r\n\t\tsetDocument( elem );\r\n\t}\r\n\r\n\t// Make sure that attribute selectors are quoted\r\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\r\n\r\n\tif ( support.matchesSelector && documentIsHTML &&\r\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\r\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\r\n\r\n\t\ttry {\r\n\t\t\tvar ret = matches.call( elem, expr );\r\n\r\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\r\n\t\t\tif ( ret || support.disconnectedMatch ||\r\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\r\n\t\t\t\t\t// fragment in IE 9\r\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t} catch (e) {}\r\n\t}\r\n\r\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\r\n};\r\n\r\nSizzle.contains = function( context, elem ) {\r\n\t// Set document vars if needed\r\n\tif ( ( context.ownerDocument || context ) !== document ) {\r\n\t\tsetDocument( context );\r\n\t}\r\n\treturn contains( context, elem );\r\n};\r\n\r\nSizzle.attr = function( elem, name ) {\r\n\t// Set document vars if needed\r\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\r\n\t\tsetDocument( elem );\r\n\t}\r\n\r\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\r\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\r\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\r\n\t\t\tfn( elem, name, !documentIsHTML ) :\r\n\t\t\tundefined;\r\n\r\n\treturn val !== undefined ?\r\n\t\tval :\r\n\t\tsupport.attributes || !documentIsHTML ?\r\n\t\t\telem.getAttribute( name ) :\r\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\r\n\t\t\t\tval.value :\r\n\t\t\t\tnull;\r\n};\r\n\r\nSizzle.error = function( msg ) {\r\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\r\n};\r\n\r\n/**\r\n * Document sorting and removing duplicates\r\n * @param {ArrayLike} results\r\n */\r\nSizzle.uniqueSort = function( results ) {\r\n\tvar elem,\r\n\t\tduplicates = [],\r\n\t\tj = 0,\r\n\t\ti = 0;\r\n\r\n\t// Unless we *know* we can detect duplicates, assume their presence\r\n\thasDuplicate = !support.detectDuplicates;\r\n\tsortInput = !support.sortStable && results.slice( 0 );\r\n\tresults.sort( sortOrder );\r\n\r\n\tif ( hasDuplicate ) {\r\n\t\twhile ( (elem = results[i++]) ) {\r\n\t\t\tif ( elem === results[ i ] ) {\r\n\t\t\t\tj = duplicates.push( i );\r\n\t\t\t}\r\n\t\t}\r\n\t\twhile ( j-- ) {\r\n\t\t\tresults.splice( duplicates[ j ], 1 );\r\n\t\t}\r\n\t}\r\n\r\n\t// Clear input after sorting to release objects\r\n\t// See https://github.com/jquery/sizzle/pull/225\r\n\tsortInput = null;\r\n\r\n\treturn results;\r\n};\r\n\r\n/**\r\n * Utility function for retrieving the text value of an array of DOM nodes\r\n * @param {Array|Element} elem\r\n */\r\ngetText = Sizzle.getText = function( elem ) {\r\n\tvar node,\r\n\t\tret = \"\",\r\n\t\ti = 0,\r\n\t\tnodeType = elem.nodeType;\r\n\r\n\tif ( !nodeType ) {\r\n\t\t// If no nodeType, this is expected to be an array\r\n\t\twhile ( (node = elem[i++]) ) {\r\n\t\t\t// Do not traverse comment nodes\r\n\t\t\tret += getText( node );\r\n\t\t}\r\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\r\n\t\t// Use textContent for elements\r\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\r\n\t\tif ( typeof elem.textContent === \"string\" ) {\r\n\t\t\treturn elem.textContent;\r\n\t\t} else {\r\n\t\t\t// Traverse its children\r\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\r\n\t\t\t\tret += getText( elem );\r\n\t\t\t}\r\n\t\t}\r\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\r\n\t\treturn elem.nodeValue;\r\n\t}\r\n\t// Do not include comment or processing instruction nodes\r\n\r\n\treturn ret;\r\n};\r\n\r\nExpr = Sizzle.selectors = {\r\n\r\n\t// Can be adjusted by the user\r\n\tcacheLength: 50,\r\n\r\n\tcreatePseudo: markFunction,\r\n\r\n\tmatch: matchExpr,\r\n\r\n\tattrHandle: {},\r\n\r\n\tfind: {},\r\n\r\n\trelative: {\r\n\t\t\">\": { dir: \"parentNode\", first: true },\r\n\t\t\" \": { dir: \"parentNode\" },\r\n\t\t\"+\": { dir: \"previousSibling\", first: true },\r\n\t\t\"~\": { dir: \"previousSibling\" }\r\n\t},\r\n\r\n\tpreFilter: {\r\n\t\t\"ATTR\": function( match ) {\r\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\r\n\r\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\r\n\t\t\tmatch[3] = ( match[3] || match[4] || match[5] || \"\" ).replace( runescape, funescape );\r\n\r\n\t\t\tif ( match[2] === \"~=\" ) {\r\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\r\n\t\t\t}\r\n\r\n\t\t\treturn match.slice( 0, 4 );\r\n\t\t},\r\n\r\n\t\t\"CHILD\": function( match ) {\r\n\t\t\t/* matches from matchExpr[\"CHILD\"]\r\n\t\t\t\t1 type (only|nth|...)\r\n\t\t\t\t2 what (child|of-type)\r\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\r\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\r\n\t\t\t\t5 sign of xn-component\r\n\t\t\t\t6 x of xn-component\r\n\t\t\t\t7 sign of y-component\r\n\t\t\t\t8 y of y-component\r\n\t\t\t*/\r\n\t\t\tmatch[1] = match[1].toLowerCase();\r\n\r\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\r\n\t\t\t\t// nth-* requires argument\r\n\t\t\t\tif ( !match[3] ) {\r\n\t\t\t\t\tSizzle.error( match[0] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\r\n\t\t\t\t// remember that false/true cast respectively to 0/1\r\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\r\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\r\n\r\n\t\t\t// other types prohibit arguments\r\n\t\t\t} else if ( match[3] ) {\r\n\t\t\t\tSizzle.error( match[0] );\r\n\t\t\t}\r\n\r\n\t\t\treturn match;\r\n\t\t},\r\n\r\n\t\t\"PSEUDO\": function( match ) {\r\n\t\t\tvar excess,\r\n\t\t\t\tunquoted = !match[6] && match[2];\r\n\r\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\t// Accept quoted arguments as-is\r\n\t\t\tif ( match[3] ) {\r\n\t\t\t\tmatch[2] = match[4] || match[5] || \"\";\r\n\r\n\t\t\t// Strip excess characters from unquoted arguments\r\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\r\n\t\t\t\t// Get excess from tokenize (recursively)\r\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\r\n\t\t\t\t// advance to the next closing parenthesis\r\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\r\n\r\n\t\t\t\t// excess is a negative index\r\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\r\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\r\n\t\t\t}\r\n\r\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\r\n\t\t\treturn match.slice( 0, 3 );\r\n\t\t}\r\n\t},\r\n\r\n\tfilter: {\r\n\r\n\t\t\"TAG\": function( nodeNameSelector ) {\r\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\r\n\t\t\treturn nodeNameSelector === \"*\" ?\r\n\t\t\t\tfunction() { return true; } :\r\n\t\t\t\tfunction( elem ) {\r\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\r\n\t\t\t\t};\r\n\t\t},\r\n\r\n\t\t\"CLASS\": function( className ) {\r\n\t\t\tvar pattern = classCache[ className + \" \" ];\r\n\r\n\t\t\treturn pattern ||\r\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\r\n\t\t\t\tclassCache( className, function( elem ) {\r\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\" );\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t\"ATTR\": function( name, operator, check ) {\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\tvar result = Sizzle.attr( elem, name );\r\n\r\n\t\t\t\tif ( result == null ) {\r\n\t\t\t\t\treturn operator === \"!=\";\r\n\t\t\t\t}\r\n\t\t\t\tif ( !operator ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult += \"\";\r\n\r\n\t\t\t\treturn operator === \"=\" ? result === check :\r\n\t\t\t\t\toperator === \"!=\" ? result !== check :\r\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\r\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\r\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\r\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\r\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\r\n\t\t\t\t\tfalse;\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\r\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\r\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\r\n\t\t\t\tofType = what === \"of-type\";\r\n\r\n\t\t\treturn first === 1 && last === 0 ?\r\n\r\n\t\t\t\t// Shortcut for :nth-*(n)\r\n\t\t\t\tfunction( elem ) {\r\n\t\t\t\t\treturn !!elem.parentNode;\r\n\t\t\t\t} :\r\n\r\n\t\t\t\tfunction( elem, context, xml ) {\r\n\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,\r\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\r\n\t\t\t\t\t\tparent = elem.parentNode,\r\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\r\n\t\t\t\t\t\tuseCache = !xml && !ofType;\r\n\r\n\t\t\t\t\tif ( parent ) {\r\n\r\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\r\n\t\t\t\t\t\tif ( simple ) {\r\n\t\t\t\t\t\t\twhile ( dir ) {\r\n\t\t\t\t\t\t\t\tnode = elem;\r\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\r\n\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\r\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\r\n\r\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\r\n\t\t\t\t\t\tif ( forward && useCache ) {\r\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\r\n\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});\r\n\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\r\n\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];\r\n\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];\r\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\r\n\r\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\r\n\r\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\r\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\r\n\r\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\r\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\r\n\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Use previously-cached element index if available\r\n\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {\r\n\t\t\t\t\t\t\tdiff = cache[1];\r\n\r\n\t\t\t\t\t\t// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\r\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\r\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {\r\n\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\r\n\t\t\t\t\t\t\t\t\tif ( useCache ) {\r\n\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif ( node === elem ) {\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\r\n\t\t\t\t\t\tdiff -= last;\r\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t},\r\n\r\n\t\t\"PSEUDO\": function( pseudo, argument ) {\r\n\t\t\t// pseudo-class names are case-insensitive\r\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\r\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\r\n\t\t\t// Remember that setFilters inherits from pseudos\r\n\t\t\tvar args,\r\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\r\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\r\n\r\n\t\t\t// The user may use createPseudo to indicate that\r\n\t\t\t// arguments are needed to create the filter function\r\n\t\t\t// just as Sizzle does\r\n\t\t\tif ( fn[ expando ] ) {\r\n\t\t\t\treturn fn( argument );\r\n\t\t\t}\r\n\r\n\t\t\t// But maintain support for old signatures\r\n\t\t\tif ( fn.length > 1 ) {\r\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\r\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\r\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\r\n\t\t\t\t\t\tvar idx,\r\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\r\n\t\t\t\t\t\t\ti = matched.length;\r\n\t\t\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[i] );\r\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\tfunction( elem ) {\r\n\t\t\t\t\t\treturn fn( elem, 0, args );\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn fn;\r\n\t\t}\r\n\t},\r\n\r\n\tpseudos: {\r\n\t\t// Potentially complex pseudos\r\n\t\t\"not\": markFunction(function( selector ) {\r\n\t\t\t// Trim the selector passed to compile\r\n\t\t\t// to avoid treating leading and trailing\r\n\t\t\t// spaces as combinators\r\n\t\t\tvar input = [],\r\n\t\t\t\tresults = [],\r\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\r\n\r\n\t\t\treturn matcher[ expando ] ?\r\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\r\n\t\t\t\t\tvar elem,\r\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\r\n\t\t\t\t\t\ti = seed.length;\r\n\r\n\t\t\t\t\t// Match elements unmatched by `matcher`\r\n\t\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\r\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}) :\r\n\t\t\t\tfunction( elem, context, xml ) {\r\n\t\t\t\t\tinput[0] = elem;\r\n\t\t\t\t\tmatcher( input, null, xml, results );\r\n\t\t\t\t\t// Don't keep the element (issue #299)\r\n\t\t\t\t\tinput[0] = null;\r\n\t\t\t\t\treturn !results.pop();\r\n\t\t\t\t};\r\n\t\t}),\r\n\r\n\t\t\"has\": markFunction(function( selector ) {\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\r\n\t\t\t};\r\n\t\t}),\r\n\r\n\t\t\"contains\": markFunction(function( text ) {\r\n\t\t\ttext = text.replace( runescape, funescape );\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\r\n\t\t\t};\r\n\t\t}),\r\n\r\n\t\t// \"Whether an element is represented by a :lang() selector\r\n\t\t// is based solely on the element's language value\r\n\t\t// being equal to the identifier C,\r\n\t\t// or beginning with the identifier C immediately followed by \"-\".\r\n\t\t// The matching of C against the element's language value is performed case-insensitively.\r\n\t\t// The identifier C does not have to be a valid language name.\"\r\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\r\n\t\t\"lang\": markFunction( function( lang ) {\r\n\t\t\t// lang value must be a valid identifier\r\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\r\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\r\n\t\t\t}\r\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\tvar elemLang;\r\n\t\t\t\tdo {\r\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\r\n\t\t\t\t\t\telem.lang :\r\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\r\n\r\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\r\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t}),\r\n\r\n\t\t// Miscellaneous\r\n\t\t\"target\": function( elem ) {\r\n\t\t\tvar hash = window.location && window.location.hash;\r\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\r\n\t\t},\r\n\r\n\t\t\"root\": function( elem ) {\r\n\t\t\treturn elem === docElem;\r\n\t\t},\r\n\r\n\t\t\"focus\": function( elem ) {\r\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\r\n\t\t},\r\n\r\n\t\t// Boolean properties\r\n\t\t\"enabled\": function( elem ) {\r\n\t\t\treturn elem.disabled === false;\r\n\t\t},\r\n\r\n\t\t\"disabled\": function( elem ) {\r\n\t\t\treturn elem.disabled === true;\r\n\t\t},\r\n\r\n\t\t\"checked\": function( elem ) {\r\n\t\t\t// In CSS3, :checked should return both checked and selected elements\r\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\r\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\r\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\r\n\t\t},\r\n\r\n\t\t\"selected\": function( elem ) {\r\n\t\t\t// Accessing this property makes selected-by-default\r\n\t\t\t// options in Safari work properly\r\n\t\t\tif ( elem.parentNode ) {\r\n\t\t\t\telem.parentNode.selectedIndex;\r\n\t\t\t}\r\n\r\n\t\t\treturn elem.selected === true;\r\n\t\t},\r\n\r\n\t\t// Contents\r\n\t\t\"empty\": function( elem ) {\r\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\r\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\r\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\r\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\r\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\r\n\t\t\t\tif ( elem.nodeType < 6 ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\t\"parent\": function( elem ) {\r\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\r\n\t\t},\r\n\r\n\t\t// Element/input types\r\n\t\t\"header\": function( elem ) {\r\n\t\t\treturn rheader.test( elem.nodeName );\r\n\t\t},\r\n\r\n\t\t\"input\": function( elem ) {\r\n\t\t\treturn rinputs.test( elem.nodeName );\r\n\t\t},\r\n\r\n\t\t\"button\": function( elem ) {\r\n\t\t\tvar name = elem.nodeName.toLowerCase();\r\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\r\n\t\t},\r\n\r\n\t\t\"text\": function( elem ) {\r\n\t\t\tvar attr;\r\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\r\n\t\t\t\telem.type === \"text\" &&\r\n\r\n\t\t\t\t// Support: IE<8\r\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\r\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\r\n\t\t},\r\n\r\n\t\t// Position-in-collection\r\n\t\t\"first\": createPositionalPseudo(function() {\r\n\t\t\treturn [ 0 ];\r\n\t\t}),\r\n\r\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\r\n\t\t\treturn [ length - 1 ];\r\n\t\t}),\r\n\r\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\r\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\r\n\t\t}),\r\n\r\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\r\n\t\t\tvar i = 0;\r\n\t\t\tfor ( ; i < length; i += 2 ) {\r\n\t\t\t\tmatchIndexes.push( i );\r\n\t\t\t}\r\n\t\t\treturn matchIndexes;\r\n\t\t}),\r\n\r\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\r\n\t\t\tvar i = 1;\r\n\t\t\tfor ( ; i < length; i += 2 ) {\r\n\t\t\t\tmatchIndexes.push( i );\r\n\t\t\t}\r\n\t\t\treturn matchIndexes;\r\n\t\t}),\r\n\r\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\r\n\t\t\tvar i = argument < 0 ? argument + length : argument;\r\n\t\t\tfor ( ; --i >= 0; ) {\r\n\t\t\t\tmatchIndexes.push( i );\r\n\t\t\t}\r\n\t\t\treturn matchIndexes;\r\n\t\t}),\r\n\r\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\r\n\t\t\tvar i = argument < 0 ? argument + length : argument;\r\n\t\t\tfor ( ; ++i < length; ) {\r\n\t\t\t\tmatchIndexes.push( i );\r\n\t\t\t}\r\n\t\t\treturn matchIndexes;\r\n\t\t})\r\n\t}\r\n};\r\n\r\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\r\n\r\n// Add button/input type pseudos\r\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\r\n\tExpr.pseudos[ i ] = createInputPseudo( i );\r\n}\r\nfor ( i in { submit: true, reset: true } ) {\r\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\r\n}\r\n\r\n// Easy API for creating new setFilters\r\nfunction setFilters() {}\r\nsetFilters.prototype = Expr.filters = Expr.pseudos;\r\nExpr.setFilters = new setFilters();\r\n\r\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\r\n\tvar matched, match, tokens, type,\r\n\t\tsoFar, groups, preFilters,\r\n\t\tcached = tokenCache[ selector + \" \" ];\r\n\r\n\tif ( cached ) {\r\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\r\n\t}\r\n\r\n\tsoFar = selector;\r\n\tgroups = [];\r\n\tpreFilters = Expr.preFilter;\r\n\r\n\twhile ( soFar ) {\r\n\r\n\t\t// Comma and first run\r\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\r\n\t\t\tif ( match ) {\r\n\t\t\t\t// Don't consume trailing commas as valid\r\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\r\n\t\t\t}\r\n\t\t\tgroups.push( (tokens = []) );\r\n\t\t}\r\n\r\n\t\tmatched = false;\r\n\r\n\t\t// Combinators\r\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\r\n\t\t\tmatched = match.shift();\r\n\t\t\ttokens.push({\r\n\t\t\t\tvalue: matched,\r\n\t\t\t\t// Cast descendant combinators to space\r\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\r\n\t\t\t});\r\n\t\t\tsoFar = soFar.slice( matched.length );\r\n\t\t}\r\n\r\n\t\t// Filters\r\n\t\tfor ( type in Expr.filter ) {\r\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\r\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\r\n\t\t\t\tmatched = match.shift();\r\n\t\t\t\ttokens.push({\r\n\t\t\t\t\tvalue: matched,\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\tmatches: match\r\n\t\t\t\t});\r\n\t\t\t\tsoFar = soFar.slice( matched.length );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( !matched ) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// Return the length of the invalid excess\r\n\t// if we're just parsing\r\n\t// Otherwise, throw an error or return tokens\r\n\treturn parseOnly ?\r\n\t\tsoFar.length :\r\n\t\tsoFar ?\r\n\t\t\tSizzle.error( selector ) :\r\n\t\t\t// Cache the tokens\r\n\t\t\ttokenCache( selector, groups ).slice( 0 );\r\n};\r\n\r\nfunction toSelector( tokens ) {\r\n\tvar i = 0,\r\n\t\tlen = tokens.length,\r\n\t\tselector = \"\";\r\n\tfor ( ; i < len; i++ ) {\r\n\t\tselector += tokens[i].value;\r\n\t}\r\n\treturn selector;\r\n}\r\n\r\nfunction addCombinator( matcher, combinator, base ) {\r\n\tvar dir = combinator.dir,\r\n\t\tcheckNonElements = base && dir === \"parentNode\",\r\n\t\tdoneName = done++;\r\n\r\n\treturn combinator.first ?\r\n\t\t// Check against closest ancestor/preceding element\r\n\t\tfunction( elem, context, xml ) {\r\n\t\t\twhile ( (elem = elem[ dir ]) ) {\r\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\r\n\t\t\t\t\treturn matcher( elem, context, xml );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} :\r\n\r\n\t\t// Check against all ancestor/preceding elements\r\n\t\tfunction( elem, context, xml ) {\r\n\t\t\tvar oldCache, outerCache,\r\n\t\t\t\tnewCache = [ dirruns, doneName ];\r\n\r\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching\r\n\t\t\tif ( xml ) {\r\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\r\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\r\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\r\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\r\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\r\n\t\t\t\t\t\tif ( (oldCache = outerCache[ dir ]) &&\r\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\r\n\r\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\r\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\r\n\t\t\t\t\t\t\touterCache[ dir ] = newCache;\r\n\r\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\r\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n}\r\n\r\nfunction elementMatcher( matchers ) {\r\n\treturn matchers.length > 1 ?\r\n\t\tfunction( elem, context, xml ) {\r\n\t\t\tvar i = matchers.length;\r\n\t\t\twhile ( i-- ) {\r\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} :\r\n\t\tmatchers[0];\r\n}\r\n\r\nfunction multipleContexts( selector, contexts, results ) {\r\n\tvar i = 0,\r\n\t\tlen = contexts.length;\r\n\tfor ( ; i < len; i++ ) {\r\n\t\tSizzle( selector, contexts[i], results );\r\n\t}\r\n\treturn results;\r\n}\r\n\r\nfunction condense( unmatched, map, filter, context, xml ) {\r\n\tvar elem,\r\n\t\tnewUnmatched = [],\r\n\t\ti = 0,\r\n\t\tlen = unmatched.length,\r\n\t\tmapped = map != null;\r\n\r\n\tfor ( ; i < len; i++ ) {\r\n\t\tif ( (elem = unmatched[i]) ) {\r\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\r\n\t\t\t\tnewUnmatched.push( elem );\r\n\t\t\t\tif ( mapped ) {\r\n\t\t\t\t\tmap.push( i );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn newUnmatched;\r\n}\r\n\r\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\r\n\tif ( postFilter && !postFilter[ expando ] ) {\r\n\t\tpostFilter = setMatcher( postFilter );\r\n\t}\r\n\tif ( postFinder && !postFinder[ expando ] ) {\r\n\t\tpostFinder = setMatcher( postFinder, postSelector );\r\n\t}\r\n\treturn markFunction(function( seed, results, context, xml ) {\r\n\t\tvar temp, i, elem,\r\n\t\t\tpreMap = [],\r\n\t\t\tpostMap = [],\r\n\t\t\tpreexisting = results.length,\r\n\r\n\t\t\t// Get initial elements from seed or context\r\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\r\n\r\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\r\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\r\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\r\n\t\t\t\telems,\r\n\r\n\t\t\tmatcherOut = matcher ?\r\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\r\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\r\n\r\n\t\t\t\t\t// ...intermediate processing is necessary\r\n\t\t\t\t\t[] :\r\n\r\n\t\t\t\t\t// ...otherwise use results directly\r\n\t\t\t\t\tresults :\r\n\t\t\t\tmatcherIn;\r\n\r\n\t\t// Find primary matches\r\n\t\tif ( matcher ) {\r\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\r\n\t\t}\r\n\r\n\t\t// Apply postFilter\r\n\t\tif ( postFilter ) {\r\n\t\t\ttemp = condense( matcherOut, postMap );\r\n\t\t\tpostFilter( temp, [], context, xml );\r\n\r\n\t\t\t// Un-match failing elements by moving them back to matcherIn\r\n\t\t\ti = temp.length;\r\n\t\t\twhile ( i-- ) {\r\n\t\t\t\tif ( (elem = temp[i]) ) {\r\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( seed ) {\r\n\t\t\tif ( postFinder || preFilter ) {\r\n\t\t\t\tif ( postFinder ) {\r\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\r\n\t\t\t\t\ttemp = [];\r\n\t\t\t\t\ti = matcherOut.length;\r\n\t\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\r\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\r\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\r\n\t\t\t\ti = matcherOut.length;\r\n\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\r\n\t\t\t\t\t\t(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {\r\n\r\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t// Add elements to results, through postFinder if defined\r\n\t\t} else {\r\n\t\t\tmatcherOut = condense(\r\n\t\t\t\tmatcherOut === results ?\r\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\r\n\t\t\t\t\tmatcherOut\r\n\t\t\t);\r\n\t\t\tif ( postFinder ) {\r\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\r\n\t\t\t} else {\r\n\t\t\t\tpush.apply( results, matcherOut );\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction matcherFromTokens( tokens ) {\r\n\tvar checkContext, matcher, j,\r\n\t\tlen = tokens.length,\r\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\r\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\r\n\t\ti = leadingRelative ? 1 : 0,\r\n\r\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\r\n\t\tmatchContext = addCombinator( function( elem ) {\r\n\t\t\treturn elem === checkContext;\r\n\t\t}, implicitRelative, true ),\r\n\t\tmatchAnyContext = addCombinator( function( elem ) {\r\n\t\t\treturn indexOf( checkContext, elem ) > -1;\r\n\t\t}, implicitRelative, true ),\r\n\t\tmatchers = [ function( elem, context, xml ) {\r\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\r\n\t\t\t\t(checkContext = context).nodeType ?\r\n\t\t\t\t\tmatchContext( elem, context, xml ) :\r\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\r\n\t\t\t// Avoid hanging onto element (issue #299)\r\n\t\t\tcheckContext = null;\r\n\t\t\treturn ret;\r\n\t\t} ];\r\n\r\n\tfor ( ; i < len; i++ ) {\r\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\r\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\r\n\t\t} else {\r\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\r\n\r\n\t\t\t// Return special upon seeing a positional matcher\r\n\t\t\tif ( matcher[ expando ] ) {\r\n\t\t\t\t// Find the next relative operator (if any) for proper handling\r\n\t\t\t\tj = ++i;\r\n\t\t\t\tfor ( ; j < len; j++ ) {\r\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn setMatcher(\r\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\r\n\t\t\t\t\ti > 1 && toSelector(\r\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\r\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\r\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\r\n\t\t\t\t\tmatcher,\r\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\r\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\r\n\t\t\t\t\tj < len && toSelector( tokens )\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tmatchers.push( matcher );\r\n\t\t}\r\n\t}\r\n\r\n\treturn elementMatcher( matchers );\r\n}\r\n\r\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\r\n\tvar bySet = setMatchers.length > 0,\r\n\t\tbyElement = elementMatchers.length > 0,\r\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\r\n\t\t\tvar elem, j, matcher,\r\n\t\t\t\tmatchedCount = 0,\r\n\t\t\t\ti = \"0\",\r\n\t\t\t\tunmatched = seed && [],\r\n\t\t\t\tsetMatched = [],\r\n\t\t\t\tcontextBackup = outermostContext,\r\n\t\t\t\t// We must always have either seed elements or outermost context\r\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\r\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\r\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\r\n\t\t\t\tlen = elems.length;\r\n\r\n\t\t\tif ( outermost ) {\r\n\t\t\t\toutermostContext = context !== document && context;\r\n\t\t\t}\r\n\r\n\t\t\t// Add elements passing elementMatchers directly to results\r\n\t\t\t// Keep `i` a string if there are no elements so `matchedCount` will be \"00\" below\r\n\t\t\t// Support: IE<9, Safari\r\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\r\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\r\n\t\t\t\tif ( byElement && elem ) {\r\n\t\t\t\t\tj = 0;\r\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\r\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\r\n\t\t\t\t\t\t\tresults.push( elem );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( outermost ) {\r\n\t\t\t\t\t\tdirruns = dirrunsUnique;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Track unmatched elements for set filters\r\n\t\t\t\tif ( bySet ) {\r\n\t\t\t\t\t// They will have gone through all possible matchers\r\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\r\n\t\t\t\t\t\tmatchedCount--;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Lengthen the array for every element, matched or not\r\n\t\t\t\t\tif ( seed ) {\r\n\t\t\t\t\t\tunmatched.push( elem );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Apply set filters to unmatched elements\r\n\t\t\tmatchedCount += i;\r\n\t\t\tif ( bySet && i !== matchedCount ) {\r\n\t\t\t\tj = 0;\r\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\r\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( seed ) {\r\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\r\n\t\t\t\t\tif ( matchedCount > 0 ) {\r\n\t\t\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\r\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\r\n\t\t\t\t\tsetMatched = condense( setMatched );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add matches to results\r\n\t\t\t\tpush.apply( results, setMatched );\r\n\r\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\r\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\r\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\r\n\r\n\t\t\t\t\tSizzle.uniqueSort( results );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Override manipulation of globals by nested matchers\r\n\t\t\tif ( outermost ) {\r\n\t\t\t\tdirruns = dirrunsUnique;\r\n\t\t\t\toutermostContext = contextBackup;\r\n\t\t\t}\r\n\r\n\t\t\treturn unmatched;\r\n\t\t};\r\n\r\n\treturn bySet ?\r\n\t\tmarkFunction( superMatcher ) :\r\n\t\tsuperMatcher;\r\n}\r\n\r\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\r\n\tvar i,\r\n\t\tsetMatchers = [],\r\n\t\telementMatchers = [],\r\n\t\tcached = compilerCache[ selector + \" \" ];\r\n\r\n\tif ( !cached ) {\r\n\t\t// Generate a function of recursive functions that can be used to check each element\r\n\t\tif ( !match ) {\r\n\t\t\tmatch = tokenize( selector );\r\n\t\t}\r\n\t\ti = match.length;\r\n\t\twhile ( i-- ) {\r\n\t\t\tcached = matcherFromTokens( match[i] );\r\n\t\t\tif ( cached[ expando ] ) {\r\n\t\t\t\tsetMatchers.push( cached );\r\n\t\t\t} else {\r\n\t\t\t\telementMatchers.push( cached );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Cache the compiled function\r\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\r\n\r\n\t\t// Save selector and tokenization\r\n\t\tcached.selector = selector;\r\n\t}\r\n\treturn cached;\r\n};\r\n\r\n/**\r\n * A low-level selection function that works with Sizzle's compiled\r\n *  selector functions\r\n * @param {String|Function} selector A selector or a pre-compiled\r\n *  selector function built with Sizzle.compile\r\n * @param {Element} context\r\n * @param {Array} [results]\r\n * @param {Array} [seed] A set of elements to match against\r\n */\r\nselect = Sizzle.select = function( selector, context, results, seed ) {\r\n\tvar i, tokens, token, type, find,\r\n\t\tcompiled = typeof selector === \"function\" && selector,\r\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\r\n\r\n\tresults = results || [];\r\n\r\n\t// Try to minimize operations if there is no seed and only one group\r\n\tif ( match.length === 1 ) {\r\n\r\n\t\t// Take a shortcut and set the context if the root selector is an ID\r\n\t\ttokens = match[0] = match[0].slice( 0 );\r\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\r\n\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&\r\n\t\t\t\tExpr.relative[ tokens[1].type ] ) {\r\n\r\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\r\n\t\t\tif ( !context ) {\r\n\t\t\t\treturn results;\r\n\r\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\r\n\t\t\t} else if ( compiled ) {\r\n\t\t\t\tcontext = context.parentNode;\r\n\t\t\t}\r\n\r\n\t\t\tselector = selector.slice( tokens.shift().value.length );\r\n\t\t}\r\n\r\n\t\t// Fetch a seed set for right-to-left matching\r\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\r\n\t\twhile ( i-- ) {\r\n\t\t\ttoken = tokens[i];\r\n\r\n\t\t\t// Abort if we hit a combinator\r\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif ( (find = Expr.find[ type ]) ) {\r\n\t\t\t\t// Search, expanding context for leading sibling combinators\r\n\t\t\t\tif ( (seed = find(\r\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\r\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\r\n\t\t\t\t)) ) {\r\n\r\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\r\n\t\t\t\t\ttokens.splice( i, 1 );\r\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\r\n\t\t\t\t\tif ( !selector ) {\r\n\t\t\t\t\t\tpush.apply( results, seed );\r\n\t\t\t\t\t\treturn results;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Compile and execute a filtering function if one is not provided\r\n\t// Provide `match` to avoid retokenization if we modified the selector above\r\n\t( compiled || compile( selector, match ) )(\r\n\t\tseed,\r\n\t\tcontext,\r\n\t\t!documentIsHTML,\r\n\t\tresults,\r\n\t\trsibling.test( selector ) && testContext( context.parentNode ) || context\r\n\t);\r\n\treturn results;\r\n};\r\n\r\n// One-time assignments\r\n\r\n// Sort stability\r\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\r\n\r\n// Support: Chrome 14-35+\r\n// Always assume duplicates if they aren't passed to the comparison function\r\nsupport.detectDuplicates = !!hasDuplicate;\r\n\r\n// Initialize against the default document\r\nsetDocument();\r\n\r\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\r\n// Detached nodes confoundingly follow *each other*\r\nsupport.sortDetached = assert(function( div1 ) {\r\n\t// Should return 1, but returns 4 (following)\r\n\treturn div1.compareDocumentPosition( document.createElement(\"div\") ) & 1;\r\n});\r\n\r\n// Support: IE<8\r\n// Prevent attribute/property \"interpolation\"\r\n// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\r\nif ( !assert(function( div ) {\r\n\tdiv.innerHTML = \"<a href='#'></a>\";\r\n\treturn div.firstChild.getAttribute(\"href\") === \"#\" ;\r\n}) ) {\r\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\r\n\t\tif ( !isXML ) {\r\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// Support: IE<9\r\n// Use defaultValue in place of getAttribute(\"value\")\r\nif ( !support.attributes || !assert(function( div ) {\r\n\tdiv.innerHTML = \"<input/>\";\r\n\tdiv.firstChild.setAttribute( \"value\", \"\" );\r\n\treturn div.firstChild.getAttribute( \"value\" ) === \"\";\r\n}) ) {\r\n\taddHandle( \"value\", function( elem, name, isXML ) {\r\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\r\n\t\t\treturn elem.defaultValue;\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// Support: IE<9\r\n// Use getAttributeNode to fetch booleans when getAttribute lies\r\nif ( !assert(function( div ) {\r\n\treturn div.getAttribute(\"disabled\") == null;\r\n}) ) {\r\n\taddHandle( booleans, function( elem, name, isXML ) {\r\n\t\tvar val;\r\n\t\tif ( !isXML ) {\r\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\r\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\r\n\t\t\t\t\tval.value :\r\n\t\t\t\tnull;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nreturn Sizzle;\r\n\r\n})( window );\r\n\r\n\r\n\r\njQuery.find = Sizzle;\r\njQuery.expr = Sizzle.selectors;\r\njQuery.expr[\":\"] = jQuery.expr.pseudos;\r\njQuery.unique = Sizzle.uniqueSort;\r\njQuery.text = Sizzle.getText;\r\njQuery.isXMLDoc = Sizzle.isXML;\r\njQuery.contains = Sizzle.contains;\r\n\r\n\r\n\r\nvar rneedsContext = jQuery.expr.match.needsContext;\r\n\r\nvar rsingleTag = (/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/);\r\n\r\n\r\n\r\nvar risSimple = /^.[^:#\\[\\.,]*$/;\r\n\r\n// Implement the identical functionality for filter and not\r\nfunction winnow( elements, qualifier, not ) {\r\n\tif ( jQuery.isFunction( qualifier ) ) {\r\n\t\treturn jQuery.grep( elements, function( elem, i ) {\r\n\t\t\t/* jshint -W018 */\r\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tif ( qualifier.nodeType ) {\r\n\t\treturn jQuery.grep( elements, function( elem ) {\r\n\t\t\treturn ( elem === qualifier ) !== not;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tif ( typeof qualifier === \"string\" ) {\r\n\t\tif ( risSimple.test( qualifier ) ) {\r\n\t\t\treturn jQuery.filter( qualifier, elements, not );\r\n\t\t}\r\n\r\n\t\tqualifier = jQuery.filter( qualifier, elements );\r\n\t}\r\n\r\n\treturn jQuery.grep( elements, function( elem ) {\r\n\t\treturn ( indexOf.call( qualifier, elem ) >= 0 ) !== not;\r\n\t});\r\n}\r\n\r\njQuery.filter = function( expr, elems, not ) {\r\n\tvar elem = elems[ 0 ];\r\n\r\n\tif ( not ) {\r\n\t\texpr = \":not(\" + expr + \")\";\r\n\t}\r\n\r\n\treturn elems.length === 1 && elem.nodeType === 1 ?\r\n\t\tjQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :\r\n\t\tjQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\r\n\t\t\treturn elem.nodeType === 1;\r\n\t\t}));\r\n};\r\n\r\njQuery.fn.extend({\r\n\tfind: function( selector ) {\r\n\t\tvar i,\r\n\t\t\tlen = this.length,\r\n\t\t\tret = [],\r\n\t\t\tself = this;\r\n\r\n\t\tif ( typeof selector !== \"string\" ) {\r\n\t\t\treturn this.pushStack( jQuery( selector ).filter(function() {\r\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\r\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}) );\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < len; i++ ) {\r\n\t\t\tjQuery.find( selector, self[ i ], ret );\r\n\t\t}\r\n\r\n\t\t// Needed because $( selector, context ) becomes $( context ).find( selector )\r\n\t\tret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );\r\n\t\tret.selector = this.selector ? this.selector + \" \" + selector : selector;\r\n\t\treturn ret;\r\n\t},\r\n\tfilter: function( selector ) {\r\n\t\treturn this.pushStack( winnow(this, selector || [], false) );\r\n\t},\r\n\tnot: function( selector ) {\r\n\t\treturn this.pushStack( winnow(this, selector || [], true) );\r\n\t},\r\n\tis: function( selector ) {\r\n\t\treturn !!winnow(\r\n\t\t\tthis,\r\n\r\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\r\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\r\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\r\n\t\t\t\tjQuery( selector ) :\r\n\t\t\t\tselector || [],\r\n\t\t\tfalse\r\n\t\t).length;\r\n\t}\r\n});\r\n\r\n\r\n// Initialize a jQuery object\r\n\r\n\r\n// A central reference to the root jQuery(document)\r\nvar rootjQuery,\r\n\r\n\t// A simple way to check for HTML strings\r\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\r\n\t// Strict HTML recognition (#11290: must start with <)\r\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,\r\n\r\n\tinit = jQuery.fn.init = function( selector, context ) {\r\n\t\tvar match, elem;\r\n\r\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\r\n\t\tif ( !selector ) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t// Handle HTML strings\r\n\t\tif ( typeof selector === \"string\" ) {\r\n\t\t\tif ( selector[0] === \"<\" && selector[ selector.length - 1 ] === \">\" && selector.length >= 3 ) {\r\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\r\n\t\t\t\tmatch = [ null, selector, null ];\r\n\r\n\t\t\t} else {\r\n\t\t\t\tmatch = rquickExpr.exec( selector );\r\n\t\t\t}\r\n\r\n\t\t\t// Match html or make sure no context is specified for #id\r\n\t\t\tif ( match && (match[1] || !context) ) {\r\n\r\n\t\t\t\t// HANDLE: $(html) -> $(array)\r\n\t\t\t\tif ( match[1] ) {\r\n\t\t\t\t\tcontext = context instanceof jQuery ? context[0] : context;\r\n\r\n\t\t\t\t\t// Option to run scripts is true for back-compat\r\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\r\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\r\n\t\t\t\t\t\tmatch[1],\r\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\r\n\t\t\t\t\t\ttrue\r\n\t\t\t\t\t) );\r\n\r\n\t\t\t\t\t// HANDLE: $(html, props)\r\n\t\t\t\t\tif ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {\r\n\t\t\t\t\t\tfor ( match in context ) {\r\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\r\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\r\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\r\n\r\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t// HANDLE: $(#id)\r\n\t\t\t\t} else {\r\n\t\t\t\t\telem = document.getElementById( match[2] );\r\n\r\n\t\t\t\t\t// Support: Blackberry 4.6\r\n\t\t\t\t\t// gEBID returns nodes no longer in the document (#6963)\r\n\t\t\t\t\tif ( elem && elem.parentNode ) {\r\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\r\n\t\t\t\t\t\tthis.length = 1;\r\n\t\t\t\t\t\tthis[0] = elem;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.context = document;\r\n\t\t\t\t\tthis.selector = selector;\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\r\n\t\t\t// HANDLE: $(expr, $(...))\r\n\t\t\t} else if ( !context || context.jquery ) {\r\n\t\t\t\treturn ( context || rootjQuery ).find( selector );\r\n\r\n\t\t\t// HANDLE: $(expr, context)\r\n\t\t\t// (which is just equivalent to: $(context).find(expr)\r\n\t\t\t} else {\r\n\t\t\t\treturn this.constructor( context ).find( selector );\r\n\t\t\t}\r\n\r\n\t\t// HANDLE: $(DOMElement)\r\n\t\t} else if ( selector.nodeType ) {\r\n\t\t\tthis.context = this[0] = selector;\r\n\t\t\tthis.length = 1;\r\n\t\t\treturn this;\r\n\r\n\t\t// HANDLE: $(function)\r\n\t\t// Shortcut for document ready\r\n\t\t} else if ( jQuery.isFunction( selector ) ) {\r\n\t\t\treturn typeof rootjQuery.ready !== \"undefined\" ?\r\n\t\t\t\trootjQuery.ready( selector ) :\r\n\t\t\t\t// Execute immediately if ready is not present\r\n\t\t\t\tselector( jQuery );\r\n\t\t}\r\n\r\n\t\tif ( selector.selector !== undefined ) {\r\n\t\t\tthis.selector = selector.selector;\r\n\t\t\tthis.context = selector.context;\r\n\t\t}\r\n\r\n\t\treturn jQuery.makeArray( selector, this );\r\n\t};\r\n\r\n// Give the init function the jQuery prototype for later instantiation\r\ninit.prototype = jQuery.fn;\r\n\r\n// Initialize central reference\r\nrootjQuery = jQuery( document );\r\n\r\n\r\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\r\n\t// Methods guaranteed to produce a unique set when starting from a unique set\r\n\tguaranteedUnique = {\r\n\t\tchildren: true,\r\n\t\tcontents: true,\r\n\t\tnext: true,\r\n\t\tprev: true\r\n\t};\r\n\r\njQuery.extend({\r\n\tdir: function( elem, dir, until ) {\r\n\t\tvar matched = [],\r\n\t\t\ttruncate = until !== undefined;\r\n\r\n\t\twhile ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {\r\n\t\t\tif ( elem.nodeType === 1 ) {\r\n\t\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tmatched.push( elem );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn matched;\r\n\t},\r\n\r\n\tsibling: function( n, elem ) {\r\n\t\tvar matched = [];\r\n\r\n\t\tfor ( ; n; n = n.nextSibling ) {\r\n\t\t\tif ( n.nodeType === 1 && n !== elem ) {\r\n\t\t\t\tmatched.push( n );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn matched;\r\n\t}\r\n});\r\n\r\njQuery.fn.extend({\r\n\thas: function( target ) {\r\n\t\tvar targets = jQuery( target, this ),\r\n\t\t\tl = targets.length;\r\n\r\n\t\treturn this.filter(function() {\r\n\t\t\tvar i = 0;\r\n\t\t\tfor ( ; i < l; i++ ) {\r\n\t\t\t\tif ( jQuery.contains( this, targets[i] ) ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tclosest: function( selectors, context ) {\r\n\t\tvar cur,\r\n\t\t\ti = 0,\r\n\t\t\tl = this.length,\r\n\t\t\tmatched = [],\r\n\t\t\tpos = rneedsContext.test( selectors ) || typeof selectors !== \"string\" ?\r\n\t\t\t\tjQuery( selectors, context || this.context ) :\r\n\t\t\t\t0;\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tfor ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {\r\n\t\t\t\t// Always skip document fragments\r\n\t\t\t\tif ( cur.nodeType < 11 && (pos ?\r\n\t\t\t\t\tpos.index(cur) > -1 :\r\n\r\n\t\t\t\t\t// Don't pass non-elements to Sizzle\r\n\t\t\t\t\tcur.nodeType === 1 &&\r\n\t\t\t\t\t\tjQuery.find.matchesSelector(cur, selectors)) ) {\r\n\r\n\t\t\t\t\tmatched.push( cur );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );\r\n\t},\r\n\r\n\t// Determine the position of an element within the set\r\n\tindex: function( elem ) {\r\n\r\n\t\t// No argument, return index in parent\r\n\t\tif ( !elem ) {\r\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\r\n\t\t}\r\n\r\n\t\t// Index in selector\r\n\t\tif ( typeof elem === \"string\" ) {\r\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\r\n\t\t}\r\n\r\n\t\t// Locate the position of the desired element\r\n\t\treturn indexOf.call( this,\r\n\r\n\t\t\t// If it receives a jQuery object, the first element is used\r\n\t\t\telem.jquery ? elem[ 0 ] : elem\r\n\t\t);\r\n\t},\r\n\r\n\tadd: function( selector, context ) {\r\n\t\treturn this.pushStack(\r\n\t\t\tjQuery.unique(\r\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\r\n\t\t\t)\r\n\t\t);\r\n\t},\r\n\r\n\taddBack: function( selector ) {\r\n\t\treturn this.add( selector == null ?\r\n\t\t\tthis.prevObject : this.prevObject.filter(selector)\r\n\t\t);\r\n\t}\r\n});\r\n\r\nfunction sibling( cur, dir ) {\r\n\twhile ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}\r\n\treturn cur;\r\n}\r\n\r\njQuery.each({\r\n\tparent: function( elem ) {\r\n\t\tvar parent = elem.parentNode;\r\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\r\n\t},\r\n\tparents: function( elem ) {\r\n\t\treturn jQuery.dir( elem, \"parentNode\" );\r\n\t},\r\n\tparentsUntil: function( elem, i, until ) {\r\n\t\treturn jQuery.dir( elem, \"parentNode\", until );\r\n\t},\r\n\tnext: function( elem ) {\r\n\t\treturn sibling( elem, \"nextSibling\" );\r\n\t},\r\n\tprev: function( elem ) {\r\n\t\treturn sibling( elem, \"previousSibling\" );\r\n\t},\r\n\tnextAll: function( elem ) {\r\n\t\treturn jQuery.dir( elem, \"nextSibling\" );\r\n\t},\r\n\tprevAll: function( elem ) {\r\n\t\treturn jQuery.dir( elem, \"previousSibling\" );\r\n\t},\r\n\tnextUntil: function( elem, i, until ) {\r\n\t\treturn jQuery.dir( elem, \"nextSibling\", until );\r\n\t},\r\n\tprevUntil: function( elem, i, until ) {\r\n\t\treturn jQuery.dir( elem, \"previousSibling\", until );\r\n\t},\r\n\tsiblings: function( elem ) {\r\n\t\treturn jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );\r\n\t},\r\n\tchildren: function( elem ) {\r\n\t\treturn jQuery.sibling( elem.firstChild );\r\n\t},\r\n\tcontents: function( elem ) {\r\n\t\treturn elem.contentDocument || jQuery.merge( [], elem.childNodes );\r\n\t}\r\n}, function( name, fn ) {\r\n\tjQuery.fn[ name ] = function( until, selector ) {\r\n\t\tvar matched = jQuery.map( this, fn, until );\r\n\r\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\r\n\t\t\tselector = until;\r\n\t\t}\r\n\r\n\t\tif ( selector && typeof selector === \"string\" ) {\r\n\t\t\tmatched = jQuery.filter( selector, matched );\r\n\t\t}\r\n\r\n\t\tif ( this.length > 1 ) {\r\n\t\t\t// Remove duplicates\r\n\t\t\tif ( !guaranteedUnique[ name ] ) {\r\n\t\t\t\tjQuery.unique( matched );\r\n\t\t\t}\r\n\r\n\t\t\t// Reverse order for parents* and prev-derivatives\r\n\t\t\tif ( rparentsprev.test( name ) ) {\r\n\t\t\t\tmatched.reverse();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.pushStack( matched );\r\n\t};\r\n});\r\nvar rnotwhite = (/\\S+/g);\r\n\r\n\r\n\r\n// String to Object options format cache\r\nvar optionsCache = {};\r\n\r\n// Convert String-formatted options into Object-formatted ones and store in cache\r\nfunction createOptions( options ) {\r\n\tvar object = optionsCache[ options ] = {};\r\n\tjQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {\r\n\t\tobject[ flag ] = true;\r\n\t});\r\n\treturn object;\r\n}\r\n\r\n/*\r\n * Create a callback list using the following parameters:\r\n *\r\n *\toptions: an optional list of space-separated options that will change how\r\n *\t\t\tthe callback list behaves or a more traditional option object\r\n *\r\n * By default a callback list will act like an event callback list and can be\r\n * \"fired\" multiple times.\r\n *\r\n * Possible options:\r\n *\r\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\r\n *\r\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\r\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\r\n *\t\t\t\t\tvalues (like a Deferred)\r\n *\r\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\r\n *\r\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\r\n *\r\n */\r\njQuery.Callbacks = function( options ) {\r\n\r\n\t// Convert options from String-formatted to Object-formatted if needed\r\n\t// (we check in cache first)\r\n\toptions = typeof options === \"string\" ?\r\n\t\t( optionsCache[ options ] || createOptions( options ) ) :\r\n\t\tjQuery.extend( {}, options );\r\n\r\n\tvar // Last fire value (for non-forgettable lists)\r\n\t\tmemory,\r\n\t\t// Flag to know if list was already fired\r\n\t\tfired,\r\n\t\t// Flag to know if list is currently firing\r\n\t\tfiring,\r\n\t\t// First callback to fire (used internally by add and fireWith)\r\n\t\tfiringStart,\r\n\t\t// End of the loop when firing\r\n\t\tfiringLength,\r\n\t\t// Index of currently firing callback (modified by remove if needed)\r\n\t\tfiringIndex,\r\n\t\t// Actual callback list\r\n\t\tlist = [],\r\n\t\t// Stack of fire calls for repeatable lists\r\n\t\tstack = !options.once && [],\r\n\t\t// Fire callbacks\r\n\t\tfire = function( data ) {\r\n\t\t\tmemory = options.memory && data;\r\n\t\t\tfired = true;\r\n\t\t\tfiringIndex = firingStart || 0;\r\n\t\t\tfiringStart = 0;\r\n\t\t\tfiringLength = list.length;\r\n\t\t\tfiring = true;\r\n\t\t\tfor ( ; list && firingIndex < firingLength; firingIndex++ ) {\r\n\t\t\t\tif ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {\r\n\t\t\t\t\tmemory = false; // To prevent further calls using add\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfiring = false;\r\n\t\t\tif ( list ) {\r\n\t\t\t\tif ( stack ) {\r\n\t\t\t\t\tif ( stack.length ) {\r\n\t\t\t\t\t\tfire( stack.shift() );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ( memory ) {\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.disable();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// Actual Callbacks object\r\n\t\tself = {\r\n\t\t\t// Add a callback or a collection of callbacks to the list\r\n\t\t\tadd: function() {\r\n\t\t\t\tif ( list ) {\r\n\t\t\t\t\t// First, we save the current length\r\n\t\t\t\t\tvar start = list.length;\r\n\t\t\t\t\t(function add( args ) {\r\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\r\n\t\t\t\t\t\t\tvar type = jQuery.type( arg );\r\n\t\t\t\t\t\t\tif ( type === \"function\" ) {\r\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\r\n\t\t\t\t\t\t\t\t\tlist.push( arg );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if ( arg && arg.length && type !== \"string\" ) {\r\n\t\t\t\t\t\t\t\t// Inspect recursively\r\n\t\t\t\t\t\t\t\tadd( arg );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})( arguments );\r\n\t\t\t\t\t// Do we need to add the callbacks to the\r\n\t\t\t\t\t// current firing batch?\r\n\t\t\t\t\tif ( firing ) {\r\n\t\t\t\t\t\tfiringLength = list.length;\r\n\t\t\t\t\t// With memory, if we're not firing then\r\n\t\t\t\t\t// we should call right away\r\n\t\t\t\t\t} else if ( memory ) {\r\n\t\t\t\t\t\tfiringStart = start;\r\n\t\t\t\t\t\tfire( memory );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Remove a callback from the list\r\n\t\t\tremove: function() {\r\n\t\t\t\tif ( list ) {\r\n\t\t\t\t\tjQuery.each( arguments, function( _, arg ) {\r\n\t\t\t\t\t\tvar index;\r\n\t\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\r\n\t\t\t\t\t\t\tlist.splice( index, 1 );\r\n\t\t\t\t\t\t\t// Handle firing indexes\r\n\t\t\t\t\t\t\tif ( firing ) {\r\n\t\t\t\t\t\t\t\tif ( index <= firingLength ) {\r\n\t\t\t\t\t\t\t\t\tfiringLength--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ( index <= firingIndex ) {\r\n\t\t\t\t\t\t\t\t\tfiringIndex--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Check if a given callback is in the list.\r\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\r\n\t\t\thas: function( fn ) {\r\n\t\t\t\treturn fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );\r\n\t\t\t},\r\n\t\t\t// Remove all callbacks from the list\r\n\t\t\tempty: function() {\r\n\t\t\t\tlist = [];\r\n\t\t\t\tfiringLength = 0;\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Have the list do nothing anymore\r\n\t\t\tdisable: function() {\r\n\t\t\t\tlist = stack = memory = undefined;\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Is it disabled?\r\n\t\t\tdisabled: function() {\r\n\t\t\t\treturn !list;\r\n\t\t\t},\r\n\t\t\t// Lock the list in its current state\r\n\t\t\tlock: function() {\r\n\t\t\t\tstack = undefined;\r\n\t\t\t\tif ( !memory ) {\r\n\t\t\t\t\tself.disable();\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Is it locked?\r\n\t\t\tlocked: function() {\r\n\t\t\t\treturn !stack;\r\n\t\t\t},\r\n\t\t\t// Call all callbacks with the given context and arguments\r\n\t\t\tfireWith: function( context, args ) {\r\n\t\t\t\tif ( list && ( !fired || stack ) ) {\r\n\t\t\t\t\targs = args || [];\r\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\r\n\t\t\t\t\tif ( firing ) {\r\n\t\t\t\t\t\tstack.push( args );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfire( args );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Call all the callbacks with the given arguments\r\n\t\t\tfire: function() {\r\n\t\t\t\tself.fireWith( this, arguments );\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// To know if the callbacks have already been called at least once\r\n\t\t\tfired: function() {\r\n\t\t\t\treturn !!fired;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\treturn self;\r\n};\r\n\r\n\r\njQuery.extend({\r\n\r\n\tDeferred: function( func ) {\r\n\t\tvar tuples = [\r\n\t\t\t\t// action, add listener, listener list, final state\r\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks(\"once memory\"), \"resolved\" ],\r\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks(\"once memory\"), \"rejected\" ],\r\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks(\"memory\") ]\r\n\t\t\t],\r\n\t\t\tstate = \"pending\",\r\n\t\t\tpromise = {\r\n\t\t\t\tstate: function() {\r\n\t\t\t\t\treturn state;\r\n\t\t\t\t},\r\n\t\t\t\talways: function() {\r\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t},\r\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\r\n\t\t\t\t\tvar fns = arguments;\r\n\t\t\t\t\treturn jQuery.Deferred(function( newDefer ) {\r\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\r\n\t\t\t\t\t\t\tvar fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];\r\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\r\n\t\t\t\t\t\t\tdeferred[ tuple[1] ](function() {\r\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\r\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\r\n\t\t\t\t\t\t\t\t\treturned.promise()\r\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\r\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject )\r\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify );\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfns = null;\r\n\t\t\t\t\t}).promise();\r\n\t\t\t\t},\r\n\t\t\t\t// Get a promise for this deferred\r\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\r\n\t\t\t\tpromise: function( obj ) {\r\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdeferred = {};\r\n\r\n\t\t// Keep pipe for back-compat\r\n\t\tpromise.pipe = promise.then;\r\n\r\n\t\t// Add list-specific methods\r\n\t\tjQuery.each( tuples, function( i, tuple ) {\r\n\t\t\tvar list = tuple[ 2 ],\r\n\t\t\t\tstateString = tuple[ 3 ];\r\n\r\n\t\t\t// promise[ done | fail | progress ] = list.add\r\n\t\t\tpromise[ tuple[1] ] = list.add;\r\n\r\n\t\t\t// Handle state\r\n\t\t\tif ( stateString ) {\r\n\t\t\t\tlist.add(function() {\r\n\t\t\t\t\t// state = [ resolved | rejected ]\r\n\t\t\t\t\tstate = stateString;\r\n\r\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\r\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\r\n\t\t\t}\r\n\r\n\t\t\t// deferred[ resolve | reject | notify ]\r\n\t\t\tdeferred[ tuple[0] ] = function() {\r\n\t\t\t\tdeferred[ tuple[0] + \"With\" ]( this === deferred ? promise : this, arguments );\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\t\t\tdeferred[ tuple[0] + \"With\" ] = list.fireWith;\r\n\t\t});\r\n\r\n\t\t// Make the deferred a promise\r\n\t\tpromise.promise( deferred );\r\n\r\n\t\t// Call given func if any\r\n\t\tif ( func ) {\r\n\t\t\tfunc.call( deferred, deferred );\r\n\t\t}\r\n\r\n\t\t// All done!\r\n\t\treturn deferred;\r\n\t},\r\n\r\n\t// Deferred helper\r\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\r\n\t\tvar i = 0,\r\n\t\t\tresolveValues = slice.call( arguments ),\r\n\t\t\tlength = resolveValues.length,\r\n\r\n\t\t\t// the count of uncompleted subordinates\r\n\t\t\tremaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\r\n\r\n\t\t\t// the master Deferred. If resolveValues consist of only a single Deferred, just use that.\r\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\r\n\r\n\t\t\t// Update function for both resolve and progress values\r\n\t\t\tupdateFunc = function( i, contexts, values ) {\r\n\t\t\t\treturn function( value ) {\r\n\t\t\t\t\tcontexts[ i ] = this;\r\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\r\n\t\t\t\t\tif ( values === progressValues ) {\r\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\r\n\t\t\t\t\t} else if ( !( --remaining ) ) {\r\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tprogressValues, progressContexts, resolveContexts;\r\n\r\n\t\t// Add listeners to Deferred subordinates; treat others as resolved\r\n\t\tif ( length > 1 ) {\r\n\t\t\tprogressValues = new Array( length );\r\n\t\t\tprogressContexts = new Array( length );\r\n\t\t\tresolveContexts = new Array( length );\r\n\t\t\tfor ( ; i < length; i++ ) {\r\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\r\n\t\t\t\t\tresolveValues[ i ].promise()\r\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\r\n\t\t\t\t\t\t.fail( deferred.reject )\r\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t--remaining;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If we're not waiting on anything, resolve the master\r\n\t\tif ( !remaining ) {\r\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\r\n\t\t}\r\n\r\n\t\treturn deferred.promise();\r\n\t}\r\n});\r\n\r\n\r\n// The deferred used on DOM ready\r\nvar readyList;\r\n\r\njQuery.fn.ready = function( fn ) {\r\n\t// Add the callback\r\n\tjQuery.ready.promise().done( fn );\r\n\r\n\treturn this;\r\n};\r\n\r\njQuery.extend({\r\n\t// Is the DOM ready to be used? Set to true once it occurs.\r\n\tisReady: false,\r\n\r\n\t// A counter to track how many items to wait for before\r\n\t// the ready event fires. See #6781\r\n\treadyWait: 1,\r\n\r\n\t// Hold (or release) the ready event\r\n\tholdReady: function( hold ) {\r\n\t\tif ( hold ) {\r\n\t\t\tjQuery.readyWait++;\r\n\t\t} else {\r\n\t\t\tjQuery.ready( true );\r\n\t\t}\r\n\t},\r\n\r\n\t// Handle when the DOM is ready\r\n\tready: function( wait ) {\r\n\r\n\t\t// Abort if there are pending holds or we're already ready\r\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Remember that the DOM is ready\r\n\t\tjQuery.isReady = true;\r\n\r\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\r\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// If there are functions bound, to execute\r\n\t\treadyList.resolveWith( document, [ jQuery ] );\r\n\r\n\t\t// Trigger any bound ready events\r\n\t\tif ( jQuery.fn.triggerHandler ) {\r\n\t\t\tjQuery( document ).triggerHandler( \"ready\" );\r\n\t\t\tjQuery( document ).off( \"ready\" );\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n * The ready event handler and self cleanup method\r\n */\r\nfunction completed() {\r\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed, false );\r\n\twindow.removeEventListener( \"load\", completed, false );\r\n\tjQuery.ready();\r\n}\r\n\r\njQuery.ready.promise = function( obj ) {\r\n\tif ( !readyList ) {\r\n\r\n\t\treadyList = jQuery.Deferred();\r\n\r\n\t\t// Catch cases where $(document).ready() is called after the browser event has already occurred.\r\n\t\t// We once tried to use readyState \"interactive\" here, but it caused issues like the one\r\n\t\t// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\r\n\t\tif ( document.readyState === \"complete\" ) {\r\n\t\t\t// Handle it asynchronously to allow scripts the opportunity to delay ready\r\n\t\t\tsetTimeout( jQuery.ready );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Use the handy event callback\r\n\t\t\tdocument.addEventListener( \"DOMContentLoaded\", completed, false );\r\n\r\n\t\t\t// A fallback to window.onload, that will always work\r\n\t\t\twindow.addEventListener( \"load\", completed, false );\r\n\t\t}\r\n\t}\r\n\treturn readyList.promise( obj );\r\n};\r\n\r\n// Kick off the DOM ready check even if the user does not\r\njQuery.ready.promise();\r\n\r\n\r\n\r\n\r\n// Multifunctional method to get and set values of a collection\r\n// The value/s can optionally be executed if it's a function\r\nvar access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\r\n\tvar i = 0,\r\n\t\tlen = elems.length,\r\n\t\tbulk = key == null;\r\n\r\n\t// Sets many values\r\n\tif ( jQuery.type( key ) === \"object\" ) {\r\n\t\tchainable = true;\r\n\t\tfor ( i in key ) {\r\n\t\t\tjQuery.access( elems, fn, i, key[i], true, emptyGet, raw );\r\n\t\t}\r\n\r\n\t// Sets one value\r\n\t} else if ( value !== undefined ) {\r\n\t\tchainable = true;\r\n\r\n\t\tif ( !jQuery.isFunction( value ) ) {\r\n\t\t\traw = true;\r\n\t\t}\r\n\r\n\t\tif ( bulk ) {\r\n\t\t\t// Bulk operations run against the entire set\r\n\t\t\tif ( raw ) {\r\n\t\t\t\tfn.call( elems, value );\r\n\t\t\t\tfn = null;\r\n\r\n\t\t\t// ...except when executing function values\r\n\t\t\t} else {\r\n\t\t\t\tbulk = fn;\r\n\t\t\t\tfn = function( elem, key, value ) {\r\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( fn ) {\r\n\t\t\tfor ( ; i < len; i++ ) {\r\n\t\t\t\tfn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn chainable ?\r\n\t\telems :\r\n\r\n\t\t// Gets\r\n\t\tbulk ?\r\n\t\t\tfn.call( elems ) :\r\n\t\t\tlen ? fn( elems[0], key ) : emptyGet;\r\n};\r\n\r\n\r\n/**\r\n * Determines whether an object can have data\r\n */\r\njQuery.acceptData = function( owner ) {\r\n\t// Accepts only:\r\n\t//  - Node\r\n\t//    - Node.ELEMENT_NODE\r\n\t//    - Node.DOCUMENT_NODE\r\n\t//  - Object\r\n\t//    - Any\r\n\t/* jshint -W018 */\r\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\r\n};\r\n\r\n\r\nfunction Data() {\r\n\t// Support: Android<4,\r\n\t// Old WebKit does not have Object.preventExtensions/freeze method,\r\n\t// return new empty object instead with no [[set]] accessor\r\n\tObject.defineProperty( this.cache = {}, 0, {\r\n\t\tget: function() {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t});\r\n\r\n\tthis.expando = jQuery.expando + Data.uid++;\r\n}\r\n\r\nData.uid = 1;\r\nData.accepts = jQuery.acceptData;\r\n\r\nData.prototype = {\r\n\tkey: function( owner ) {\r\n\t\t// We can accept data for non-element nodes in modern browsers,\r\n\t\t// but we should not, see #8335.\r\n\t\t// Always return the key for a frozen object.\r\n\t\tif ( !Data.accepts( owner ) ) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tvar descriptor = {},\r\n\t\t\t// Check if the owner object already has a cache key\r\n\t\t\tunlock = owner[ this.expando ];\r\n\r\n\t\t// If not, create one\r\n\t\tif ( !unlock ) {\r\n\t\t\tunlock = Data.uid++;\r\n\r\n\t\t\t// Secure it in a non-enumerable, non-writable property\r\n\t\t\ttry {\r\n\t\t\t\tdescriptor[ this.expando ] = { value: unlock };\r\n\t\t\t\tObject.defineProperties( owner, descriptor );\r\n\r\n\t\t\t// Support: Android<4\r\n\t\t\t// Fallback to a less secure definition\r\n\t\t\t} catch ( e ) {\r\n\t\t\t\tdescriptor[ this.expando ] = unlock;\r\n\t\t\t\tjQuery.extend( owner, descriptor );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Ensure the cache object\r\n\t\tif ( !this.cache[ unlock ] ) {\r\n\t\t\tthis.cache[ unlock ] = {};\r\n\t\t}\r\n\r\n\t\treturn unlock;\r\n\t},\r\n\tset: function( owner, data, value ) {\r\n\t\tvar prop,\r\n\t\t\t// There may be an unlock assigned to this node,\r\n\t\t\t// if there is no entry for this \"owner\", create one inline\r\n\t\t\t// and set the unlock as though an owner entry had always existed\r\n\t\t\tunlock = this.key( owner ),\r\n\t\t\tcache = this.cache[ unlock ];\r\n\r\n\t\t// Handle: [ owner, key, value ] args\r\n\t\tif ( typeof data === \"string\" ) {\r\n\t\t\tcache[ data ] = value;\r\n\r\n\t\t// Handle: [ owner, { properties } ] args\r\n\t\t} else {\r\n\t\t\t// Fresh assignments by object are shallow copied\r\n\t\t\tif ( jQuery.isEmptyObject( cache ) ) {\r\n\t\t\t\tjQuery.extend( this.cache[ unlock ], data );\r\n\t\t\t// Otherwise, copy the properties one-by-one to the cache object\r\n\t\t\t} else {\r\n\t\t\t\tfor ( prop in data ) {\r\n\t\t\t\t\tcache[ prop ] = data[ prop ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cache;\r\n\t},\r\n\tget: function( owner, key ) {\r\n\t\t// Either a valid cache is found, or will be created.\r\n\t\t// New caches will be created and the unlock returned,\r\n\t\t// allowing direct access to the newly created\r\n\t\t// empty data object. A valid owner object must be provided.\r\n\t\tvar cache = this.cache[ this.key( owner ) ];\r\n\r\n\t\treturn key === undefined ?\r\n\t\t\tcache : cache[ key ];\r\n\t},\r\n\taccess: function( owner, key, value ) {\r\n\t\tvar stored;\r\n\t\t// In cases where either:\r\n\t\t//\r\n\t\t//   1. No key was specified\r\n\t\t//   2. A string key was specified, but no value provided\r\n\t\t//\r\n\t\t// Take the \"read\" path and allow the get method to determine\r\n\t\t// which value to return, respectively either:\r\n\t\t//\r\n\t\t//   1. The entire cache object\r\n\t\t//   2. The data stored at the key\r\n\t\t//\r\n\t\tif ( key === undefined ||\r\n\t\t\t\t((key && typeof key === \"string\") && value === undefined) ) {\r\n\r\n\t\t\tstored = this.get( owner, key );\r\n\r\n\t\t\treturn stored !== undefined ?\r\n\t\t\t\tstored : this.get( owner, jQuery.camelCase(key) );\r\n\t\t}\r\n\r\n\t\t// [*]When the key is not a string, or both a key and value\r\n\t\t// are specified, set or extend (existing objects) with either:\r\n\t\t//\r\n\t\t//   1. An object of properties\r\n\t\t//   2. A key and value\r\n\t\t//\r\n\t\tthis.set( owner, key, value );\r\n\r\n\t\t// Since the \"set\" path can have two possible entry points\r\n\t\t// return the expected data based on which path was taken[*]\r\n\t\treturn value !== undefined ? value : key;\r\n\t},\r\n\tremove: function( owner, key ) {\r\n\t\tvar i, name, camel,\r\n\t\t\tunlock = this.key( owner ),\r\n\t\t\tcache = this.cache[ unlock ];\r\n\r\n\t\tif ( key === undefined ) {\r\n\t\t\tthis.cache[ unlock ] = {};\r\n\r\n\t\t} else {\r\n\t\t\t// Support array or space separated string of keys\r\n\t\t\tif ( jQuery.isArray( key ) ) {\r\n\t\t\t\t// If \"name\" is an array of keys...\r\n\t\t\t\t// When data is initially created, via (\"key\", \"val\") signature,\r\n\t\t\t\t// keys will be converted to camelCase.\r\n\t\t\t\t// Since there is no way to tell _how_ a key was added, remove\r\n\t\t\t\t// both plain key and camelCase key. #12786\r\n\t\t\t\t// This will only penalize the array argument path.\r\n\t\t\t\tname = key.concat( key.map( jQuery.camelCase ) );\r\n\t\t\t} else {\r\n\t\t\t\tcamel = jQuery.camelCase( key );\r\n\t\t\t\t// Try the string as a key before any manipulation\r\n\t\t\t\tif ( key in cache ) {\r\n\t\t\t\t\tname = [ key, camel ];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// If a key with the spaces exists, use it.\r\n\t\t\t\t\t// Otherwise, create an array by matching non-whitespace\r\n\t\t\t\t\tname = camel;\r\n\t\t\t\t\tname = name in cache ?\r\n\t\t\t\t\t\t[ name ] : ( name.match( rnotwhite ) || [] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ti = name.length;\r\n\t\t\twhile ( i-- ) {\r\n\t\t\t\tdelete cache[ name[ i ] ];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\thasData: function( owner ) {\r\n\t\treturn !jQuery.isEmptyObject(\r\n\t\t\tthis.cache[ owner[ this.expando ] ] || {}\r\n\t\t);\r\n\t},\r\n\tdiscard: function( owner ) {\r\n\t\tif ( owner[ this.expando ] ) {\r\n\t\t\tdelete this.cache[ owner[ this.expando ] ];\r\n\t\t}\r\n\t}\r\n};\r\nvar data_priv = new Data();\r\n\r\nvar data_user = new Data();\r\n\r\n\r\n\r\n//\tImplementation Summary\r\n//\r\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\r\n//\t2. Improve the module's maintainability by reducing the storage\r\n//\t\tpaths to a single mechanism.\r\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\r\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\r\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\r\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\r\n\r\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\r\n\trmultiDash = /([A-Z])/g;\r\n\r\nfunction dataAttr( elem, key, data ) {\r\n\tvar name;\r\n\r\n\t// If nothing was found internally, try to fetch any\r\n\t// data from the HTML5 data-* attribute\r\n\tif ( data === undefined && elem.nodeType === 1 ) {\r\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$1\" ).toLowerCase();\r\n\t\tdata = elem.getAttribute( name );\r\n\r\n\t\tif ( typeof data === \"string\" ) {\r\n\t\t\ttry {\r\n\t\t\t\tdata = data === \"true\" ? true :\r\n\t\t\t\t\tdata === \"false\" ? false :\r\n\t\t\t\t\tdata === \"null\" ? null :\r\n\t\t\t\t\t// Only convert to a number if it doesn't change the string\r\n\t\t\t\t\t+data + \"\" === data ? +data :\r\n\t\t\t\t\trbrace.test( data ) ? jQuery.parseJSON( data ) :\r\n\t\t\t\t\tdata;\r\n\t\t\t} catch( e ) {}\r\n\r\n\t\t\t// Make sure we set the data so it isn't changed later\r\n\t\t\tdata_user.set( elem, key, data );\r\n\t\t} else {\r\n\t\t\tdata = undefined;\r\n\t\t}\r\n\t}\r\n\treturn data;\r\n}\r\n\r\njQuery.extend({\r\n\thasData: function( elem ) {\r\n\t\treturn data_user.hasData( elem ) || data_priv.hasData( elem );\r\n\t},\r\n\r\n\tdata: function( elem, name, data ) {\r\n\t\treturn data_user.access( elem, name, data );\r\n\t},\r\n\r\n\tremoveData: function( elem, name ) {\r\n\t\tdata_user.remove( elem, name );\r\n\t},\r\n\r\n\t// TODO: Now that all calls to _data and _removeData have been replaced\r\n\t// with direct calls to data_priv methods, these can be deprecated.\r\n\t_data: function( elem, name, data ) {\r\n\t\treturn data_priv.access( elem, name, data );\r\n\t},\r\n\r\n\t_removeData: function( elem, name ) {\r\n\t\tdata_priv.remove( elem, name );\r\n\t}\r\n});\r\n\r\njQuery.fn.extend({\r\n\tdata: function( key, value ) {\r\n\t\tvar i, name, data,\r\n\t\t\telem = this[ 0 ],\r\n\t\t\tattrs = elem && elem.attributes;\r\n\r\n\t\t// Gets all values\r\n\t\tif ( key === undefined ) {\r\n\t\t\tif ( this.length ) {\r\n\t\t\t\tdata = data_user.get( elem );\r\n\r\n\t\t\t\tif ( elem.nodeType === 1 && !data_priv.get( elem, \"hasDataAttrs\" ) ) {\r\n\t\t\t\t\ti = attrs.length;\r\n\t\t\t\t\twhile ( i-- ) {\r\n\r\n\t\t\t\t\t\t// Support: IE11+\r\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\r\n\t\t\t\t\t\tif ( attrs[ i ] ) {\r\n\t\t\t\t\t\t\tname = attrs[ i ].name;\r\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\r\n\t\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice(5) );\r\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata_priv.set( elem, \"hasDataAttrs\", true );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t}\r\n\r\n\t\t// Sets multiple values\r\n\t\tif ( typeof key === \"object\" ) {\r\n\t\t\treturn this.each(function() {\r\n\t\t\t\tdata_user.set( this, key );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn access( this, function( value ) {\r\n\t\t\tvar data,\r\n\t\t\t\tcamelKey = jQuery.camelCase( key );\r\n\r\n\t\t\t// The calling jQuery object (element matches) is not empty\r\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\r\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\r\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\r\n\t\t\t// throw an exception if an attempt to read a data cache is made.\r\n\t\t\tif ( elem && value === undefined ) {\r\n\t\t\t\t// Attempt to get data from the cache\r\n\t\t\t\t// with the key as-is\r\n\t\t\t\tdata = data_user.get( elem, key );\r\n\t\t\t\tif ( data !== undefined ) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Attempt to get data from the cache\r\n\t\t\t\t// with the key camelized\r\n\t\t\t\tdata = data_user.get( elem, camelKey );\r\n\t\t\t\tif ( data !== undefined ) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Attempt to \"discover\" the data in\r\n\t\t\t\t// HTML5 custom data-* attrs\r\n\t\t\t\tdata = dataAttr( elem, camelKey, undefined );\r\n\t\t\t\tif ( data !== undefined ) {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// We tried really hard, but the data doesn't exist.\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Set the data...\r\n\t\t\tthis.each(function() {\r\n\t\t\t\t// First, attempt to store a copy or reference of any\r\n\t\t\t\t// data that might've been store with a camelCased key.\r\n\t\t\t\tvar data = data_user.get( this, camelKey );\r\n\r\n\t\t\t\t// For HTML5 data-* attribute interop, we have to\r\n\t\t\t\t// store property names with dashes in a camelCase form.\r\n\t\t\t\t// This might not apply to all properties...*\r\n\t\t\t\tdata_user.set( this, camelKey, value );\r\n\r\n\t\t\t\t// *... In the case of properties that might _actually_\r\n\t\t\t\t// have dashes, we need to also store a copy of that\r\n\t\t\t\t// unchanged property.\r\n\t\t\t\tif ( key.indexOf(\"-\") !== -1 && data !== undefined ) {\r\n\t\t\t\t\tdata_user.set( this, key, value );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, null, value, arguments.length > 1, null, true );\r\n\t},\r\n\r\n\tremoveData: function( key ) {\r\n\t\treturn this.each(function() {\r\n\t\t\tdata_user.remove( this, key );\r\n\t\t});\r\n\t}\r\n});\r\n\r\n\r\njQuery.extend({\r\n\tqueue: function( elem, type, data ) {\r\n\t\tvar queue;\r\n\r\n\t\tif ( elem ) {\r\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\r\n\t\t\tqueue = data_priv.get( elem, type );\r\n\r\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\r\n\t\t\tif ( data ) {\r\n\t\t\t\tif ( !queue || jQuery.isArray( data ) ) {\r\n\t\t\t\t\tqueue = data_priv.access( elem, type, jQuery.makeArray(data) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tqueue.push( data );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn queue || [];\r\n\t\t}\r\n\t},\r\n\r\n\tdequeue: function( elem, type ) {\r\n\t\ttype = type || \"fx\";\r\n\r\n\t\tvar queue = jQuery.queue( elem, type ),\r\n\t\t\tstartLength = queue.length,\r\n\t\t\tfn = queue.shift(),\r\n\t\t\thooks = jQuery._queueHooks( elem, type ),\r\n\t\t\tnext = function() {\r\n\t\t\t\tjQuery.dequeue( elem, type );\r\n\t\t\t};\r\n\r\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\r\n\t\tif ( fn === \"inprogress\" ) {\r\n\t\t\tfn = queue.shift();\r\n\t\t\tstartLength--;\r\n\t\t}\r\n\r\n\t\tif ( fn ) {\r\n\r\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\r\n\t\t\t// automatically dequeued\r\n\t\t\tif ( type === \"fx\" ) {\r\n\t\t\t\tqueue.unshift( \"inprogress\" );\r\n\t\t\t}\r\n\r\n\t\t\t// Clear up the last queue stop function\r\n\t\t\tdelete hooks.stop;\r\n\t\t\tfn.call( elem, next, hooks );\r\n\t\t}\r\n\r\n\t\tif ( !startLength && hooks ) {\r\n\t\t\thooks.empty.fire();\r\n\t\t}\r\n\t},\r\n\r\n\t// Not public - generate a queueHooks object, or return the current one\r\n\t_queueHooks: function( elem, type ) {\r\n\t\tvar key = type + \"queueHooks\";\r\n\t\treturn data_priv.get( elem, key ) || data_priv.access( elem, key, {\r\n\t\t\tempty: jQuery.Callbacks(\"once memory\").add(function() {\r\n\t\t\t\tdata_priv.remove( elem, [ type + \"queue\", key ] );\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n});\r\n\r\njQuery.fn.extend({\r\n\tqueue: function( type, data ) {\r\n\t\tvar setter = 2;\r\n\r\n\t\tif ( typeof type !== \"string\" ) {\r\n\t\t\tdata = type;\r\n\t\t\ttype = \"fx\";\r\n\t\t\tsetter--;\r\n\t\t}\r\n\r\n\t\tif ( arguments.length < setter ) {\r\n\t\t\treturn jQuery.queue( this[0], type );\r\n\t\t}\r\n\r\n\t\treturn data === undefined ?\r\n\t\t\tthis :\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\r\n\r\n\t\t\t\t// Ensure a hooks for this queue\r\n\t\t\t\tjQuery._queueHooks( this, type );\r\n\r\n\t\t\t\tif ( type === \"fx\" && queue[0] !== \"inprogress\" ) {\r\n\t\t\t\t\tjQuery.dequeue( this, type );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t},\r\n\tdequeue: function( type ) {\r\n\t\treturn this.each(function() {\r\n\t\t\tjQuery.dequeue( this, type );\r\n\t\t});\r\n\t},\r\n\tclearQueue: function( type ) {\r\n\t\treturn this.queue( type || \"fx\", [] );\r\n\t},\r\n\t// Get a promise resolved when queues of a certain type\r\n\t// are emptied (fx is the type by default)\r\n\tpromise: function( type, obj ) {\r\n\t\tvar tmp,\r\n\t\t\tcount = 1,\r\n\t\t\tdefer = jQuery.Deferred(),\r\n\t\t\telements = this,\r\n\t\t\ti = this.length,\r\n\t\t\tresolve = function() {\r\n\t\t\t\tif ( !( --count ) ) {\r\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\tif ( typeof type !== \"string\" ) {\r\n\t\t\tobj = type;\r\n\t\t\ttype = undefined;\r\n\t\t}\r\n\t\ttype = type || \"fx\";\r\n\r\n\t\twhile ( i-- ) {\r\n\t\t\ttmp = data_priv.get( elements[ i ], type + \"queueHooks\" );\r\n\t\t\tif ( tmp && tmp.empty ) {\r\n\t\t\t\tcount++;\r\n\t\t\t\ttmp.empty.add( resolve );\r\n\t\t\t}\r\n\t\t}\r\n\t\tresolve();\r\n\t\treturn defer.promise( obj );\r\n\t}\r\n});\r\nvar pnum = (/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/).source;\r\n\r\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\r\n\r\nvar isHidden = function( elem, el ) {\r\n\t\t// isHidden might be called from jQuery#filter function;\r\n\t\t// in that case, element will be second argument\r\n\t\telem = el || elem;\r\n\t\treturn jQuery.css( elem, \"display\" ) === \"none\" || !jQuery.contains( elem.ownerDocument, elem );\r\n\t};\r\n\r\nvar rcheckableType = (/^(?:checkbox|radio)$/i);\r\n\r\n\r\n\r\n(function() {\r\n\tvar fragment = document.createDocumentFragment(),\r\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\r\n\t\tinput = document.createElement( \"input\" );\r\n\r\n\t// Support: Safari<=5.1\r\n\t// Check state lost if the name is set (#11217)\r\n\t// Support: Windows Web Apps (WWA)\r\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\r\n\tinput.setAttribute( \"type\", \"radio\" );\r\n\tinput.setAttribute( \"checked\", \"checked\" );\r\n\tinput.setAttribute( \"name\", \"t\" );\r\n\r\n\tdiv.appendChild( input );\r\n\r\n\t// Support: Safari<=5.1, Android<4.2\r\n\t// Older WebKit doesn't clone checked state correctly in fragments\r\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\r\n\r\n\t// Support: IE<=11+\r\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\r\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\r\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\r\n})();\r\nvar strundefined = typeof undefined;\r\n\r\n\r\n\r\nsupport.focusinBubbles = \"onfocusin\" in window;\r\n\r\n\r\nvar\r\n\trkeyEvent = /^key/,\r\n\trmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,\r\n\trfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\r\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)$/;\r\n\r\nfunction returnTrue() {\r\n\treturn true;\r\n}\r\n\r\nfunction returnFalse() {\r\n\treturn false;\r\n}\r\n\r\nfunction safeActiveElement() {\r\n\ttry {\r\n\t\treturn document.activeElement;\r\n\t} catch ( err ) { }\r\n}\r\n\r\n/*\r\n * Helper functions for managing events -- not part of the public interface.\r\n * Props to Dean Edwards' addEvent library for many of the ideas.\r\n */\r\njQuery.event = {\r\n\r\n\tglobal: {},\r\n\r\n\tadd: function( elem, types, handler, data, selector ) {\r\n\r\n\t\tvar handleObjIn, eventHandle, tmp,\r\n\t\t\tevents, t, handleObj,\r\n\t\t\tspecial, handlers, type, namespaces, origType,\r\n\t\t\telemData = data_priv.get( elem );\r\n\r\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\r\n\t\tif ( !elemData ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Caller can pass in an object of custom data in lieu of the handler\r\n\t\tif ( handler.handler ) {\r\n\t\t\thandleObjIn = handler;\r\n\t\t\thandler = handleObjIn.handler;\r\n\t\t\tselector = handleObjIn.selector;\r\n\t\t}\r\n\r\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\r\n\t\tif ( !handler.guid ) {\r\n\t\t\thandler.guid = jQuery.guid++;\r\n\t\t}\r\n\r\n\t\t// Init the element's event structure and main handler, if this is the first\r\n\t\tif ( !(events = elemData.events) ) {\r\n\t\t\tevents = elemData.events = {};\r\n\t\t}\r\n\t\tif ( !(eventHandle = elemData.handle) ) {\r\n\t\t\teventHandle = elemData.handle = function( e ) {\r\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\r\n\t\t\t\t// when an event is called after a page has unloaded\r\n\t\t\t\treturn typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?\r\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// Handle multiple events separated by a space\r\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\r\n\t\tt = types.length;\r\n\t\twhile ( t-- ) {\r\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\r\n\t\t\ttype = origType = tmp[1];\r\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\r\n\r\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\r\n\t\t\tif ( !type ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// If event changes its type, use the special event handlers for the changed type\r\n\t\t\tspecial = jQuery.event.special[ type ] || {};\r\n\r\n\t\t\t// If selector defined, determine special event api type, otherwise given type\r\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\r\n\r\n\t\t\t// Update special based on newly reset type\r\n\t\t\tspecial = jQuery.event.special[ type ] || {};\r\n\r\n\t\t\t// handleObj is passed to all event handlers\r\n\t\t\thandleObj = jQuery.extend({\r\n\t\t\t\ttype: type,\r\n\t\t\t\torigType: origType,\r\n\t\t\t\tdata: data,\r\n\t\t\t\thandler: handler,\r\n\t\t\t\tguid: handler.guid,\r\n\t\t\t\tselector: selector,\r\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\r\n\t\t\t\tnamespace: namespaces.join(\".\")\r\n\t\t\t}, handleObjIn );\r\n\r\n\t\t\t// Init the event handler queue if we're the first\r\n\t\t\tif ( !(handlers = events[ type ]) ) {\r\n\t\t\t\thandlers = events[ type ] = [];\r\n\t\t\t\thandlers.delegateCount = 0;\r\n\r\n\t\t\t\t// Only use addEventListener if the special events handler returns false\r\n\t\t\t\tif ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {\r\n\t\t\t\t\tif ( elem.addEventListener ) {\r\n\t\t\t\t\t\telem.addEventListener( type, eventHandle, false );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( special.add ) {\r\n\t\t\t\tspecial.add.call( elem, handleObj );\r\n\r\n\t\t\t\tif ( !handleObj.handler.guid ) {\r\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Add to the element's handler list, delegates in front\r\n\t\t\tif ( selector ) {\r\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\r\n\t\t\t} else {\r\n\t\t\t\thandlers.push( handleObj );\r\n\t\t\t}\r\n\r\n\t\t\t// Keep track of which events have ever been used, for event optimization\r\n\t\t\tjQuery.event.global[ type ] = true;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Detach an event or set of events from an element\r\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\r\n\r\n\t\tvar j, origCount, tmp,\r\n\t\t\tevents, t, handleObj,\r\n\t\t\tspecial, handlers, type, namespaces, origType,\r\n\t\t\telemData = data_priv.hasData( elem ) && data_priv.get( elem );\r\n\r\n\t\tif ( !elemData || !(events = elemData.events) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Once for each type.namespace in types; type may be omitted\r\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\r\n\t\tt = types.length;\r\n\t\twhile ( t-- ) {\r\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\r\n\t\t\ttype = origType = tmp[1];\r\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\r\n\r\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\r\n\t\t\tif ( !type ) {\r\n\t\t\t\tfor ( type in events ) {\r\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\r\n\t\t\t\t}\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tspecial = jQuery.event.special[ type ] || {};\r\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\r\n\t\t\thandlers = events[ type ] || [];\r\n\t\t\ttmp = tmp[2] && new RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" );\r\n\r\n\t\t\t// Remove matching events\r\n\t\t\torigCount = j = handlers.length;\r\n\t\t\twhile ( j-- ) {\r\n\t\t\t\thandleObj = handlers[ j ];\r\n\r\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\r\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\r\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\r\n\t\t\t\t\t( !selector || selector === handleObj.selector || selector === \"**\" && handleObj.selector ) ) {\r\n\t\t\t\t\thandlers.splice( j, 1 );\r\n\r\n\t\t\t\t\tif ( handleObj.selector ) {\r\n\t\t\t\t\t\thandlers.delegateCount--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( special.remove ) {\r\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\r\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\r\n\t\t\tif ( origCount && !handlers.length ) {\r\n\t\t\t\tif ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {\r\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete events[ type ];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remove the expando if it's no longer used\r\n\t\tif ( jQuery.isEmptyObject( events ) ) {\r\n\t\t\tdelete elemData.handle;\r\n\t\t\tdata_priv.remove( elem, \"events\" );\r\n\t\t}\r\n\t},\r\n\r\n\ttrigger: function( event, data, elem, onlyHandlers ) {\r\n\r\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special,\r\n\t\t\teventPath = [ elem || document ],\r\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\r\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split(\".\") : [];\r\n\r\n\t\tcur = tmp = elem = elem || document;\r\n\r\n\t\t// Don't do events on text and comment nodes\r\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\r\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( type.indexOf(\".\") >= 0 ) {\r\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\r\n\t\t\tnamespaces = type.split(\".\");\r\n\t\t\ttype = namespaces.shift();\r\n\t\t\tnamespaces.sort();\r\n\t\t}\r\n\t\tontype = type.indexOf(\":\") < 0 && \"on\" + type;\r\n\r\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\r\n\t\tevent = event[ jQuery.expando ] ?\r\n\t\t\tevent :\r\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\r\n\r\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\r\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\r\n\t\tevent.namespace = namespaces.join(\".\");\r\n\t\tevent.namespace_re = event.namespace ?\r\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" ) :\r\n\t\t\tnull;\r\n\r\n\t\t// Clean up the event in case it is being reused\r\n\t\tevent.result = undefined;\r\n\t\tif ( !event.target ) {\r\n\t\t\tevent.target = elem;\r\n\t\t}\r\n\r\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\r\n\t\tdata = data == null ?\r\n\t\t\t[ event ] :\r\n\t\t\tjQuery.makeArray( data, [ event ] );\r\n\r\n\t\t// Allow special events to draw outside the lines\r\n\t\tspecial = jQuery.event.special[ type ] || {};\r\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\r\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\r\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\r\n\r\n\t\t\tbubbleType = special.delegateType || type;\r\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\r\n\t\t\t\tcur = cur.parentNode;\r\n\t\t\t}\r\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\r\n\t\t\t\teventPath.push( cur );\r\n\t\t\t\ttmp = cur;\r\n\t\t\t}\r\n\r\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\r\n\t\t\tif ( tmp === (elem.ownerDocument || document) ) {\r\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Fire handlers on the event path\r\n\t\ti = 0;\r\n\t\twhile ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {\r\n\r\n\t\t\tevent.type = i > 1 ?\r\n\t\t\t\tbubbleType :\r\n\t\t\t\tspecial.bindType || type;\r\n\r\n\t\t\t// jQuery handler\r\n\t\t\thandle = ( data_priv.get( cur, \"events\" ) || {} )[ event.type ] && data_priv.get( cur, \"handle\" );\r\n\t\t\tif ( handle ) {\r\n\t\t\t\thandle.apply( cur, data );\r\n\t\t\t}\r\n\r\n\t\t\t// Native handler\r\n\t\t\thandle = ontype && cur[ ontype ];\r\n\t\t\tif ( handle && handle.apply && jQuery.acceptData( cur ) ) {\r\n\t\t\t\tevent.result = handle.apply( cur, data );\r\n\t\t\t\tif ( event.result === false ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tevent.type = type;\r\n\r\n\t\t// If nobody prevented the default action, do it now\r\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\r\n\r\n\t\t\tif ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&\r\n\t\t\t\tjQuery.acceptData( elem ) ) {\r\n\r\n\t\t\t\t// Call a native DOM method on the target with the same name name as the event.\r\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\r\n\t\t\t\tif ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {\r\n\r\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\r\n\t\t\t\t\ttmp = elem[ ontype ];\r\n\r\n\t\t\t\t\tif ( tmp ) {\r\n\t\t\t\t\t\telem[ ontype ] = null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\r\n\t\t\t\t\tjQuery.event.triggered = type;\r\n\t\t\t\t\telem[ type ]();\r\n\t\t\t\t\tjQuery.event.triggered = undefined;\r\n\r\n\t\t\t\t\tif ( tmp ) {\r\n\t\t\t\t\t\telem[ ontype ] = tmp;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn event.result;\r\n\t},\r\n\r\n\tdispatch: function( event ) {\r\n\r\n\t\t// Make a writable jQuery.Event from the native event object\r\n\t\tevent = jQuery.event.fix( event );\r\n\r\n\t\tvar i, j, ret, matched, handleObj,\r\n\t\t\thandlerQueue = [],\r\n\t\t\targs = slice.call( arguments ),\r\n\t\t\thandlers = ( data_priv.get( this, \"events\" ) || {} )[ event.type ] || [],\r\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\r\n\r\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\r\n\t\targs[0] = event;\r\n\t\tevent.delegateTarget = this;\r\n\r\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\r\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Determine handlers\r\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\r\n\r\n\t\t// Run delegates first; they may want to stop propagation beneath us\r\n\t\ti = 0;\r\n\t\twhile ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {\r\n\t\t\tevent.currentTarget = matched.elem;\r\n\r\n\t\t\tj = 0;\r\n\t\t\twhile ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {\r\n\r\n\t\t\t\t// Triggered event must either 1) have no namespace, or 2) have namespace(s)\r\n\t\t\t\t// a subset or equal to those in the bound event (both can have no namespace).\r\n\t\t\t\tif ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {\r\n\r\n\t\t\t\t\tevent.handleObj = handleObj;\r\n\t\t\t\t\tevent.data = handleObj.data;\r\n\r\n\t\t\t\t\tret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )\r\n\t\t\t\t\t\t\t.apply( matched.elem, args );\r\n\r\n\t\t\t\t\tif ( ret !== undefined ) {\r\n\t\t\t\t\t\tif ( (event.result = ret) === false ) {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Call the postDispatch hook for the mapped type\r\n\t\tif ( special.postDispatch ) {\r\n\t\t\tspecial.postDispatch.call( this, event );\r\n\t\t}\r\n\r\n\t\treturn event.result;\r\n\t},\r\n\r\n\thandlers: function( event, handlers ) {\r\n\t\tvar i, matches, sel, handleObj,\r\n\t\t\thandlerQueue = [],\r\n\t\t\tdelegateCount = handlers.delegateCount,\r\n\t\t\tcur = event.target;\r\n\r\n\t\t// Find delegate handlers\r\n\t\t// Black-hole SVG <use> instance trees (#13180)\r\n\t\t// Avoid non-left-click bubbling in Firefox (#3861)\r\n\t\tif ( delegateCount && cur.nodeType && (!event.button || event.type !== \"click\") ) {\r\n\r\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\r\n\r\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\r\n\t\t\t\tif ( cur.disabled !== true || event.type !== \"click\" ) {\r\n\t\t\t\t\tmatches = [];\r\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\r\n\t\t\t\t\t\thandleObj = handlers[ i ];\r\n\r\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\r\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\r\n\r\n\t\t\t\t\t\tif ( matches[ sel ] === undefined ) {\r\n\t\t\t\t\t\t\tmatches[ sel ] = handleObj.needsContext ?\r\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) >= 0 :\r\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( matches[ sel ] ) {\r\n\t\t\t\t\t\t\tmatches.push( handleObj );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( matches.length ) {\r\n\t\t\t\t\t\thandlerQueue.push({ elem: cur, handlers: matches });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Add the remaining (directly-bound) handlers\r\n\t\tif ( delegateCount < handlers.length ) {\r\n\t\t\thandlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });\r\n\t\t}\r\n\r\n\t\treturn handlerQueue;\r\n\t},\r\n\r\n\t// Includes some event props shared by KeyEvent and MouseEvent\r\n\tprops: \"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),\r\n\r\n\tfixHooks: {},\r\n\r\n\tkeyHooks: {\r\n\t\tprops: \"char charCode key keyCode\".split(\" \"),\r\n\t\tfilter: function( event, original ) {\r\n\r\n\t\t\t// Add which for key events\r\n\t\t\tif ( event.which == null ) {\r\n\t\t\t\tevent.which = original.charCode != null ? original.charCode : original.keyCode;\r\n\t\t\t}\r\n\r\n\t\t\treturn event;\r\n\t\t}\r\n\t},\r\n\r\n\tmouseHooks: {\r\n\t\tprops: \"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),\r\n\t\tfilter: function( event, original ) {\r\n\t\t\tvar eventDoc, doc, body,\r\n\t\t\t\tbutton = original.button;\r\n\r\n\t\t\t// Calculate pageX/Y if missing and clientX/Y available\r\n\t\t\tif ( event.pageX == null && original.clientX != null ) {\r\n\t\t\t\teventDoc = event.target.ownerDocument || document;\r\n\t\t\t\tdoc = eventDoc.documentElement;\r\n\t\t\t\tbody = eventDoc.body;\r\n\r\n\t\t\t\tevent.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\r\n\t\t\t\tevent.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\r\n\t\t\t}\r\n\r\n\t\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\r\n\t\t\t// Note: button is not normalized, so don't use it\r\n\t\t\tif ( !event.which && button !== undefined ) {\r\n\t\t\t\tevent.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\r\n\t\t\t}\r\n\r\n\t\t\treturn event;\r\n\t\t}\r\n\t},\r\n\r\n\tfix: function( event ) {\r\n\t\tif ( event[ jQuery.expando ] ) {\r\n\t\t\treturn event;\r\n\t\t}\r\n\r\n\t\t// Create a writable copy of the event object and normalize some properties\r\n\t\tvar i, prop, copy,\r\n\t\t\ttype = event.type,\r\n\t\t\toriginalEvent = event,\r\n\t\t\tfixHook = this.fixHooks[ type ];\r\n\r\n\t\tif ( !fixHook ) {\r\n\t\t\tthis.fixHooks[ type ] = fixHook =\r\n\t\t\t\trmouseEvent.test( type ) ? this.mouseHooks :\r\n\t\t\t\trkeyEvent.test( type ) ? this.keyHooks :\r\n\t\t\t\t{};\r\n\t\t}\r\n\t\tcopy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;\r\n\r\n\t\tevent = new jQuery.Event( originalEvent );\r\n\r\n\t\ti = copy.length;\r\n\t\twhile ( i-- ) {\r\n\t\t\tprop = copy[ i ];\r\n\t\t\tevent[ prop ] = originalEvent[ prop ];\r\n\t\t}\r\n\r\n\t\t// Support: Cordova 2.5 (WebKit) (#13255)\r\n\t\t// All events should have a target; Cordova deviceready doesn't\r\n\t\tif ( !event.target ) {\r\n\t\t\tevent.target = document;\r\n\t\t}\r\n\r\n\t\t// Support: Safari 6.0+, Chrome<28\r\n\t\t// Target should not be a text node (#504, #13143)\r\n\t\tif ( event.target.nodeType === 3 ) {\r\n\t\t\tevent.target = event.target.parentNode;\r\n\t\t}\r\n\r\n\t\treturn fixHook.filter ? fixHook.filter( event, originalEvent ) : event;\r\n\t},\r\n\r\n\tspecial: {\r\n\t\tload: {\r\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\r\n\t\t\tnoBubble: true\r\n\t\t},\r\n\t\tfocus: {\r\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\r\n\t\t\ttrigger: function() {\r\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\r\n\t\t\t\t\tthis.focus();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdelegateType: \"focusin\"\r\n\t\t},\r\n\t\tblur: {\r\n\t\t\ttrigger: function() {\r\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\r\n\t\t\t\t\tthis.blur();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdelegateType: \"focusout\"\r\n\t\t},\r\n\t\tclick: {\r\n\t\t\t// For checkbox, fire native event so checked state will be right\r\n\t\t\ttrigger: function() {\r\n\t\t\t\tif ( this.type === \"checkbox\" && this.click && jQuery.nodeName( this, \"input\" ) ) {\r\n\t\t\t\t\tthis.click();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\r\n\t\t\t_default: function( event ) {\r\n\t\t\t\treturn jQuery.nodeName( event.target, \"a\" );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tbeforeunload: {\r\n\t\t\tpostDispatch: function( event ) {\r\n\r\n\t\t\t\t// Support: Firefox 20+\r\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\r\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\r\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsimulate: function( type, elem, event, bubble ) {\r\n\t\t// Piggyback on a donor event to simulate a different one.\r\n\t\t// Fake originalEvent to avoid donor's stopPropagation, but if the\r\n\t\t// simulated event prevents default then we do the same on the donor.\r\n\t\tvar e = jQuery.extend(\r\n\t\t\tnew jQuery.Event(),\r\n\t\t\tevent,\r\n\t\t\t{\r\n\t\t\t\ttype: type,\r\n\t\t\t\tisSimulated: true,\r\n\t\t\t\toriginalEvent: {}\r\n\t\t\t}\r\n\t\t);\r\n\t\tif ( bubble ) {\r\n\t\t\tjQuery.event.trigger( e, null, elem );\r\n\t\t} else {\r\n\t\t\tjQuery.event.dispatch.call( elem, e );\r\n\t\t}\r\n\t\tif ( e.isDefaultPrevented() ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n};\r\n\r\njQuery.removeEvent = function( elem, type, handle ) {\r\n\tif ( elem.removeEventListener ) {\r\n\t\telem.removeEventListener( type, handle, false );\r\n\t}\r\n};\r\n\r\njQuery.Event = function( src, props ) {\r\n\t// Allow instantiation without the 'new' keyword\r\n\tif ( !(this instanceof jQuery.Event) ) {\r\n\t\treturn new jQuery.Event( src, props );\r\n\t}\r\n\r\n\t// Event object\r\n\tif ( src && src.type ) {\r\n\t\tthis.originalEvent = src;\r\n\t\tthis.type = src.type;\r\n\r\n\t\t// Events bubbling up the document may have been marked as prevented\r\n\t\t// by a handler lower down the tree; reflect the correct value.\r\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\r\n\t\t\t\tsrc.defaultPrevented === undefined &&\r\n\t\t\t\t// Support: Android<4.0\r\n\t\t\t\tsrc.returnValue === false ?\r\n\t\t\treturnTrue :\r\n\t\t\treturnFalse;\r\n\r\n\t// Event type\r\n\t} else {\r\n\t\tthis.type = src;\r\n\t}\r\n\r\n\t// Put explicitly provided properties onto the event object\r\n\tif ( props ) {\r\n\t\tjQuery.extend( this, props );\r\n\t}\r\n\r\n\t// Create a timestamp if incoming event doesn't have one\r\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\r\n\r\n\t// Mark it as fixed\r\n\tthis[ jQuery.expando ] = true;\r\n};\r\n\r\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\r\n// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\r\njQuery.Event.prototype = {\r\n\tisDefaultPrevented: returnFalse,\r\n\tisPropagationStopped: returnFalse,\r\n\tisImmediatePropagationStopped: returnFalse,\r\n\r\n\tpreventDefault: function() {\r\n\t\tvar e = this.originalEvent;\r\n\r\n\t\tthis.isDefaultPrevented = returnTrue;\r\n\r\n\t\tif ( e && e.preventDefault ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t},\r\n\tstopPropagation: function() {\r\n\t\tvar e = this.originalEvent;\r\n\r\n\t\tthis.isPropagationStopped = returnTrue;\r\n\r\n\t\tif ( e && e.stopPropagation ) {\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\t},\r\n\tstopImmediatePropagation: function() {\r\n\t\tvar e = this.originalEvent;\r\n\r\n\t\tthis.isImmediatePropagationStopped = returnTrue;\r\n\r\n\t\tif ( e && e.stopImmediatePropagation ) {\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t}\r\n\r\n\t\tthis.stopPropagation();\r\n\t}\r\n};\r\n\r\n// Create mouseenter/leave events using mouseover/out and event-time checks\r\n// Support: Chrome 15+\r\njQuery.each({\r\n\tmouseenter: \"mouseover\",\r\n\tmouseleave: \"mouseout\",\r\n\tpointerenter: \"pointerover\",\r\n\tpointerleave: \"pointerout\"\r\n}, function( orig, fix ) {\r\n\tjQuery.event.special[ orig ] = {\r\n\t\tdelegateType: fix,\r\n\t\tbindType: fix,\r\n\r\n\t\thandle: function( event ) {\r\n\t\t\tvar ret,\r\n\t\t\t\ttarget = this,\r\n\t\t\t\trelated = event.relatedTarget,\r\n\t\t\t\thandleObj = event.handleObj;\r\n\r\n\t\t\t// For mousenter/leave call the handler if related is outside the target.\r\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\r\n\t\t\tif ( !related || (related !== target && !jQuery.contains( target, related )) ) {\r\n\t\t\t\tevent.type = handleObj.origType;\r\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\r\n\t\t\t\tevent.type = fix;\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t}\r\n\t};\r\n});\r\n\r\n// Support: Firefox, Chrome, Safari\r\n// Create \"bubbling\" focus and blur events\r\nif ( !support.focusinBubbles ) {\r\n\tjQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\r\n\r\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\r\n\t\tvar handler = function( event ) {\r\n\t\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );\r\n\t\t\t};\r\n\r\n\t\tjQuery.event.special[ fix ] = {\r\n\t\t\tsetup: function() {\r\n\t\t\t\tvar doc = this.ownerDocument || this,\r\n\t\t\t\t\tattaches = data_priv.access( doc, fix );\r\n\r\n\t\t\t\tif ( !attaches ) {\r\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\r\n\t\t\t\t}\r\n\t\t\t\tdata_priv.access( doc, fix, ( attaches || 0 ) + 1 );\r\n\t\t\t},\r\n\t\t\tteardown: function() {\r\n\t\t\t\tvar doc = this.ownerDocument || this,\r\n\t\t\t\t\tattaches = data_priv.access( doc, fix ) - 1;\r\n\r\n\t\t\t\tif ( !attaches ) {\r\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\r\n\t\t\t\t\tdata_priv.remove( doc, fix );\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdata_priv.access( doc, fix, attaches );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n}\r\n\r\njQuery.fn.extend({\r\n\r\n\ton: function( types, selector, data, fn, /*INTERNAL*/ one ) {\r\n\t\tvar origFn, type;\r\n\r\n\t\t// Types can be a map of types/handlers\r\n\t\tif ( typeof types === \"object\" ) {\r\n\t\t\t// ( types-Object, selector, data )\r\n\t\t\tif ( typeof selector !== \"string\" ) {\r\n\t\t\t\t// ( types-Object, data )\r\n\t\t\t\tdata = data || selector;\r\n\t\t\t\tselector = undefined;\r\n\t\t\t}\r\n\t\t\tfor ( type in types ) {\r\n\t\t\t\tthis.on( type, selector, data, types[ type ], one );\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif ( data == null && fn == null ) {\r\n\t\t\t// ( types, fn )\r\n\t\t\tfn = selector;\r\n\t\t\tdata = selector = undefined;\r\n\t\t} else if ( fn == null ) {\r\n\t\t\tif ( typeof selector === \"string\" ) {\r\n\t\t\t\t// ( types, selector, fn )\r\n\t\t\t\tfn = data;\r\n\t\t\t\tdata = undefined;\r\n\t\t\t} else {\r\n\t\t\t\t// ( types, data, fn )\r\n\t\t\t\tfn = data;\r\n\t\t\t\tdata = selector;\r\n\t\t\t\tselector = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ( fn === false ) {\r\n\t\t\tfn = returnFalse;\r\n\t\t} else if ( !fn ) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif ( one === 1 ) {\r\n\t\t\torigFn = fn;\r\n\t\t\tfn = function( event ) {\r\n\t\t\t\t// Can use an empty set, since event contains the info\r\n\t\t\t\tjQuery().off( event );\r\n\t\t\t\treturn origFn.apply( this, arguments );\r\n\t\t\t};\r\n\t\t\t// Use same guid so caller can remove using origFn\r\n\t\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\r\n\t\t}\r\n\t\treturn this.each( function() {\r\n\t\t\tjQuery.event.add( this, types, fn, data, selector );\r\n\t\t});\r\n\t},\r\n\tone: function( types, selector, data, fn ) {\r\n\t\treturn this.on( types, selector, data, fn, 1 );\r\n\t},\r\n\toff: function( types, selector, fn ) {\r\n\t\tvar handleObj, type;\r\n\t\tif ( types && types.preventDefault && types.handleObj ) {\r\n\t\t\t// ( event )  dispatched jQuery.Event\r\n\t\t\thandleObj = types.handleObj;\r\n\t\t\tjQuery( types.delegateTarget ).off(\r\n\t\t\t\thandleObj.namespace ? handleObj.origType + \".\" + handleObj.namespace : handleObj.origType,\r\n\t\t\t\thandleObj.selector,\r\n\t\t\t\thandleObj.handler\r\n\t\t\t);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif ( typeof types === \"object\" ) {\r\n\t\t\t// ( types-object [, selector] )\r\n\t\t\tfor ( type in types ) {\r\n\t\t\t\tthis.off( type, selector, types[ type ] );\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif ( selector === false || typeof selector === \"function\" ) {\r\n\t\t\t// ( types [, fn] )\r\n\t\t\tfn = selector;\r\n\t\t\tselector = undefined;\r\n\t\t}\r\n\t\tif ( fn === false ) {\r\n\t\t\tfn = returnFalse;\r\n\t\t}\r\n\t\treturn this.each(function() {\r\n\t\t\tjQuery.event.remove( this, types, fn, selector );\r\n\t\t});\r\n\t},\r\n\r\n\ttrigger: function( type, data ) {\r\n\t\treturn this.each(function() {\r\n\t\t\tjQuery.event.trigger( type, data, this );\r\n\t\t});\r\n\t},\r\n\ttriggerHandler: function( type, data ) {\r\n\t\tvar elem = this[0];\r\n\t\tif ( elem ) {\r\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nvar\r\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,\r\n\trtagName = /<([\\w:]+)/,\r\n\trhtml = /<|&#?\\w+;/,\r\n\trnoInnerhtml = /<(?:script|style|link)/i,\r\n\t// checked=\"checked\" or checked\r\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\r\n\trscriptType = /^$|\\/(?:java|ecma)script/i,\r\n\trscriptTypeMasked = /^true\\/(.*)/,\r\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,\r\n\r\n\t// We have to close these tags to support XHTML (#13200)\r\n\twrapMap = {\r\n\r\n\t\t// Support: IE9\r\n\t\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\r\n\r\n\t\tthead: [ 1, \"<table>\", \"</table>\" ],\r\n\t\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\r\n\t\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\r\n\t\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\r\n\r\n\t\t_default: [ 0, \"\", \"\" ]\r\n\t};\r\n\r\n// Support: IE9\r\nwrapMap.optgroup = wrapMap.option;\r\n\r\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\r\nwrapMap.th = wrapMap.td;\r\n\r\n// Support: 1.x compatibility\r\n// Manipulating tables requires a tbody\r\nfunction manipulationTarget( elem, content ) {\r\n\treturn jQuery.nodeName( elem, \"table\" ) &&\r\n\t\tjQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ?\r\n\r\n\t\telem.getElementsByTagName(\"tbody\")[0] ||\r\n\t\t\telem.appendChild( elem.ownerDocument.createElement(\"tbody\") ) :\r\n\t\telem;\r\n}\r\n\r\n// Replace/restore the type attribute of script elements for safe DOM manipulation\r\nfunction disableScript( elem ) {\r\n\telem.type = (elem.getAttribute(\"type\") !== null) + \"/\" + elem.type;\r\n\treturn elem;\r\n}\r\nfunction restoreScript( elem ) {\r\n\tvar match = rscriptTypeMasked.exec( elem.type );\r\n\r\n\tif ( match ) {\r\n\t\telem.type = match[ 1 ];\r\n\t} else {\r\n\t\telem.removeAttribute(\"type\");\r\n\t}\r\n\r\n\treturn elem;\r\n}\r\n\r\n// Mark scripts as having already been evaluated\r\nfunction setGlobalEval( elems, refElements ) {\r\n\tvar i = 0,\r\n\t\tl = elems.length;\r\n\r\n\tfor ( ; i < l; i++ ) {\r\n\t\tdata_priv.set(\r\n\t\t\telems[ i ], \"globalEval\", !refElements || data_priv.get( refElements[ i ], \"globalEval\" )\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction cloneCopyEvent( src, dest ) {\r\n\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\r\n\r\n\tif ( dest.nodeType !== 1 ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// 1. Copy private data: events, handlers, etc.\r\n\tif ( data_priv.hasData( src ) ) {\r\n\t\tpdataOld = data_priv.access( src );\r\n\t\tpdataCur = data_priv.set( dest, pdataOld );\r\n\t\tevents = pdataOld.events;\r\n\r\n\t\tif ( events ) {\r\n\t\t\tdelete pdataCur.handle;\r\n\t\t\tpdataCur.events = {};\r\n\r\n\t\t\tfor ( type in events ) {\r\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\r\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 2. Copy user data\r\n\tif ( data_user.hasData( src ) ) {\r\n\t\tudataOld = data_user.access( src );\r\n\t\tudataCur = jQuery.extend( {}, udataOld );\r\n\r\n\t\tdata_user.set( dest, udataCur );\r\n\t}\r\n}\r\n\r\nfunction getAll( context, tag ) {\r\n\tvar ret = context.getElementsByTagName ? context.getElementsByTagName( tag || \"*\" ) :\r\n\t\t\tcontext.querySelectorAll ? context.querySelectorAll( tag || \"*\" ) :\r\n\t\t\t[];\r\n\r\n\treturn tag === undefined || tag && jQuery.nodeName( context, tag ) ?\r\n\t\tjQuery.merge( [ context ], ret ) :\r\n\t\tret;\r\n}\r\n\r\n// Fix IE bugs, see support tests\r\nfunction fixInput( src, dest ) {\r\n\tvar nodeName = dest.nodeName.toLowerCase();\r\n\r\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\r\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\r\n\t\tdest.checked = src.checked;\r\n\r\n\t// Fails to return the selected option to the default selected state when cloning options\r\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\r\n\t\tdest.defaultValue = src.defaultValue;\r\n\t}\r\n}\r\n\r\njQuery.extend({\r\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\r\n\t\tvar i, l, srcElements, destElements,\r\n\t\t\tclone = elem.cloneNode( true ),\r\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\r\n\r\n\t\t// Fix IE cloning issues\r\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\r\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\r\n\r\n\t\t\t// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2\r\n\t\t\tdestElements = getAll( clone );\r\n\t\t\tsrcElements = getAll( elem );\r\n\r\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\r\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Copy the events from the original to the clone\r\n\t\tif ( dataAndEvents ) {\r\n\t\t\tif ( deepDataAndEvents ) {\r\n\t\t\t\tsrcElements = srcElements || getAll( elem );\r\n\t\t\t\tdestElements = destElements || getAll( clone );\r\n\r\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\r\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcloneCopyEvent( elem, clone );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Preserve script evaluation history\r\n\t\tdestElements = getAll( clone, \"script\" );\r\n\t\tif ( destElements.length > 0 ) {\r\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\r\n\t\t}\r\n\r\n\t\t// Return the cloned set\r\n\t\treturn clone;\r\n\t},\r\n\r\n\tbuildFragment: function( elems, context, scripts, selection ) {\r\n\t\tvar elem, tmp, tag, wrap, contains, j,\r\n\t\t\tfragment = context.createDocumentFragment(),\r\n\t\t\tnodes = [],\r\n\t\t\ti = 0,\r\n\t\t\tl = elems.length;\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\telem = elems[ i ];\r\n\r\n\t\t\tif ( elem || elem === 0 ) {\r\n\r\n\t\t\t\t// Add nodes directly\r\n\t\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\r\n\t\t\t\t\t// Support: QtWebKit, PhantomJS\r\n\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\r\n\t\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\r\n\r\n\t\t\t\t// Convert non-html into a text node\r\n\t\t\t\t} else if ( !rhtml.test( elem ) ) {\r\n\t\t\t\t\tnodes.push( context.createTextNode( elem ) );\r\n\r\n\t\t\t\t// Convert html into DOM nodes\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement(\"div\") );\r\n\r\n\t\t\t\t\t// Deserialize a standard representation\r\n\t\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\r\n\t\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\r\n\t\t\t\t\ttmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, \"<$1></$2>\" ) + wrap[ 2 ];\r\n\r\n\t\t\t\t\t// Descend through wrappers to the right content\r\n\t\t\t\t\tj = wrap[ 0 ];\r\n\t\t\t\t\twhile ( j-- ) {\r\n\t\t\t\t\t\ttmp = tmp.lastChild;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Support: QtWebKit, PhantomJS\r\n\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\r\n\t\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\r\n\r\n\t\t\t\t\t// Remember the top-level container\r\n\t\t\t\t\ttmp = fragment.firstChild;\r\n\r\n\t\t\t\t\t// Ensure the created nodes are orphaned (#12392)\r\n\t\t\t\t\ttmp.textContent = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remove wrapper from fragment\r\n\t\tfragment.textContent = \"\";\r\n\r\n\t\ti = 0;\r\n\t\twhile ( (elem = nodes[ i++ ]) ) {\r\n\r\n\t\t\t// #4087 - If origin and destination elements are the same, and this is\r\n\t\t\t// that element, do not do anything\r\n\t\t\tif ( selection && jQuery.inArray( elem, selection ) !== -1 ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\r\n\r\n\t\t\t// Append to fragment\r\n\t\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\r\n\r\n\t\t\t// Preserve script evaluation history\r\n\t\t\tif ( contains ) {\r\n\t\t\t\tsetGlobalEval( tmp );\r\n\t\t\t}\r\n\r\n\t\t\t// Capture executables\r\n\t\t\tif ( scripts ) {\r\n\t\t\t\tj = 0;\r\n\t\t\t\twhile ( (elem = tmp[ j++ ]) ) {\r\n\t\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\r\n\t\t\t\t\t\tscripts.push( elem );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn fragment;\r\n\t},\r\n\r\n\tcleanData: function( elems ) {\r\n\t\tvar data, elem, type, key,\r\n\t\t\tspecial = jQuery.event.special,\r\n\t\t\ti = 0;\r\n\r\n\t\tfor ( ; (elem = elems[ i ]) !== undefined; i++ ) {\r\n\t\t\tif ( jQuery.acceptData( elem ) ) {\r\n\t\t\t\tkey = elem[ data_priv.expando ];\r\n\r\n\t\t\t\tif ( key && (data = data_priv.cache[ key ]) ) {\r\n\t\t\t\t\tif ( data.events ) {\r\n\t\t\t\t\t\tfor ( type in data.events ) {\r\n\t\t\t\t\t\t\tif ( special[ type ] ) {\r\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\r\n\r\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( data_priv.cache[ key ] ) {\r\n\t\t\t\t\t\t// Discard any remaining `private` data\r\n\t\t\t\t\t\tdelete data_priv.cache[ key ];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Discard any remaining `user` data\r\n\t\t\tdelete data_user.cache[ elem[ data_user.expando ] ];\r\n\t\t}\r\n\t}\r\n});\r\n\r\njQuery.fn.extend({\r\n\ttext: function( value ) {\r\n\t\treturn access( this, function( value ) {\r\n\t\t\treturn value === undefined ?\r\n\t\t\t\tjQuery.text( this ) :\r\n\t\t\t\tthis.empty().each(function() {\r\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\r\n\t\t\t\t\t\tthis.textContent = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}, null, value, arguments.length );\r\n\t},\r\n\r\n\tappend: function() {\r\n\t\treturn this.domManip( arguments, function( elem ) {\r\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\r\n\t\t\t\tvar target = manipulationTarget( this, elem );\r\n\t\t\t\ttarget.appendChild( elem );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tprepend: function() {\r\n\t\treturn this.domManip( arguments, function( elem ) {\r\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\r\n\t\t\t\tvar target = manipulationTarget( this, elem );\r\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tbefore: function() {\r\n\t\treturn this.domManip( arguments, function( elem ) {\r\n\t\t\tif ( this.parentNode ) {\r\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tafter: function() {\r\n\t\treturn this.domManip( arguments, function( elem ) {\r\n\t\t\tif ( this.parentNode ) {\r\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tremove: function( selector, keepData /* Internal Use Only */ ) {\r\n\t\tvar elem,\r\n\t\t\telems = selector ? jQuery.filter( selector, this ) : this,\r\n\t\t\ti = 0;\r\n\r\n\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\r\n\t\t\tif ( !keepData && elem.nodeType === 1 ) {\r\n\t\t\t\tjQuery.cleanData( getAll( elem ) );\r\n\t\t\t}\r\n\r\n\t\t\tif ( elem.parentNode ) {\r\n\t\t\t\tif ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {\r\n\t\t\t\t\tsetGlobalEval( getAll( elem, \"script\" ) );\r\n\t\t\t\t}\r\n\t\t\t\telem.parentNode.removeChild( elem );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tempty: function() {\r\n\t\tvar elem,\r\n\t\t\ti = 0;\r\n\r\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\r\n\t\t\tif ( elem.nodeType === 1 ) {\r\n\r\n\t\t\t\t// Prevent memory leaks\r\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\r\n\r\n\t\t\t\t// Remove any remaining nodes\r\n\t\t\t\telem.textContent = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\r\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\r\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\r\n\r\n\t\treturn this.map(function() {\r\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\r\n\t\t});\r\n\t},\r\n\r\n\thtml: function( value ) {\r\n\t\treturn access( this, function( value ) {\r\n\t\t\tvar elem = this[ 0 ] || {},\r\n\t\t\t\ti = 0,\r\n\t\t\t\tl = this.length;\r\n\r\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\r\n\t\t\t\treturn elem.innerHTML;\r\n\t\t\t}\r\n\r\n\t\t\t// See if we can take a shortcut and just use innerHTML\r\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\r\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\r\n\r\n\t\t\t\tvalue = value.replace( rxhtmlTag, \"<$1></$2>\" );\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfor ( ; i < l; i++ ) {\r\n\t\t\t\t\t\telem = this[ i ] || {};\r\n\r\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\r\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\r\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\r\n\t\t\t\t\t\t\telem.innerHTML = value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telem = 0;\r\n\r\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\r\n\t\t\t\t} catch( e ) {}\r\n\t\t\t}\r\n\r\n\t\t\tif ( elem ) {\r\n\t\t\t\tthis.empty().append( value );\r\n\t\t\t}\r\n\t\t}, null, value, arguments.length );\r\n\t},\r\n\r\n\treplaceWith: function() {\r\n\t\tvar arg = arguments[ 0 ];\r\n\r\n\t\t// Make the changes, replacing each context element with the new content\r\n\t\tthis.domManip( arguments, function( elem ) {\r\n\t\t\targ = this.parentNode;\r\n\r\n\t\t\tjQuery.cleanData( getAll( this ) );\r\n\r\n\t\t\tif ( arg ) {\r\n\t\t\t\targ.replaceChild( elem, this );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Force removal if there was no new content (e.g., from empty arguments)\r\n\t\treturn arg && (arg.length || arg.nodeType) ? this : this.remove();\r\n\t},\r\n\r\n\tdetach: function( selector ) {\r\n\t\treturn this.remove( selector, true );\r\n\t},\r\n\r\n\tdomManip: function( args, callback ) {\r\n\r\n\t\t// Flatten any nested arrays\r\n\t\targs = concat.apply( [], args );\r\n\r\n\t\tvar fragment, first, scripts, hasScripts, node, doc,\r\n\t\t\ti = 0,\r\n\t\t\tl = this.length,\r\n\t\t\tset = this,\r\n\t\t\tiNoClone = l - 1,\r\n\t\t\tvalue = args[ 0 ],\r\n\t\t\tisFunction = jQuery.isFunction( value );\r\n\r\n\t\t// We can't cloneNode fragments that contain checked, in WebKit\r\n\t\tif ( isFunction ||\r\n\t\t\t\t( l > 1 && typeof value === \"string\" &&\r\n\t\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\r\n\t\t\treturn this.each(function( index ) {\r\n\t\t\t\tvar self = set.eq( index );\r\n\t\t\t\tif ( isFunction ) {\r\n\t\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\r\n\t\t\t\t}\r\n\t\t\t\tself.domManip( args, callback );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( l ) {\r\n\t\t\tfragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );\r\n\t\t\tfirst = fragment.firstChild;\r\n\r\n\t\t\tif ( fragment.childNodes.length === 1 ) {\r\n\t\t\t\tfragment = first;\r\n\t\t\t}\r\n\r\n\t\t\tif ( first ) {\r\n\t\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\r\n\t\t\t\thasScripts = scripts.length;\r\n\r\n\t\t\t\t// Use the original fragment for the last item instead of the first because it can end up\r\n\t\t\t\t// being emptied incorrectly in certain situations (#8070).\r\n\t\t\t\tfor ( ; i < l; i++ ) {\r\n\t\t\t\t\tnode = fragment;\r\n\r\n\t\t\t\t\tif ( i !== iNoClone ) {\r\n\t\t\t\t\t\tnode = jQuery.clone( node, true, true );\r\n\r\n\t\t\t\t\t\t// Keep references to cloned scripts for later restoration\r\n\t\t\t\t\t\tif ( hasScripts ) {\r\n\t\t\t\t\t\t\t// Support: QtWebKit\r\n\t\t\t\t\t\t\t// jQuery.merge because push.apply(_, arraylike) throws\r\n\t\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcallback.call( this[ i ], node, i );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasScripts ) {\r\n\t\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\r\n\r\n\t\t\t\t\t// Reenable scripts\r\n\t\t\t\t\tjQuery.map( scripts, restoreScript );\r\n\r\n\t\t\t\t\t// Evaluate executable scripts on first document insertion\r\n\t\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\r\n\t\t\t\t\t\tnode = scripts[ i ];\r\n\t\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\r\n\t\t\t\t\t\t\t!data_priv.access( node, \"globalEval\" ) && jQuery.contains( doc, node ) ) {\r\n\r\n\t\t\t\t\t\t\tif ( node.src ) {\r\n\t\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\r\n\t\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\r\n\t\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tjQuery.globalEval( node.textContent.replace( rcleanScript, \"\" ) );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\njQuery.each({\r\n\tappendTo: \"append\",\r\n\tprependTo: \"prepend\",\r\n\tinsertBefore: \"before\",\r\n\tinsertAfter: \"after\",\r\n\treplaceAll: \"replaceWith\"\r\n}, function( name, original ) {\r\n\tjQuery.fn[ name ] = function( selector ) {\r\n\t\tvar elems,\r\n\t\t\tret = [],\r\n\t\t\tinsert = jQuery( selector ),\r\n\t\t\tlast = insert.length - 1,\r\n\t\t\ti = 0;\r\n\r\n\t\tfor ( ; i <= last; i++ ) {\r\n\t\t\telems = i === last ? this : this.clone( true );\r\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\r\n\r\n\t\t\t// Support: QtWebKit\r\n\t\t\t// .get() because push.apply(_, arraylike) throws\r\n\t\t\tpush.apply( ret, elems.get() );\r\n\t\t}\r\n\r\n\t\treturn this.pushStack( ret );\r\n\t};\r\n});\r\n\r\n\r\nvar iframe,\r\n\telemdisplay = {};\r\n\r\n/**\r\n * Retrieve the actual display of a element\r\n * @param {String} name nodeName of the element\r\n * @param {Object} doc Document object\r\n */\r\n// Called only from within defaultDisplay\r\nfunction actualDisplay( name, doc ) {\r\n\tvar style,\r\n\t\telem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),\r\n\r\n\t\t// getDefaultComputedStyle might be reliably used only on attached element\r\n\t\tdisplay = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?\r\n\r\n\t\t\t// Use of this method is a temporary fix (more like optimization) until something better comes along,\r\n\t\t\t// since it was removed from specification and supported only in FF\r\n\t\t\tstyle.display : jQuery.css( elem[ 0 ], \"display\" );\r\n\r\n\t// We don't have any data stored on the element,\r\n\t// so use \"detach\" method as fast way to get rid of the element\r\n\telem.detach();\r\n\r\n\treturn display;\r\n}\r\n\r\n/**\r\n * Try to determine the default display value of an element\r\n * @param {String} nodeName\r\n */\r\nfunction defaultDisplay( nodeName ) {\r\n\tvar doc = document,\r\n\t\tdisplay = elemdisplay[ nodeName ];\r\n\r\n\tif ( !display ) {\r\n\t\tdisplay = actualDisplay( nodeName, doc );\r\n\r\n\t\t// If the simple way fails, read from inside an iframe\r\n\t\tif ( display === \"none\" || !display ) {\r\n\r\n\t\t\t// Use the already-created iframe if possible\r\n\t\t\tiframe = (iframe || jQuery( \"<iframe frameborder='0' width='0' height='0'/>\" )).appendTo( doc.documentElement );\r\n\r\n\t\t\t// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse\r\n\t\t\tdoc = iframe[ 0 ].contentDocument;\r\n\r\n\t\t\t// Support: IE\r\n\t\t\tdoc.write();\r\n\t\t\tdoc.close();\r\n\r\n\t\t\tdisplay = actualDisplay( nodeName, doc );\r\n\t\t\tiframe.detach();\r\n\t\t}\r\n\r\n\t\t// Store the correct default display\r\n\t\telemdisplay[ nodeName ] = display;\r\n\t}\r\n\r\n\treturn display;\r\n}\r\nvar rmargin = (/^margin/);\r\n\r\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\r\n\r\nvar getStyles = function( elem ) {\r\n\t\t// Support: IE<=11+, Firefox<=30+ (#15098, #14150)\r\n\t\t// IE throws on elements created in popups\r\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\r\n\t\tif ( elem.ownerDocument.defaultView.opener ) {\r\n\t\t\treturn elem.ownerDocument.defaultView.getComputedStyle( elem, null );\r\n\t\t}\r\n\r\n\t\treturn window.getComputedStyle( elem, null );\r\n\t};\r\n\r\n\r\n\r\nfunction curCSS( elem, name, computed ) {\r\n\tvar width, minWidth, maxWidth, ret,\r\n\t\tstyle = elem.style;\r\n\r\n\tcomputed = computed || getStyles( elem );\r\n\r\n\t// Support: IE9\r\n\t// getPropertyValue is only needed for .css('filter') (#12537)\r\n\tif ( computed ) {\r\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\r\n\t}\r\n\r\n\tif ( computed ) {\r\n\r\n\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\r\n\t\t\tret = jQuery.style( elem, name );\r\n\t\t}\r\n\r\n\t\t// Support: iOS < 6\r\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\r\n\t\t// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels\r\n\t\t// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values\r\n\t\tif ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {\r\n\r\n\t\t\t// Remember the original values\r\n\t\t\twidth = style.width;\r\n\t\t\tminWidth = style.minWidth;\r\n\t\t\tmaxWidth = style.maxWidth;\r\n\r\n\t\t\t// Put in the new values to get a computed value out\r\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\r\n\t\t\tret = computed.width;\r\n\r\n\t\t\t// Revert the changed values\r\n\t\t\tstyle.width = width;\r\n\t\t\tstyle.minWidth = minWidth;\r\n\t\t\tstyle.maxWidth = maxWidth;\r\n\t\t}\r\n\t}\r\n\r\n\treturn ret !== undefined ?\r\n\t\t// Support: IE\r\n\t\t// IE returns zIndex value as an integer.\r\n\t\tret + \"\" :\r\n\t\tret;\r\n}\r\n\r\n\r\nfunction addGetHookIf( conditionFn, hookFn ) {\r\n\t// Define the hook, we'll check on the first run if it's really needed.\r\n\treturn {\r\n\t\tget: function() {\r\n\t\t\tif ( conditionFn() ) {\r\n\t\t\t\t// Hook not needed (or it's not possible to use it due\r\n\t\t\t\t// to missing dependency), remove it.\r\n\t\t\t\tdelete this.get;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\r\n\t\t\treturn (this.get = hookFn).apply( this, arguments );\r\n\t\t}\r\n\t};\r\n}\r\n\r\n\r\n(function() {\r\n\tvar pixelPositionVal, boxSizingReliableVal,\r\n\t\tdocElem = document.documentElement,\r\n\t\tcontainer = document.createElement( \"div\" ),\r\n\t\tdiv = document.createElement( \"div\" );\r\n\r\n\tif ( !div.style ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Support: IE9-11+\r\n\t// Style of cloned element affects source element cloned (#8908)\r\n\tdiv.style.backgroundClip = \"content-box\";\r\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\r\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\r\n\r\n\tcontainer.style.cssText = \"border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;\" +\r\n\t\t\"position:absolute\";\r\n\tcontainer.appendChild( div );\r\n\r\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\r\n\t// so they're executed at the same time to save the second computation.\r\n\tfunction computePixelPositionAndBoxSizingReliable() {\r\n\t\tdiv.style.cssText =\r\n\t\t\t// Support: Firefox<29, Android 2.3\r\n\t\t\t// Vendor-prefix box-sizing\r\n\t\t\t\"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;\" +\r\n\t\t\t\"box-sizing:border-box;display:block;margin-top:1%;top:1%;\" +\r\n\t\t\t\"border:1px;padding:1px;width:4px;position:absolute\";\r\n\t\tdiv.innerHTML = \"\";\r\n\t\tdocElem.appendChild( container );\r\n\r\n\t\tvar divStyle = window.getComputedStyle( div, null );\r\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\r\n\t\tboxSizingReliableVal = divStyle.width === \"4px\";\r\n\r\n\t\tdocElem.removeChild( container );\r\n\t}\r\n\r\n\t// Support: node.js jsdom\r\n\t// Don't assume that getComputedStyle is a property of the global object\r\n\tif ( window.getComputedStyle ) {\r\n\t\tjQuery.extend( support, {\r\n\t\t\tpixelPosition: function() {\r\n\r\n\t\t\t\t// This test is executed only once but we still do memoizing\r\n\t\t\t\t// since we can use the boxSizingReliable pre-computing.\r\n\t\t\t\t// No need to check if the test was already performed, though.\r\n\t\t\t\tcomputePixelPositionAndBoxSizingReliable();\r\n\t\t\t\treturn pixelPositionVal;\r\n\t\t\t},\r\n\t\t\tboxSizingReliable: function() {\r\n\t\t\t\tif ( boxSizingReliableVal == null ) {\r\n\t\t\t\t\tcomputePixelPositionAndBoxSizingReliable();\r\n\t\t\t\t}\r\n\t\t\t\treturn boxSizingReliableVal;\r\n\t\t\t},\r\n\t\t\treliableMarginRight: function() {\r\n\r\n\t\t\t\t// Support: Android 2.3\r\n\t\t\t\t// Check if div with explicit width and no margin-right incorrectly\r\n\t\t\t\t// gets computed margin-right based on width of container. (#3333)\r\n\t\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\r\n\t\t\t\t// This support function is only executed once so no memoizing is needed.\r\n\t\t\t\tvar ret,\r\n\t\t\t\t\tmarginDiv = div.appendChild( document.createElement( \"div\" ) );\r\n\r\n\t\t\t\t// Reset CSS: box-sizing; display; margin; border; padding\r\n\t\t\t\tmarginDiv.style.cssText = div.style.cssText =\r\n\t\t\t\t\t// Support: Firefox<29, Android 2.3\r\n\t\t\t\t\t// Vendor-prefix box-sizing\r\n\t\t\t\t\t\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;\" +\r\n\t\t\t\t\t\"box-sizing:content-box;display:block;margin:0;border:0;padding:0\";\r\n\t\t\t\tmarginDiv.style.marginRight = marginDiv.style.width = \"0\";\r\n\t\t\t\tdiv.style.width = \"1px\";\r\n\t\t\t\tdocElem.appendChild( container );\r\n\r\n\t\t\t\tret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );\r\n\r\n\t\t\t\tdocElem.removeChild( container );\r\n\t\t\t\tdiv.removeChild( marginDiv );\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n})();\r\n\r\n\r\n// A method for quickly swapping in/out CSS properties to get correct calculations.\r\njQuery.swap = function( elem, options, callback, args ) {\r\n\tvar ret, name,\r\n\t\told = {};\r\n\r\n\t// Remember the old values, and insert the new ones\r\n\tfor ( name in options ) {\r\n\t\told[ name ] = elem.style[ name ];\r\n\t\telem.style[ name ] = options[ name ];\r\n\t}\r\n\r\n\tret = callback.apply( elem, args || [] );\r\n\r\n\t// Revert the old values\r\n\tfor ( name in options ) {\r\n\t\telem.style[ name ] = old[ name ];\r\n\t}\r\n\r\n\treturn ret;\r\n};\r\n\r\n\r\nvar\r\n\t// Swappable if display is none or starts with table except \"table\", \"table-cell\", or \"table-caption\"\r\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\r\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\r\n\trnumsplit = new RegExp( \"^(\" + pnum + \")(.*)$\", \"i\" ),\r\n\trrelNum = new RegExp( \"^([+-])=(\" + pnum + \")\", \"i\" ),\r\n\r\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\r\n\tcssNormalTransform = {\r\n\t\tletterSpacing: \"0\",\r\n\t\tfontWeight: \"400\"\r\n\t},\r\n\r\n\tcssPrefixes = [ \"Webkit\", \"O\", \"Moz\", \"ms\" ];\r\n\r\n// Return a css property mapped to a potentially vendor prefixed property\r\nfunction vendorPropName( style, name ) {\r\n\r\n\t// Shortcut for names that are not vendor prefixed\r\n\tif ( name in style ) {\r\n\t\treturn name;\r\n\t}\r\n\r\n\t// Check for vendor prefixed names\r\n\tvar capName = name[0].toUpperCase() + name.slice(1),\r\n\t\torigName = name,\r\n\t\ti = cssPrefixes.length;\r\n\r\n\twhile ( i-- ) {\r\n\t\tname = cssPrefixes[ i ] + capName;\r\n\t\tif ( name in style ) {\r\n\t\t\treturn name;\r\n\t\t}\r\n\t}\r\n\r\n\treturn origName;\r\n}\r\n\r\nfunction setPositiveNumber( elem, value, subtract ) {\r\n\tvar matches = rnumsplit.exec( value );\r\n\treturn matches ?\r\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\r\n\t\tMath.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || \"px\" ) :\r\n\t\tvalue;\r\n}\r\n\r\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\r\n\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\r\n\t\t// If we already have the right measurement, avoid augmentation\r\n\t\t4 :\r\n\t\t// Otherwise initialize for horizontal or vertical properties\r\n\t\tname === \"width\" ? 1 : 0,\r\n\r\n\t\tval = 0;\r\n\r\n\tfor ( ; i < 4; i += 2 ) {\r\n\t\t// Both box models exclude margin, so add it if we want it\r\n\t\tif ( extra === \"margin\" ) {\r\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\r\n\t\t}\r\n\r\n\t\tif ( isBorderBox ) {\r\n\t\t\t// border-box includes padding, so remove it if we want content\r\n\t\t\tif ( extra === \"content\" ) {\r\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\r\n\t\t\t}\r\n\r\n\t\t\t// At this point, extra isn't border nor margin, so remove border\r\n\t\t\tif ( extra !== \"margin\" ) {\r\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// At this point, extra isn't content, so add padding\r\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\r\n\r\n\t\t\t// At this point, extra isn't content nor padding, so add border\r\n\t\t\tif ( extra !== \"padding\" ) {\r\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn val;\r\n}\r\n\r\nfunction getWidthOrHeight( elem, name, extra ) {\r\n\r\n\t// Start with offset property, which is equivalent to the border-box value\r\n\tvar valueIsBorderBox = true,\r\n\t\tval = name === \"width\" ? elem.offsetWidth : elem.offsetHeight,\r\n\t\tstyles = getStyles( elem ),\r\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\r\n\r\n\t// Some non-html elements return undefined for offsetWidth, so check for null/undefined\r\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\r\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\r\n\tif ( val <= 0 || val == null ) {\r\n\t\t// Fall back to computed then uncomputed css if necessary\r\n\t\tval = curCSS( elem, name, styles );\r\n\t\tif ( val < 0 || val == null ) {\r\n\t\t\tval = elem.style[ name ];\r\n\t\t}\r\n\r\n\t\t// Computed unit is not pixels. Stop here and return.\r\n\t\tif ( rnumnonpx.test(val) ) {\r\n\t\t\treturn val;\r\n\t\t}\r\n\r\n\t\t// Check for style in case a browser which returns unreliable values\r\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\r\n\t\tvalueIsBorderBox = isBorderBox &&\r\n\t\t\t( support.boxSizingReliable() || val === elem.style[ name ] );\r\n\r\n\t\t// Normalize \"\", auto, and prepare for extra\r\n\t\tval = parseFloat( val ) || 0;\r\n\t}\r\n\r\n\t// Use the active box-sizing model to add/subtract irrelevant styles\r\n\treturn ( val +\r\n\t\taugmentWidthOrHeight(\r\n\t\t\telem,\r\n\t\t\tname,\r\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\r\n\t\t\tvalueIsBorderBox,\r\n\t\t\tstyles\r\n\t\t)\r\n\t) + \"px\";\r\n}\r\n\r\nfunction showHide( elements, show ) {\r\n\tvar display, elem, hidden,\r\n\t\tvalues = [],\r\n\t\tindex = 0,\r\n\t\tlength = elements.length;\r\n\r\n\tfor ( ; index < length; index++ ) {\r\n\t\telem = elements[ index ];\r\n\t\tif ( !elem.style ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tvalues[ index ] = data_priv.get( elem, \"olddisplay\" );\r\n\t\tdisplay = elem.style.display;\r\n\t\tif ( show ) {\r\n\t\t\t// Reset the inline display of this element to learn if it is\r\n\t\t\t// being hidden by cascaded rules or not\r\n\t\t\tif ( !values[ index ] && display === \"none\" ) {\r\n\t\t\t\telem.style.display = \"\";\r\n\t\t\t}\r\n\r\n\t\t\t// Set elements which have been overridden with display: none\r\n\t\t\t// in a stylesheet to whatever the default browser style is\r\n\t\t\t// for such an element\r\n\t\t\tif ( elem.style.display === \"\" && isHidden( elem ) ) {\r\n\t\t\t\tvalues[ index ] = data_priv.access( elem, \"olddisplay\", defaultDisplay(elem.nodeName) );\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\thidden = isHidden( elem );\r\n\r\n\t\t\tif ( display !== \"none\" || !hidden ) {\r\n\t\t\t\tdata_priv.set( elem, \"olddisplay\", hidden ? display : jQuery.css( elem, \"display\" ) );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Set the display of most of the elements in a second loop\r\n\t// to avoid the constant reflow\r\n\tfor ( index = 0; index < length; index++ ) {\r\n\t\telem = elements[ index ];\r\n\t\tif ( !elem.style ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif ( !show || elem.style.display === \"none\" || elem.style.display === \"\" ) {\r\n\t\t\telem.style.display = show ? values[ index ] || \"\" : \"none\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn elements;\r\n}\r\n\r\njQuery.extend({\r\n\r\n\t// Add in style property hooks for overriding the default\r\n\t// behavior of getting and setting a style property\r\n\tcssHooks: {\r\n\t\topacity: {\r\n\t\t\tget: function( elem, computed ) {\r\n\t\t\t\tif ( computed ) {\r\n\r\n\t\t\t\t\t// We should always get a number back from opacity\r\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\r\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Don't automatically add \"px\" to these possibly-unitless properties\r\n\tcssNumber: {\r\n\t\t\"columnCount\": true,\r\n\t\t\"fillOpacity\": true,\r\n\t\t\"flexGrow\": true,\r\n\t\t\"flexShrink\": true,\r\n\t\t\"fontWeight\": true,\r\n\t\t\"lineHeight\": true,\r\n\t\t\"opacity\": true,\r\n\t\t\"order\": true,\r\n\t\t\"orphans\": true,\r\n\t\t\"widows\": true,\r\n\t\t\"zIndex\": true,\r\n\t\t\"zoom\": true\r\n\t},\r\n\r\n\t// Add in properties whose names you wish to fix before\r\n\t// setting or getting the value\r\n\tcssProps: {\r\n\t\t\"float\": \"cssFloat\"\r\n\t},\r\n\r\n\t// Get and set the style property on a DOM Node\r\n\tstyle: function( elem, name, value, extra ) {\r\n\r\n\t\t// Don't set styles on text and comment nodes\r\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Make sure that we're working with the right name\r\n\t\tvar ret, type, hooks,\r\n\t\t\torigName = jQuery.camelCase( name ),\r\n\t\t\tstyle = elem.style;\r\n\r\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );\r\n\r\n\t\t// Gets hook for the prefixed version, then unprefixed version\r\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\r\n\r\n\t\t// Check if we're setting a value\r\n\t\tif ( value !== undefined ) {\r\n\t\t\ttype = typeof value;\r\n\r\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\r\n\t\t\tif ( type === \"string\" && (ret = rrelNum.exec( value )) ) {\r\n\t\t\t\tvalue = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );\r\n\t\t\t\t// Fixes bug #9237\r\n\t\t\t\ttype = \"number\";\r\n\t\t\t}\r\n\r\n\t\t\t// Make sure that null and NaN values aren't set (#7116)\r\n\t\t\tif ( value == null || value !== value ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// If a number, add 'px' to the (except for certain CSS properties)\r\n\t\t\tif ( type === \"number\" && !jQuery.cssNumber[ origName ] ) {\r\n\t\t\t\tvalue += \"px\";\r\n\t\t\t}\r\n\r\n\t\t\t// Support: IE9-11+\r\n\t\t\t// background-* props affect original clone's values\r\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\r\n\t\t\t\tstyle[ name ] = \"inherit\";\r\n\t\t\t}\r\n\r\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\r\n\t\t\tif ( !hooks || !(\"set\" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {\r\n\t\t\t\tstyle[ name ] = value;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t// If a hook was provided get the non-computed value from there\r\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\r\n\t\t\t// Otherwise just get the value from the style object\r\n\t\t\treturn style[ name ];\r\n\t\t}\r\n\t},\r\n\r\n\tcss: function( elem, name, extra, styles ) {\r\n\t\tvar val, num, hooks,\r\n\t\t\torigName = jQuery.camelCase( name );\r\n\r\n\t\t// Make sure that we're working with the right name\r\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );\r\n\r\n\t\t// Try prefixed name followed by the unprefixed name\r\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\r\n\r\n\t\t// If a hook was provided get the computed value from there\r\n\t\tif ( hooks && \"get\" in hooks ) {\r\n\t\t\tval = hooks.get( elem, true, extra );\r\n\t\t}\r\n\r\n\t\t// Otherwise, if a way to get the computed value exists, use that\r\n\t\tif ( val === undefined ) {\r\n\t\t\tval = curCSS( elem, name, styles );\r\n\t\t}\r\n\r\n\t\t// Convert \"normal\" to computed value\r\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\r\n\t\t\tval = cssNormalTransform[ name ];\r\n\t\t}\r\n\r\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\r\n\t\tif ( extra === \"\" || extra ) {\r\n\t\t\tnum = parseFloat( val );\r\n\t\t\treturn extra === true || jQuery.isNumeric( num ) ? num || 0 : val;\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n});\r\n\r\njQuery.each([ \"height\", \"width\" ], function( i, name ) {\r\n\tjQuery.cssHooks[ name ] = {\r\n\t\tget: function( elem, computed, extra ) {\r\n\t\t\tif ( computed ) {\r\n\r\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\r\n\t\t\t\t// but it must have a current display style that would benefit\r\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) && elem.offsetWidth === 0 ?\r\n\t\t\t\t\tjQuery.swap( elem, cssShow, function() {\r\n\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tset: function( elem, value, extra ) {\r\n\t\t\tvar styles = extra && getStyles( elem );\r\n\t\t\treturn setPositiveNumber( elem, value, extra ?\r\n\t\t\t\taugmentWidthOrHeight(\r\n\t\t\t\t\telem,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\textra,\r\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\r\n\t\t\t\t\tstyles\r\n\t\t\t\t) : 0\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n});\r\n\r\n// Support: Android 2.3\r\njQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,\r\n\tfunction( elem, computed ) {\r\n\t\tif ( computed ) {\r\n\t\t\treturn jQuery.swap( elem, { \"display\": \"inline-block\" },\r\n\t\t\t\tcurCSS, [ elem, \"marginRight\" ] );\r\n\t\t}\r\n\t}\r\n);\r\n\r\n// These hooks are used by animate to expand properties\r\njQuery.each({\r\n\tmargin: \"\",\r\n\tpadding: \"\",\r\n\tborder: \"Width\"\r\n}, function( prefix, suffix ) {\r\n\tjQuery.cssHooks[ prefix + suffix ] = {\r\n\t\texpand: function( value ) {\r\n\t\t\tvar i = 0,\r\n\t\t\t\texpanded = {},\r\n\r\n\t\t\t\t// Assumes a single number if not a string\r\n\t\t\t\tparts = typeof value === \"string\" ? value.split(\" \") : [ value ];\r\n\r\n\t\t\tfor ( ; i < 4; i++ ) {\r\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\r\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\r\n\t\t\t}\r\n\r\n\t\t\treturn expanded;\r\n\t\t}\r\n\t};\r\n\r\n\tif ( !rmargin.test( prefix ) ) {\r\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\r\n\t}\r\n});\r\n\r\njQuery.fn.extend({\r\n\tcss: function( name, value ) {\r\n\t\treturn access( this, function( elem, name, value ) {\r\n\t\t\tvar styles, len,\r\n\t\t\t\tmap = {},\r\n\t\t\t\ti = 0;\r\n\r\n\t\t\tif ( jQuery.isArray( name ) ) {\r\n\t\t\t\tstyles = getStyles( elem );\r\n\t\t\t\tlen = name.length;\r\n\r\n\t\t\t\tfor ( ; i < len; i++ ) {\r\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn map;\r\n\t\t\t}\r\n\r\n\t\t\treturn value !== undefined ?\r\n\t\t\t\tjQuery.style( elem, name, value ) :\r\n\t\t\t\tjQuery.css( elem, name );\r\n\t\t}, name, value, arguments.length > 1 );\r\n\t},\r\n\tshow: function() {\r\n\t\treturn showHide( this, true );\r\n\t},\r\n\thide: function() {\r\n\t\treturn showHide( this );\r\n\t},\r\n\ttoggle: function( state ) {\r\n\t\tif ( typeof state === \"boolean\" ) {\r\n\t\t\treturn state ? this.show() : this.hide();\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tif ( isHidden( this ) ) {\r\n\t\t\t\tjQuery( this ).show();\r\n\t\t\t} else {\r\n\t\t\t\tjQuery( this ).hide();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\n\r\nfunction Tween( elem, options, prop, end, easing ) {\r\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\r\n}\r\njQuery.Tween = Tween;\r\n\r\nTween.prototype = {\r\n\tconstructor: Tween,\r\n\tinit: function( elem, options, prop, end, easing, unit ) {\r\n\t\tthis.elem = elem;\r\n\t\tthis.prop = prop;\r\n\t\tthis.easing = easing || \"swing\";\r\n\t\tthis.options = options;\r\n\t\tthis.start = this.now = this.cur();\r\n\t\tthis.end = end;\r\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\r\n\t},\r\n\tcur: function() {\r\n\t\tvar hooks = Tween.propHooks[ this.prop ];\r\n\r\n\t\treturn hooks && hooks.get ?\r\n\t\t\thooks.get( this ) :\r\n\t\t\tTween.propHooks._default.get( this );\r\n\t},\r\n\trun: function( percent ) {\r\n\t\tvar eased,\r\n\t\t\thooks = Tween.propHooks[ this.prop ];\r\n\r\n\t\tif ( this.options.duration ) {\r\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\r\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tthis.pos = eased = percent;\r\n\t\t}\r\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\r\n\r\n\t\tif ( this.options.step ) {\r\n\t\t\tthis.options.step.call( this.elem, this.now, this );\r\n\t\t}\r\n\r\n\t\tif ( hooks && hooks.set ) {\r\n\t\t\thooks.set( this );\r\n\t\t} else {\r\n\t\t\tTween.propHooks._default.set( this );\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nTween.prototype.init.prototype = Tween.prototype;\r\n\r\nTween.propHooks = {\r\n\t_default: {\r\n\t\tget: function( tween ) {\r\n\t\t\tvar result;\r\n\r\n\t\t\tif ( tween.elem[ tween.prop ] != null &&\r\n\t\t\t\t(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {\r\n\t\t\t\treturn tween.elem[ tween.prop ];\r\n\t\t\t}\r\n\r\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\r\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\r\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\r\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\r\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\r\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\r\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\r\n\t\t},\r\n\t\tset: function( tween ) {\r\n\t\t\t// Use step hook for back compat.\r\n\t\t\t// Use cssHook if its there.\r\n\t\t\t// Use .style if available and use plain properties where available.\r\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\r\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\r\n\t\t\t} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {\r\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\r\n\t\t\t} else {\r\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Support: IE9\r\n// Panic based approach to setting things on disconnected nodes\r\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\r\n\tset: function( tween ) {\r\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\r\n\t\t\ttween.elem[ tween.prop ] = tween.now;\r\n\t\t}\r\n\t}\r\n};\r\n\r\njQuery.easing = {\r\n\tlinear: function( p ) {\r\n\t\treturn p;\r\n\t},\r\n\tswing: function( p ) {\r\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\r\n\t}\r\n};\r\n\r\njQuery.fx = Tween.prototype.init;\r\n\r\n// Back Compat <1.8 extension point\r\njQuery.fx.step = {};\r\n\r\n\r\n\r\n\r\nvar\r\n\tfxNow, timerId,\r\n\trfxtypes = /^(?:toggle|show|hide)$/,\r\n\trfxnum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" ),\r\n\trrun = /queueHooks$/,\r\n\tanimationPrefilters = [ defaultPrefilter ],\r\n\ttweeners = {\r\n\t\t\"*\": [ function( prop, value ) {\r\n\t\t\tvar tween = this.createTween( prop, value ),\r\n\t\t\t\ttarget = tween.cur(),\r\n\t\t\t\tparts = rfxnum.exec( value ),\r\n\t\t\t\tunit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\r\n\r\n\t\t\t\t// Starting value computation is required for potential unit mismatches\r\n\t\t\t\tstart = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +target ) &&\r\n\t\t\t\t\trfxnum.exec( jQuery.css( tween.elem, prop ) ),\r\n\t\t\t\tscale = 1,\r\n\t\t\t\tmaxIterations = 20;\r\n\r\n\t\t\tif ( start && start[ 3 ] !== unit ) {\r\n\t\t\t\t// Trust units reported by jQuery.css\r\n\t\t\t\tunit = unit || start[ 3 ];\r\n\r\n\t\t\t\t// Make sure we update the tween properties later on\r\n\t\t\t\tparts = parts || [];\r\n\r\n\t\t\t\t// Iteratively approximate from a nonzero starting point\r\n\t\t\t\tstart = +target || 1;\r\n\r\n\t\t\t\tdo {\r\n\t\t\t\t\t// If previous iteration zeroed out, double until we get *something*.\r\n\t\t\t\t\t// Use string for doubling so we don't accidentally see scale as unchanged below\r\n\t\t\t\t\tscale = scale || \".5\";\r\n\r\n\t\t\t\t\t// Adjust and apply\r\n\t\t\t\t\tstart = start / scale;\r\n\t\t\t\t\tjQuery.style( tween.elem, prop, start + unit );\r\n\r\n\t\t\t\t// Update scale, tolerating zero or NaN from tween.cur(),\r\n\t\t\t\t// break the loop if scale is unchanged or perfect, or if we've just had enough\r\n\t\t\t\t} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );\r\n\t\t\t}\r\n\r\n\t\t\t// Update tween properties\r\n\t\t\tif ( parts ) {\r\n\t\t\t\tstart = tween.start = +start || +target || 0;\r\n\t\t\t\ttween.unit = unit;\r\n\t\t\t\t// If a +=/-= token was provided, we're doing a relative animation\r\n\t\t\t\ttween.end = parts[ 1 ] ?\r\n\t\t\t\t\tstart + ( parts[ 1 ] + 1 ) * parts[ 2 ] :\r\n\t\t\t\t\t+parts[ 2 ];\r\n\t\t\t}\r\n\r\n\t\t\treturn tween;\r\n\t\t} ]\r\n\t};\r\n\r\n// Animations created synchronously will run synchronously\r\nfunction createFxNow() {\r\n\tsetTimeout(function() {\r\n\t\tfxNow = undefined;\r\n\t});\r\n\treturn ( fxNow = jQuery.now() );\r\n}\r\n\r\n// Generate parameters to create a standard animation\r\nfunction genFx( type, includeWidth ) {\r\n\tvar which,\r\n\t\ti = 0,\r\n\t\tattrs = { height: type };\r\n\r\n\t// If we include width, step value is 1 to do all cssExpand values,\r\n\t// otherwise step value is 2 to skip over Left and Right\r\n\tincludeWidth = includeWidth ? 1 : 0;\r\n\tfor ( ; i < 4 ; i += 2 - includeWidth ) {\r\n\t\twhich = cssExpand[ i ];\r\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\r\n\t}\r\n\r\n\tif ( includeWidth ) {\r\n\t\tattrs.opacity = attrs.width = type;\r\n\t}\r\n\r\n\treturn attrs;\r\n}\r\n\r\nfunction createTween( value, prop, animation ) {\r\n\tvar tween,\r\n\t\tcollection = ( tweeners[ prop ] || [] ).concat( tweeners[ \"*\" ] ),\r\n\t\tindex = 0,\r\n\t\tlength = collection.length;\r\n\tfor ( ; index < length; index++ ) {\r\n\t\tif ( (tween = collection[ index ].call( animation, prop, value )) ) {\r\n\r\n\t\t\t// We're done with this property\r\n\t\t\treturn tween;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction defaultPrefilter( elem, props, opts ) {\r\n\t/* jshint validthis: true */\r\n\tvar prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,\r\n\t\tanim = this,\r\n\t\torig = {},\r\n\t\tstyle = elem.style,\r\n\t\thidden = elem.nodeType && isHidden( elem ),\r\n\t\tdataShow = data_priv.get( elem, \"fxshow\" );\r\n\r\n\t// Handle queue: false promises\r\n\tif ( !opts.queue ) {\r\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\r\n\t\tif ( hooks.unqueued == null ) {\r\n\t\t\thooks.unqueued = 0;\r\n\t\t\toldfire = hooks.empty.fire;\r\n\t\t\thooks.empty.fire = function() {\r\n\t\t\t\tif ( !hooks.unqueued ) {\r\n\t\t\t\t\toldfire();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\thooks.unqueued++;\r\n\r\n\t\tanim.always(function() {\r\n\t\t\t// Ensure the complete handler is called before this completes\r\n\t\t\tanim.always(function() {\r\n\t\t\t\thooks.unqueued--;\r\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\r\n\t\t\t\t\thooks.empty.fire();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// Height/width overflow pass\r\n\tif ( elem.nodeType === 1 && ( \"height\" in props || \"width\" in props ) ) {\r\n\t\t// Make sure that nothing sneaks out\r\n\t\t// Record all 3 overflow attributes because IE9-10 do not\r\n\t\t// change the overflow attribute when overflowX and\r\n\t\t// overflowY are set to the same value\r\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\r\n\r\n\t\t// Set display property to inline-block for height/width\r\n\t\t// animations on inline elements that are having width/height animated\r\n\t\tdisplay = jQuery.css( elem, \"display\" );\r\n\r\n\t\t// Test default display if display is currently \"none\"\r\n\t\tcheckDisplay = display === \"none\" ?\r\n\t\t\tdata_priv.get( elem, \"olddisplay\" ) || defaultDisplay( elem.nodeName ) : display;\r\n\r\n\t\tif ( checkDisplay === \"inline\" && jQuery.css( elem, \"float\" ) === \"none\" ) {\r\n\t\t\tstyle.display = \"inline-block\";\r\n\t\t}\r\n\t}\r\n\r\n\tif ( opts.overflow ) {\r\n\t\tstyle.overflow = \"hidden\";\r\n\t\tanim.always(function() {\r\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\r\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\r\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\r\n\t\t});\r\n\t}\r\n\r\n\t// show/hide pass\r\n\tfor ( prop in props ) {\r\n\t\tvalue = props[ prop ];\r\n\t\tif ( rfxtypes.exec( value ) ) {\r\n\t\t\tdelete props[ prop ];\r\n\t\t\ttoggle = toggle || value === \"toggle\";\r\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\r\n\r\n\t\t\t\t// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden\r\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\r\n\t\t\t\t\thidden = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\r\n\r\n\t\t// Any non-fx value stops us from restoring the original display value\r\n\t\t} else {\r\n\t\t\tdisplay = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tif ( !jQuery.isEmptyObject( orig ) ) {\r\n\t\tif ( dataShow ) {\r\n\t\t\tif ( \"hidden\" in dataShow ) {\r\n\t\t\t\thidden = dataShow.hidden;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdataShow = data_priv.access( elem, \"fxshow\", {} );\r\n\t\t}\r\n\r\n\t\t// Store state if its toggle - enables .stop().toggle() to \"reverse\"\r\n\t\tif ( toggle ) {\r\n\t\t\tdataShow.hidden = !hidden;\r\n\t\t}\r\n\t\tif ( hidden ) {\r\n\t\t\tjQuery( elem ).show();\r\n\t\t} else {\r\n\t\t\tanim.done(function() {\r\n\t\t\t\tjQuery( elem ).hide();\r\n\t\t\t});\r\n\t\t}\r\n\t\tanim.done(function() {\r\n\t\t\tvar prop;\r\n\r\n\t\t\tdata_priv.remove( elem, \"fxshow\" );\r\n\t\t\tfor ( prop in orig ) {\r\n\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\r\n\t\t\t}\r\n\t\t});\r\n\t\tfor ( prop in orig ) {\r\n\t\t\ttween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\r\n\r\n\t\t\tif ( !( prop in dataShow ) ) {\r\n\t\t\t\tdataShow[ prop ] = tween.start;\r\n\t\t\t\tif ( hidden ) {\r\n\t\t\t\t\ttween.end = tween.start;\r\n\t\t\t\t\ttween.start = prop === \"width\" || prop === \"height\" ? 1 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t// If this is a noop like .hide().hide(), restore an overwritten display value\r\n\t} else if ( (display === \"none\" ? defaultDisplay( elem.nodeName ) : display) === \"inline\" ) {\r\n\t\tstyle.display = display;\r\n\t}\r\n}\r\n\r\nfunction propFilter( props, specialEasing ) {\r\n\tvar index, name, easing, value, hooks;\r\n\r\n\t// camelCase, specialEasing and expand cssHook pass\r\n\tfor ( index in props ) {\r\n\t\tname = jQuery.camelCase( index );\r\n\t\teasing = specialEasing[ name ];\r\n\t\tvalue = props[ index ];\r\n\t\tif ( jQuery.isArray( value ) ) {\r\n\t\t\teasing = value[ 1 ];\r\n\t\t\tvalue = props[ index ] = value[ 0 ];\r\n\t\t}\r\n\r\n\t\tif ( index !== name ) {\r\n\t\t\tprops[ name ] = value;\r\n\t\t\tdelete props[ index ];\r\n\t\t}\r\n\r\n\t\thooks = jQuery.cssHooks[ name ];\r\n\t\tif ( hooks && \"expand\" in hooks ) {\r\n\t\t\tvalue = hooks.expand( value );\r\n\t\t\tdelete props[ name ];\r\n\r\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\r\n\t\t\t// Reusing 'index' because we have the correct \"name\"\r\n\t\t\tfor ( index in value ) {\r\n\t\t\t\tif ( !( index in props ) ) {\r\n\t\t\t\t\tprops[ index ] = value[ index ];\r\n\t\t\t\t\tspecialEasing[ index ] = easing;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tspecialEasing[ name ] = easing;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction Animation( elem, properties, options ) {\r\n\tvar result,\r\n\t\tstopped,\r\n\t\tindex = 0,\r\n\t\tlength = animationPrefilters.length,\r\n\t\tdeferred = jQuery.Deferred().always( function() {\r\n\t\t\t// Don't match elem in the :animated selector\r\n\t\t\tdelete tick.elem;\r\n\t\t}),\r\n\t\ttick = function() {\r\n\t\t\tif ( stopped ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar currentTime = fxNow || createFxNow(),\r\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\r\n\t\t\t\t// Support: Android 2.3\r\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\r\n\t\t\t\ttemp = remaining / animation.duration || 0,\r\n\t\t\t\tpercent = 1 - temp,\r\n\t\t\t\tindex = 0,\r\n\t\t\t\tlength = animation.tweens.length;\r\n\r\n\t\t\tfor ( ; index < length ; index++ ) {\r\n\t\t\t\tanimation.tweens[ index ].run( percent );\r\n\t\t\t}\r\n\r\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ]);\r\n\r\n\t\t\tif ( percent < 1 && length ) {\r\n\t\t\t\treturn remaining;\r\n\t\t\t} else {\r\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tanimation = deferred.promise({\r\n\t\t\telem: elem,\r\n\t\t\tprops: jQuery.extend( {}, properties ),\r\n\t\t\topts: jQuery.extend( true, { specialEasing: {} }, options ),\r\n\t\t\toriginalProperties: properties,\r\n\t\t\toriginalOptions: options,\r\n\t\t\tstartTime: fxNow || createFxNow(),\r\n\t\t\tduration: options.duration,\r\n\t\t\ttweens: [],\r\n\t\t\tcreateTween: function( prop, end ) {\r\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\r\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\r\n\t\t\t\tanimation.tweens.push( tween );\r\n\t\t\t\treturn tween;\r\n\t\t\t},\r\n\t\t\tstop: function( gotoEnd ) {\r\n\t\t\t\tvar index = 0,\r\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\r\n\t\t\t\t\t// otherwise we skip this part\r\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\r\n\t\t\t\tif ( stopped ) {\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\tstopped = true;\r\n\t\t\t\tfor ( ; index < length ; index++ ) {\r\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\r\n\t\t\t\tif ( gotoEnd ) {\r\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t}),\r\n\t\tprops = animation.props;\r\n\r\n\tpropFilter( props, animation.opts.specialEasing );\r\n\r\n\tfor ( ; index < length ; index++ ) {\r\n\t\tresult = animationPrefilters[ index ].call( animation, elem, props, animation.opts );\r\n\t\tif ( result ) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\tjQuery.map( props, createTween, animation );\r\n\r\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\r\n\t\tanimation.opts.start.call( elem, animation );\r\n\t}\r\n\r\n\tjQuery.fx.timer(\r\n\t\tjQuery.extend( tick, {\r\n\t\t\telem: elem,\r\n\t\t\tanim: animation,\r\n\t\t\tqueue: animation.opts.queue\r\n\t\t})\r\n\t);\r\n\r\n\t// attach callbacks from options\r\n\treturn animation.progress( animation.opts.progress )\r\n\t\t.done( animation.opts.done, animation.opts.complete )\r\n\t\t.fail( animation.opts.fail )\r\n\t\t.always( animation.opts.always );\r\n}\r\n\r\njQuery.Animation = jQuery.extend( Animation, {\r\n\r\n\ttweener: function( props, callback ) {\r\n\t\tif ( jQuery.isFunction( props ) ) {\r\n\t\t\tcallback = props;\r\n\t\t\tprops = [ \"*\" ];\r\n\t\t} else {\r\n\t\t\tprops = props.split(\" \");\r\n\t\t}\r\n\r\n\t\tvar prop,\r\n\t\t\tindex = 0,\r\n\t\t\tlength = props.length;\r\n\r\n\t\tfor ( ; index < length ; index++ ) {\r\n\t\t\tprop = props[ index ];\r\n\t\t\ttweeners[ prop ] = tweeners[ prop ] || [];\r\n\t\t\ttweeners[ prop ].unshift( callback );\r\n\t\t}\r\n\t},\r\n\r\n\tprefilter: function( callback, prepend ) {\r\n\t\tif ( prepend ) {\r\n\t\t\tanimationPrefilters.unshift( callback );\r\n\t\t} else {\r\n\t\t\tanimationPrefilters.push( callback );\r\n\t\t}\r\n\t}\r\n});\r\n\r\njQuery.speed = function( speed, easing, fn ) {\r\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\r\n\t\tcomplete: fn || !fn && easing ||\r\n\t\t\tjQuery.isFunction( speed ) && speed,\r\n\t\tduration: speed,\r\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\r\n\t};\r\n\r\n\topt.duration = jQuery.fx.off ? 0 : typeof opt.duration === \"number\" ? opt.duration :\r\n\t\topt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\r\n\r\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\r\n\tif ( opt.queue == null || opt.queue === true ) {\r\n\t\topt.queue = \"fx\";\r\n\t}\r\n\r\n\t// Queueing\r\n\topt.old = opt.complete;\r\n\r\n\topt.complete = function() {\r\n\t\tif ( jQuery.isFunction( opt.old ) ) {\r\n\t\t\topt.old.call( this );\r\n\t\t}\r\n\r\n\t\tif ( opt.queue ) {\r\n\t\t\tjQuery.dequeue( this, opt.queue );\r\n\t\t}\r\n\t};\r\n\r\n\treturn opt;\r\n};\r\n\r\njQuery.fn.extend({\r\n\tfadeTo: function( speed, to, easing, callback ) {\r\n\r\n\t\t// Show any hidden elements after setting opacity to 0\r\n\t\treturn this.filter( isHidden ).css( \"opacity\", 0 ).show()\r\n\r\n\t\t\t// Animate to the value specified\r\n\t\t\t.end().animate({ opacity: to }, speed, easing, callback );\r\n\t},\r\n\tanimate: function( prop, speed, easing, callback ) {\r\n\t\tvar empty = jQuery.isEmptyObject( prop ),\r\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\r\n\t\t\tdoAnimation = function() {\r\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\r\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\r\n\r\n\t\t\t\t// Empty animations, or finishing resolves immediately\r\n\t\t\t\tif ( empty || data_priv.get( this, \"finish\" ) ) {\r\n\t\t\t\t\tanim.stop( true );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tdoAnimation.finish = doAnimation;\r\n\r\n\t\treturn empty || optall.queue === false ?\r\n\t\t\tthis.each( doAnimation ) :\r\n\t\t\tthis.queue( optall.queue, doAnimation );\r\n\t},\r\n\tstop: function( type, clearQueue, gotoEnd ) {\r\n\t\tvar stopQueue = function( hooks ) {\r\n\t\t\tvar stop = hooks.stop;\r\n\t\t\tdelete hooks.stop;\r\n\t\t\tstop( gotoEnd );\r\n\t\t};\r\n\r\n\t\tif ( typeof type !== \"string\" ) {\r\n\t\t\tgotoEnd = clearQueue;\r\n\t\t\tclearQueue = type;\r\n\t\t\ttype = undefined;\r\n\t\t}\r\n\t\tif ( clearQueue && type !== false ) {\r\n\t\t\tthis.queue( type || \"fx\", [] );\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tvar dequeue = true,\r\n\t\t\t\tindex = type != null && type + \"queueHooks\",\r\n\t\t\t\ttimers = jQuery.timers,\r\n\t\t\t\tdata = data_priv.get( this );\r\n\r\n\t\t\tif ( index ) {\r\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\r\n\t\t\t\t\tstopQueue( data[ index ] );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor ( index in data ) {\r\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\r\n\t\t\t\t\t\tstopQueue( data[ index ] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor ( index = timers.length; index--; ) {\r\n\t\t\t\tif ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {\r\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\r\n\t\t\t\t\tdequeue = false;\r\n\t\t\t\t\ttimers.splice( index, 1 );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Start the next in the queue if the last step wasn't forced.\r\n\t\t\t// Timers currently will call their complete callbacks, which\r\n\t\t\t// will dequeue but only if they were gotoEnd.\r\n\t\t\tif ( dequeue || !gotoEnd ) {\r\n\t\t\t\tjQuery.dequeue( this, type );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tfinish: function( type ) {\r\n\t\tif ( type !== false ) {\r\n\t\t\ttype = type || \"fx\";\r\n\t\t}\r\n\t\treturn this.each(function() {\r\n\t\t\tvar index,\r\n\t\t\t\tdata = data_priv.get( this ),\r\n\t\t\t\tqueue = data[ type + \"queue\" ],\r\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\r\n\t\t\t\ttimers = jQuery.timers,\r\n\t\t\t\tlength = queue ? queue.length : 0;\r\n\r\n\t\t\t// Enable finishing flag on private data\r\n\t\t\tdata.finish = true;\r\n\r\n\t\t\t// Empty the queue first\r\n\t\t\tjQuery.queue( this, type, [] );\r\n\r\n\t\t\tif ( hooks && hooks.stop ) {\r\n\t\t\t\thooks.stop.call( this, true );\r\n\t\t\t}\r\n\r\n\t\t\t// Look for any active animations, and finish them\r\n\t\t\tfor ( index = timers.length; index--; ) {\r\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\r\n\t\t\t\t\ttimers[ index ].anim.stop( true );\r\n\t\t\t\t\ttimers.splice( index, 1 );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Look for any animations in the old queue and finish them\r\n\t\t\tfor ( index = 0; index < length; index++ ) {\r\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\r\n\t\t\t\t\tqueue[ index ].finish.call( this );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Turn off finishing flag\r\n\t\t\tdelete data.finish;\r\n\t\t});\r\n\t}\r\n});\r\n\r\njQuery.each([ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\r\n\tvar cssFn = jQuery.fn[ name ];\r\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\r\n\t\treturn speed == null || typeof speed === \"boolean\" ?\r\n\t\t\tcssFn.apply( this, arguments ) :\r\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\r\n\t};\r\n});\r\n\r\n// Generate shortcuts for custom animations\r\njQuery.each({\r\n\tslideDown: genFx(\"show\"),\r\n\tslideUp: genFx(\"hide\"),\r\n\tslideToggle: genFx(\"toggle\"),\r\n\tfadeIn: { opacity: \"show\" },\r\n\tfadeOut: { opacity: \"hide\" },\r\n\tfadeToggle: { opacity: \"toggle\" }\r\n}, function( name, props ) {\r\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\r\n\t\treturn this.animate( props, speed, easing, callback );\r\n\t};\r\n});\r\n\r\njQuery.timers = [];\r\njQuery.fx.tick = function() {\r\n\tvar timer,\r\n\t\ti = 0,\r\n\t\ttimers = jQuery.timers;\r\n\r\n\tfxNow = jQuery.now();\r\n\r\n\tfor ( ; i < timers.length; i++ ) {\r\n\t\ttimer = timers[ i ];\r\n\t\t// Checks the timer has not already been removed\r\n\t\tif ( !timer() && timers[ i ] === timer ) {\r\n\t\t\ttimers.splice( i--, 1 );\r\n\t\t}\r\n\t}\r\n\r\n\tif ( !timers.length ) {\r\n\t\tjQuery.fx.stop();\r\n\t}\r\n\tfxNow = undefined;\r\n};\r\n\r\njQuery.fx.timer = function( timer ) {\r\n\tjQuery.timers.push( timer );\r\n\tif ( timer() ) {\r\n\t\tjQuery.fx.start();\r\n\t} else {\r\n\t\tjQuery.timers.pop();\r\n\t}\r\n};\r\n\r\njQuery.fx.interval = 13;\r\n\r\njQuery.fx.start = function() {\r\n\tif ( !timerId ) {\r\n\t\ttimerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );\r\n\t}\r\n};\r\n\r\njQuery.fx.stop = function() {\r\n\tclearInterval( timerId );\r\n\ttimerId = null;\r\n};\r\n\r\njQuery.fx.speeds = {\r\n\tslow: 600,\r\n\tfast: 200,\r\n\t// Default speed\r\n\t_default: 400\r\n};\r\n\r\n\r\n// Based off of the plugin by Clint Helfers, with permission.\r\n// http://blindsignals.com/index.php/2009/07/jquery-delay/\r\njQuery.fn.delay = function( time, type ) {\r\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\r\n\ttype = type || \"fx\";\r\n\r\n\treturn this.queue( type, function( next, hooks ) {\r\n\t\tvar timeout = setTimeout( next, time );\r\n\t\thooks.stop = function() {\r\n\t\t\tclearTimeout( timeout );\r\n\t\t};\r\n\t});\r\n};\r\n\r\n\r\n(function() {\r\n\tvar input = document.createElement( \"input\" ),\r\n\t\tselect = document.createElement( \"select\" ),\r\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\r\n\r\n\tinput.type = \"checkbox\";\r\n\r\n\t// Support: iOS<=5.1, Android<=4.2+\r\n\t// Default value for a checkbox should be \"on\"\r\n\tsupport.checkOn = input.value !== \"\";\r\n\r\n\t// Support: IE<=11+\r\n\t// Must access selectedIndex to make default options select\r\n\tsupport.optSelected = opt.selected;\r\n\r\n\t// Support: Android<=2.3\r\n\t// Options inside disabled selects are incorrectly marked as disabled\r\n\tselect.disabled = true;\r\n\tsupport.optDisabled = !opt.disabled;\r\n\r\n\t// Support: IE<=11+\r\n\t// An input loses its value after becoming a radio\r\n\tinput = document.createElement( \"input\" );\r\n\tinput.value = \"t\";\r\n\tinput.type = \"radio\";\r\n\tsupport.radioValue = input.value === \"t\";\r\n})();\r\n\r\n\r\nvar nodeHook, boolHook,\r\n\tattrHandle = jQuery.expr.attrHandle;\r\n\r\njQuery.fn.extend({\r\n\tattr: function( name, value ) {\r\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\r\n\t},\r\n\r\n\tremoveAttr: function( name ) {\r\n\t\treturn this.each(function() {\r\n\t\t\tjQuery.removeAttr( this, name );\r\n\t\t});\r\n\t}\r\n});\r\n\r\njQuery.extend({\r\n\tattr: function( elem, name, value ) {\r\n\t\tvar hooks, ret,\r\n\t\t\tnType = elem.nodeType;\r\n\r\n\t\t// don't get/set attributes on text, comment and attribute nodes\r\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Fallback to prop when attributes are not supported\r\n\t\tif ( typeof elem.getAttribute === strundefined ) {\r\n\t\t\treturn jQuery.prop( elem, name, value );\r\n\t\t}\r\n\r\n\t\t// All attributes are lowercase\r\n\t\t// Grab necessary hook if one is defined\r\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\r\n\t\t\tname = name.toLowerCase();\r\n\t\t\thooks = jQuery.attrHooks[ name ] ||\r\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );\r\n\t\t}\r\n\r\n\t\tif ( value !== undefined ) {\r\n\r\n\t\t\tif ( value === null ) {\r\n\t\t\t\tjQuery.removeAttr( elem, name );\r\n\r\n\t\t\t} else if ( hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\r\n\t\t\t\treturn ret;\r\n\r\n\t\t\t} else {\r\n\t\t\t\telem.setAttribute( name, value + \"\" );\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\r\n\t\t} else if ( hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\r\n\t\t\treturn ret;\r\n\r\n\t\t} else {\r\n\t\t\tret = jQuery.find.attr( elem, name );\r\n\r\n\t\t\t// Non-existent attributes return null, we normalize to undefined\r\n\t\t\treturn ret == null ?\r\n\t\t\t\tundefined :\r\n\t\t\t\tret;\r\n\t\t}\r\n\t},\r\n\r\n\tremoveAttr: function( elem, value ) {\r\n\t\tvar name, propName,\r\n\t\t\ti = 0,\r\n\t\t\tattrNames = value && value.match( rnotwhite );\r\n\r\n\t\tif ( attrNames && elem.nodeType === 1 ) {\r\n\t\t\twhile ( (name = attrNames[i++]) ) {\r\n\t\t\t\tpropName = jQuery.propFix[ name ] || name;\r\n\r\n\t\t\t\t// Boolean attributes get special treatment (#10870)\r\n\t\t\t\tif ( jQuery.expr.match.bool.test( name ) ) {\r\n\t\t\t\t\t// Set corresponding property to false\r\n\t\t\t\t\telem[ propName ] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\telem.removeAttribute( name );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tattrHooks: {\r\n\t\ttype: {\r\n\t\t\tset: function( elem, value ) {\r\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\r\n\t\t\t\t\tjQuery.nodeName( elem, \"input\" ) ) {\r\n\t\t\t\t\tvar val = elem.value;\r\n\t\t\t\t\telem.setAttribute( \"type\", value );\r\n\t\t\t\t\tif ( val ) {\r\n\t\t\t\t\t\telem.value = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Hooks for boolean attributes\r\nboolHook = {\r\n\tset: function( elem, value, name ) {\r\n\t\tif ( value === false ) {\r\n\t\t\t// Remove boolean attributes when set to false\r\n\t\t\tjQuery.removeAttr( elem, name );\r\n\t\t} else {\r\n\t\t\telem.setAttribute( name, name );\r\n\t\t}\r\n\t\treturn name;\r\n\t}\r\n};\r\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\r\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\r\n\r\n\tattrHandle[ name ] = function( elem, name, isXML ) {\r\n\t\tvar ret, handle;\r\n\t\tif ( !isXML ) {\r\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\r\n\t\t\thandle = attrHandle[ name ];\r\n\t\t\tattrHandle[ name ] = ret;\r\n\t\t\tret = getter( elem, name, isXML ) != null ?\r\n\t\t\t\tname.toLowerCase() :\r\n\t\t\t\tnull;\r\n\t\t\tattrHandle[ name ] = handle;\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n});\r\n\r\n\r\n\r\n\r\nvar rfocusable = /^(?:input|select|textarea|button)$/i;\r\n\r\njQuery.fn.extend({\r\n\tprop: function( name, value ) {\r\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\r\n\t},\r\n\r\n\tremoveProp: function( name ) {\r\n\t\treturn this.each(function() {\r\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\r\n\t\t});\r\n\t}\r\n});\r\n\r\njQuery.extend({\r\n\tpropFix: {\r\n\t\t\"for\": \"htmlFor\",\r\n\t\t\"class\": \"className\"\r\n\t},\r\n\r\n\tprop: function( elem, name, value ) {\r\n\t\tvar ret, hooks, notxml,\r\n\t\t\tnType = elem.nodeType;\r\n\r\n\t\t// Don't get/set properties on text, comment and attribute nodes\r\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\r\n\r\n\t\tif ( notxml ) {\r\n\t\t\t// Fix name and attach hooks\r\n\t\t\tname = jQuery.propFix[ name ] || name;\r\n\t\t\thooks = jQuery.propHooks[ name ];\r\n\t\t}\r\n\r\n\t\tif ( value !== undefined ) {\r\n\t\t\treturn hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?\r\n\t\t\t\tret :\r\n\t\t\t\t( elem[ name ] = value );\r\n\r\n\t\t} else {\r\n\t\t\treturn hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ?\r\n\t\t\t\tret :\r\n\t\t\t\telem[ name ];\r\n\t\t}\r\n\t},\r\n\r\n\tpropHooks: {\r\n\t\ttabIndex: {\r\n\t\t\tget: function( elem ) {\r\n\t\t\t\treturn elem.hasAttribute( \"tabindex\" ) || rfocusable.test( elem.nodeName ) || elem.href ?\r\n\t\t\t\t\telem.tabIndex :\r\n\t\t\t\t\t-1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nif ( !support.optSelected ) {\r\n\tjQuery.propHooks.selected = {\r\n\t\tget: function( elem ) {\r\n\t\t\tvar parent = elem.parentNode;\r\n\t\t\tif ( parent && parent.parentNode ) {\r\n\t\t\t\tparent.parentNode.selectedIndex;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\njQuery.each([\r\n\t\"tabIndex\",\r\n\t\"readOnly\",\r\n\t\"maxLength\",\r\n\t\"cellSpacing\",\r\n\t\"cellPadding\",\r\n\t\"rowSpan\",\r\n\t\"colSpan\",\r\n\t\"useMap\",\r\n\t\"frameBorder\",\r\n\t\"contentEditable\"\r\n], function() {\r\n\tjQuery.propFix[ this.toLowerCase() ] = this;\r\n});\r\n\r\n\r\n\r\n\r\nvar rclass = /[\\t\\r\\n\\f]/g;\r\n\r\njQuery.fn.extend({\r\n\taddClass: function( value ) {\r\n\t\tvar classes, elem, cur, clazz, j, finalValue,\r\n\t\t\tproceed = typeof value === \"string\" && value,\r\n\t\t\ti = 0,\r\n\t\t\tlen = this.length;\r\n\r\n\t\tif ( jQuery.isFunction( value ) ) {\r\n\t\t\treturn this.each(function( j ) {\r\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, this.className ) );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( proceed ) {\r\n\t\t\t// The disjunction here is for better compressibility (see removeClass)\r\n\t\t\tclasses = ( value || \"\" ).match( rnotwhite ) || [];\r\n\r\n\t\t\tfor ( ; i < len; i++ ) {\r\n\t\t\t\telem = this[ i ];\r\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\r\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\r\n\t\t\t\t\t\" \"\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( cur ) {\r\n\t\t\t\t\tj = 0;\r\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\r\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\r\n\t\t\t\t\t\t\tcur += clazz + \" \";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// only assign if different to avoid unneeded rendering.\r\n\t\t\t\t\tfinalValue = jQuery.trim( cur );\r\n\t\t\t\t\tif ( elem.className !== finalValue ) {\r\n\t\t\t\t\t\telem.className = finalValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveClass: function( value ) {\r\n\t\tvar classes, elem, cur, clazz, j, finalValue,\r\n\t\t\tproceed = arguments.length === 0 || typeof value === \"string\" && value,\r\n\t\t\ti = 0,\r\n\t\t\tlen = this.length;\r\n\r\n\t\tif ( jQuery.isFunction( value ) ) {\r\n\t\t\treturn this.each(function( j ) {\r\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, this.className ) );\r\n\t\t\t});\r\n\t\t}\r\n\t\tif ( proceed ) {\r\n\t\t\tclasses = ( value || \"\" ).match( rnotwhite ) || [];\r\n\r\n\t\t\tfor ( ; i < len; i++ ) {\r\n\t\t\t\telem = this[ i ];\r\n\t\t\t\t// This expression is here for better compressibility (see addClass)\r\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\r\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\r\n\t\t\t\t\t\"\"\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( cur ) {\r\n\t\t\t\t\tj = 0;\r\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\r\n\t\t\t\t\t\t// Remove *all* instances\r\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) >= 0 ) {\r\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\r\n\t\t\t\t\tfinalValue = value ? jQuery.trim( cur ) : \"\";\r\n\t\t\t\t\tif ( elem.className !== finalValue ) {\r\n\t\t\t\t\t\telem.className = finalValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\ttoggleClass: function( value, stateVal ) {\r\n\t\tvar type = typeof value;\r\n\r\n\t\tif ( typeof stateVal === \"boolean\" && type === \"string\" ) {\r\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\r\n\t\t}\r\n\r\n\t\tif ( jQuery.isFunction( value ) ) {\r\n\t\t\treturn this.each(function( i ) {\r\n\t\t\t\tjQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tif ( type === \"string\" ) {\r\n\t\t\t\t// Toggle individual class names\r\n\t\t\t\tvar className,\r\n\t\t\t\t\ti = 0,\r\n\t\t\t\t\tself = jQuery( this ),\r\n\t\t\t\t\tclassNames = value.match( rnotwhite ) || [];\r\n\r\n\t\t\t\twhile ( (className = classNames[ i++ ]) ) {\r\n\t\t\t\t\t// Check each className given, space separated list\r\n\t\t\t\t\tif ( self.hasClass( className ) ) {\r\n\t\t\t\t\t\tself.removeClass( className );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.addClass( className );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t// Toggle whole class name\r\n\t\t\t} else if ( type === strundefined || type === \"boolean\" ) {\r\n\t\t\t\tif ( this.className ) {\r\n\t\t\t\t\t// store className if set\r\n\t\t\t\t\tdata_priv.set( this, \"__className__\", this.className );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If the element has a class name or if we're passed `false`,\r\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\r\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\r\n\t\t\t\t// falling back to the empty string if nothing was stored.\r\n\t\t\t\tthis.className = this.className || value === false ? \"\" : data_priv.get( this, \"__className__\" ) || \"\";\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\thasClass: function( selector ) {\r\n\t\tvar className = \" \" + selector + \" \",\r\n\t\t\ti = 0,\r\n\t\t\tl = this.length;\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tif ( this[i].nodeType === 1 && (\" \" + this[i].className + \" \").replace(rclass, \" \").indexOf( className ) >= 0 ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n});\r\n\r\n\r\n\r\n\r\nvar rreturn = /\\r/g;\r\n\r\njQuery.fn.extend({\r\n\tval: function( value ) {\r\n\t\tvar hooks, ret, isFunction,\r\n\t\t\telem = this[0];\r\n\r\n\t\tif ( !arguments.length ) {\r\n\t\t\tif ( elem ) {\r\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];\r\n\r\n\t\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, \"value\" )) !== undefined ) {\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tret = elem.value;\r\n\r\n\t\t\t\treturn typeof ret === \"string\" ?\r\n\t\t\t\t\t// Handle most common string cases\r\n\t\t\t\t\tret.replace(rreturn, \"\") :\r\n\t\t\t\t\t// Handle cases where value is null/undef or number\r\n\t\t\t\t\tret == null ? \"\" : ret;\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tisFunction = jQuery.isFunction( value );\r\n\r\n\t\treturn this.each(function( i ) {\r\n\t\t\tvar val;\r\n\r\n\t\t\tif ( this.nodeType !== 1 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( isFunction ) {\r\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\r\n\t\t\t} else {\r\n\t\t\t\tval = value;\r\n\t\t\t}\r\n\r\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\r\n\t\t\tif ( val == null ) {\r\n\t\t\t\tval = \"\";\r\n\r\n\t\t\t} else if ( typeof val === \"number\" ) {\r\n\t\t\t\tval += \"\";\r\n\r\n\t\t\t} else if ( jQuery.isArray( val ) ) {\r\n\t\t\t\tval = jQuery.map( val, function( value ) {\r\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\r\n\r\n\t\t\t// If set returns undefined, fall back to normal setting\r\n\t\t\tif ( !hooks || !(\"set\" in hooks) || hooks.set( this, val, \"value\" ) === undefined ) {\r\n\t\t\t\tthis.value = val;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\njQuery.extend({\r\n\tvalHooks: {\r\n\t\toption: {\r\n\t\t\tget: function( elem ) {\r\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\r\n\t\t\t\treturn val != null ?\r\n\t\t\t\t\tval :\r\n\t\t\t\t\t// Support: IE10-11+\r\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\r\n\t\t\t\t\tjQuery.trim( jQuery.text( elem ) );\r\n\t\t\t}\r\n\t\t},\r\n\t\tselect: {\r\n\t\t\tget: function( elem ) {\r\n\t\t\t\tvar value, option,\r\n\t\t\t\t\toptions = elem.options,\r\n\t\t\t\t\tindex = elem.selectedIndex,\r\n\t\t\t\t\tone = elem.type === \"select-one\" || index < 0,\r\n\t\t\t\t\tvalues = one ? null : [],\r\n\t\t\t\t\tmax = one ? index + 1 : options.length,\r\n\t\t\t\t\ti = index < 0 ?\r\n\t\t\t\t\t\tmax :\r\n\t\t\t\t\t\tone ? index : 0;\r\n\r\n\t\t\t\t// Loop through all the selected options\r\n\t\t\t\tfor ( ; i < max; i++ ) {\r\n\t\t\t\t\toption = options[ i ];\r\n\r\n\t\t\t\t\t// IE6-9 doesn't update selected after form reset (#2551)\r\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\r\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\r\n\t\t\t\t\t\t\t( support.optDisabled ? !option.disabled : option.getAttribute( \"disabled\" ) === null ) &&\r\n\t\t\t\t\t\t\t( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\r\n\r\n\t\t\t\t\t\t// Get the specific value for the option\r\n\t\t\t\t\t\tvalue = jQuery( option ).val();\r\n\r\n\t\t\t\t\t\t// We don't need an array for one selects\r\n\t\t\t\t\t\tif ( one ) {\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Multi-Selects return an array\r\n\t\t\t\t\t\tvalues.push( value );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn values;\r\n\t\t\t},\r\n\r\n\t\t\tset: function( elem, value ) {\r\n\t\t\t\tvar optionSet, option,\r\n\t\t\t\t\toptions = elem.options,\r\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\r\n\t\t\t\t\ti = options.length;\r\n\r\n\t\t\t\twhile ( i-- ) {\r\n\t\t\t\t\toption = options[ i ];\r\n\t\t\t\t\tif ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {\r\n\t\t\t\t\t\toptionSet = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\r\n\t\t\t\tif ( !optionSet ) {\r\n\t\t\t\t\telem.selectedIndex = -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn values;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Radios and checkboxes getter/setter\r\njQuery.each([ \"radio\", \"checkbox\" ], function() {\r\n\tjQuery.valHooks[ this ] = {\r\n\t\tset: function( elem, value ) {\r\n\t\t\tif ( jQuery.isArray( value ) ) {\r\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tif ( !support.checkOn ) {\r\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\r\n\t\t\treturn elem.getAttribute(\"value\") === null ? \"on\" : elem.value;\r\n\t\t};\r\n\t}\r\n});\r\n\r\n\r\n\r\n\r\n// Return jQuery for attributes-only inclusion\r\n\r\n\r\njQuery.each( (\"blur focus focusin focusout load resize scroll unload click dblclick \" +\r\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\r\n\t\"change select submit keydown keypress keyup error contextmenu\").split(\" \"), function( i, name ) {\r\n\r\n\t// Handle event binding\r\n\tjQuery.fn[ name ] = function( data, fn ) {\r\n\t\treturn arguments.length > 0 ?\r\n\t\t\tthis.on( name, null, data, fn ) :\r\n\t\t\tthis.trigger( name );\r\n\t};\r\n});\r\n\r\njQuery.fn.extend({\r\n\thover: function( fnOver, fnOut ) {\r\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\r\n\t},\r\n\r\n\tbind: function( types, data, fn ) {\r\n\t\treturn this.on( types, null, data, fn );\r\n\t},\r\n\tunbind: function( types, fn ) {\r\n\t\treturn this.off( types, null, fn );\r\n\t},\r\n\r\n\tdelegate: function( selector, types, data, fn ) {\r\n\t\treturn this.on( types, selector, data, fn );\r\n\t},\r\n\tundelegate: function( selector, types, fn ) {\r\n\t\t// ( namespace ) or ( selector, types [, fn] )\r\n\t\treturn arguments.length === 1 ? this.off( selector, \"**\" ) : this.off( types, selector || \"**\", fn );\r\n\t}\r\n});\r\n\r\n\r\nvar nonce = jQuery.now();\r\n\r\nvar rquery = (/\\?/);\r\n\r\n\r\n\r\n// Support: Android 2.3\r\n// Workaround failure to string-cast null input\r\njQuery.parseJSON = function( data ) {\r\n\treturn JSON.parse( data + \"\" );\r\n};\r\n\r\n\r\n// Cross-browser xml parsing\r\njQuery.parseXML = function( data ) {\r\n\tvar xml, tmp;\r\n\tif ( !data || typeof data !== \"string\" ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Support: IE9\r\n\ttry {\r\n\t\ttmp = new DOMParser();\r\n\t\txml = tmp.parseFromString( data, \"text/xml\" );\r\n\t} catch ( e ) {\r\n\t\txml = undefined;\r\n\t}\r\n\r\n\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\r\n\t\tjQuery.error( \"Invalid XML: \" + data );\r\n\t}\r\n\treturn xml;\r\n};\r\n\r\n\r\nvar\r\n\trhash = /#.*$/,\r\n\trts = /([?&])_=[^&]*/,\r\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\r\n\t// #7653, #8125, #8152: local protocol detection\r\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\r\n\trnoContent = /^(?:GET|HEAD)$/,\r\n\trprotocol = /^\\/\\//,\r\n\trurl = /^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,\r\n\r\n\t/* Prefilters\r\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\r\n\t * 2) These are called:\r\n\t *    - BEFORE asking for a transport\r\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\r\n\t * 3) key is the dataType\r\n\t * 4) the catchall symbol \"*\" can be used\r\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\r\n\t */\r\n\tprefilters = {},\r\n\r\n\t/* Transports bindings\r\n\t * 1) key is the dataType\r\n\t * 2) the catchall symbol \"*\" can be used\r\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\r\n\t */\r\n\ttransports = {},\r\n\r\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\r\n\tallTypes = \"*/\".concat( \"*\" ),\r\n\r\n\t// Document location\r\n\tajaxLocation = window.location.href,\r\n\r\n\t// Segment location into parts\r\n\tajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];\r\n\r\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\r\nfunction addToPrefiltersOrTransports( structure ) {\r\n\r\n\t// dataTypeExpression is optional and defaults to \"*\"\r\n\treturn function( dataTypeExpression, func ) {\r\n\r\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\r\n\t\t\tfunc = dataTypeExpression;\r\n\t\t\tdataTypeExpression = \"*\";\r\n\t\t}\r\n\r\n\t\tvar dataType,\r\n\t\t\ti = 0,\r\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];\r\n\r\n\t\tif ( jQuery.isFunction( func ) ) {\r\n\t\t\t// For each dataType in the dataTypeExpression\r\n\t\t\twhile ( (dataType = dataTypes[i++]) ) {\r\n\t\t\t\t// Prepend if requested\r\n\t\t\t\tif ( dataType[0] === \"+\" ) {\r\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\r\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).unshift( func );\r\n\r\n\t\t\t\t// Otherwise append\r\n\t\t\t\t} else {\r\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).push( func );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// Base inspection function for prefilters and transports\r\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\r\n\r\n\tvar inspected = {},\r\n\t\tseekingTransport = ( structure === transports );\r\n\r\n\tfunction inspect( dataType ) {\r\n\t\tvar selected;\r\n\t\tinspected[ dataType ] = true;\r\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\r\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\r\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {\r\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\r\n\t\t\t\tinspect( dataTypeOrTransport );\r\n\t\t\t\treturn false;\r\n\t\t\t} else if ( seekingTransport ) {\r\n\t\t\t\treturn !( selected = dataTypeOrTransport );\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn selected;\r\n\t}\r\n\r\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\r\n}\r\n\r\n// A special extend for ajax options\r\n// that takes \"flat\" options (not to be deep extended)\r\n// Fixes #9887\r\nfunction ajaxExtend( target, src ) {\r\n\tvar key, deep,\r\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\r\n\r\n\tfor ( key in src ) {\r\n\t\tif ( src[ key ] !== undefined ) {\r\n\t\t\t( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];\r\n\t\t}\r\n\t}\r\n\tif ( deep ) {\r\n\t\tjQuery.extend( true, target, deep );\r\n\t}\r\n\r\n\treturn target;\r\n}\r\n\r\n/* Handles responses to an ajax request:\r\n * - finds the right dataType (mediates between content-type and expected dataType)\r\n * - returns the corresponding response\r\n */\r\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\r\n\r\n\tvar ct, type, finalDataType, firstDataType,\r\n\t\tcontents = s.contents,\r\n\t\tdataTypes = s.dataTypes;\r\n\r\n\t// Remove auto dataType and get content-type in the process\r\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\r\n\t\tdataTypes.shift();\r\n\t\tif ( ct === undefined ) {\r\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader(\"Content-Type\");\r\n\t\t}\r\n\t}\r\n\r\n\t// Check if we're dealing with a known content-type\r\n\tif ( ct ) {\r\n\t\tfor ( type in contents ) {\r\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\r\n\t\t\t\tdataTypes.unshift( type );\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Check to see if we have a response for the expected dataType\r\n\tif ( dataTypes[ 0 ] in responses ) {\r\n\t\tfinalDataType = dataTypes[ 0 ];\r\n\t} else {\r\n\t\t// Try convertible dataTypes\r\n\t\tfor ( type in responses ) {\r\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[0] ] ) {\r\n\t\t\t\tfinalDataType = type;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif ( !firstDataType ) {\r\n\t\t\t\tfirstDataType = type;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Or just use first one\r\n\t\tfinalDataType = finalDataType || firstDataType;\r\n\t}\r\n\r\n\t// If we found a dataType\r\n\t// We add the dataType to the list if needed\r\n\t// and return the corresponding response\r\n\tif ( finalDataType ) {\r\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\r\n\t\t\tdataTypes.unshift( finalDataType );\r\n\t\t}\r\n\t\treturn responses[ finalDataType ];\r\n\t}\r\n}\r\n\r\n/* Chain conversions given the request and the original response\r\n * Also sets the responseXXX fields on the jqXHR instance\r\n */\r\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\r\n\tvar conv2, current, conv, tmp, prev,\r\n\t\tconverters = {},\r\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\r\n\t\tdataTypes = s.dataTypes.slice();\r\n\r\n\t// Create converters map with lowercased keys\r\n\tif ( dataTypes[ 1 ] ) {\r\n\t\tfor ( conv in s.converters ) {\r\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\r\n\t\t}\r\n\t}\r\n\r\n\tcurrent = dataTypes.shift();\r\n\r\n\t// Convert to each sequential dataType\r\n\twhile ( current ) {\r\n\r\n\t\tif ( s.responseFields[ current ] ) {\r\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\r\n\t\t}\r\n\r\n\t\t// Apply the dataFilter if provided\r\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\r\n\t\t\tresponse = s.dataFilter( response, s.dataType );\r\n\t\t}\r\n\r\n\t\tprev = current;\r\n\t\tcurrent = dataTypes.shift();\r\n\r\n\t\tif ( current ) {\r\n\r\n\t\t// There's only work to do if current dataType is non-auto\r\n\t\t\tif ( current === \"*\" ) {\r\n\r\n\t\t\t\tcurrent = prev;\r\n\r\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\r\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\r\n\r\n\t\t\t\t// Seek a direct converter\r\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\r\n\r\n\t\t\t\t// If none found, seek a pair\r\n\t\t\t\tif ( !conv ) {\r\n\t\t\t\t\tfor ( conv2 in converters ) {\r\n\r\n\t\t\t\t\t\t// If conv2 outputs current\r\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\r\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\r\n\r\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\r\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\r\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\r\n\t\t\t\t\t\t\tif ( conv ) {\r\n\t\t\t\t\t\t\t\t// Condense equivalence converters\r\n\t\t\t\t\t\t\t\tif ( conv === true ) {\r\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\r\n\r\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\r\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\r\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\r\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Apply converter (if not an equivalence)\r\n\t\t\t\tif ( conv !== true ) {\r\n\r\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\r\n\t\t\t\t\tif ( conv && s[ \"throws\" ] ) {\r\n\t\t\t\t\t\tresponse = conv( response );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tresponse = conv( response );\r\n\t\t\t\t\t\t} catch ( e ) {\r\n\t\t\t\t\t\t\treturn { state: \"parsererror\", error: conv ? e : \"No conversion from \" + prev + \" to \" + current };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn { state: \"success\", data: response };\r\n}\r\n\r\njQuery.extend({\r\n\r\n\t// Counter for holding the number of active queries\r\n\tactive: 0,\r\n\r\n\t// Last-Modified header cache for next request\r\n\tlastModified: {},\r\n\tetag: {},\r\n\r\n\tajaxSettings: {\r\n\t\turl: ajaxLocation,\r\n\t\ttype: \"GET\",\r\n\t\tisLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),\r\n\t\tglobal: true,\r\n\t\tprocessData: true,\r\n\t\tasync: true,\r\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n\t\t/*\r\n\t\ttimeout: 0,\r\n\t\tdata: null,\r\n\t\tdataType: null,\r\n\t\tusername: null,\r\n\t\tpassword: null,\r\n\t\tcache: null,\r\n\t\tthrows: false,\r\n\t\ttraditional: false,\r\n\t\theaders: {},\r\n\t\t*/\r\n\r\n\t\taccepts: {\r\n\t\t\t\"*\": allTypes,\r\n\t\t\ttext: \"text/plain\",\r\n\t\t\thtml: \"text/html\",\r\n\t\t\txml: \"application/xml, text/xml\",\r\n\t\t\tjson: \"application/json, text/javascript\"\r\n\t\t},\r\n\r\n\t\tcontents: {\r\n\t\t\txml: /xml/,\r\n\t\t\thtml: /html/,\r\n\t\t\tjson: /json/\r\n\t\t},\r\n\r\n\t\tresponseFields: {\r\n\t\t\txml: \"responseXML\",\r\n\t\t\ttext: \"responseText\",\r\n\t\t\tjson: \"responseJSON\"\r\n\t\t},\r\n\r\n\t\t// Data converters\r\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\r\n\t\tconverters: {\r\n\r\n\t\t\t// Convert anything to text\r\n\t\t\t\"* text\": String,\r\n\r\n\t\t\t// Text to html (true = no transformation)\r\n\t\t\t\"text html\": true,\r\n\r\n\t\t\t// Evaluate text as a json expression\r\n\t\t\t\"text json\": jQuery.parseJSON,\r\n\r\n\t\t\t// Parse text as xml\r\n\t\t\t\"text xml\": jQuery.parseXML\r\n\t\t},\r\n\r\n\t\t// For options that shouldn't be deep extended:\r\n\t\t// you can add your own custom options here if\r\n\t\t// and when you create one that shouldn't be\r\n\t\t// deep extended (see ajaxExtend)\r\n\t\tflatOptions: {\r\n\t\t\turl: true,\r\n\t\t\tcontext: true\r\n\t\t}\r\n\t},\r\n\r\n\t// Creates a full fledged settings object into target\r\n\t// with both ajaxSettings and settings fields.\r\n\t// If target is omitted, writes into ajaxSettings.\r\n\tajaxSetup: function( target, settings ) {\r\n\t\treturn settings ?\r\n\r\n\t\t\t// Building a settings object\r\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\r\n\r\n\t\t\t// Extending ajaxSettings\r\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\r\n\t},\r\n\r\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\r\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\r\n\r\n\t// Main method\r\n\tajax: function( url, options ) {\r\n\r\n\t\t// If url is an object, simulate pre-1.5 signature\r\n\t\tif ( typeof url === \"object\" ) {\r\n\t\t\toptions = url;\r\n\t\t\turl = undefined;\r\n\t\t}\r\n\r\n\t\t// Force options to be an object\r\n\t\toptions = options || {};\r\n\r\n\t\tvar transport,\r\n\t\t\t// URL without anti-cache param\r\n\t\t\tcacheURL,\r\n\t\t\t// Response headers\r\n\t\t\tresponseHeadersString,\r\n\t\t\tresponseHeaders,\r\n\t\t\t// timeout handle\r\n\t\t\ttimeoutTimer,\r\n\t\t\t// Cross-domain detection vars\r\n\t\t\tparts,\r\n\t\t\t// To know if global events are to be dispatched\r\n\t\t\tfireGlobals,\r\n\t\t\t// Loop variable\r\n\t\t\ti,\r\n\t\t\t// Create the final options object\r\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\r\n\t\t\t// Callbacks context\r\n\t\t\tcallbackContext = s.context || s,\r\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\r\n\t\t\tglobalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?\r\n\t\t\t\tjQuery( callbackContext ) :\r\n\t\t\t\tjQuery.event,\r\n\t\t\t// Deferreds\r\n\t\t\tdeferred = jQuery.Deferred(),\r\n\t\t\tcompleteDeferred = jQuery.Callbacks(\"once memory\"),\r\n\t\t\t// Status-dependent callbacks\r\n\t\t\tstatusCode = s.statusCode || {},\r\n\t\t\t// Headers (they are sent all at once)\r\n\t\t\trequestHeaders = {},\r\n\t\t\trequestHeadersNames = {},\r\n\t\t\t// The jqXHR state\r\n\t\t\tstate = 0,\r\n\t\t\t// Default abort message\r\n\t\t\tstrAbort = \"canceled\",\r\n\t\t\t// Fake xhr\r\n\t\t\tjqXHR = {\r\n\t\t\t\treadyState: 0,\r\n\r\n\t\t\t\t// Builds headers hashtable if needed\r\n\t\t\t\tgetResponseHeader: function( key ) {\r\n\t\t\t\t\tvar match;\r\n\t\t\t\t\tif ( state === 2 ) {\r\n\t\t\t\t\t\tif ( !responseHeaders ) {\r\n\t\t\t\t\t\t\tresponseHeaders = {};\r\n\t\t\t\t\t\t\twhile ( (match = rheaders.exec( responseHeadersString )) ) {\r\n\t\t\t\t\t\t\t\tresponseHeaders[ match[1].toLowerCase() ] = match[ 2 ];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn match == null ? null : match;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Raw string\r\n\t\t\t\tgetAllResponseHeaders: function() {\r\n\t\t\t\t\treturn state === 2 ? responseHeadersString : null;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Caches the header\r\n\t\t\t\tsetRequestHeader: function( name, value ) {\r\n\t\t\t\t\tvar lname = name.toLowerCase();\r\n\t\t\t\t\tif ( !state ) {\r\n\t\t\t\t\t\tname = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;\r\n\t\t\t\t\t\trequestHeaders[ name ] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Overrides response content-type header\r\n\t\t\t\toverrideMimeType: function( type ) {\r\n\t\t\t\t\tif ( !state ) {\r\n\t\t\t\t\t\ts.mimeType = type;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Status-dependent callbacks\r\n\t\t\t\tstatusCode: function( map ) {\r\n\t\t\t\t\tvar code;\r\n\t\t\t\t\tif ( map ) {\r\n\t\t\t\t\t\tif ( state < 2 ) {\r\n\t\t\t\t\t\t\tfor ( code in map ) {\r\n\t\t\t\t\t\t\t\t// Lazy-add the new callback in a way that preserves old ones\r\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\r\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Cancel the request\r\n\t\t\t\tabort: function( statusText ) {\r\n\t\t\t\t\tvar finalText = statusText || strAbort;\r\n\t\t\t\t\tif ( transport ) {\r\n\t\t\t\t\t\ttransport.abort( finalText );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdone( 0, finalText );\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t// Attach deferreds\r\n\t\tdeferred.promise( jqXHR ).complete = completeDeferred.add;\r\n\t\tjqXHR.success = jqXHR.done;\r\n\t\tjqXHR.error = jqXHR.fail;\r\n\r\n\t\t// Remove hash character (#7531: and string promotion)\r\n\t\t// Add protocol if not provided (prefilters might expect it)\r\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\r\n\t\t// We also use the url parameter if available\r\n\t\ts.url = ( ( url || s.url || ajaxLocation ) + \"\" ).replace( rhash, \"\" )\r\n\t\t\t.replace( rprotocol, ajaxLocParts[ 1 ] + \"//\" );\r\n\r\n\t\t// Alias method option to type as per ticket #12004\r\n\t\ts.type = options.method || options.type || s.method || s.type;\r\n\r\n\t\t// Extract dataTypes list\r\n\t\ts.dataTypes = jQuery.trim( s.dataType || \"*\" ).toLowerCase().match( rnotwhite ) || [ \"\" ];\r\n\r\n\t\t// A cross-domain request is in order when we have a protocol:host:port mismatch\r\n\t\tif ( s.crossDomain == null ) {\r\n\t\t\tparts = rurl.exec( s.url.toLowerCase() );\r\n\t\t\ts.crossDomain = !!( parts &&\r\n\t\t\t\t( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||\r\n\t\t\t\t\t( parts[ 3 ] || ( parts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) !==\r\n\t\t\t\t\t\t( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) )\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// Convert data if not already a string\r\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\r\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\r\n\t\t}\r\n\r\n\t\t// Apply prefilters\r\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\r\n\r\n\t\t// If request was aborted inside a prefilter, stop there\r\n\t\tif ( state === 2 ) {\r\n\t\t\treturn jqXHR;\r\n\t\t}\r\n\r\n\t\t// We can fire global events as of now if asked to\r\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\r\n\t\tfireGlobals = jQuery.event && s.global;\r\n\r\n\t\t// Watch for a new set of requests\r\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\r\n\t\t\tjQuery.event.trigger(\"ajaxStart\");\r\n\t\t}\r\n\r\n\t\t// Uppercase the type\r\n\t\ts.type = s.type.toUpperCase();\r\n\r\n\t\t// Determine if request has content\r\n\t\ts.hasContent = !rnoContent.test( s.type );\r\n\r\n\t\t// Save the URL in case we're toying with the If-Modified-Since\r\n\t\t// and/or If-None-Match header later on\r\n\t\tcacheURL = s.url;\r\n\r\n\t\t// More options handling for requests with no content\r\n\t\tif ( !s.hasContent ) {\r\n\r\n\t\t\t// If data is available, append data to url\r\n\t\t\tif ( s.data ) {\r\n\t\t\t\tcacheURL = ( s.url += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data );\r\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\r\n\t\t\t\tdelete s.data;\r\n\t\t\t}\r\n\r\n\t\t\t// Add anti-cache in url if needed\r\n\t\t\tif ( s.cache === false ) {\r\n\t\t\t\ts.url = rts.test( cacheURL ) ?\r\n\r\n\t\t\t\t\t// If there is already a '_' parameter, set its value\r\n\t\t\t\t\tcacheURL.replace( rts, \"$1_=\" + nonce++ ) :\r\n\r\n\t\t\t\t\t// Otherwise add one to the end\r\n\t\t\t\t\tcacheURL + ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + nonce++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\r\n\t\tif ( s.ifModified ) {\r\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\r\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\r\n\t\t\t}\r\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\r\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Set the correct header, if data is being sent\r\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\r\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\r\n\t\t}\r\n\r\n\t\t// Set the Accepts header for the server, depending on the dataType\r\n\t\tjqXHR.setRequestHeader(\r\n\t\t\t\"Accept\",\r\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?\r\n\t\t\t\ts.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\r\n\t\t\t\ts.accepts[ \"*\" ]\r\n\t\t);\r\n\r\n\t\t// Check for headers option\r\n\t\tfor ( i in s.headers ) {\r\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\r\n\t\t}\r\n\r\n\t\t// Allow custom headers/mimetypes and early abort\r\n\t\tif ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {\r\n\t\t\t// Abort if not done already and return\r\n\t\t\treturn jqXHR.abort();\r\n\t\t}\r\n\r\n\t\t// Aborting is no longer a cancellation\r\n\t\tstrAbort = \"abort\";\r\n\r\n\t\t// Install callbacks on deferreds\r\n\t\tfor ( i in { success: 1, error: 1, complete: 1 } ) {\r\n\t\t\tjqXHR[ i ]( s[ i ] );\r\n\t\t}\r\n\r\n\t\t// Get transport\r\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\r\n\r\n\t\t// If no transport, we auto-abort\r\n\t\tif ( !transport ) {\r\n\t\t\tdone( -1, \"No Transport\" );\r\n\t\t} else {\r\n\t\t\tjqXHR.readyState = 1;\r\n\r\n\t\t\t// Send global event\r\n\t\t\tif ( fireGlobals ) {\r\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\r\n\t\t\t}\r\n\t\t\t// Timeout\r\n\t\t\tif ( s.async && s.timeout > 0 ) {\r\n\t\t\t\ttimeoutTimer = setTimeout(function() {\r\n\t\t\t\t\tjqXHR.abort(\"timeout\");\r\n\t\t\t\t}, s.timeout );\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tstate = 1;\r\n\t\t\t\ttransport.send( requestHeaders, done );\r\n\t\t\t} catch ( e ) {\r\n\t\t\t\t// Propagate exception as error if not done\r\n\t\t\t\tif ( state < 2 ) {\r\n\t\t\t\t\tdone( -1, e );\r\n\t\t\t\t// Simply rethrow otherwise\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Callback for when everything is done\r\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\r\n\t\t\tvar isSuccess, success, error, response, modified,\r\n\t\t\t\tstatusText = nativeStatusText;\r\n\r\n\t\t\t// Called once\r\n\t\t\tif ( state === 2 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// State is \"done\" now\r\n\t\t\tstate = 2;\r\n\r\n\t\t\t// Clear timeout if it exists\r\n\t\t\tif ( timeoutTimer ) {\r\n\t\t\t\tclearTimeout( timeoutTimer );\r\n\t\t\t}\r\n\r\n\t\t\t// Dereference transport for early garbage collection\r\n\t\t\t// (no matter how long the jqXHR object will be used)\r\n\t\t\ttransport = undefined;\r\n\r\n\t\t\t// Cache response headers\r\n\t\t\tresponseHeadersString = headers || \"\";\r\n\r\n\t\t\t// Set readyState\r\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\r\n\r\n\t\t\t// Determine if successful\r\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\r\n\r\n\t\t\t// Get response data\r\n\t\t\tif ( responses ) {\r\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\r\n\t\t\t}\r\n\r\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\r\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\r\n\r\n\t\t\t// If successful, handle type chaining\r\n\t\t\tif ( isSuccess ) {\r\n\r\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\r\n\t\t\t\tif ( s.ifModified ) {\r\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"Last-Modified\");\r\n\t\t\t\t\tif ( modified ) {\r\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"etag\");\r\n\t\t\t\t\tif ( modified ) {\r\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if no content\r\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\r\n\t\t\t\t\tstatusText = \"nocontent\";\r\n\r\n\t\t\t\t// if not modified\r\n\t\t\t\t} else if ( status === 304 ) {\r\n\t\t\t\t\tstatusText = \"notmodified\";\r\n\r\n\t\t\t\t// If we have data, let's convert it\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstatusText = response.state;\r\n\t\t\t\t\tsuccess = response.data;\r\n\t\t\t\t\terror = response.error;\r\n\t\t\t\t\tisSuccess = !error;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\r\n\t\t\t\terror = statusText;\r\n\t\t\t\tif ( status || !statusText ) {\r\n\t\t\t\t\tstatusText = \"error\";\r\n\t\t\t\t\tif ( status < 0 ) {\r\n\t\t\t\t\t\tstatus = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Set data for the fake xhr object\r\n\t\t\tjqXHR.status = status;\r\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\r\n\r\n\t\t\t// Success/Error\r\n\t\t\tif ( isSuccess ) {\r\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\r\n\t\t\t} else {\r\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\r\n\t\t\t}\r\n\r\n\t\t\t// Status-dependent callbacks\r\n\t\t\tjqXHR.statusCode( statusCode );\r\n\t\t\tstatusCode = undefined;\r\n\r\n\t\t\tif ( fireGlobals ) {\r\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\r\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\r\n\t\t\t}\r\n\r\n\t\t\t// Complete\r\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\r\n\r\n\t\t\tif ( fireGlobals ) {\r\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\r\n\t\t\t\t// Handle the global AJAX counter\r\n\t\t\t\tif ( !( --jQuery.active ) ) {\r\n\t\t\t\t\tjQuery.event.trigger(\"ajaxStop\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn jqXHR;\r\n\t},\r\n\r\n\tgetJSON: function( url, data, callback ) {\r\n\t\treturn jQuery.get( url, data, callback, \"json\" );\r\n\t},\r\n\r\n\tgetScript: function( url, callback ) {\r\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\r\n\t}\r\n});\r\n\r\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\r\n\tjQuery[ method ] = function( url, data, callback, type ) {\r\n\t\t// Shift arguments if data argument was omitted\r\n\t\tif ( jQuery.isFunction( data ) ) {\r\n\t\t\ttype = type || callback;\r\n\t\t\tcallback = data;\r\n\t\t\tdata = undefined;\r\n\t\t}\r\n\r\n\t\treturn jQuery.ajax({\r\n\t\t\turl: url,\r\n\t\t\ttype: method,\r\n\t\t\tdataType: type,\r\n\t\t\tdata: data,\r\n\t\t\tsuccess: callback\r\n\t\t});\r\n\t};\r\n});\r\n\r\n\r\njQuery._evalUrl = function( url ) {\r\n\treturn jQuery.ajax({\r\n\t\turl: url,\r\n\t\ttype: \"GET\",\r\n\t\tdataType: \"script\",\r\n\t\tasync: false,\r\n\t\tglobal: false,\r\n\t\t\"throws\": true\r\n\t});\r\n};\r\n\r\n\r\njQuery.fn.extend({\r\n\twrapAll: function( html ) {\r\n\t\tvar wrap;\r\n\r\n\t\tif ( jQuery.isFunction( html ) ) {\r\n\t\t\treturn this.each(function( i ) {\r\n\t\t\t\tjQuery( this ).wrapAll( html.call(this, i) );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( this[ 0 ] ) {\r\n\r\n\t\t\t// The elements to wrap the target around\r\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\r\n\r\n\t\t\tif ( this[ 0 ].parentNode ) {\r\n\t\t\t\twrap.insertBefore( this[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t\twrap.map(function() {\r\n\t\t\t\tvar elem = this;\r\n\r\n\t\t\t\twhile ( elem.firstElementChild ) {\r\n\t\t\t\t\telem = elem.firstElementChild;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn elem;\r\n\t\t\t}).append( this );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\twrapInner: function( html ) {\r\n\t\tif ( jQuery.isFunction( html ) ) {\r\n\t\t\treturn this.each(function( i ) {\r\n\t\t\t\tjQuery( this ).wrapInner( html.call(this, i) );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tvar self = jQuery( this ),\r\n\t\t\t\tcontents = self.contents();\r\n\r\n\t\t\tif ( contents.length ) {\r\n\t\t\t\tcontents.wrapAll( html );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.append( html );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\twrap: function( html ) {\r\n\t\tvar isFunction = jQuery.isFunction( html );\r\n\r\n\t\treturn this.each(function( i ) {\r\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );\r\n\t\t});\r\n\t},\r\n\r\n\tunwrap: function() {\r\n\t\treturn this.parent().each(function() {\r\n\t\t\tif ( !jQuery.nodeName( this, \"body\" ) ) {\r\n\t\t\t\tjQuery( this ).replaceWith( this.childNodes );\r\n\t\t\t}\r\n\t\t}).end();\r\n\t}\r\n});\r\n\r\n\r\njQuery.expr.filters.hidden = function( elem ) {\r\n\t// Support: Opera <= 12.12\r\n\t// Opera reports offsetWidths and offsetHeights less than zero on some elements\r\n\treturn elem.offsetWidth <= 0 && elem.offsetHeight <= 0;\r\n};\r\njQuery.expr.filters.visible = function( elem ) {\r\n\treturn !jQuery.expr.filters.hidden( elem );\r\n};\r\n\r\n\r\n\r\n\r\nvar r20 = /%20/g,\r\n\trbracket = /\\[\\]$/,\r\n\trCRLF = /\\r?\\n/g,\r\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\r\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\r\n\r\nfunction buildParams( prefix, obj, traditional, add ) {\r\n\tvar name;\r\n\r\n\tif ( jQuery.isArray( obj ) ) {\r\n\t\t// Serialize array item.\r\n\t\tjQuery.each( obj, function( i, v ) {\r\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\r\n\t\t\t\t// Treat each array item as a scalar.\r\n\t\t\t\tadd( prefix, v );\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\r\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\r\n\t\t// Serialize object item.\r\n\t\tfor ( name in obj ) {\r\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\r\n\t\t}\r\n\r\n\t} else {\r\n\t\t// Serialize scalar item.\r\n\t\tadd( prefix, obj );\r\n\t}\r\n}\r\n\r\n// Serialize an array of form elements or a set of\r\n// key/values into a query string\r\njQuery.param = function( a, traditional ) {\r\n\tvar prefix,\r\n\t\ts = [],\r\n\t\tadd = function( key, value ) {\r\n\t\t\t// If value is a function, invoke it and return its value\r\n\t\t\tvalue = jQuery.isFunction( value ) ? value() : ( value == null ? \"\" : value );\r\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\r\n\t\t};\r\n\r\n\t// Set traditional to true for jQuery <= 1.3.2 behavior.\r\n\tif ( traditional === undefined ) {\r\n\t\ttraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\r\n\t}\r\n\r\n\t// If an array was passed in, assume that it is an array of form elements.\r\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\r\n\t\t// Serialize the form elements\r\n\t\tjQuery.each( a, function() {\r\n\t\t\tadd( this.name, this.value );\r\n\t\t});\r\n\r\n\t} else {\r\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\r\n\t\t// did it), otherwise encode params recursively.\r\n\t\tfor ( prefix in a ) {\r\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\r\n\t\t}\r\n\t}\r\n\r\n\t// Return the resulting serialization\r\n\treturn s.join( \"&\" ).replace( r20, \"+\" );\r\n};\r\n\r\njQuery.fn.extend({\r\n\tserialize: function() {\r\n\t\treturn jQuery.param( this.serializeArray() );\r\n\t},\r\n\tserializeArray: function() {\r\n\t\treturn this.map(function() {\r\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\r\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\r\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\r\n\t\t})\r\n\t\t.filter(function() {\r\n\t\t\tvar type = this.type;\r\n\r\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\r\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\r\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\r\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\r\n\t\t})\r\n\t\t.map(function( i, elem ) {\r\n\t\t\tvar val = jQuery( this ).val();\r\n\r\n\t\t\treturn val == null ?\r\n\t\t\t\tnull :\r\n\t\t\t\tjQuery.isArray( val ) ?\r\n\t\t\t\t\tjQuery.map( val, function( val ) {\r\n\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\r\n\t\t}).get();\r\n\t}\r\n});\r\n\r\n\r\njQuery.ajaxSettings.xhr = function() {\r\n\ttry {\r\n\t\treturn new XMLHttpRequest();\r\n\t} catch( e ) {}\r\n};\r\n\r\nvar xhrId = 0,\r\n\txhrCallbacks = {},\r\n\txhrSuccessStatus = {\r\n\t\t// file protocol always yields status code 0, assume 200\r\n\t\t0: 200,\r\n\t\t// Support: IE9\r\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\r\n\t\t1223: 204\r\n\t},\r\n\txhrSupported = jQuery.ajaxSettings.xhr();\r\n\r\n// Support: IE9\r\n// Open requests must be manually aborted on unload (#5280)\r\n// See https://support.microsoft.com/kb/2856746 for more info\r\nif ( window.attachEvent ) {\r\n\twindow.attachEvent( \"onunload\", function() {\r\n\t\tfor ( var key in xhrCallbacks ) {\r\n\t\t\txhrCallbacks[ key ]();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\r\nsupport.ajax = xhrSupported = !!xhrSupported;\r\n\r\njQuery.ajaxTransport(function( options ) {\r\n\tvar callback;\r\n\r\n\t// Cross domain only allowed if supported through XMLHttpRequest\r\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\r\n\t\treturn {\r\n\t\t\tsend: function( headers, complete ) {\r\n\t\t\t\tvar i,\r\n\t\t\t\t\txhr = options.xhr(),\r\n\t\t\t\t\tid = ++xhrId;\r\n\r\n\t\t\t\txhr.open( options.type, options.url, options.async, options.username, options.password );\r\n\r\n\t\t\t\t// Apply custom fields if provided\r\n\t\t\t\tif ( options.xhrFields ) {\r\n\t\t\t\t\tfor ( i in options.xhrFields ) {\r\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Override mime type if needed\r\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\r\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// X-Requested-With header\r\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\r\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\r\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\r\n\t\t\t\t// For same-domain requests, won't change header if already provided.\r\n\t\t\t\tif ( !options.crossDomain && !headers[\"X-Requested-With\"] ) {\r\n\t\t\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set headers\r\n\t\t\t\tfor ( i in headers ) {\r\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Callback\r\n\t\t\t\tcallback = function( type ) {\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\tif ( callback ) {\r\n\t\t\t\t\t\t\tdelete xhrCallbacks[ id ];\r\n\t\t\t\t\t\t\tcallback = xhr.onload = xhr.onerror = null;\r\n\r\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\r\n\t\t\t\t\t\t\t\txhr.abort();\r\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\r\n\t\t\t\t\t\t\t\tcomplete(\r\n\t\t\t\t\t\t\t\t\t// file: protocol always yields status 0; see #8605, #14207\r\n\t\t\t\t\t\t\t\t\txhr.status,\r\n\t\t\t\t\t\t\t\t\txhr.statusText\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcomplete(\r\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\r\n\t\t\t\t\t\t\t\t\txhr.statusText,\r\n\t\t\t\t\t\t\t\t\t// Support: IE9\r\n\t\t\t\t\t\t\t\t\t// Accessing binary-data responseText throws an exception\r\n\t\t\t\t\t\t\t\t\t// (#11426)\r\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText === \"string\" ? {\r\n\t\t\t\t\t\t\t\t\t\ttext: xhr.responseText\r\n\t\t\t\t\t\t\t\t\t} : undefined,\r\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Listen to events\r\n\t\t\t\txhr.onload = callback();\r\n\t\t\t\txhr.onerror = callback(\"error\");\r\n\r\n\t\t\t\t// Create the abort callback\r\n\t\t\t\tcallback = xhrCallbacks[ id ] = callback(\"abort\");\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// Do send the request (this may raise an exception)\r\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\r\n\t\t\t\t} catch ( e ) {\r\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\r\n\t\t\t\t\tif ( callback ) {\r\n\t\t\t\t\t\tthrow e;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tabort: function() {\r\n\t\t\t\tif ( callback ) {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n});\r\n\r\n\r\n\r\n\r\n// Install script dataType\r\njQuery.ajaxSetup({\r\n\taccepts: {\r\n\t\tscript: \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"\r\n\t},\r\n\tcontents: {\r\n\t\tscript: /(?:java|ecma)script/\r\n\t},\r\n\tconverters: {\r\n\t\t\"text script\": function( text ) {\r\n\t\t\tjQuery.globalEval( text );\r\n\t\t\treturn text;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Handle cache's special case and crossDomain\r\njQuery.ajaxPrefilter( \"script\", function( s ) {\r\n\tif ( s.cache === undefined ) {\r\n\t\ts.cache = false;\r\n\t}\r\n\tif ( s.crossDomain ) {\r\n\t\ts.type = \"GET\";\r\n\t}\r\n});\r\n\r\n// Bind script tag hack transport\r\njQuery.ajaxTransport( \"script\", function( s ) {\r\n\t// This transport only deals with cross domain requests\r\n\tif ( s.crossDomain ) {\r\n\t\tvar script, callback;\r\n\t\treturn {\r\n\t\t\tsend: function( _, complete ) {\r\n\t\t\t\tscript = jQuery(\"<script>\").prop({\r\n\t\t\t\t\tasync: true,\r\n\t\t\t\t\tcharset: s.scriptCharset,\r\n\t\t\t\t\tsrc: s.url\r\n\t\t\t\t}).on(\r\n\t\t\t\t\t\"load error\",\r\n\t\t\t\t\tcallback = function( evt ) {\r\n\t\t\t\t\t\tscript.remove();\r\n\t\t\t\t\t\tcallback = null;\r\n\t\t\t\t\t\tif ( evt ) {\r\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\r\n\t\t\t},\r\n\t\t\tabort: function() {\r\n\t\t\t\tif ( callback ) {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n});\r\n\r\n\r\n\r\n\r\nvar oldCallbacks = [],\r\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\r\n\r\n// Default jsonp settings\r\njQuery.ajaxSetup({\r\n\tjsonp: \"callback\",\r\n\tjsonpCallback: function() {\r\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\r\n\t\tthis[ callback ] = true;\r\n\t\treturn callback;\r\n\t}\r\n});\r\n\r\n// Detect, normalize options and install callbacks for jsonp requests\r\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\r\n\r\n\tvar callbackName, overwritten, responseContainer,\r\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\r\n\t\t\t\"url\" :\r\n\t\t\ttypeof s.data === \"string\" && !( s.contentType || \"\" ).indexOf(\"application/x-www-form-urlencoded\") && rjsonp.test( s.data ) && \"data\"\r\n\t\t);\r\n\r\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\r\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\r\n\r\n\t\t// Get callback name, remembering preexisting value associated with it\r\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\r\n\t\t\ts.jsonpCallback() :\r\n\t\t\ts.jsonpCallback;\r\n\r\n\t\t// Insert callback into url or form data\r\n\t\tif ( jsonProp ) {\r\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\r\n\t\t} else if ( s.jsonp !== false ) {\r\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\r\n\t\t}\r\n\r\n\t\t// Use data converter to retrieve json after script execution\r\n\t\ts.converters[\"script json\"] = function() {\r\n\t\t\tif ( !responseContainer ) {\r\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\r\n\t\t\t}\r\n\t\t\treturn responseContainer[ 0 ];\r\n\t\t};\r\n\r\n\t\t// force json dataType\r\n\t\ts.dataTypes[ 0 ] = \"json\";\r\n\r\n\t\t// Install callback\r\n\t\toverwritten = window[ callbackName ];\r\n\t\twindow[ callbackName ] = function() {\r\n\t\t\tresponseContainer = arguments;\r\n\t\t};\r\n\r\n\t\t// Clean-up function (fires after converters)\r\n\t\tjqXHR.always(function() {\r\n\t\t\t// Restore preexisting value\r\n\t\t\twindow[ callbackName ] = overwritten;\r\n\r\n\t\t\t// Save back as free\r\n\t\t\tif ( s[ callbackName ] ) {\r\n\t\t\t\t// make sure that re-using the options doesn't screw things around\r\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\r\n\r\n\t\t\t\t// save the callback name for future use\r\n\t\t\t\toldCallbacks.push( callbackName );\r\n\t\t\t}\r\n\r\n\t\t\t// Call if it was a function and we have a response\r\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\r\n\t\t\t\toverwritten( responseContainer[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t\tresponseContainer = overwritten = undefined;\r\n\t\t});\r\n\r\n\t\t// Delegate to script\r\n\t\treturn \"script\";\r\n\t}\r\n});\r\n\r\n\r\n\r\n\r\n// data: string of html\r\n// context (optional): If specified, the fragment will be created in this context, defaults to document\r\n// keepScripts (optional): If true, will include scripts passed in the html string\r\njQuery.parseHTML = function( data, context, keepScripts ) {\r\n\tif ( !data || typeof data !== \"string\" ) {\r\n\t\treturn null;\r\n\t}\r\n\tif ( typeof context === \"boolean\" ) {\r\n\t\tkeepScripts = context;\r\n\t\tcontext = false;\r\n\t}\r\n\tcontext = context || document;\r\n\r\n\tvar parsed = rsingleTag.exec( data ),\r\n\t\tscripts = !keepScripts && [];\r\n\r\n\t// Single tag\r\n\tif ( parsed ) {\r\n\t\treturn [ context.createElement( parsed[1] ) ];\r\n\t}\r\n\r\n\tparsed = jQuery.buildFragment( [ data ], context, scripts );\r\n\r\n\tif ( scripts && scripts.length ) {\r\n\t\tjQuery( scripts ).remove();\r\n\t}\r\n\r\n\treturn jQuery.merge( [], parsed.childNodes );\r\n};\r\n\r\n\r\n// Keep a copy of the old load method\r\nvar _load = jQuery.fn.load;\r\n\r\n/**\r\n * Load a url into a page\r\n */\r\njQuery.fn.load = function( url, params, callback ) {\r\n\tif ( typeof url !== \"string\" && _load ) {\r\n\t\treturn _load.apply( this, arguments );\r\n\t}\r\n\r\n\tvar selector, type, response,\r\n\t\tself = this,\r\n\t\toff = url.indexOf(\" \");\r\n\r\n\tif ( off >= 0 ) {\r\n\t\tselector = jQuery.trim( url.slice( off ) );\r\n\t\turl = url.slice( 0, off );\r\n\t}\r\n\r\n\t// If it's a function\r\n\tif ( jQuery.isFunction( params ) ) {\r\n\r\n\t\t// We assume that it's the callback\r\n\t\tcallback = params;\r\n\t\tparams = undefined;\r\n\r\n\t// Otherwise, build a param string\r\n\t} else if ( params && typeof params === \"object\" ) {\r\n\t\ttype = \"POST\";\r\n\t}\r\n\r\n\t// If we have elements to modify, make the request\r\n\tif ( self.length > 0 ) {\r\n\t\tjQuery.ajax({\r\n\t\t\turl: url,\r\n\r\n\t\t\t// if \"type\" variable is undefined, then \"GET\" method will be used\r\n\t\t\ttype: type,\r\n\t\t\tdataType: \"html\",\r\n\t\t\tdata: params\r\n\t\t}).done(function( responseText ) {\r\n\r\n\t\t\t// Save response for use in complete callback\r\n\t\t\tresponse = arguments;\r\n\r\n\t\t\tself.html( selector ?\r\n\r\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\r\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\r\n\t\t\t\tjQuery(\"<div>\").append( jQuery.parseHTML( responseText ) ).find( selector ) :\r\n\r\n\t\t\t\t// Otherwise use the full result\r\n\t\t\t\tresponseText );\r\n\r\n\t\t}).complete( callback && function( jqXHR, status ) {\r\n\t\t\tself.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );\r\n\t\t});\r\n\t}\r\n\r\n\treturn this;\r\n};\r\n\r\n\r\n\r\n\r\n// Attach a bunch of functions for handling common AJAX events\r\njQuery.each( [ \"ajaxStart\", \"ajaxStop\", \"ajaxComplete\", \"ajaxError\", \"ajaxSuccess\", \"ajaxSend\" ], function( i, type ) {\r\n\tjQuery.fn[ type ] = function( fn ) {\r\n\t\treturn this.on( type, fn );\r\n\t};\r\n});\r\n\r\n\r\n\r\n\r\njQuery.expr.filters.animated = function( elem ) {\r\n\treturn jQuery.grep(jQuery.timers, function( fn ) {\r\n\t\treturn elem === fn.elem;\r\n\t}).length;\r\n};\r\n\r\n\r\n\r\n\r\nvar docElem = window.document.documentElement;\r\n\r\n/**\r\n * Gets a window from an element\r\n */\r\nfunction getWindow( elem ) {\r\n\treturn jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;\r\n}\r\n\r\njQuery.offset = {\r\n\tsetOffset: function( elem, options, i ) {\r\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\r\n\t\t\tposition = jQuery.css( elem, \"position\" ),\r\n\t\t\tcurElem = jQuery( elem ),\r\n\t\t\tprops = {};\r\n\r\n\t\t// Set position first, in-case top/left are set even on static elem\r\n\t\tif ( position === \"static\" ) {\r\n\t\t\telem.style.position = \"relative\";\r\n\t\t}\r\n\r\n\t\tcurOffset = curElem.offset();\r\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\r\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\r\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\r\n\t\t\t( curCSSTop + curCSSLeft ).indexOf(\"auto\") > -1;\r\n\r\n\t\t// Need to be able to calculate position if either\r\n\t\t// top or left is auto and position is either absolute or fixed\r\n\t\tif ( calculatePosition ) {\r\n\t\t\tcurPosition = curElem.position();\r\n\t\t\tcurTop = curPosition.top;\r\n\t\t\tcurLeft = curPosition.left;\r\n\r\n\t\t} else {\r\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\r\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\r\n\t\t}\r\n\r\n\t\tif ( jQuery.isFunction( options ) ) {\r\n\t\t\toptions = options.call( elem, i, curOffset );\r\n\t\t}\r\n\r\n\t\tif ( options.top != null ) {\r\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\r\n\t\t}\r\n\t\tif ( options.left != null ) {\r\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\r\n\t\t}\r\n\r\n\t\tif ( \"using\" in options ) {\r\n\t\t\toptions.using.call( elem, props );\r\n\r\n\t\t} else {\r\n\t\t\tcurElem.css( props );\r\n\t\t}\r\n\t}\r\n};\r\n\r\njQuery.fn.extend({\r\n\toffset: function( options ) {\r\n\t\tif ( arguments.length ) {\r\n\t\t\treturn options === undefined ?\r\n\t\t\t\tthis :\r\n\t\t\t\tthis.each(function( i ) {\r\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar docElem, win,\r\n\t\t\telem = this[ 0 ],\r\n\t\t\tbox = { top: 0, left: 0 },\r\n\t\t\tdoc = elem && elem.ownerDocument;\r\n\r\n\t\tif ( !doc ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdocElem = doc.documentElement;\r\n\r\n\t\t// Make sure it's not a disconnected DOM node\r\n\t\tif ( !jQuery.contains( docElem, elem ) ) {\r\n\t\t\treturn box;\r\n\t\t}\r\n\r\n\t\t// Support: BlackBerry 5, iOS 3 (original iPhone)\r\n\t\t// If we don't have gBCR, just use 0,0 rather than error\r\n\t\tif ( typeof elem.getBoundingClientRect !== strundefined ) {\r\n\t\t\tbox = elem.getBoundingClientRect();\r\n\t\t}\r\n\t\twin = getWindow( doc );\r\n\t\treturn {\r\n\t\t\ttop: box.top + win.pageYOffset - docElem.clientTop,\r\n\t\t\tleft: box.left + win.pageXOffset - docElem.clientLeft\r\n\t\t};\r\n\t},\r\n\r\n\tposition: function() {\r\n\t\tif ( !this[ 0 ] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar offsetParent, offset,\r\n\t\t\telem = this[ 0 ],\r\n\t\t\tparentOffset = { top: 0, left: 0 };\r\n\r\n\t\t// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent\r\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\r\n\t\t\t// Assume getBoundingClientRect is there when computed position is fixed\r\n\t\t\toffset = elem.getBoundingClientRect();\r\n\r\n\t\t} else {\r\n\t\t\t// Get *real* offsetParent\r\n\t\t\toffsetParent = this.offsetParent();\r\n\r\n\t\t\t// Get correct offsets\r\n\t\t\toffset = this.offset();\r\n\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\r\n\t\t\t\tparentOffset = offsetParent.offset();\r\n\t\t\t}\r\n\r\n\t\t\t// Add offsetParent borders\r\n\t\t\tparentOffset.top += jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true );\r\n\t\t\tparentOffset.left += jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true );\r\n\t\t}\r\n\r\n\t\t// Subtract parent offsets and element margins\r\n\t\treturn {\r\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\r\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\r\n\t\t};\r\n\t},\r\n\r\n\toffsetParent: function() {\r\n\t\treturn this.map(function() {\r\n\t\t\tvar offsetParent = this.offsetParent || docElem;\r\n\r\n\t\t\twhile ( offsetParent && ( !jQuery.nodeName( offsetParent, \"html\" ) && jQuery.css( offsetParent, \"position\" ) === \"static\" ) ) {\r\n\t\t\t\toffsetParent = offsetParent.offsetParent;\r\n\t\t\t}\r\n\r\n\t\t\treturn offsetParent || docElem;\r\n\t\t});\r\n\t}\r\n});\r\n\r\n// Create scrollLeft and scrollTop methods\r\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\r\n\tvar top = \"pageYOffset\" === prop;\r\n\r\n\tjQuery.fn[ method ] = function( val ) {\r\n\t\treturn access( this, function( elem, method, val ) {\r\n\t\t\tvar win = getWindow( elem );\r\n\r\n\t\t\tif ( val === undefined ) {\r\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\r\n\t\t\t}\r\n\r\n\t\t\tif ( win ) {\r\n\t\t\t\twin.scrollTo(\r\n\t\t\t\t\t!top ? val : window.pageXOffset,\r\n\t\t\t\t\ttop ? val : window.pageYOffset\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\telem[ method ] = val;\r\n\t\t\t}\r\n\t\t}, method, val, arguments.length, null );\r\n\t};\r\n});\r\n\r\n// Support: Safari<7+, Chrome<37+\r\n// Add the top/left cssHooks using jQuery.fn.position\r\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\r\n// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280\r\n// getComputedStyle returns percent when specified for top/left/bottom/right;\r\n// rather than make the css module depend on the offset module, just check for it here\r\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\r\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\r\n\t\tfunction( elem, computed ) {\r\n\t\t\tif ( computed ) {\r\n\t\t\t\tcomputed = curCSS( elem, prop );\r\n\t\t\t\t// If curCSS returns percentage, fallback to offset\r\n\t\t\t\treturn rnumnonpx.test( computed ) ?\r\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\r\n\t\t\t\t\tcomputed;\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n});\r\n\r\n\r\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\r\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\r\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name }, function( defaultExtra, funcName ) {\r\n\t\t// Margin is only for outerHeight, outerWidth\r\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\r\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\r\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\r\n\r\n\t\t\treturn access( this, function( elem, type, value ) {\r\n\t\t\t\tvar doc;\r\n\r\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\r\n\t\t\t\t\t// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\r\n\t\t\t\t\t// isn't a whole lot we can do. See pull request at this URL for discussion:\r\n\t\t\t\t\t// https://github.com/jquery/jquery/pull/764\r\n\t\t\t\t\treturn elem.document.documentElement[ \"client\" + name ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Get document width or height\r\n\t\t\t\tif ( elem.nodeType === 9 ) {\r\n\t\t\t\t\tdoc = elem.documentElement;\r\n\r\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\r\n\t\t\t\t\t// whichever is greatest\r\n\t\t\t\t\treturn Math.max(\r\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\r\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\r\n\t\t\t\t\t\tdoc[ \"client\" + name ]\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn value === undefined ?\r\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\r\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\r\n\r\n\t\t\t\t\t// Set width or height on the element\r\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\r\n\t\t\t}, type, chainable ? margin : undefined, chainable, null );\r\n\t\t};\r\n\t});\r\n});\r\n\r\n\r\n// The number of elements contained in the matched element set\r\njQuery.fn.size = function() {\r\n\treturn this.length;\r\n};\r\n\r\njQuery.fn.andSelf = jQuery.fn.addBack;\r\n\r\n\r\n\r\n\r\n// Register as a named AMD module, since jQuery can be concatenated with other\r\n// files that may use define, but not via a proper concatenation script that\r\n// understands anonymous AMD modules. A named AMD is safest and most robust\r\n// way to register. Lowercase jquery is used because AMD module names are\r\n// derived from file names, and jQuery is normally delivered in a lowercase\r\n// file name. Do this after creating the global so that if an AMD module wants\r\n// to call noConflict to hide this version of jQuery, it will work.\r\n\r\n// Note that for maximum portability, libraries that are not jQuery should\r\n// declare themselves as anonymous modules, and avoid setting a global if an\r\n// AMD loader is present. jQuery is a special case. For more information, see\r\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\r\n\r\nif ( typeof define === \"function\" && define.amd ) {\r\n\tdefine( \"jquery\", [], function() {\r\n\t\treturn jQuery;\r\n\t});\r\n}\r\n\r\n\r\n\r\n\r\nvar\r\n\t// Map over jQuery in case of overwrite\r\n\t_jQuery = window.jQuery,\r\n\r\n\t// Map over the $ in case of overwrite\r\n\t_$ = window.$;\r\n\r\njQuery.noConflict = function( deep ) {\r\n\tif ( window.$ === jQuery ) {\r\n\t\twindow.$ = _$;\r\n\t}\r\n\r\n\tif ( deep && window.jQuery === jQuery ) {\r\n\t\twindow.jQuery = _jQuery;\r\n\t}\r\n\r\n\treturn jQuery;\r\n};\r\n\r\n// Expose jQuery and $ identifiers, even in AMD\r\n// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\r\n// and CommonJS for browser emulators (#13566)\r\nif ( typeof noGlobal === strundefined ) {\r\n\twindow.jQuery = window.$ = jQuery;\r\n}\r\n\r\n\r\n\r\n\r\nreturn jQuery;\r\n\r\n}));\r\n;// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n\r\n/**\r\n * @license Highstock JS v2.1.3 (2015-02-27)\r\n *\r\n * (c) 2009-2014 Torstein Honsi\r\n *\r\n * License: www.highcharts.com/license\r\n */\r\n\r\n// JSLint options:\r\n/*global Highcharts, HighchartsAdapter, document, window, navigator, setInterval, clearInterval, clearTimeout, setTimeout, location, jQuery, $, console, each, grep */\r\n/*jslint ass: true, sloppy: true, forin: true, plusplus: true, nomen: true, vars: true, regexp: true, newcap: true, browser: true, continue: true, white: true */\r\n(function () {\r\n// encapsulated variables\r\nvar UNDEFINED,\r\n\tdoc = document,\r\n\twin = window,\r\n\tmath = Math,\r\n\tmathRound = math.round,\r\n\tmathFloor = math.floor,\r\n\tmathCeil = math.ceil,\r\n\tmathMax = math.max,\r\n\tmathMin = math.min,\r\n\tmathAbs = math.abs,\r\n\tmathCos = math.cos,\r\n\tmathSin = math.sin,\r\n\tmathPI = math.PI,\r\n\tdeg2rad = mathPI * 2 / 360,\r\n\r\n\r\n\t// some variables\r\n\tuserAgent = navigator.userAgent,\r\n\tisOpera = win.opera,\r\n\tisIE = /(msie|trident)/i.test(userAgent) && !isOpera,\r\n\tdocMode8 = doc.documentMode === 8,\r\n\tisWebKit = /AppleWebKit/.test(userAgent),\r\n\tisFirefox = /Firefox/.test(userAgent),\r\n\tisTouchDevice = /(Mobile|Android|Windows Phone)/.test(userAgent),\r\n\tSVG_NS = 'http://www.w3.org/2000/svg',\r\n\thasSVG = !!doc.createElementNS && !!doc.createElementNS(SVG_NS, 'svg').createSVGRect,\r\n\thasBidiBug = isFirefox && parseInt(userAgent.split('Firefox/')[1], 10) < 4, // issue #38\r\n\tuseCanVG = !hasSVG && !isIE && !!doc.createElement('canvas').getContext,\r\n\tRenderer,\r\n\thasTouch,\r\n\tsymbolSizes = {},\r\n\tidCounter = 0,\r\n\tgarbageBin,\r\n\tdefaultOptions,\r\n\tdateFormat, // function\r\n\tglobalAnimation,\r\n\tpathAnim,\r\n\ttimeUnits,\r\n\tnoop = function () { return UNDEFINED; },\r\n\tcharts = [],\r\n\tchartCount = 0,\r\n\tPRODUCT = 'Highstock',\r\n\tVERSION = '2.1.3',\r\n\r\n\t// some constants for frequently used strings\r\n\tDIV = 'div',\r\n\tABSOLUTE = 'absolute',\r\n\tRELATIVE = 'relative',\r\n\tHIDDEN = 'hidden',\r\n\tPREFIX = 'highcharts-',\r\n\tVISIBLE = 'visible',\r\n\tPX = 'px',\r\n\tNONE = 'none',\r\n\tM = 'M',\r\n\tL = 'L',\r\n\tnumRegex = /^[0-9]+$/,\r\n\tNORMAL_STATE = '',\r\n\tHOVER_STATE = 'hover',\r\n\tSELECT_STATE = 'select',\r\n\tmarginNames = ['plotTop', 'marginRight', 'marginBottom', 'plotLeft'],\r\n\t\r\n\t// Object for extending Axis\r\n\tAxisPlotLineOrBandExtension,\r\n\r\n\t// constants for attributes\r\n\tSTROKE_WIDTH = 'stroke-width',\r\n\r\n\t// time methods, changed based on whether or not UTC is used\r\n\tDate,  // Allow using a different Date class\r\n\tmakeTime,\r\n\ttimezoneOffset,\r\n\tgetTimezoneOffset,\r\n\tgetMinutes,\r\n\tgetHours,\r\n\tgetDay,\r\n\tgetDate,\r\n\tgetMonth,\r\n\tgetFullYear,\r\n\tsetMinutes,\r\n\tsetHours,\r\n\tsetDate,\r\n\tsetMonth,\r\n\tsetFullYear,\r\n\r\n\r\n\t// lookup over the types and the associated classes\r\n\tseriesTypes = {},\r\n\tHighcharts;\r\n\r\n// The Highcharts namespace\r\nHighcharts = win.Highcharts = win.Highcharts ? error(16, true) : {};\r\n\r\nHighcharts.seriesTypes = seriesTypes;\r\n\r\n/**\r\n * Extend an object with the members of another\r\n * @param {Object} a The object to be extended\r\n * @param {Object} b The object to add to the first one\r\n */\r\nvar extend = Highcharts.extend = function (a, b) {\r\n\tvar n;\r\n\tif (!a) {\r\n\t\ta = {};\r\n\t}\r\n\tfor (n in b) {\r\n\t\ta[n] = b[n];\r\n\t}\r\n\treturn a;\r\n};\r\n\t\r\n/**\r\n * Deep merge two or more objects and return a third object. If the first argument is\r\n * true, the contents of the second object is copied into the first object.\r\n * Previously this function redirected to jQuery.extend(true), but this had two limitations.\r\n * First, it deep merged arrays, which lead to workarounds in Highcharts. Second,\r\n * it copied properties from extended prototypes. \r\n */\r\nfunction merge() {\r\n\tvar i,\r\n\t\targs = arguments,\r\n\t\tlen,\r\n\t\tret = {},\r\n\t\tdoCopy = function (copy, original) {\r\n\t\t\tvar value, key;\r\n\r\n\t\t\t// An object is replacing a primitive\r\n\t\t\tif (typeof copy !== 'object') {\r\n\t\t\t\tcopy = {};\r\n\t\t\t}\r\n\r\n\t\t\tfor (key in original) {\r\n\t\t\t\tif (original.hasOwnProperty(key)) {\r\n\t\t\t\t\tvalue = original[key];\r\n\r\n\t\t\t\t\t// Copy the contents of objects, but not arrays or DOM nodes\r\n\t\t\t\t\tif (value && typeof value === 'object' && Object.prototype.toString.call(value) !== '[object Array]'\r\n\t\t\t\t\t\t\t&& key !== 'renderTo' && typeof value.nodeType !== 'number') {\r\n\t\t\t\t\t\tcopy[key] = doCopy(copy[key] || {}, value);\r\n\t\t\t\t\r\n\t\t\t\t\t// Primitives and arrays are copied over directly\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcopy[key] = original[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t};\r\n\r\n\t// If first argument is true, copy into the existing object. Used in setOptions.\r\n\tif (args[0] === true) {\r\n\t\tret = args[1];\r\n\t\targs = Array.prototype.slice.call(args, 2);\r\n\t}\r\n\r\n\t// For each argument, extend the return\r\n\tlen = args.length;\r\n\tfor (i = 0; i < len; i++) {\r\n\t\tret = doCopy(ret, args[i]);\r\n\t}\r\n\r\n\treturn ret;\r\n}\r\n\r\n/**\r\n * Shortcut for parseInt\r\n * @param {Object} s\r\n * @param {Number} mag Magnitude\r\n */\r\nfunction pInt(s, mag) {\r\n\treturn parseInt(s, mag || 10);\r\n}\r\n\r\n/**\r\n * Check for string\r\n * @param {Object} s\r\n */\r\nfunction isString(s) {\r\n\treturn typeof s === 'string';\r\n}\r\n\r\n/**\r\n * Check for object\r\n * @param {Object} obj\r\n */\r\nfunction isObject(obj) {\r\n\treturn obj && typeof obj === 'object';\r\n}\r\n\r\n/**\r\n * Check for array\r\n * @param {Object} obj\r\n */\r\nfunction isArray(obj) {\r\n\treturn Object.prototype.toString.call(obj) === '[object Array]';\r\n}\r\n\r\n/**\r\n * Check for number\r\n * @param {Object} n\r\n */\r\nfunction isNumber(n) {\r\n\treturn typeof n === 'number';\r\n}\r\n\r\nfunction log2lin(num) {\r\n\treturn math.log(num) / math.LN10;\r\n}\r\nfunction lin2log(num) {\r\n\treturn math.pow(10, num);\r\n}\r\n\r\n/**\r\n * Remove last occurence of an item from an array\r\n * @param {Array} arr\r\n * @param {Mixed} item\r\n */\r\nfunction erase(arr, item) {\r\n\tvar i = arr.length;\r\n\twhile (i--) {\r\n\t\tif (arr[i] === item) {\r\n\t\t\tarr.splice(i, 1);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t//return arr;\r\n}\r\n\r\n/**\r\n * Returns true if the object is not null or undefined. Like MooTools' $.defined.\r\n * @param {Object} obj\r\n */\r\nfunction defined(obj) {\r\n\treturn obj !== UNDEFINED && obj !== null;\r\n}\r\n\r\n/**\r\n * Set or get an attribute or an object of attributes. Can't use jQuery attr because\r\n * it attempts to set expando properties on the SVG element, which is not allowed.\r\n *\r\n * @param {Object} elem The DOM element to receive the attribute(s)\r\n * @param {String|Object} prop The property or an abject of key-value pairs\r\n * @param {String} value The value if a single property is set\r\n */\r\nfunction attr(elem, prop, value) {\r\n\tvar key,\r\n\t\tret;\r\n\r\n\t// if the prop is a string\r\n\tif (isString(prop)) {\r\n\t\t// set the value\r\n\t\tif (defined(value)) {\r\n\t\t\telem.setAttribute(prop, value);\r\n\r\n\t\t// get the value\r\n\t\t} else if (elem && elem.getAttribute) { // elem not defined when printing pie demo...\r\n\t\t\tret = elem.getAttribute(prop);\r\n\t\t}\r\n\r\n\t// else if prop is defined, it is a hash of key/value pairs\r\n\t} else if (defined(prop) && isObject(prop)) {\r\n\t\tfor (key in prop) {\r\n\t\t\telem.setAttribute(key, prop[key]);\r\n\t\t}\r\n\t}\r\n\treturn ret;\r\n}\r\n/**\r\n * Check if an element is an array, and if not, make it into an array. Like\r\n * MooTools' $.splat.\r\n */\r\nfunction splat(obj) {\r\n\treturn isArray(obj) ? obj : [obj];\r\n}\r\n\r\n\r\n/**\r\n * Return the first value that is defined. Like MooTools' $.pick.\r\n */\r\nvar pick = Highcharts.pick = function () {\r\n\tvar args = arguments,\r\n\t\ti,\r\n\t\targ,\r\n\t\tlength = args.length;\r\n\tfor (i = 0; i < length; i++) {\r\n\t\targ = args[i];\r\n\t\tif (arg !== UNDEFINED && arg !== null) {\r\n\t\t\treturn arg;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Set CSS on a given element\r\n * @param {Object} el\r\n * @param {Object} styles Style object with camel case property names\r\n */\r\nfunction css(el, styles) {\r\n\tif (isIE && !hasSVG) { // #2686\r\n\t\tif (styles && styles.opacity !== UNDEFINED) {\r\n\t\t\tstyles.filter = 'alpha(opacity=' + (styles.opacity * 100) + ')';\r\n\t\t}\r\n\t}\r\n\textend(el.style, styles);\r\n}\r\n\r\n/**\r\n * Utility function to create element with attributes and styles\r\n * @param {Object} tag\r\n * @param {Object} attribs\r\n * @param {Object} styles\r\n * @param {Object} parent\r\n * @param {Object} nopad\r\n */\r\nfunction createElement(tag, attribs, styles, parent, nopad) {\r\n\tvar el = doc.createElement(tag);\r\n\tif (attribs) {\r\n\t\textend(el, attribs);\r\n\t}\r\n\tif (nopad) {\r\n\t\tcss(el, {padding: 0, border: NONE, margin: 0});\r\n\t}\r\n\tif (styles) {\r\n\t\tcss(el, styles);\r\n\t}\r\n\tif (parent) {\r\n\t\tparent.appendChild(el);\r\n\t}\r\n\treturn el;\r\n}\r\n\r\n/**\r\n * Extend a prototyped class by new members\r\n * @param {Object} parent\r\n * @param {Object} members\r\n */\r\nfunction extendClass(parent, members) {\r\n\tvar object = function () { return UNDEFINED; };\r\n\tobject.prototype = new parent();\r\n\textend(object.prototype, members);\r\n\treturn object;\r\n}\r\n\r\n/**\r\n * Pad a string to a given length by adding 0 to the beginning\r\n * @param {Number} number\r\n * @param {Number} length\r\n */\r\nfunction pad(number, length) {\r\n\t// Create an array of the remaining length +1 and join it with 0's\r\n\treturn new Array((length || 2) + 1 - String(number).length).join(0) + number;\r\n}\r\n\r\n/**\r\n * Wrap a method with extended functionality, preserving the original function\r\n * @param {Object} obj The context object that the method belongs to \r\n * @param {String} method The name of the method to extend\r\n * @param {Function} func A wrapper function callback. This function is called with the same arguments\r\n * as the original function, except that the original function is unshifted and passed as the first \r\n * argument. \r\n */\r\nvar wrap = Highcharts.wrap = function (obj, method, func) {\r\n\tvar proceed = obj[method];\r\n\tobj[method] = function () {\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\targs.unshift(proceed);\r\n\t\treturn func.apply(this, args);\r\n\t};\r\n};\r\n\r\n\r\nfunction getTZOffset(timestamp) {\r\n\treturn ((getTimezoneOffset && getTimezoneOffset(timestamp)) || timezoneOffset || 0) * 60000;\r\n}\r\n\r\n/**\r\n * Based on http://www.php.net/manual/en/function.strftime.php\r\n * @param {String} format\r\n * @param {Number} timestamp\r\n * @param {Boolean} capitalize\r\n */\r\ndateFormat = function (format, timestamp, capitalize) {\r\n\tif (!defined(timestamp) || isNaN(timestamp)) {\r\n\t\treturn 'Invalid date';\r\n\t}\r\n\tformat = pick(format, '%Y-%m-%d %H:%M:%S');\r\n\r\n\tvar date = new Date(timestamp - getTZOffset(timestamp)),\r\n\t\tkey, // used in for constuct below\r\n\t\t// get the basic time values\r\n\t\thours = date[getHours](),\r\n\t\tday = date[getDay](),\r\n\t\tdayOfMonth = date[getDate](),\r\n\t\tmonth = date[getMonth](),\r\n\t\tfullYear = date[getFullYear](),\r\n\t\tlang = defaultOptions.lang,\r\n\t\tlangWeekdays = lang.weekdays,\r\n\r\n\t\t// List all format keys. Custom formats can be added from the outside. \r\n\t\treplacements = extend({\r\n\r\n\t\t\t// Day\r\n\t\t\t'a': langWeekdays[day].substr(0, 3), // Short weekday, like 'Mon'\r\n\t\t\t'A': langWeekdays[day], // Long weekday, like 'Monday'\r\n\t\t\t'd': pad(dayOfMonth), // Two digit day of the month, 01 to 31\r\n\t\t\t'e': dayOfMonth, // Day of the month, 1 through 31\r\n\t\t\t'w': day,\r\n\r\n\t\t\t// Week (none implemented)\r\n\t\t\t//'W': weekNumber(),\r\n\r\n\t\t\t// Month\r\n\t\t\t'b': lang.shortMonths[month], // Short month, like 'Jan'\r\n\t\t\t'B': lang.months[month], // Long month, like 'January'\r\n\t\t\t'm': pad(month + 1), // Two digit month number, 01 through 12\r\n\r\n\t\t\t// Year\r\n\t\t\t'y': fullYear.toString().substr(2, 2), // Two digits year, like 09 for 2009\r\n\t\t\t'Y': fullYear, // Four digits year, like 2009\r\n\r\n\t\t\t// Time\r\n\t\t\t'H': pad(hours), // Two digits hours in 24h format, 00 through 23\r\n\t\t\t'I': pad((hours % 12) || 12), // Two digits hours in 12h format, 00 through 11\r\n\t\t\t'l': (hours % 12) || 12, // Hours in 12h format, 1 through 12\r\n\t\t\t'M': pad(date[getMinutes]()), // Two digits minutes, 00 through 59\r\n\t\t\t'p': hours < 12 ? 'AM' : 'PM', // Upper case AM or PM\r\n\t\t\t'P': hours < 12 ? 'am' : 'pm', // Lower case AM or PM\r\n\t\t\t'S': pad(date.getSeconds()), // Two digits seconds, 00 through  59\r\n\t\t\t'L': pad(mathRound(timestamp % 1000), 3) // Milliseconds (naming from Ruby)\r\n\t\t}, Highcharts.dateFormats);\r\n\r\n\r\n\t// do the replaces\r\n\tfor (key in replacements) {\r\n\t\twhile (format.indexOf('%' + key) !== -1) { // regex would do it in one line, but this is faster\r\n\t\t\tformat = format.replace('%' + key, typeof replacements[key] === 'function' ? replacements[key](timestamp) : replacements[key]);\r\n\t\t}\r\n\t}\r\n\r\n\t// Optionally capitalize the string and return\r\n\treturn capitalize ? format.substr(0, 1).toUpperCase() + format.substr(1) : format;\r\n};\r\n\r\n/** \r\n * Format a single variable. Similar to sprintf, without the % prefix.\r\n */\r\nfunction formatSingle(format, val) {\r\n\tvar floatRegex = /f$/,\r\n\t\tdecRegex = /\\.([0-9])/,\r\n\t\tlang = defaultOptions.lang,\r\n\t\tdecimals;\r\n\r\n\tif (floatRegex.test(format)) { // float\r\n\t\tdecimals = format.match(decRegex);\r\n\t\tdecimals = decimals ? decimals[1] : -1;\r\n\t\tif (val !== null) {\r\n\t\t\tval = Highcharts.numberFormat(\r\n\t\t\t\tval,\r\n\t\t\t\tdecimals,\r\n\t\t\t\tlang.decimalPoint,\r\n\t\t\t\tformat.indexOf(',') > -1 ? lang.thousandsSep : ''\r\n\t\t\t);\r\n\t\t}\r\n\t} else {\r\n\t\tval = dateFormat(format, val);\r\n\t}\r\n\treturn val;\r\n}\r\n\r\n/**\r\n * Format a string according to a subset of the rules of Python's String.format method.\r\n */\r\nfunction format(str, ctx) {\r\n\tvar splitter = '{',\r\n\t\tisInside = false,\r\n\t\tsegment,\r\n\t\tvalueAndFormat,\r\n\t\tpath,\r\n\t\ti,\r\n\t\tlen,\r\n\t\tret = [],\r\n\t\tval,\r\n\t\tindex;\r\n\t\r\n\twhile ((index = str.indexOf(splitter)) !== -1) {\r\n\t\t\r\n\t\tsegment = str.slice(0, index);\r\n\t\tif (isInside) { // we're on the closing bracket looking back\r\n\t\t\t\r\n\t\t\tvalueAndFormat = segment.split(':');\r\n\t\t\tpath = valueAndFormat.shift().split('.'); // get first and leave format\r\n\t\t\tlen = path.length;\r\n\t\t\tval = ctx;\r\n\r\n\t\t\t// Assign deeper paths\r\n\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\tval = val[path[i]];\r\n\t\t\t}\r\n\r\n\t\t\t// Format the replacement\r\n\t\t\tif (valueAndFormat.length) {\r\n\t\t\t\tval = formatSingle(valueAndFormat.join(':'), val);\r\n\t\t\t}\r\n\r\n\t\t\t// Push the result and advance the cursor\r\n\t\t\tret.push(val);\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tret.push(segment);\r\n\t\t\t\r\n\t\t}\r\n\t\tstr = str.slice(index + 1); // the rest\r\n\t\tisInside = !isInside; // toggle\r\n\t\tsplitter = isInside ? '}' : '{'; // now look for next matching bracket\r\n\t}\r\n\tret.push(str);\r\n\treturn ret.join('');\r\n}\r\n\r\n/**\r\n * Get the magnitude of a number\r\n */\r\nfunction getMagnitude(num) {\r\n\treturn math.pow(10, mathFloor(math.log(num) / math.LN10));\r\n}\r\n\r\n/**\r\n * Take an interval and normalize it to multiples of 1, 2, 2.5 and 5\r\n * @param {Number} interval\r\n * @param {Array} multiples\r\n * @param {Number} magnitude\r\n * @param {Object} options\r\n */\r\nfunction normalizeTickInterval(interval, multiples, magnitude, allowDecimals, preventExceed) {\r\n\tvar normalized, \r\n\t\ti,\r\n\t\tretInterval = interval;\r\n\r\n\t// round to a tenfold of 1, 2, 2.5 or 5\r\n\tmagnitude = pick(magnitude, 1);\r\n\tnormalized = interval / magnitude;\r\n\r\n\t// multiples for a linear scale\r\n\tif (!multiples) {\r\n\t\tmultiples = [1, 2, 2.5, 5, 10];\r\n\r\n\t\t// the allowDecimals option\r\n\t\tif (allowDecimals === false) {\r\n\t\t\tif (magnitude === 1) {\r\n\t\t\t\tmultiples = [1, 2, 5, 10];\r\n\t\t\t} else if (magnitude <= 0.1) {\r\n\t\t\t\tmultiples = [1 / magnitude];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// normalize the interval to the nearest multiple\r\n\tfor (i = 0; i < multiples.length; i++) {\r\n\t\tretInterval = multiples[i];\r\n\t\tif ((preventExceed && retInterval * magnitude >= interval) || // only allow tick amounts smaller than natural\r\n\t\t\t(!preventExceed && (normalized <= (multiples[i] + (multiples[i + 1] || multiples[i])) / 2))) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// multiply back to the correct magnitude\r\n\tretInterval *= magnitude;\r\n\t\r\n\treturn retInterval;\r\n}\r\n\r\n\r\n/**\r\n * Utility method that sorts an object array and keeping the order of equal items.\r\n * ECMA script standard does not specify the behaviour when items are equal.\r\n */\r\nfunction stableSort(arr, sortFunction) {\r\n\tvar length = arr.length,\r\n\t\tsortValue,\r\n\t\ti;\r\n\r\n\t// Add index to each item\r\n\tfor (i = 0; i < length; i++) {\r\n\t\tarr[i].ss_i = i; // stable sort index\r\n\t}\r\n\r\n\tarr.sort(function (a, b) {\r\n\t\tsortValue = sortFunction(a, b);\r\n\t\treturn sortValue === 0 ? a.ss_i - b.ss_i : sortValue;\r\n\t});\r\n\r\n\t// Remove index from items\r\n\tfor (i = 0; i < length; i++) {\r\n\t\tdelete arr[i].ss_i; // stable sort index\r\n\t}\r\n}\r\n\r\n/**\r\n * Non-recursive method to find the lowest member of an array. Math.min raises a maximum\r\n * call stack size exceeded error in Chrome when trying to apply more than 150.000 points. This\r\n * method is slightly slower, but safe.\r\n */\r\nfunction arrayMin(data) {\r\n\tvar i = data.length,\r\n\t\tmin = data[0];\r\n\r\n\twhile (i--) {\r\n\t\tif (data[i] < min) {\r\n\t\t\tmin = data[i];\r\n\t\t}\r\n\t}\r\n\treturn min;\r\n}\r\n\r\n/**\r\n * Non-recursive method to find the lowest member of an array. Math.min raises a maximum\r\n * call stack size exceeded error in Chrome when trying to apply more than 150.000 points. This\r\n * method is slightly slower, but safe.\r\n */\r\nfunction arrayMax(data) {\r\n\tvar i = data.length,\r\n\t\tmax = data[0];\r\n\r\n\twhile (i--) {\r\n\t\tif (data[i] > max) {\r\n\t\t\tmax = data[i];\r\n\t\t}\r\n\t}\r\n\treturn max;\r\n}\r\n\r\n/**\r\n * Utility method that destroys any SVGElement or VMLElement that are properties on the given object.\r\n * It loops all properties and invokes destroy if there is a destroy method. The property is\r\n * then delete'ed.\r\n * @param {Object} The object to destroy properties on\r\n * @param {Object} Exception, do not destroy this property, only delete it.\r\n */\r\nfunction destroyObjectProperties(obj, except) {\r\n\tvar n;\r\n\tfor (n in obj) {\r\n\t\t// If the object is non-null and destroy is defined\r\n\t\tif (obj[n] && obj[n] !== except && obj[n].destroy) {\r\n\t\t\t// Invoke the destroy\r\n\t\t\tobj[n].destroy();\r\n\t\t}\r\n\r\n\t\t// Delete the property from the object.\r\n\t\tdelete obj[n];\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Discard an element by moving it to the bin and delete\r\n * @param {Object} The HTML node to discard\r\n */\r\nfunction discardElement(element) {\r\n\t// create a garbage bin element, not part of the DOM\r\n\tif (!garbageBin) {\r\n\t\tgarbageBin = createElement(DIV);\r\n\t}\r\n\r\n\t// move the node and empty bin\r\n\tif (element) {\r\n\t\tgarbageBin.appendChild(element);\r\n\t}\r\n\tgarbageBin.innerHTML = '';\r\n}\r\n\r\n/**\r\n * Provide error messages for debugging, with links to online explanation \r\n */\r\nfunction error (code, stop) {\r\n\tvar msg = 'Highcharts error #' + code + ': www.highcharts.com/errors/' + code;\r\n\tif (stop) {\r\n\t\tthrow msg;\r\n\t}\r\n\t// else ...\r\n\tif (win.console) {\r\n\t\tconsole.log(msg);\r\n\t}\r\n}\r\n\r\n/**\r\n * Fix JS round off float errors\r\n * @param {Number} num\r\n */\r\nfunction correctFloat(num) {\r\n\treturn parseFloat(\r\n\t\tnum.toPrecision(14)\r\n\t);\r\n}\r\n\r\n/**\r\n * Set the global animation to either a given value, or fall back to the\r\n * given chart's animation option\r\n * @param {Object} animation\r\n * @param {Object} chart\r\n */\r\nfunction setAnimation(animation, chart) {\r\n\tglobalAnimation = pick(animation, chart.animation);\r\n}\r\n\r\n/**\r\n * The time unit lookup\r\n */\r\ntimeUnits = {\r\n\tmillisecond: 1,\r\n\tsecond: 1000,\r\n\tminute: 60000,\r\n\thour: 3600000,\r\n\tday: 24 * 3600000,\r\n\tweek: 7 * 24 * 3600000,\r\n\tmonth: 28 * 24 * 3600000,\r\n\tyear: 364 * 24 * 3600000\r\n};\r\n\r\n\r\n/**\r\n * Format a number and return a string based on input settings\r\n * @param {Number} number The input number to format\r\n * @param {Number} decimals The amount of decimals\r\n * @param {String} decPoint The decimal point, defaults to the one given in the lang options\r\n * @param {String} thousandsSep The thousands separator, defaults to the one given in the lang options\r\n */\r\nHighcharts.numberFormat = function (number, decimals, decPoint, thousandsSep) {\r\n\tvar lang = defaultOptions.lang,\r\n\t\t// http://kevin.vanzonneveld.net/techblog/article/javascript_equivalent_for_phps_number_format/\r\n\t\tn = +number || 0,\r\n\t\tc = decimals === -1 ?\r\n\t\t\tmathMin((n.toString().split('.')[1] || '').length, 20) : // Preserve decimals. Not huge numbers (#3793).\r\n\t\t\t(isNaN(decimals = mathAbs(decimals)) ? 2 : decimals),\r\n\t\td = decPoint === undefined ? lang.decimalPoint : decPoint,\r\n\t\tt = thousandsSep === undefined ? lang.thousandsSep : thousandsSep,\r\n\t\ts = n < 0 ? \"-\" : \"\",\r\n\t\ti = String(pInt(n = mathAbs(n).toFixed(c))),\r\n\t\tj = i.length > 3 ? i.length % 3 : 0;\r\n\r\n\treturn (s + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) +\r\n\t\t\t(c ? d + mathAbs(n - i).toFixed(c).slice(2) : \"\"));\r\n};\r\n/**\r\n * Path interpolation algorithm used across adapters\r\n */\r\npathAnim = {\r\n\t/**\r\n\t * Prepare start and end values so that the path can be animated one to one\r\n\t */\r\n\tinit: function (elem, fromD, toD) {\r\n\t\tfromD = fromD || '';\r\n\t\tvar shift = elem.shift,\r\n\t\t\tbezier = fromD.indexOf('C') > -1,\r\n\t\t\tnumParams = bezier ? 7 : 3,\r\n\t\t\tendLength,\r\n\t\t\tslice,\r\n\t\t\ti,\r\n\t\t\tstart = fromD.split(' '),\r\n\t\t\tend = [].concat(toD), // copy\r\n\t\t\tstartBaseLine,\r\n\t\t\tendBaseLine,\r\n\t\t\tsixify = function (arr) { // in splines make move points have six parameters like bezier curves\r\n\t\t\t\ti = arr.length;\r\n\t\t\t\twhile (i--) {\r\n\t\t\t\t\tif (arr[i] === M) {\r\n\t\t\t\t\t\tarr.splice(i + 1, 0, arr[i + 1], arr[i + 2], arr[i + 1], arr[i + 2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\tif (bezier) {\r\n\t\t\tsixify(start);\r\n\t\t\tsixify(end);\r\n\t\t}\r\n\r\n\t\t// pull out the base lines before padding\r\n\t\tif (elem.isArea) {\r\n\t\t\tstartBaseLine = start.splice(start.length - 6, 6);\r\n\t\t\tendBaseLine = end.splice(end.length - 6, 6);\r\n\t\t}\r\n\r\n\t\t// if shifting points, prepend a dummy point to the end path\r\n\t\tif (shift <= end.length / numParams && start.length === end.length) {\r\n\t\t\twhile (shift--) {\r\n\t\t\t\tend = [].concat(end).splice(0, numParams).concat(end);\r\n\t\t\t}\r\n\t\t}\r\n\t\telem.shift = 0; // reset for following animations\r\n\r\n\t\t// copy and append last point until the length matches the end length\r\n\t\tif (start.length) {\r\n\t\t\tendLength = end.length;\r\n\t\t\twhile (start.length < endLength) {\r\n\r\n\t\t\t\t//bezier && sixify(start);\r\n\t\t\t\tslice = [].concat(start).splice(start.length - numParams, numParams);\r\n\t\t\t\tif (bezier) { // disable first control point\r\n\t\t\t\t\tslice[numParams - 6] = slice[numParams - 2];\r\n\t\t\t\t\tslice[numParams - 5] = slice[numParams - 1];\r\n\t\t\t\t}\r\n\t\t\t\tstart = start.concat(slice);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (startBaseLine) { // append the base lines for areas\r\n\t\t\tstart = start.concat(startBaseLine);\r\n\t\t\tend = end.concat(endBaseLine);\r\n\t\t}\r\n\t\treturn [start, end];\r\n\t},\r\n\r\n\t/**\r\n\t * Interpolate each value of the path and return the array\r\n\t */\r\n\tstep: function (start, end, pos, complete) {\r\n\t\tvar ret = [],\r\n\t\t\ti = start.length,\r\n\t\t\tstartVal;\r\n\r\n\t\tif (pos === 1) { // land on the final path without adjustment points appended in the ends\r\n\t\t\tret = complete;\r\n\r\n\t\t} else if (i === end.length && pos < 1) {\r\n\t\t\twhile (i--) {\r\n\t\t\t\tstartVal = parseFloat(start[i]);\r\n\t\t\t\tret[i] =\r\n\t\t\t\t\tisNaN(startVal) ? // a letter instruction like M or L\r\n\t\t\t\t\t\tstart[i] :\r\n\t\t\t\t\t\tpos * (parseFloat(end[i] - startVal)) + startVal;\r\n\r\n\t\t\t}\r\n\t\t} else { // if animation is finished or length not matching, land on right value\r\n\t\t\tret = end;\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n};\r\n\r\n(function ($) {\r\n\t/**\r\n\t * The default HighchartsAdapter for jQuery\r\n\t */\r\n\twin.HighchartsAdapter = win.HighchartsAdapter || ($ && {\r\n\t\t\r\n\t\t/**\r\n\t\t * Initialize the adapter by applying some extensions to jQuery\r\n\t\t */\r\n\t\tinit: function (pathAnim) {\r\n\t\t\t\r\n\t\t\t// extend the animate function to allow SVG animations\r\n\t\t\tvar Fx = $.fx;\r\n\t\t\t\r\n\t\t\t/*jslint unparam: true*//* allow unused param x in this function */\r\n\t\t\t$.extend($.easing, {\r\n\t\t\t\teaseOutQuad: function (x, t, b, c, d) {\r\n\t\t\t\t\treturn -c * (t /= d) * (t - 2) + b;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t/*jslint unparam: false*/\r\n\t\t\r\n\t\t\t// extend some methods to check for elem.attr, which means it is a Highcharts SVG object\r\n\t\t\t$.each(['cur', '_default', 'width', 'height', 'opacity'], function (i, fn) {\r\n\t\t\t\tvar obj = Fx.step,\r\n\t\t\t\t\tbase;\r\n\t\t\t\t\t\r\n\t\t\t\t// Handle different parent objects\r\n\t\t\t\tif (fn === 'cur') {\r\n\t\t\t\t\tobj = Fx.prototype; // 'cur', the getter, relates to Fx.prototype\r\n\t\t\t\t\r\n\t\t\t\t} else if (fn === '_default' && $.Tween) { // jQuery 1.8 model\r\n\t\t\t\t\tobj = $.Tween.propHooks[fn];\r\n\t\t\t\t\tfn = 'set';\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\t// Overwrite the method\r\n\t\t\t\tbase = obj[fn];\r\n\t\t\t\tif (base) { // step.width and step.height don't exist in jQuery < 1.7\r\n\t\t\r\n\t\t\t\t\t// create the extended function replacement\r\n\t\t\t\t\tobj[fn] = function (fx) {\r\n\r\n\t\t\t\t\t\tvar elem;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Fx.prototype.cur does not use fx argument\r\n\t\t\t\t\t\tfx = i ? fx : this;\r\n\r\n\t\t\t\t\t\t// Don't run animations on textual properties like align (#1821)\r\n\t\t\t\t\t\tif (fx.prop === 'align') {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t// shortcut\r\n\t\t\t\t\t\telem = fx.elem;\r\n\t\t\r\n\t\t\t\t\t\t// Fx.prototype.cur returns the current value. The other ones are setters\r\n\t\t\t\t\t\t// and returning a value has no effect.\r\n\t\t\t\t\t\treturn elem.attr ? // is SVG element wrapper\r\n\t\t\t\t\t\t\telem.attr(fx.prop, fn === 'cur' ? UNDEFINED : fx.now) : // apply the SVG wrapper's method\r\n\t\t\t\t\t\t\tbase.apply(this, arguments); // use jQuery's built-in method\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Extend the opacity getter, needed for fading opacity with IE9 and jQuery 1.10+\r\n\t\t\twrap($.cssHooks.opacity, 'get', function (proceed, elem, computed) {\r\n\t\t\t\treturn elem.attr ? (elem.opacity || 0) : proceed.call(this, elem, computed);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// Define the setter function for d (path definitions)\r\n\t\t\tthis.addAnimSetter('d', function (fx) {\r\n\t\t\t\tvar elem = fx.elem,\r\n\t\t\t\t\tends;\r\n\t\t\r\n\t\t\t\t// Normally start and end should be set in state == 0, but sometimes,\r\n\t\t\t\t// for reasons unknown, this doesn't happen. Perhaps state == 0 is skipped\r\n\t\t\t\t// in these cases\r\n\t\t\t\tif (!fx.started) {\r\n\t\t\t\t\tends = pathAnim.init(elem, elem.d, elem.toD);\r\n\t\t\t\t\tfx.start = ends[0];\r\n\t\t\t\t\tfx.end = ends[1];\r\n\t\t\t\t\tfx.started = true;\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\t// Interpolate each value of the path\r\n\t\t\t\telem.attr('d', pathAnim.step(fx.start, fx.end, fx.pos, elem.toD));\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Utility for iterating over an array. Parameters are reversed compared to jQuery.\r\n\t\t\t * @param {Array} arr\r\n\t\t\t * @param {Function} fn\r\n\t\t\t */\r\n\t\t\tthis.each = Array.prototype.forEach ?\r\n\t\t\t\tfunction (arr, fn) { // modern browsers\r\n\t\t\t\t\treturn Array.prototype.forEach.call(arr, fn);\r\n\t\t\t\t\t\r\n\t\t\t\t} : \r\n\t\t\t\tfunction (arr, fn) { // legacy\r\n\t\t\t\t\tvar i, \r\n\t\t\t\t\t\tlen = arr.length;\r\n\t\t\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\t\t\tif (fn.call(arr[i], arr[i], i, arr) === false) {\r\n\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Register Highcharts as a plugin in the respective framework\r\n\t\t\t */\r\n\t\t\t$.fn.highcharts = function () {\r\n\t\t\t\tvar constr = 'Chart', // default constructor\r\n\t\t\t\t\targs = arguments,\r\n\t\t\t\t\toptions,\r\n\t\t\t\t\tret,\r\n\t\t\t\t\tchart;\r\n\r\n\t\t\t\tif (this[0]) {\r\n\r\n\t\t\t\t\tif (isString(args[0])) {\r\n\t\t\t\t\t\tconstr = args[0];\r\n\t\t\t\t\t\targs = Array.prototype.slice.call(args, 1); \r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions = args[0];\r\n\r\n\t\t\t\t\t// Create the chart\r\n\t\t\t\t\tif (options !== UNDEFINED) {\r\n\t\t\t\t\t\t/*jslint unused:false*/\r\n\t\t\t\t\t\toptions.chart = options.chart || {};\r\n\t\t\t\t\t\toptions.chart.renderTo = this[0];\r\n\t\t\t\t\t\tchart = new Highcharts[constr](options, args[1]);\r\n\t\t\t\t\t\tret = this;\r\n\t\t\t\t\t\t/*jslint unused:true*/\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// When called without parameters or with the return argument, get a predefined chart\r\n\t\t\t\t\tif (options === UNDEFINED) {\r\n\t\t\t\t\t\tret = charts[attr(this[0], 'data-highcharts-chart')];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn ret;\r\n\t\t\t};\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Add an animation setter for a specific property\r\n\t\t */\r\n\t\taddAnimSetter: function (prop, setter) {\r\n\t\t\t// jQuery 1.8 style\r\n\t\t\tif ($.Tween) {\r\n\t\t\t\t$.Tween.propHooks[prop] = {\r\n\t\t\t\t\tset: setter\r\n\t\t\t\t};\r\n\t\t\t// pre 1.8\r\n\t\t\t} else {\r\n\t\t\t\t$.fx.step[prop] = setter;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Downloads a script and executes a callback when done.\r\n\t\t * @param {String} scriptLocation\r\n\t\t * @param {Function} callback\r\n\t\t */\r\n\t\tgetScript: $.getScript,\r\n\t\t\r\n\t\t/**\r\n\t\t * Return the index of an item in an array, or -1 if not found\r\n\t\t */\r\n\t\tinArray: $.inArray,\r\n\t\t\r\n\t\t/**\r\n\t\t * A direct link to jQuery methods. MooTools and Prototype adapters must be implemented for each case of method.\r\n\t\t * @param {Object} elem The HTML element\r\n\t\t * @param {String} method Which method to run on the wrapped element\r\n\t\t */\r\n\t\tadapterRun: function (elem, method) {\r\n\t\t\treturn $(elem)[method]();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Filter an array\r\n\t\t */\r\n\t\tgrep: $.grep,\r\n\t\r\n\t\t/**\r\n\t\t * Map an array\r\n\t\t * @param {Array} arr\r\n\t\t * @param {Function} fn\r\n\t\t */\r\n\t\tmap: function (arr, fn) {\r\n\t\t\t//return jQuery.map(arr, fn);\r\n\t\t\tvar results = [],\r\n\t\t\t\ti = 0,\r\n\t\t\t\tlen = arr.length;\r\n\t\t\tfor (; i < len; i++) {\r\n\t\t\t\tresults[i] = fn.call(arr[i], arr[i], i, arr);\r\n\t\t\t}\r\n\t\t\treturn results;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Get the position of an element relative to the top left of the page\r\n\t\t */\r\n\t\toffset: function (el) {\r\n\t\t\treturn $(el).offset();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Add an event listener\r\n\t\t * @param {Object} el A HTML element or custom object\r\n\t\t * @param {String} event The event type\r\n\t\t * @param {Function} fn The event handler\r\n\t\t */\r\n\t\taddEvent: function (el, event, fn) {\r\n\t\t\t$(el).bind(event, fn);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Remove event added with addEvent\r\n\t\t * @param {Object} el The object\r\n\t\t * @param {String} eventType The event type. Leave blank to remove all events.\r\n\t\t * @param {Function} handler The function to remove\r\n\t\t */\r\n\t\tremoveEvent: function (el, eventType, handler) {\r\n\t\t\t// workaround for jQuery issue with unbinding custom events:\r\n\t\t\t// http://forum.jQuery.com/topic/javascript-error-when-unbinding-a-custom-event-using-jQuery-1-4-2\r\n\t\t\tvar func = doc.removeEventListener ? 'removeEventListener' : 'detachEvent';\r\n\t\t\tif (doc[func] && el && !el[func]) {\r\n\t\t\t\tel[func] = function () {};\r\n\t\t\t}\r\n\t\r\n\t\t\t$(el).unbind(eventType, handler);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Fire an event on a custom object\r\n\t\t * @param {Object} el\r\n\t\t * @param {String} type\r\n\t\t * @param {Object} eventArguments\r\n\t\t * @param {Function} defaultFunction\r\n\t\t */\r\n\t\tfireEvent: function (el, type, eventArguments, defaultFunction) {\r\n\t\t\tvar event = $.Event(type),\r\n\t\t\t\tdetachedType = 'detached' + type,\r\n\t\t\t\tdefaultPrevented;\r\n\t\r\n\t\t\t// Remove warnings in Chrome when accessing returnValue (#2790), layerX and layerY. Although Highcharts\r\n\t\t\t// never uses these properties, Chrome includes them in the default click event and\r\n\t\t\t// raises the warning when they are copied over in the extend statement below.\r\n\t\t\t//\r\n\t\t\t// To avoid problems in IE (see #1010) where we cannot delete the properties and avoid\r\n\t\t\t// testing if they are there (warning in chrome) the only option is to test if running IE.\r\n\t\t\tif (!isIE && eventArguments) {\r\n\t\t\t\tdelete eventArguments.layerX;\r\n\t\t\t\tdelete eventArguments.layerY;\r\n\t\t\t\tdelete eventArguments.returnValue;\r\n\t\t\t}\r\n\t\r\n\t\t\textend(event, eventArguments);\r\n\t\r\n\t\t\t// Prevent jQuery from triggering the object method that is named the\r\n\t\t\t// same as the event. For example, if the event is 'select', jQuery\r\n\t\t\t// attempts calling el.select and it goes into a loop.\r\n\t\t\tif (el[type]) {\r\n\t\t\t\tel[detachedType] = el[type];\r\n\t\t\t\tel[type] = null;\r\n\t\t\t}\r\n\t\r\n\t\t\t// Wrap preventDefault and stopPropagation in try/catch blocks in\r\n\t\t\t// order to prevent JS errors when cancelling events on non-DOM\r\n\t\t\t// objects. #615.\r\n\t\t\t/*jslint unparam: true*/\r\n\t\t\t$.each(['preventDefault', 'stopPropagation'], function (i, fn) {\r\n\t\t\t\tvar base = event[fn];\r\n\t\t\t\tevent[fn] = function () {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tbase.call(event);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tif (fn === 'preventDefault') {\r\n\t\t\t\t\t\t\tdefaultPrevented = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\t/*jslint unparam: false*/\r\n\t\r\n\t\t\t// trigger it\r\n\t\t\t$(el).trigger(event);\r\n\t\r\n\t\t\t// attach the method\r\n\t\t\tif (el[detachedType]) {\r\n\t\t\t\tel[type] = el[detachedType];\r\n\t\t\t\tel[detachedType] = null;\r\n\t\t\t}\r\n\t\r\n\t\t\tif (defaultFunction && !event.isDefaultPrevented() && !defaultPrevented) {\r\n\t\t\t\tdefaultFunction(event);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Extension method needed for MooTools\r\n\t\t */\r\n\t\twashMouseEvent: function (e) {\r\n\t\t\tvar ret = e.originalEvent || e;\r\n\t\t\t\r\n\t\t\t// computed by jQuery, needed by IE8\r\n\t\t\tif (ret.pageX === UNDEFINED) { // #1236\r\n\t\t\t\tret.pageX = e.pageX;\r\n\t\t\t\tret.pageY = e.pageY;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn ret;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Animate a HTML element or SVG element wrapper\r\n\t\t * @param {Object} el\r\n\t\t * @param {Object} params\r\n\t\t * @param {Object} options jQuery-like animation options: duration, easing, callback\r\n\t\t */\r\n\t\tanimate: function (el, params, options) {\r\n\t\t\tvar $el = $(el);\r\n\t\t\tif (!el.style) {\r\n\t\t\t\tel.style = {}; // #1881\r\n\t\t\t}\r\n\t\t\tif (params.d) {\r\n\t\t\t\tel.toD = params.d; // keep the array form for paths, used in $.fx.step.d\r\n\t\t\t\tparams.d = 1; // because in jQuery, animating to an array has a different meaning\r\n\t\t\t}\r\n\t\r\n\t\t\t$el.stop();\r\n\t\t\tif (params.opacity !== UNDEFINED && el.attr) {\r\n\t\t\t\tparams.opacity += 'px'; // force jQuery to use same logic as width and height (#2161)\r\n\t\t\t}\r\n\t\t\tel.hasAnim = 1; // #3342\r\n\t\t\t$el.animate(params, options);\r\n\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * Stop running animation\r\n\t\t */\r\n\t\tstop: function (el) {\r\n\t\t\tif (el.hasAnim) { // #3342, memory leak on calling $(el) from destroy\r\n\t\t\t\t$(el).stop();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}(win.jQuery));\r\n\r\n\r\n// check for a custom HighchartsAdapter defined prior to this file\r\nvar globalAdapter = win.HighchartsAdapter,\r\n\tadapter = globalAdapter || {};\r\n\t\r\n// Initialize the adapter\r\nif (globalAdapter) {\r\n\tglobalAdapter.init.call(globalAdapter, pathAnim);\r\n}\r\n\r\n\r\n// Utility functions. If the HighchartsAdapter is not defined, adapter is an empty object\r\n// and all the utility functions will be null. In that case they are populated by the\r\n// default adapters below.\r\nvar adapterRun = adapter.adapterRun,\r\n\tgetScript = adapter.getScript,\r\n\tinArray = adapter.inArray,\r\n\teach = Highcharts.each = adapter.each,\r\n\tgrep = adapter.grep,\r\n\toffset = adapter.offset,\r\n\tmap = adapter.map,\r\n\taddEvent = adapter.addEvent,\r\n\tremoveEvent = adapter.removeEvent,\r\n\tfireEvent = adapter.fireEvent,\r\n\twashMouseEvent = adapter.washMouseEvent,\r\n\tanimate = adapter.animate,\r\n\tstop = adapter.stop;\r\n\r\n\r\n\r\n/* ****************************************************************************\r\n * Handle the options                                                         *\r\n *****************************************************************************/\r\ndefaultOptions = {\r\n\tcolors: ['#7cb5ec', '#434348', '#90ed7d', '#f7a35c', \r\n\t\t    '#8085e9', '#f15c80', '#e4d354', '#2b908f', '#f45b5b', '#91e8e1'],\r\n\tsymbols: ['circle', 'diamond', 'square', 'triangle', 'triangle-down'],\r\n\tlang: {\r\n\t\tloading: 'Loading...',\r\n\t\tmonths: ['January', 'February', 'March', 'April', 'May', 'June', 'July',\r\n\t\t\t\t'August', 'September', 'October', 'November', 'December'],\r\n\t\tshortMonths: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n\t\tweekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\r\n\t\tdecimalPoint: '.',\r\n\t\tnumericSymbols: ['k', 'M', 'G', 'T', 'P', 'E'], // SI prefixes used in axis labels\r\n\t\tresetZoom: 'Reset zoom',\r\n\t\tresetZoomTitle: 'Reset zoom level 1:1',\r\n\t\tthousandsSep: ' '\r\n\t},\r\n\tglobal: {\r\n\t\tuseUTC: true,\r\n\t\t//timezoneOffset: 0,\r\n\t\tcanvasToolsURL: 'http://code.highcharts.com/stock/2.1.3/modules/canvas-tools.js',\r\n\t\tVMLRadialGradientURL: 'http://code.highcharts.com/stock/2.1.3/gfx/vml-radial-gradient.png'\r\n\t},\r\n\tchart: {\r\n\t\t//animation: true,\r\n\t\t//alignTicks: false,\r\n\t\t//reflow: true,\r\n\t\t//className: null,\r\n\t\t//events: { load, selection },\r\n\t\t//margin: [null],\r\n\t\t//marginTop: null,\r\n\t\t//marginRight: null,\r\n\t\t//marginBottom: null,\r\n\t\t//marginLeft: null,\r\n\t\tborderColor: '#4572A7',\r\n\t\t//borderWidth: 0,\r\n\t\tborderRadius: 0,\r\n\t\tdefaultSeriesType: 'line',\r\n\t\tignoreHiddenSeries: true,\r\n\t\t//inverted: false,\r\n\t\t//shadow: false,\r\n\t\tspacing: [10, 10, 15, 10],\r\n\t\t//spacingTop: 10,\r\n\t\t//spacingRight: 10,\r\n\t\t//spacingBottom: 15,\r\n\t\t//spacingLeft: 10,\r\n\t\t//style: {\r\n\t\t//\tfontFamily: '\"Lucida Grande\", \"Lucida Sans Unicode\", Verdana, Arial, Helvetica, sans-serif', // default font\r\n\t\t//\tfontSize: '12px'\r\n\t\t//},\r\n\t\tbackgroundColor: '#FFFFFF',\r\n\t\t//plotBackgroundColor: null,\r\n\t\tplotBorderColor: '#C0C0C0',\r\n\t\t//plotBorderWidth: 0,\r\n\t\t//plotShadow: false,\r\n\t\t//zoomType: ''\r\n\t\tresetZoomButton: {\r\n\t\t\ttheme: {\r\n\t\t\t\tzIndex: 20\r\n\t\t\t},\r\n\t\t\tposition: {\r\n\t\t\t\talign: 'right',\r\n\t\t\t\tx: -10,\r\n\t\t\t\t//verticalAlign: 'top',\r\n\t\t\t\ty: 10\r\n\t\t\t}\r\n\t\t\t// relativeTo: 'plot'\r\n\t\t}\r\n\t},\r\n\ttitle: {\r\n\t\ttext: 'Chart title',\r\n\t\talign: 'center',\r\n\t\t// floating: false,\r\n\t\tmargin: 15,\r\n\t\t// x: 0,\r\n\t\t// verticalAlign: 'top',\r\n\t\t// y: null,\r\n\t\tstyle: {\r\n\t\t\tcolor: '#333333',\r\n\t\t\tfontSize: '18px'\r\n\t\t}\r\n\r\n\t},\r\n\tsubtitle: {\r\n\t\ttext: '',\r\n\t\talign: 'center',\r\n\t\t// floating: false\r\n\t\t// x: 0,\r\n\t\t// verticalAlign: 'top',\r\n\t\t// y: null,\r\n\t\tstyle: {\r\n\t\t\tcolor: '#555555'\r\n\t\t}\r\n\t},\r\n\r\n\tplotOptions: {\r\n\t\tline: { // base series options\r\n\t\t\tallowPointSelect: false,\r\n\t\t\tshowCheckbox: false,\r\n\t\t\tanimation: {\r\n\t\t\t\tduration: 1000\r\n\t\t\t},\r\n\t\t\t//connectNulls: false,\r\n\t\t\t//cursor: 'default',\r\n\t\t\t//clip: true,\r\n\t\t\t//dashStyle: null,\r\n\t\t\t//enableMouseTracking: true,\r\n\t\t\tevents: {},\r\n\t\t\t//legendIndex: 0,\r\n\t\t\t//linecap: 'round',\r\n\t\t\tlineWidth: 2,\r\n\t\t\t//shadow: false,\r\n\t\t\t// stacking: null,\r\n\t\t\tmarker: {\r\n\t\t\t\t//enabled: true,\r\n\t\t\t\t//symbol: null,\r\n\t\t\t\tlineWidth: 0,\r\n\t\t\t\tradius: 4,\r\n\t\t\t\tlineColor: '#FFFFFF',\r\n\t\t\t\t//fillColor: null,\r\n\t\t\t\tstates: { // states for a single point\r\n\t\t\t\t\thover: {\r\n\t\t\t\t\t\tenabled: true,\r\n\t\t\t\t\t\tlineWidthPlus: 1,\r\n\t\t\t\t\t\tradiusPlus: 2\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselect: {\r\n\t\t\t\t\t\tfillColor: '#FFFFFF',\r\n\t\t\t\t\t\tlineColor: '#000000',\r\n\t\t\t\t\t\tlineWidth: 2\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpoint: {\r\n\t\t\t\tevents: {}\r\n\t\t\t},\r\n\t\t\tdataLabels: {\r\n\t\t\t\talign: 'center',\r\n\t\t\t\t// defer: true,\r\n\t\t\t\t// enabled: false,\r\n\t\t\t\tformatter: function () {\r\n\t\t\t\t\treturn this.y === null ? '' : Highcharts.numberFormat(this.y, -1);\r\n\t\t\t\t},\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tcolor: 'contrast',\r\n\t\t\t\t\tfontSize: '11px',\r\n\t\t\t\t\tfontWeight: 'bold',\r\n\t\t\t\t\ttextShadow: '0 0 6px contrast, 0 0 3px contrast'\r\n\t\t\t\t},\r\n\t\t\t\tverticalAlign: 'bottom', // above singular point\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\t// backgroundColor: undefined,\r\n\t\t\t\t// borderColor: undefined,\r\n\t\t\t\t// borderRadius: undefined,\r\n\t\t\t\t// borderWidth: undefined,\r\n\t\t\t\tpadding: 5\r\n\t\t\t\t// shadow: false\r\n\t\t\t},\r\n\t\t\tcropThreshold: 300, // draw points outside the plot area when the number of points is less than this\r\n\t\t\tpointRange: 0,\r\n\t\t\t//pointStart: 0,\r\n\t\t\t//pointInterval: 1,\r\n\t\t\t//showInLegend: null, // auto: true for standalone series, false for linked series\r\n\t\t\tstates: { // states for the entire series\r\n\t\t\t\thover: {\r\n\t\t\t\t\t//enabled: false,\r\n\t\t\t\t\tlineWidthPlus: 1,\r\n\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\t// lineWidth: base + 1,\r\n\t\t\t\t\t\t// radius: base + 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\thalo: {\r\n\t\t\t\t\t\tsize: 10,\r\n\t\t\t\t\t\topacity: 0.25\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tselect: {\r\n\t\t\t\t\tmarker: {}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstickyTracking: true,\r\n\t\t\t//tooltip: {\r\n\t\t\t\t//pointFormat: '<span style=\"color:{point.color}\">\\u25CF</span> {series.name}: <b>{point.y}</b>'\r\n\t\t\t\t//valueDecimals: null,\r\n\t\t\t\t//xDateFormat: '%A, %b %e, %Y',\r\n\t\t\t\t//valuePrefix: '',\r\n\t\t\t\t//ySuffix: ''\t\t\t\t\r\n\t\t\t//}\r\n\t\t\tturboThreshold: 1000\r\n\t\t\t// zIndex: null\r\n\t\t}\r\n\t},\r\n\tlabels: {\r\n\t\t//items: [],\r\n\t\tstyle: {\r\n\t\t\t//font: defaultFont,\r\n\t\t\tposition: ABSOLUTE,\r\n\t\t\tcolor: '#3E576F'\r\n\t\t}\r\n\t},\r\n\tlegend: {\r\n\t\tenabled: true,\r\n\t\talign: 'center',\r\n\t\t//floating: false,\r\n\t\tlayout: 'horizontal',\r\n\t\tlabelFormatter: function () {\r\n\t\t\treturn this.name;\r\n\t\t},\r\n\t\t//borderWidth: 0,\r\n\t\tborderColor: '#909090',\r\n\t\tborderRadius: 0,\r\n\t\tnavigation: {\r\n\t\t\t// animation: true,\r\n\t\t\tactiveColor: '#274b6d',\r\n\t\t\t// arrowSize: 12\r\n\t\t\tinactiveColor: '#CCC'\r\n\t\t\t// style: {} // text styles\r\n\t\t},\r\n\t\t// margin: 20,\r\n\t\t// reversed: false,\r\n\t\tshadow: false,\r\n\t\t// backgroundColor: null,\r\n\t\t/*style: {\r\n\t\t\tpadding: '5px'\r\n\t\t},*/\r\n\t\titemStyle: {\t\t\t\r\n\t\t\tcolor: '#333333',\r\n\t\t\tfontSize: '12px',\r\n\t\t\tfontWeight: 'bold'\r\n\t\t},\r\n\t\titemHoverStyle: {\r\n\t\t\t//cursor: 'pointer', removed as of #601\r\n\t\t\tcolor: '#000'\r\n\t\t},\r\n\t\titemHiddenStyle: {\r\n\t\t\tcolor: '#CCC'\r\n\t\t},\r\n\t\titemCheckboxStyle: {\r\n\t\t\tposition: ABSOLUTE,\r\n\t\t\twidth: '13px', // for IE precision\r\n\t\t\theight: '13px'\r\n\t\t},\r\n\t\t// itemWidth: undefined,\r\n\t\t// symbolRadius: 0,\r\n\t\t// symbolWidth: 16,\r\n\t\tsymbolPadding: 5,\r\n\t\tverticalAlign: 'bottom',\r\n\t\t// width: undefined,\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\ttitle: {\r\n\t\t\t//text: null,\r\n\t\t\tstyle: {\r\n\t\t\t\tfontWeight: 'bold'\r\n\t\t\t}\r\n\t\t}\t\t\t\r\n\t},\r\n\r\n\tloading: {\r\n\t\t// hideDuration: 100,\r\n\t\tlabelStyle: {\r\n\t\t\tfontWeight: 'bold',\r\n\t\t\tposition: RELATIVE,\r\n\t\t\ttop: '45%'\r\n\t\t},\r\n\t\t// showDuration: 0,\r\n\t\tstyle: {\r\n\t\t\tposition: ABSOLUTE,\r\n\t\t\tbackgroundColor: 'white',\r\n\t\t\topacity: 0.5,\r\n\t\t\ttextAlign: 'center'\r\n\t\t}\r\n\t},\r\n\r\n\ttooltip: {\r\n\t\tenabled: true,\r\n\t\tanimation: hasSVG,\r\n\t\t//crosshairs: null,\r\n\t\tbackgroundColor: 'rgba(249, 249, 249, .85)',\r\n\t\tborderWidth: 1,\r\n\t\tborderRadius: 3,\r\n\t\tdateTimeLabelFormats: { \r\n\t\t\tmillisecond: '%A, %b %e, %H:%M:%S.%L',\r\n\t\t\tsecond: '%A, %b %e, %H:%M:%S',\r\n\t\t\tminute: '%A, %b %e, %H:%M',\r\n\t\t\thour: '%A, %b %e, %H:%M',\r\n\t\t\tday: '%A, %b %e, %Y',\r\n\t\t\tweek: 'Week from %A, %b %e, %Y',\r\n\t\t\tmonth: '%B %Y',\r\n\t\t\tyear: '%Y'\r\n\t\t},\r\n\t\tfooterFormat: '',\r\n\t\t//formatter: defaultFormatter,\r\n\t\theaderFormat: '<span style=\"font-size: 10px\">{point.key}</span><br/>',\r\n\t\tpointFormat: '<span style=\"color:{point.color}\">\\u25CF</span> {series.name}: <b>{point.y}</b><br/>',\r\n\t\tshadow: true,\r\n\t\t//shape: 'callout',\r\n\t\t//shared: false,\r\n\t\tsnap: isTouchDevice ? 25 : 10,\r\n\t\tstyle: {\r\n\t\t\tcolor: '#333333',\r\n\t\t\tcursor: 'default',\r\n\t\t\tfontSize: '12px',\r\n\t\t\tpadding: '8px',\r\n\t\t\twhiteSpace: 'nowrap'\r\n\t\t}\r\n\t\t//xDateFormat: '%A, %b %e, %Y',\r\n\t\t//valueDecimals: null,\r\n\t\t//valuePrefix: '',\r\n\t\t//valueSuffix: ''\r\n\t},\r\n\r\n\tcredits: {\r\n\t\tenabled: true,\r\n\t\ttext: 'Highcharts.com',\r\n\t\thref: 'http://www.highcharts.com',\r\n\t\tposition: {\r\n\t\t\talign: 'right',\r\n\t\t\tx: -10,\r\n\t\t\tverticalAlign: 'bottom',\r\n\t\t\ty: -5\r\n\t\t},\r\n\t\tstyle: {\r\n\t\t\tcursor: 'pointer',\r\n\t\t\tcolor: '#909090',\r\n\t\t\tfontSize: '9px'\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n\r\n\r\n// Series defaults\r\nvar defaultPlotOptions = defaultOptions.plotOptions,\r\n\tdefaultSeriesOptions = defaultPlotOptions.line;\r\n\r\n// set the default time methods\r\nsetTimeMethods();\r\n\r\n\r\n\r\n/**\r\n * Set the time methods globally based on the useUTC option. Time method can be either\r\n * local time or UTC (default).\r\n */\r\nfunction setTimeMethods() {\r\n\tvar globalOptions = defaultOptions.global,\r\n\t\tuseUTC = globalOptions.useUTC,\r\n\t\tGET = useUTC ? 'getUTC' : 'get',\r\n\t\tSET = useUTC ? 'setUTC' : 'set';\r\n\r\n\r\n\tDate = globalOptions.Date || window.Date;\r\n\ttimezoneOffset = useUTC && globalOptions.timezoneOffset;\r\n\tgetTimezoneOffset = useUTC && globalOptions.getTimezoneOffset;\r\n\tmakeTime = function (year, month, date, hours, minutes, seconds) {\r\n\t\tvar d;\r\n\t\tif (useUTC) {\r\n\t\t\td = Date.UTC.apply(0, arguments);\r\n\t\t\td += getTZOffset(d);\r\n\t\t} else {\r\n\t\t\td = new Date(\r\n\t\t\t\tyear,\r\n\t\t\t\tmonth,\r\n\t\t\t\tpick(date, 1),\r\n\t\t\t\tpick(hours, 0),\r\n\t\t\t\tpick(minutes, 0),\r\n\t\t\t\tpick(seconds, 0)\r\n\t\t\t).getTime();\r\n\t\t}\r\n\t\treturn d;\r\n\t};\r\n\tgetMinutes =  GET + 'Minutes';\r\n\tgetHours =    GET + 'Hours';\r\n\tgetDay =      GET + 'Day';\r\n\tgetDate =     GET + 'Date';\r\n\tgetMonth =    GET + 'Month';\r\n\tgetFullYear = GET + 'FullYear';\r\n\tsetMinutes =  SET + 'Minutes';\r\n\tsetHours =    SET + 'Hours';\r\n\tsetDate =     SET + 'Date';\r\n\tsetMonth =    SET + 'Month';\r\n\tsetFullYear = SET + 'FullYear';\r\n\r\n}\r\n\r\n/**\r\n * Merge the default options with custom options and return the new options structure\r\n * @param {Object} options The new custom options\r\n */\r\nfunction setOptions(options) {\r\n\t\r\n\t// Copy in the default options\r\n\tdefaultOptions = merge(true, defaultOptions, options);\r\n\t\r\n\t// Apply UTC\r\n\tsetTimeMethods();\r\n\r\n\treturn defaultOptions;\r\n}\r\n\r\n/**\r\n * Get the updated default options. Until 3.0.7, merely exposing defaultOptions for outside modules\r\n * wasn't enough because the setOptions method created a new object.\r\n */\r\nfunction getOptions() {\r\n\treturn defaultOptions;\r\n}\r\n\r\n\r\n/**\r\n * Handle color operations. The object methods are chainable.\r\n * @param {String} input The input color in either rbga or hex format\r\n */\r\nvar rgbaRegEx = /rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]?(?:\\.[0-9]+)?)\\s*\\)/,\r\n\thexRegEx = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,\r\n\trgbRegEx = /rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/;\r\n\r\nvar Color = function (input) {\r\n\t// declare variables\r\n\tvar rgba = [], result, stops;\r\n\r\n\t/**\r\n\t * Parse the input color to rgba array\r\n\t * @param {String} input\r\n\t */\r\n\tfunction init(input) {\r\n\r\n\t\t// Gradients\r\n\t\tif (input && input.stops) {\r\n\t\t\tstops = map(input.stops, function (stop) {\r\n\t\t\t\treturn Color(stop[1]);\r\n\t\t\t});\r\n\r\n\t\t// Solid colors\r\n\t\t} else {\r\n\t\t\t// rgba\r\n\t\t\tresult = rgbaRegEx.exec(input);\r\n\t\t\tif (result) {\r\n\t\t\t\trgba = [pInt(result[1]), pInt(result[2]), pInt(result[3]), parseFloat(result[4], 10)];\r\n\t\t\t} else { \r\n\t\t\t\t// hex\r\n\t\t\t\tresult = hexRegEx.exec(input);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\trgba = [pInt(result[1], 16), pInt(result[2], 16), pInt(result[3], 16), 1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// rgb\r\n\t\t\t\t\tresult = rgbRegEx.exec(input);\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\trgba = [pInt(result[1]), pInt(result[2]), pInt(result[3]), 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\t\r\n\r\n\t}\r\n\t/**\r\n\t * Return the color a specified format\r\n\t * @param {String} format\r\n\t */\r\n\tfunction get(format) {\r\n\t\tvar ret;\r\n\r\n\t\tif (stops) {\r\n\t\t\tret = merge(input);\r\n\t\t\tret.stops = [].concat(ret.stops);\r\n\t\t\teach(stops, function (stop, i) {\r\n\t\t\t\tret.stops[i] = [ret.stops[i][0], stop.get(format)];\r\n\t\t\t});\r\n\r\n\t\t// it's NaN if gradient colors on a column chart\r\n\t\t} else if (rgba && !isNaN(rgba[0])) {\r\n\t\t\tif (format === 'rgb') {\r\n\t\t\t\tret = 'rgb(' + rgba[0] + ',' + rgba[1] + ',' + rgba[2] + ')';\r\n\t\t\t} else if (format === 'a') {\r\n\t\t\t\tret = rgba[3];\r\n\t\t\t} else {\r\n\t\t\t\tret = 'rgba(' + rgba.join(',') + ')';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tret = input;\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\t/**\r\n\t * Brighten the color\r\n\t * @param {Number} alpha\r\n\t */\r\n\tfunction brighten(alpha) {\r\n\t\tif (stops) {\r\n\t\t\teach(stops, function (stop) {\r\n\t\t\t\tstop.brighten(alpha);\r\n\t\t\t});\r\n\t\t\r\n\t\t} else if (isNumber(alpha) && alpha !== 0) {\r\n\t\t\tvar i;\r\n\t\t\tfor (i = 0; i < 3; i++) {\r\n\t\t\t\trgba[i] += pInt(alpha * 255);\r\n\r\n\t\t\t\tif (rgba[i] < 0) {\r\n\t\t\t\t\trgba[i] = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (rgba[i] > 255) {\r\n\t\t\t\t\trgba[i] = 255;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t * Set the color's opacity to a given alpha value\r\n\t * @param {Number} alpha\r\n\t */\r\n\tfunction setOpacity(alpha) {\r\n\t\trgba[3] = alpha;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t// initialize: parse the input\r\n\tinit(input);\r\n\r\n\t// public methods\r\n\treturn {\r\n\t\tget: get,\r\n\t\tbrighten: brighten,\r\n\t\trgba: rgba,\r\n\t\tsetOpacity: setOpacity\r\n\t};\r\n};\r\n\r\n\r\n/**\r\n * A wrapper object for SVG elements\r\n */\r\nfunction SVGElement() {}\r\n\r\nSVGElement.prototype = {\r\n\t\r\n\t// Default base for animation\r\n\topacity: 1,\r\n\t// For labels, these CSS properties are applied to the <text> node directly\r\n\ttextProps: ['fontSize', 'fontWeight', 'fontFamily', 'color', \r\n\t\t'lineHeight', 'width', 'textDecoration', 'textShadow'],\r\n\t\r\n\t/**\r\n\t * Initialize the SVG renderer\r\n\t * @param {Object} renderer\r\n\t * @param {String} nodeName\r\n\t */\r\n\tinit: function (renderer, nodeName) {\r\n\t\tvar wrapper = this;\r\n\t\twrapper.element = nodeName === 'span' ?\r\n\t\t\tcreateElement(nodeName) :\r\n\t\t\tdoc.createElementNS(SVG_NS, nodeName);\r\n\t\twrapper.renderer = renderer;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Animate a given attribute\r\n\t * @param {Object} params\r\n\t * @param {Number} options The same options as in jQuery animation\r\n\t * @param {Function} complete Function to perform at the end of animation\r\n\t */\r\n\tanimate: function (params, options, complete) {\r\n\t\tvar animOptions = pick(options, globalAnimation, true);\r\n\t\tstop(this); // stop regardless of animation actually running, or reverting to .attr (#607)\r\n\t\tif (animOptions) {\r\n\t\t\tanimOptions = merge(animOptions, {}); //#2625\r\n\t\t\tif (complete) { // allows using a callback with the global animation without overwriting it\r\n\t\t\t\tanimOptions.complete = complete;\r\n\t\t\t}\r\n\t\t\tanimate(this, params, animOptions);\r\n\t\t} else {\r\n\t\t\tthis.attr(params);\r\n\t\t\tif (complete) {\r\n\t\t\t\tcomplete();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Build an SVG gradient out of a common JavaScript configuration object\r\n\t */\r\n\tcolorGradient: function (color, prop, elem) {\r\n\t\tvar renderer = this.renderer,\r\n\t\t\tcolorObject,\r\n\t\t\tgradName,\r\n\t\t\tgradAttr,\r\n\t\t\tgradients,\r\n\t\t\tgradientObject,\r\n\t\t\tstops,\r\n\t\t\tstopColor,\r\n\t\t\tstopOpacity,\r\n\t\t\tradialReference,\r\n\t\t\tn,\r\n\t\t\tid,\r\n\t\t\tkey = [];\r\n\r\n\t\t// Apply linear or radial gradients\r\n\t\tif (color.linearGradient) {\r\n\t\t\tgradName = 'linearGradient';\r\n\t\t} else if (color.radialGradient) {\r\n\t\t\tgradName = 'radialGradient';\r\n\t\t}\r\n\r\n\t\tif (gradName) {\r\n\t\t\tgradAttr = color[gradName];\r\n\t\t\tgradients = renderer.gradients;\r\n\t\t\tstops = color.stops;\r\n\t\t\tradialReference = elem.radialReference;\r\n\r\n\t\t\t// Keep < 2.2 kompatibility\r\n\t\t\tif (isArray(gradAttr)) {\r\n\t\t\t\tcolor[gradName] = gradAttr = {\r\n\t\t\t\t\tx1: gradAttr[0],\r\n\t\t\t\t\ty1: gradAttr[1],\r\n\t\t\t\t\tx2: gradAttr[2],\r\n\t\t\t\t\ty2: gradAttr[3],\r\n\t\t\t\t\tgradientUnits: 'userSpaceOnUse'\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// Correct the radial gradient for the radial reference system\r\n\t\t\tif (gradName === 'radialGradient' && radialReference && !defined(gradAttr.gradientUnits)) {\r\n\t\t\t\tgradAttr = merge(gradAttr, {\r\n\t\t\t\t\tcx: (radialReference[0] - radialReference[2] / 2) + gradAttr.cx * radialReference[2],\r\n\t\t\t\t\tcy: (radialReference[1] - radialReference[2] / 2) + gradAttr.cy * radialReference[2],\r\n\t\t\t\t\tr: gradAttr.r * radialReference[2],\r\n\t\t\t\t\tgradientUnits: 'userSpaceOnUse'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Build the unique key to detect whether we need to create a new element (#1282)\r\n\t\t\tfor (n in gradAttr) {\r\n\t\t\t\tif (n !== 'id') {\r\n\t\t\t\t\tkey.push(n, gradAttr[n]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (n in stops) {\r\n\t\t\t\tkey.push(stops[n]);\r\n\t\t\t}\r\n\t\t\tkey = key.join(',');\r\n\r\n\t\t\t// Check if a gradient object with the same config object is created within this renderer\r\n\t\t\tif (gradients[key]) {\r\n\t\t\t\tid = gradients[key].attr('id');\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Set the id and create the element\r\n\t\t\t\tgradAttr.id = id = PREFIX + idCounter++;\r\n\t\t\t\tgradients[key] = gradientObject = renderer.createElement(gradName)\r\n\t\t\t\t\t.attr(gradAttr)\r\n\t\t\t\t\t.add(renderer.defs);\r\n\r\n\r\n\t\t\t\t// The gradient needs to keep a list of stops to be able to destroy them\r\n\t\t\t\tgradientObject.stops = [];\r\n\t\t\t\teach(stops, function (stop) {\r\n\t\t\t\t\tvar stopObject;\r\n\t\t\t\t\tif (stop[1].indexOf('rgba') === 0) {\r\n\t\t\t\t\t\tcolorObject = Color(stop[1]);\r\n\t\t\t\t\t\tstopColor = colorObject.get('rgb');\r\n\t\t\t\t\t\tstopOpacity = colorObject.get('a');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstopColor = stop[1];\r\n\t\t\t\t\t\tstopOpacity = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstopObject = renderer.createElement('stop').attr({\r\n\t\t\t\t\t\toffset: stop[0],\r\n\t\t\t\t\t\t'stop-color': stopColor,\r\n\t\t\t\t\t\t'stop-opacity': stopOpacity\r\n\t\t\t\t\t}).add(gradientObject);\r\n\r\n\t\t\t\t\t// Add the stop element to the gradient\r\n\t\t\t\t\tgradientObject.stops.push(stopObject);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Set the reference to the gradient object\r\n\t\t\telem.setAttribute(prop, 'url(' + renderer.url + '#' + id + ')');\r\n\t\t} \r\n\t},\r\n\r\n\t/**\r\n\t * Apply a polyfill to the text-stroke CSS property, by copying the text element\r\n\t * and apply strokes to the copy.\r\n\t *\r\n\t * docs: update default, document the polyfill and the limitations on hex colors and pixel values, document contrast pseudo-color\r\n\t * TODO: \r\n\t * - update defaults\r\n\t */\r\n\tapplyTextShadow: function (textShadow) {\r\n\t\tvar elem = this.element,\r\n\t\t\ttspans,\r\n\t\t\thasContrast = textShadow.indexOf('contrast') !== -1,\r\n\t\t\t// IE10 and IE11 report textShadow in elem.style even though it doesn't work. Check\r\n\t\t\t// this again with new IE release. In exports, the rendering is passed to PhantomJS. \r\n\t\t\tsupports = this.renderer.forExport || (elem.style.textShadow !== UNDEFINED && !isIE);\r\n\r\n\t\t// When the text shadow is set to contrast, use dark stroke for light text and vice versa\r\n\t\tif (hasContrast) {\r\n\t\t\ttextShadow = textShadow.replace(/contrast/g, this.renderer.getContrast(elem.style.fill));\r\n\t\t}\r\n\r\n\t\t/* Selective side-by-side testing in supported browser (http://jsfiddle.net/highcharts/73L1ptrh/)\r\n\t\tif (elem.textContent.indexOf('2.') === 0) {\r\n\t\t\telem.style['text-shadow'] = 'none';\r\n\t\t\tsupports = false;\r\n\t\t}\r\n\t\t// */\r\n\r\n\t\t// No reason to polyfill, we've got native support\r\n\t\tif (supports) {\r\n\t\t\tif (hasContrast) { // Apply the altered style\r\n\t\t\t\tcss(elem, {\r\n\t\t\t\t\ttextShadow: textShadow\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\tthis.fakeTS = true; // Fake text shadow\r\n\r\n\t\t\t// In order to get the right y position of the clones, \r\n\t\t\t// copy over the y setter\r\n\t\t\tthis.ySetter = this.xSetter;\r\n\r\n\t\t\ttspans = [].slice.call(elem.getElementsByTagName('tspan'));\r\n\t\t\teach(textShadow.split(/\\s?,\\s?/g), function (textShadow) {\r\n\t\t\t\tvar firstChild = elem.firstChild,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tstrokeWidth;\r\n\t\t\t\t\r\n\t\t\t\ttextShadow = textShadow.split(' ');\r\n\t\t\t\tcolor = textShadow[textShadow.length - 1];\r\n\r\n\t\t\t\t// Approximately tune the settings to the text-shadow behaviour\r\n\t\t\t\tstrokeWidth = textShadow[textShadow.length - 2];\r\n\r\n\t\t\t\tif (strokeWidth) {\r\n\t\t\t\t\teach(tspans, function (tspan, y) {\r\n\t\t\t\t\t\tvar clone;\r\n\r\n\t\t\t\t\t\t// Let the first line start at the correct X position\r\n\t\t\t\t\t\tif (y === 0) {\r\n\t\t\t\t\t\t\ttspan.setAttribute('x', elem.getAttribute('x'));\r\n\t\t\t\t\t\t\ty = elem.getAttribute('y');\r\n\t\t\t\t\t\t\ttspan.setAttribute('y', y || 0);\r\n\t\t\t\t\t\t\tif (y === null) {\r\n\t\t\t\t\t\t\t\telem.setAttribute('y', 0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Create the clone and apply shadow properties\r\n\t\t\t\t\t\tclone = tspan.cloneNode(1);\r\n\t\t\t\t\t\tattr(clone, {\r\n\t\t\t\t\t\t\t'class': PREFIX + 'text-shadow',\r\n\t\t\t\t\t\t\t'fill': color,\r\n\t\t\t\t\t\t\t'stroke': color,\r\n\t\t\t\t\t\t\t'stroke-opacity': 1 / mathMax(pInt(strokeWidth), 3),\r\n\t\t\t\t\t\t\t'stroke-width': strokeWidth,\r\n\t\t\t\t\t\t\t'stroke-linejoin': 'round'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\telem.insertBefore(clone, firstChild);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set or get a given attribute\r\n\t * @param {Object|String} hash\r\n\t * @param {Mixed|Undefined} val\r\n\t */\r\n\tattr: function (hash, val) {\r\n\t\tvar key,\r\n\t\t\tvalue,\r\n\t\t\telement = this.element,\r\n\t\t\thasSetSymbolSize,\r\n\t\t\tret = this,\r\n\t\t\tskipAttr;\r\n\r\n\t\t// single key-value pair\r\n\t\tif (typeof hash === 'string' && val !== UNDEFINED) {\r\n\t\t\tkey = hash;\r\n\t\t\thash = {};\r\n\t\t\thash[key] = val;\r\n\t\t}\r\n\r\n\t\t// used as a getter: first argument is a string, second is undefined\r\n\t\tif (typeof hash === 'string') {\r\n\t\t\tret = (this[hash + 'Getter'] || this._defaultGetter).call(this, hash, element);\r\n\t\t\r\n\t\t// setter\r\n\t\t} else {\r\n\r\n\t\t\tfor (key in hash) {\r\n\t\t\t\tvalue = hash[key];\r\n\t\t\t\tskipAttr = false;\r\n\r\n\r\n\r\n\t\t\t\tif (this.symbolName && /^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(key)) {\r\n\t\t\t\t\tif (!hasSetSymbolSize) {\r\n\t\t\t\t\t\tthis.symbolAttr(hash);\r\n\t\t\t\t\t\thasSetSymbolSize = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tskipAttr = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rotation && (key === 'x' || key === 'y')) {\r\n\t\t\t\t\tthis.doTransform = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!skipAttr) {\r\n\t\t\t\t\t(this[key + 'Setter'] || this._defaultSetter).call(this, value, key, element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Let the shadow follow the main element\r\n\t\t\t\tif (this.shadows && /^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(key)) {\r\n\t\t\t\t\tthis.updateShadows(key, value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Update transform. Do this outside the loop to prevent redundant updating for batch setting\r\n\t\t\t// of attributes.\r\n\t\t\tif (this.doTransform) {\r\n\t\t\t\tthis.updateTransform();\r\n\t\t\t\tthis.doTransform = false;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\tupdateShadows: function (key, value) {\r\n\t\tvar shadows = this.shadows,\r\n\t\t\ti = shadows.length;\r\n\t\twhile (i--) {\r\n\t\t\tshadows[i].setAttribute(\r\n\t\t\t\tkey,\r\n\t\t\t\tkey === 'height' ?\r\n\t\t\t\t\tmathMax(value - (shadows[i].cutHeight || 0), 0) :\r\n\t\t\t\t\tkey === 'd' ? this.d : value\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Add a class name to an element\r\n\t */\r\n\taddClass: function (className) {\r\n\t\tvar element = this.element,\r\n\t\t\tcurrentClassName = attr(element, 'class') || '';\r\n\r\n\t\tif (currentClassName.indexOf(className) === -1) {\r\n\t\t\tattr(element, 'class', currentClassName + ' ' + className);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\t/* hasClass and removeClass are not (yet) needed\r\n\thasClass: function (className) {\r\n\t\treturn attr(this.element, 'class').indexOf(className) !== -1;\r\n\t},\r\n\tremoveClass: function (className) {\r\n\t\tattr(this.element, 'class', attr(this.element, 'class').replace(className, ''));\r\n\t\treturn this;\r\n\t},\r\n\t*/\r\n\r\n\t/**\r\n\t * If one of the symbol size affecting parameters are changed,\r\n\t * check all the others only once for each call to an element's\r\n\t * .attr() method\r\n\t * @param {Object} hash\r\n\t */\r\n\tsymbolAttr: function (hash) {\r\n\t\tvar wrapper = this;\r\n\r\n\t\teach(['x', 'y', 'r', 'start', 'end', 'width', 'height', 'innerR', 'anchorX', 'anchorY'], function (key) {\r\n\t\t\twrapper[key] = pick(hash[key], wrapper[key]);\r\n\t\t});\r\n\r\n\t\twrapper.attr({\r\n\t\t\td: wrapper.renderer.symbols[wrapper.symbolName](\r\n\t\t\t\twrapper.x,\r\n\t\t\t\twrapper.y,\r\n\t\t\t\twrapper.width,\r\n\t\t\t\twrapper.height,\r\n\t\t\t\twrapper\r\n\t\t\t)\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Apply a clipping path to this object\r\n\t * @param {String} id\r\n\t */\r\n\tclip: function (clipRect) {\r\n\t\treturn this.attr('clip-path', clipRect ? 'url(' + this.renderer.url + '#' + clipRect.id + ')' : NONE);\r\n\t},\r\n\r\n\t/**\r\n\t * Calculate the coordinates needed for drawing a rectangle crisply and return the\r\n\t * calculated attributes\r\n\t * @param {Number} strokeWidth\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} width\r\n\t * @param {Number} height\r\n\t */\r\n\tcrisp: function (rect) {\r\n\r\n\t\tvar wrapper = this,\r\n\t\t\tkey,\r\n\t\t\tattribs = {},\r\n\t\t\tnormalizer,\r\n\t\t\tstrokeWidth = rect.strokeWidth || wrapper.strokeWidth || 0;\r\n\r\n\t\tnormalizer = mathRound(strokeWidth) % 2 / 2; // mathRound because strokeWidth can sometimes have roundoff errors\r\n\r\n\t\t// normalize for crisp edges\r\n\t\trect.x = mathFloor(rect.x || wrapper.x || 0) + normalizer;\r\n\t\trect.y = mathFloor(rect.y || wrapper.y || 0) + normalizer;\r\n\t\trect.width = mathFloor((rect.width || wrapper.width || 0) - 2 * normalizer);\r\n\t\trect.height = mathFloor((rect.height || wrapper.height || 0) - 2 * normalizer);\r\n\t\trect.strokeWidth = strokeWidth;\r\n\r\n\t\tfor (key in rect) {\r\n\t\t\tif (wrapper[key] !== rect[key]) { // only set attribute if changed\r\n\t\t\t\twrapper[key] = attribs[key] = rect[key];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn attribs;\r\n\t},\r\n\r\n\t/**\r\n\t * Set styles for the element\r\n\t * @param {Object} styles\r\n\t */\r\n\tcss: function (styles) {\r\n\t\tvar elemWrapper = this,\r\n\t\t\toldStyles = elemWrapper.styles,\r\n\t\t\tnewStyles = {},\r\n\t\t\telem = elemWrapper.element,\r\n\t\t\ttextWidth,\r\n\t\t\tn,\r\n\t\t\tserializedCss = '',\r\n\t\t\thyphenate,\r\n\t\t\thasNew = !oldStyles;\r\n\r\n\t\t// convert legacy\r\n\t\tif (styles && styles.color) {\r\n\t\t\tstyles.fill = styles.color;\r\n\t\t}\r\n\r\n\t\t// Filter out existing styles to increase performance (#2640)\r\n\t\tif (oldStyles) {\r\n\t\t\tfor (n in styles) {\r\n\t\t\t\tif (styles[n] !== oldStyles[n]) {\r\n\t\t\t\t\tnewStyles[n] = styles[n];\r\n\t\t\t\t\thasNew = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (hasNew) {\r\n\t\t\ttextWidth = elemWrapper.textWidth = \r\n\t\t\t\t(styles && styles.width && elem.nodeName.toLowerCase() === 'text' && pInt(styles.width)) || \r\n\t\t\t\telemWrapper.textWidth; // #3501\r\n\r\n\t\t\t// Merge the new styles with the old ones\r\n\t\t\tif (oldStyles) {\r\n\t\t\t\tstyles = extend(\r\n\t\t\t\t\toldStyles,\r\n\t\t\t\t\tnewStyles\r\n\t\t\t\t);\r\n\t\t\t}\t\t\r\n\r\n\t\t\t// store object\r\n\t\t\telemWrapper.styles = styles;\r\n\r\n\t\t\tif (textWidth && (useCanVG || (!hasSVG && elemWrapper.renderer.forExport))) {\r\n\t\t\t\tdelete styles.width;\r\n\t\t\t}\r\n\r\n\t\t\t// serialize and set style attribute\r\n\t\t\tif (isIE && !hasSVG) {\r\n\t\t\t\tcss(elemWrapper.element, styles);\r\n\t\t\t} else {\r\n\t\t\t\t/*jslint unparam: true*/\r\n\t\t\t\thyphenate = function (a, b) { return '-' + b.toLowerCase(); };\r\n\t\t\t\t/*jslint unparam: false*/\r\n\t\t\t\tfor (n in styles) {\r\n\t\t\t\t\tserializedCss += n.replace(/([A-Z])/g, hyphenate) + ':' + styles[n] + ';';\r\n\t\t\t\t}\r\n\t\t\t\tattr(elem, 'style', serializedCss); // #1881\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// re-build text\r\n\t\t\tif (textWidth && elemWrapper.added) {\r\n\t\t\t\telemWrapper.renderer.buildText(elemWrapper);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn elemWrapper;\r\n\t},\r\n\r\n\t/**\r\n\t * Add an event listener\r\n\t * @param {String} eventType\r\n\t * @param {Function} handler\r\n\t */\r\n\ton: function (eventType, handler) {\r\n\t\tvar svgElement = this,\r\n\t\t\telement = svgElement.element;\r\n\t\t\r\n\t\t// touch\r\n\t\tif (hasTouch && eventType === 'click') {\r\n\t\t\telement.ontouchstart = function (e) {\t\t\t\r\n\t\t\t\tsvgElement.touchEventFired = Date.now();\t\t\t\t\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\thandler.call(element, e);\r\n\t\t\t};\r\n\t\t\telement.onclick = function (e) {\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\tif (userAgent.indexOf('Android') === -1 || Date.now() - (svgElement.touchEventFired || 0) > 1100) { // #2269\r\n\t\t\t\t\thandler.call(element, e);\r\n\t\t\t\t}\r\n\t\t\t};\t\t\t\r\n\t\t} else {\r\n\t\t\t// simplest possible event model for internal use\r\n\t\t\telement['on' + eventType] = handler;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Set the coordinates needed to draw a consistent radial gradient across\r\n\t * pie slices regardless of positioning inside the chart. The format is\r\n\t * [centerX, centerY, diameter] in pixels.\r\n\t */\r\n\tsetRadialReference: function (coordinates) {\r\n\t\tthis.element.radialReference = coordinates;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Move an object and its children by x and y values\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t */\r\n\ttranslate: function (x, y) {\r\n\t\treturn this.attr({\r\n\t\t\ttranslateX: x,\r\n\t\t\ttranslateY: y\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Invert a group, rotate and flip\r\n\t */\r\n\tinvert: function () {\r\n\t\tvar wrapper = this;\r\n\t\twrapper.inverted = true;\r\n\t\twrapper.updateTransform();\r\n\t\treturn wrapper;\r\n\t},\r\n\r\n\t/**\r\n\t * Private method to update the transform attribute based on internal\r\n\t * properties\r\n\t */\r\n\tupdateTransform: function () {\r\n\t\tvar wrapper = this,\r\n\t\t\ttranslateX = wrapper.translateX || 0,\r\n\t\t\ttranslateY = wrapper.translateY || 0,\r\n\t\t\tscaleX = wrapper.scaleX,\r\n\t\t\tscaleY = wrapper.scaleY,\r\n\t\t\tinverted = wrapper.inverted,\r\n\t\t\trotation = wrapper.rotation,\r\n\t\t\telement = wrapper.element,\r\n\t\t\ttransform;\r\n\r\n\t\t// flipping affects translate as adjustment for flipping around the group's axis\r\n\t\tif (inverted) {\r\n\t\t\ttranslateX += wrapper.attr('width');\r\n\t\t\ttranslateY += wrapper.attr('height');\r\n\t\t}\r\n\r\n\t\t// Apply translate. Nearly all transformed elements have translation, so instead\r\n\t\t// of checking for translate = 0, do it always (#1767, #1846).\r\n\t\ttransform = ['translate(' + translateX + ',' + translateY + ')'];\r\n\r\n\t\t// apply rotation\r\n\t\tif (inverted) {\r\n\t\t\ttransform.push('rotate(90) scale(-1,1)');\r\n\t\t} else if (rotation) { // text rotation\r\n\t\t\ttransform.push('rotate(' + rotation + ' ' + (element.getAttribute('x') || 0) + ' ' + (element.getAttribute('y') || 0) + ')');\r\n\t\t\t\r\n\t\t\t// Delete bBox memo when the rotation changes\r\n\t\t\t//delete wrapper.bBox;\r\n\t\t}\r\n\r\n\t\t// apply scale\r\n\t\tif (defined(scaleX) || defined(scaleY)) {\r\n\t\t\ttransform.push('scale(' + pick(scaleX, 1) + ' ' + pick(scaleY, 1) + ')');\r\n\t\t}\r\n\r\n\t\tif (transform.length) {\r\n\t\t\telement.setAttribute('transform', transform.join(' '));\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * Bring the element to the front\r\n\t */\r\n\ttoFront: function () {\r\n\t\tvar element = this.element;\r\n\t\telement.parentNode.appendChild(element);\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Break down alignment options like align, verticalAlign, x and y\r\n\t * to x and y relative to the chart.\r\n\t *\r\n\t * @param {Object} alignOptions\r\n\t * @param {Boolean} alignByTranslate\r\n\t * @param {String[Object} box The box to align to, needs a width and height. When the\r\n\t *\t\tbox is a string, it refers to an object in the Renderer. For example, when\r\n\t *\t\tbox is 'spacingBox', it refers to Renderer.spacingBox which holds width, height\r\n\t *\t\tx and y properties.\r\n\t *\r\n\t */\r\n\talign: function (alignOptions, alignByTranslate, box) {\r\n\t\tvar align,\r\n\t\t\tvAlign,\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\tattribs = {},\r\n\t\t\talignTo,\r\n\t\t\trenderer = this.renderer,\r\n\t\t\talignedObjects = renderer.alignedObjects;\r\n\r\n\t\t// First call on instanciate\r\n\t\tif (alignOptions) {\r\n\t\t\tthis.alignOptions = alignOptions;\r\n\t\t\tthis.alignByTranslate = alignByTranslate;\r\n\t\t\tif (!box || isString(box)) { // boxes other than renderer handle this internally\r\n\t\t\t\tthis.alignTo = alignTo = box || 'renderer';\r\n\t\t\t\terase(alignedObjects, this); // prevent duplicates, like legendGroup after resize\r\n\t\t\t\talignedObjects.push(this);\r\n\t\t\t\tbox = null; // reassign it below\r\n\t\t\t}\r\n\r\n\t\t// When called on resize, no arguments are supplied\r\n\t\t} else {\r\n\t\t\talignOptions = this.alignOptions;\r\n\t\t\talignByTranslate = this.alignByTranslate;\r\n\t\t\talignTo = this.alignTo;\r\n\t\t}\r\n\r\n\t\tbox = pick(box, renderer[alignTo], renderer);\r\n\r\n\t\t// Assign variables\r\n\t\talign = alignOptions.align;\r\n\t\tvAlign = alignOptions.verticalAlign;\r\n\t\tx = (box.x || 0) + (alignOptions.x || 0); // default: left align\r\n\t\ty = (box.y || 0) + (alignOptions.y || 0); // default: top align\r\n\r\n\t\t// Align\r\n\t\tif (align === 'right' || align === 'center') {\r\n\t\t\tx += (box.width - (alignOptions.width || 0)) /\r\n\t\t\t\t\t{ right: 1, center: 2 }[align];\r\n\t\t}\r\n\t\tattribs[alignByTranslate ? 'translateX' : 'x'] = mathRound(x);\r\n\r\n\r\n\t\t// Vertical align\r\n\t\tif (vAlign === 'bottom' || vAlign === 'middle') {\r\n\t\t\ty += (box.height - (alignOptions.height || 0)) /\r\n\t\t\t\t\t({ bottom: 1, middle: 2 }[vAlign] || 1);\r\n\r\n\t\t}\r\n\t\tattribs[alignByTranslate ? 'translateY' : 'y'] = mathRound(y);\r\n\r\n\t\t// Animate only if already placed\r\n\t\tthis[this.placed ? 'animate' : 'attr'](attribs);\r\n\t\tthis.placed = true;\r\n\t\tthis.alignAttr = attribs;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Get the bounding box (width, height, x and y) for the element\r\n\t */\r\n\tgetBBox: function (reload) {\r\n\t\tvar wrapper = this,\r\n\t\t\tbBox,// = wrapper.bBox,\r\n\t\t\trenderer = wrapper.renderer,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\trotation = wrapper.rotation,\r\n\t\t\telement = wrapper.element,\r\n\t\t\tstyles = wrapper.styles,\r\n\t\t\trad = rotation * deg2rad,\r\n\t\t\ttextStr = wrapper.textStr,\r\n\t\t\ttextShadow,\r\n\t\t\telemStyle = element.style,\r\n\t\t\ttoggleTextShadowShim,\r\n\t\t\tcacheKey;\r\n\r\n\t\tif (textStr !== UNDEFINED) {\r\n\r\n\t\t\t// Properties that affect bounding box\r\n\t\t\tcacheKey = ['', rotation || 0, styles && styles.fontSize, element.style.width].join(',');\r\n\r\n\t\t\t// Since numbers are monospaced, and numerical labels appear a lot in a chart,\r\n\t\t\t// we assume that a label of n characters has the same bounding box as others \r\n\t\t\t// of the same length.\r\n\t\t\tif (textStr === '' || numRegex.test(textStr)) {\r\n\t\t\t\tcacheKey = 'num:' + textStr.toString().length + cacheKey;\r\n\r\n\t\t\t// Caching all strings reduces rendering time by 4-5%.\r\n\t\t\t} else {\r\n\t\t\t\tcacheKey = textStr + cacheKey;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (cacheKey && !reload) {\r\n\t\t\tbBox = renderer.cache[cacheKey];\r\n\t\t}\r\n\r\n\t\t// No cache found\r\n\t\tif (!bBox) {\r\n\r\n\t\t\t// SVG elements\r\n\t\t\tif (element.namespaceURI === SVG_NS || renderer.forExport) {\r\n\t\t\t\ttry { // Fails in Firefox if the container has display: none.\r\n\r\n\t\t\t\t\t// When the text shadow shim is used, we need to hide the fake shadows\r\n\t\t\t\t\t// to get the correct bounding box (#3872)\r\n\t\t\t\t\ttoggleTextShadowShim = this.fakeTS && function (display) {\r\n\t\t\t\t\t\teach(element.querySelectorAll('.' + PREFIX + 'text-shadow'), function (tspan) {\r\n\t\t\t\t\t\t\ttspan.style.display = display;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// Workaround for #3842, Firefox reporting wrong bounding box for shadows\r\n\t\t\t\t\tif (isFirefox && elemStyle.textShadow) {\r\n\t\t\t\t\t\ttextShadow = elemStyle.textShadow;\r\n\t\t\t\t\t\telemStyle.textShadow = '';\r\n\t\t\t\t\t} else if (toggleTextShadowShim) {\r\n\t\t\t\t\t\ttoggleTextShadowShim(NONE);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbBox = element.getBBox ?\r\n\t\t\t\t\t\t// SVG: use extend because IE9 is not allowed to change width and height in case\r\n\t\t\t\t\t\t// of rotation (below)\r\n\t\t\t\t\t\textend({}, element.getBBox()) :\r\n\t\t\t\t\t\t// Canvas renderer and legacy IE in export mode\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: element.offsetWidth,\r\n\t\t\t\t\t\t\theight: element.offsetHeight\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// #3842\r\n\t\t\t\t\tif (textShadow) {\r\n\t\t\t\t\t\telemStyle.textShadow = textShadow;\r\n\t\t\t\t\t} else if (toggleTextShadowShim) {\r\n\t\t\t\t\t\ttoggleTextShadowShim('');\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {}\r\n\r\n\t\t\t\t// If the bBox is not set, the try-catch block above failed. The other condition\r\n\t\t\t\t// is for Opera that returns a width of -Infinity on hidden elements.\r\n\t\t\t\tif (!bBox || bBox.width < 0) {\r\n\t\t\t\t\tbBox = { width: 0, height: 0 };\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t// VML Renderer or useHTML within SVG\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbBox = wrapper.htmlGetBBox();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// True SVG elements as well as HTML elements in modern browsers using the .useHTML option\r\n\t\t\t// need to compensated for rotation\r\n\t\t\tif (renderer.isSVG) {\r\n\t\t\t\twidth = bBox.width;\r\n\t\t\t\theight = bBox.height;\r\n\r\n\t\t\t\t// Workaround for wrong bounding box in IE9 and IE10 (#1101, #1505, #1669, #2568)\r\n\t\t\t\tif (isIE && styles && styles.fontSize === '11px' && height.toPrecision(3) === '16.9') {\r\n\t\t\t\t\tbBox.height = height = 14;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Adjust for rotated text\r\n\t\t\t\tif (rotation) {\r\n\t\t\t\t\tbBox.width = mathAbs(height * mathSin(rad)) + mathAbs(width * mathCos(rad));\r\n\t\t\t\t\tbBox.height = mathAbs(height * mathCos(rad)) + mathAbs(width * mathSin(rad));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Cache it\r\n\t\t\trenderer.cache[cacheKey] = bBox;\r\n\t\t}\r\n\t\treturn bBox;\r\n\t},\r\n\r\n\t/**\r\n\t * Show the element\r\n\t */\r\n\tshow: function (inherit) {\r\n\t\t// IE9-11 doesn't handle visibilty:inherit well, so we remove the attribute instead (#2881)\r\n\t\tif (inherit && this.element.namespaceURI === SVG_NS) {\r\n\t\t\tthis.element.removeAttribute('visibility');\r\n\t\t} else {\r\n\t\t\tthis.attr({ visibility: inherit ? 'inherit' : VISIBLE });\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Hide the element\r\n\t */\r\n\thide: function () {\r\n\t\treturn this.attr({ visibility: HIDDEN });\r\n\t},\r\n\r\n\tfadeOut: function (duration) {\r\n\t\tvar elemWrapper = this;\r\n\t\telemWrapper.animate({\r\n\t\t\topacity: 0\r\n\t\t}, {\r\n\t\t\tduration: duration || 150,\r\n\t\t\tcomplete: function () {\r\n\t\t\t\telemWrapper.attr({ y: -9999 }); // #3088, assuming we're only using this for tooltips\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Add the element\r\n\t * @param {Object|Undefined} parent Can be an element, an element wrapper or undefined\r\n\t *\tto append the element to the renderer.box.\r\n\t */\r\n\tadd: function (parent) {\r\n\r\n\t\tvar renderer = this.renderer,\r\n\t\t\telement = this.element,\r\n\t\t\tinserted;\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.parentGroup = parent;\r\n\t\t}\r\n\r\n\t\t// mark as inverted\r\n\t\tthis.parentInverted = parent && parent.inverted;\r\n\r\n\t\t// build formatted text\r\n\t\tif (this.textStr !== undefined) {\r\n\t\t\trenderer.buildText(this);\r\n\t\t}\r\n\r\n\t\t// Mark as added\r\n\t\tthis.added = true;\r\n\r\n\t\t// If we're adding to renderer root, or other elements in the group \r\n\t\t// have a z index, we need to handle it\r\n\t\tif (!parent || parent.handleZ || this.zIndex) {\r\n\t\t\tinserted = this.zIndexSetter();\r\n\t\t}\r\n\r\n\t\t// If zIndex is not handled, append at the end\r\n\t\tif (!inserted) {\r\n\t\t\t(parent ? parent.element : renderer.box).appendChild(element);\r\n\t\t}\r\n\r\n\t\t// fire an event for internal hooks\r\n\t\tif (this.onAdd) {\r\n\t\t\tthis.onAdd();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Removes a child either by removeChild or move to garbageBin.\r\n\t * Issue 490; in VML removeChild results in Orphaned nodes according to sIEve, discardElement does not.\r\n\t */\r\n\tsafeRemoveChild: function (element) {\r\n\t\tvar parentNode = element.parentNode;\r\n\t\tif (parentNode) {\r\n\t\t\tparentNode.removeChild(element);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Destroy the element and element wrapper\r\n\t */\r\n\tdestroy: function () {\r\n\t\tvar wrapper = this,\r\n\t\t\telement = wrapper.element || {},\r\n\t\t\tshadows = wrapper.shadows,\r\n\t\t\tparentToClean = wrapper.renderer.isSVG && element.nodeName === 'SPAN' && wrapper.parentGroup,\r\n\t\t\tgrandParent,\r\n\t\t\tkey,\r\n\t\t\ti;\r\n\r\n\t\t// remove events\r\n\t\telement.onclick = element.onmouseout = element.onmouseover = element.onmousemove = element.point = null;\r\n\t\tstop(wrapper); // stop running animations\r\n\r\n\t\tif (wrapper.clipPath) {\r\n\t\t\twrapper.clipPath = wrapper.clipPath.destroy();\r\n\t\t}\r\n\r\n\t\t// Destroy stops in case this is a gradient object\r\n\t\tif (wrapper.stops) {\r\n\t\t\tfor (i = 0; i < wrapper.stops.length; i++) {\r\n\t\t\t\twrapper.stops[i] = wrapper.stops[i].destroy();\r\n\t\t\t}\r\n\t\t\twrapper.stops = null;\r\n\t\t}\r\n\r\n\t\t// remove element\r\n\t\twrapper.safeRemoveChild(element);\r\n\r\n\t\t// destroy shadows\r\n\t\tif (shadows) {\r\n\t\t\teach(shadows, function (shadow) {\r\n\t\t\t\twrapper.safeRemoveChild(shadow);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// In case of useHTML, clean up empty containers emulating SVG groups (#1960, #2393, #2697).\r\n\t\twhile (parentToClean && parentToClean.div && parentToClean.div.childNodes.length === 0) {\r\n\t\t\tgrandParent = parentToClean.parentGroup;\r\n\t\t\twrapper.safeRemoveChild(parentToClean.div);\r\n\t\t\tdelete parentToClean.div;\r\n\t\t\tparentToClean = grandParent;\r\n\t\t}\r\n\r\n\t\t// remove from alignObjects\r\n\t\tif (wrapper.alignTo) {\r\n\t\t\terase(wrapper.renderer.alignedObjects, wrapper);\r\n\t\t}\r\n\r\n\t\tfor (key in wrapper) {\r\n\t\t\tdelete wrapper[key];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t * Add a shadow to the element. Must be done after the element is added to the DOM\r\n\t * @param {Boolean|Object} shadowOptions\r\n\t */\r\n\tshadow: function (shadowOptions, group, cutOff) {\r\n\t\tvar shadows = [],\r\n\t\t\ti,\r\n\t\t\tshadow,\r\n\t\t\telement = this.element,\r\n\t\t\tstrokeWidth,\r\n\t\t\tshadowWidth,\r\n\t\t\tshadowElementOpacity,\r\n\r\n\t\t\t// compensate for inverted plot area\r\n\t\t\ttransform;\r\n\r\n\r\n\t\tif (shadowOptions) {\r\n\t\t\tshadowWidth = pick(shadowOptions.width, 3);\r\n\t\t\tshadowElementOpacity = (shadowOptions.opacity || 0.15) / shadowWidth;\r\n\t\t\ttransform = this.parentInverted ?\r\n\t\t\t\t'(-1,-1)' :\r\n\t\t\t\t'(' + pick(shadowOptions.offsetX, 1) + ', ' + pick(shadowOptions.offsetY, 1) + ')';\r\n\t\t\tfor (i = 1; i <= shadowWidth; i++) {\r\n\t\t\t\tshadow = element.cloneNode(0);\r\n\t\t\t\tstrokeWidth = (shadowWidth * 2) + 1 - (2 * i);\r\n\t\t\t\tattr(shadow, {\r\n\t\t\t\t\t'isShadow': 'true',\r\n\t\t\t\t\t'stroke': shadowOptions.color || 'black',\r\n\t\t\t\t\t'stroke-opacity': shadowElementOpacity * i,\r\n\t\t\t\t\t'stroke-width': strokeWidth,\r\n\t\t\t\t\t'transform': 'translate' + transform,\r\n\t\t\t\t\t'fill': NONE\r\n\t\t\t\t});\r\n\t\t\t\tif (cutOff) {\r\n\t\t\t\t\tattr(shadow, 'height', mathMax(attr(shadow, 'height') - strokeWidth, 0));\r\n\t\t\t\t\tshadow.cutHeight = strokeWidth;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (group) {\r\n\t\t\t\t\tgroup.element.appendChild(shadow);\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.parentNode.insertBefore(shadow, element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshadows.push(shadow);\r\n\t\t\t}\r\n\r\n\t\t\tthis.shadows = shadows;\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\txGetter: function (key) {\r\n\t\tif (this.element.nodeName === 'circle') {\r\n\t\t\tkey = { x: 'cx', y: 'cy' }[key] || key;\r\n\t\t}\r\n\t\treturn this._defaultGetter(key);\r\n\t},\r\n\r\n\t/** \r\n\t * Get the current value of an attribute or pseudo attribute, used mainly\r\n\t * for animation.\r\n\t */\r\n\t_defaultGetter: function (key) {\r\n\t\tvar ret = pick(this[key], this.element ? this.element.getAttribute(key) : null, 0);\r\n\r\n\t\tif (/^[\\-0-9\\.]+$/.test(ret)) { // is numerical\r\n\t\t\tret = parseFloat(ret);\r\n\t\t}\r\n\t\treturn ret;\r\n\t},\r\n\r\n\r\n\tdSetter: function (value, key, element) {\r\n\t\tif (value && value.join) { // join path\r\n\t\t\tvalue = value.join(' ');\r\n\t\t}\r\n\t\tif (/(NaN| {2}|^$)/.test(value)) {\r\n\t\t\tvalue = 'M 0 0';\r\n\t\t}\r\n\t\telement.setAttribute(key, value);\r\n\r\n\t\tthis[key] = value;\r\n\t},\r\n\tdashstyleSetter: function (value) {\r\n\t\tvar i;\r\n\t\tvalue = value && value.toLowerCase();\r\n\t\tif (value) {\r\n\t\t\tvalue = value\r\n\t\t\t\t.replace('shortdashdotdot', '3,1,1,1,1,1,')\r\n\t\t\t\t.replace('shortdashdot', '3,1,1,1')\r\n\t\t\t\t.replace('shortdot', '1,1,')\r\n\t\t\t\t.replace('shortdash', '3,1,')\r\n\t\t\t\t.replace('longdash', '8,3,')\r\n\t\t\t\t.replace(/dot/g, '1,3,')\r\n\t\t\t\t.replace('dash', '4,3,')\r\n\t\t\t\t.replace(/,$/, '')\r\n\t\t\t\t.split(','); // ending comma\r\n\r\n\t\t\ti = value.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvalue[i] = pInt(value[i]) * this['stroke-width'];\r\n\t\t\t}\r\n\t\t\tvalue = value.join(',')\r\n\t\t\t\t.replace('NaN', 'none'); // #3226\r\n\t\t\tthis.element.setAttribute('stroke-dasharray', value);\r\n\t\t}\r\n\t},\r\n\talignSetter: function (value) {\r\n\t\tthis.element.setAttribute('text-anchor', { left: 'start', center: 'middle', right: 'end' }[value]);\r\n\t},\r\n\topacitySetter: function (value, key, element) {\r\n\t\tthis[key] = value;\r\n\t\telement.setAttribute(key, value);\r\n\t},\r\n\ttitleSetter: function (value) {\r\n\t\tvar titleNode = this.element.getElementsByTagName('title')[0];\r\n\t\tif (!titleNode) {\r\n\t\t\ttitleNode = doc.createElementNS(SVG_NS, 'title');\r\n\t\t\tthis.element.appendChild(titleNode);\r\n\t\t}\r\n\t\ttitleNode.textContent = (String(pick(value), '')).replace(/<[^>]*>/g, ''); // #3276 #3895\r\n\t},\r\n\ttextSetter: function (value) {\r\n\t\tif (value !== this.textStr) {\r\n\t\t\t// Delete bBox memo when the text changes\r\n\t\t\tdelete this.bBox;\r\n\t\t\r\n\t\t\tthis.textStr = value;\r\n\t\t\tif (this.added) {\r\n\t\t\t\tthis.renderer.buildText(this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfillSetter: function (value, key, element) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\telement.setAttribute(key, value);\r\n\t\t} else if (value) {\r\n\t\t\tthis.colorGradient(value, key, element);\r\n\t\t}\r\n\t},\r\n\tzIndexSetter: function (value, key) {\r\n\t\tvar renderer = this.renderer,\r\n\t\t\tparentGroup = this.parentGroup,\r\n\t\t\tparentWrapper = parentGroup || renderer,\r\n\t\t\tparentNode = parentWrapper.element || renderer.box,\r\n\t\t\tchildNodes,\r\n\t\t\totherElement,\r\n\t\t\totherZIndex,\r\n\t\t\telement = this.element,\r\n\t\t\tinserted,\r\n\t\t\ti;\r\n\t\t\r\n\t\tif (defined(value)) {\r\n\t\t\telement.setAttribute(key, value); // So we can read it for other elements in the group\r\n\t\t\tthis[key] = +value;\r\n\t\t}\r\n\r\n\t\t// Insert according to this and other elements' zIndex. Before .add() is called,\r\n\t\t// nothing is done. Then on add, or by later calls to zIndexSetter, the node\r\n\t\t// is placed on the right place in the DOM.\r\n\t\tif (this.added) {\r\n\t\t\tvalue = this.zIndex;\r\n\r\n\t\t\tif (value && parentGroup) {\r\n\t\t\t\tparentGroup.handleZ = true;\r\n\t\t\t}\r\n\t\t\r\n\t\t\tchildNodes = parentNode.childNodes;\r\n\t\t\tfor (i = 0; i < childNodes.length && !inserted; i++) {\r\n\t\t\t\totherElement = childNodes[i];\r\n\t\t\t\totherZIndex = attr(otherElement, 'zIndex');\r\n\t\t\t\tif (otherElement !== element && (\r\n\t\t\t\t\t\t// Insert before the first element with a higher zIndex\r\n\t\t\t\t\t\tpInt(otherZIndex) > value ||\r\n\t\t\t\t\t\t// If no zIndex given, insert before the first element with a zIndex\r\n\t\t\t\t\t\t(!defined(value) && defined(otherZIndex))\r\n\r\n\t\t\t\t\t\t)) {\r\n\t\t\t\t\tparentNode.insertBefore(element, otherElement);\r\n\t\t\t\t\tinserted = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!inserted) {\r\n\t\t\t\tparentNode.appendChild(element);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn inserted;\r\n\t},\r\n\t_defaultSetter: function (value, key, element) {\r\n\t\telement.setAttribute(key, value);\r\n\t}\r\n};\r\n\r\n// Some shared setters and getters\r\nSVGElement.prototype.yGetter = SVGElement.prototype.xGetter;\r\nSVGElement.prototype.translateXSetter = SVGElement.prototype.translateYSetter = \r\n\t\tSVGElement.prototype.rotationSetter = SVGElement.prototype.verticalAlignSetter = \r\n\t\tSVGElement.prototype.scaleXSetter = SVGElement.prototype.scaleYSetter = function (value, key) {\r\n\tthis[key] = value;\r\n\tthis.doTransform = true;\r\n};\r\n\r\n// WebKit and Batik have problems with a stroke-width of zero, so in this case we remove the \r\n// stroke attribute altogether. #1270, #1369, #3065, #3072.\r\nSVGElement.prototype['stroke-widthSetter'] = SVGElement.prototype.strokeSetter = function (value, key, element) {\r\n\tthis[key] = value;\r\n\t// Only apply the stroke attribute if the stroke width is defined and larger than 0\r\n\tif (this.stroke && this['stroke-width']) {\r\n\t\tthis.strokeWidth = this['stroke-width'];\r\n\t\tSVGElement.prototype.fillSetter.call(this, this.stroke, 'stroke', element); // use prototype as instance may be overridden\r\n\t\telement.setAttribute('stroke-width', this['stroke-width']);\r\n\t\tthis.hasStroke = true;\r\n\t} else if (key === 'stroke-width' && value === 0 && this.hasStroke) {\r\n\t\telement.removeAttribute('stroke');\r\n\t\tthis.hasStroke = false;\r\n\t}\r\n};\r\n\r\n\r\n/**\r\n * The default SVG renderer\r\n */\r\nvar SVGRenderer = function () {\r\n\tthis.init.apply(this, arguments);\r\n};\r\nSVGRenderer.prototype = {\r\n\tElement: SVGElement,\r\n\r\n\t/**\r\n\t * Initialize the SVGRenderer\r\n\t * @param {Object} container\r\n\t * @param {Number} width\r\n\t * @param {Number} height\r\n\t * @param {Boolean} forExport\r\n\t */\r\n\tinit: function (container, width, height, style, forExport) {\r\n\t\tvar renderer = this,\r\n\t\t\tloc = location,\r\n\t\t\tboxWrapper,\r\n\t\t\telement,\r\n\t\t\tdesc;\r\n\r\n\t\tboxWrapper = renderer.createElement('svg')\r\n\t\t\t.attr({\r\n\t\t\t\tversion: '1.1'\r\n\t\t\t})\r\n\t\t\t.css(this.getStyle(style));\r\n\t\telement = boxWrapper.element;\r\n\t\tcontainer.appendChild(element);\r\n\r\n\t\t// For browsers other than IE, add the namespace attribute (#1978)\r\n\t\tif (container.innerHTML.indexOf('xmlns') === -1) {\r\n\t\t\tattr(element, 'xmlns', SVG_NS);\r\n\t\t}\r\n\r\n\t\t// object properties\r\n\t\trenderer.isSVG = true;\r\n\t\trenderer.box = element;\r\n\t\trenderer.boxWrapper = boxWrapper;\r\n\t\trenderer.alignedObjects = [];\r\n\r\n\t\t// Page url used for internal references. #24, #672, #1070\r\n\t\trenderer.url = (isFirefox || isWebKit) && doc.getElementsByTagName('base').length ?\r\n\t\t\tloc.href\r\n\t\t\t\t.replace(/#.*?$/, '') // remove the hash\r\n\t\t\t\t.replace(/([\\('\\)])/g, '\\\\$1') // escape parantheses and quotes\r\n\t\t\t\t.replace(/ /g, '%20') : // replace spaces (needed for Safari only)\r\n\t\t\t'';\r\n\r\n\t\t// Add description\r\n\t\tdesc = this.createElement('desc').add();\r\n\t\tdesc.element.appendChild(doc.createTextNode('Created with ' + PRODUCT + ' ' + VERSION));\r\n\r\n\r\n\t\trenderer.defs = this.createElement('defs').add();\r\n\t\trenderer.forExport = forExport;\r\n\t\trenderer.gradients = {}; // Object where gradient SvgElements are stored\r\n\t\trenderer.cache = {}; // Cache for numerical bounding boxes\r\n\r\n\t\trenderer.setSize(width, height, false);\r\n\r\n\r\n\r\n\t\t// Issue 110 workaround:\r\n\t\t// In Firefox, if a div is positioned by percentage, its pixel position may land\r\n\t\t// between pixels. The container itself doesn't display this, but an SVG element\r\n\t\t// inside this container will be drawn at subpixel precision. In order to draw\r\n\t\t// sharp lines, this must be compensated for. This doesn't seem to work inside\r\n\t\t// iframes though (like in jsFiddle).\r\n\t\tvar subPixelFix, rect;\r\n\t\tif (isFirefox && container.getBoundingClientRect) {\r\n\t\t\trenderer.subPixelFix = subPixelFix = function () {\r\n\t\t\t\tcss(container, { left: 0, top: 0 });\r\n\t\t\t\trect = container.getBoundingClientRect();\r\n\t\t\t\tcss(container, {\r\n\t\t\t\t\tleft: (mathCeil(rect.left) - rect.left) + PX,\r\n\t\t\t\t\ttop: (mathCeil(rect.top) - rect.top) + PX\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t// run the fix now\r\n\t\t\tsubPixelFix();\r\n\r\n\t\t\t// run it on resize\r\n\t\t\taddEvent(win, 'resize', subPixelFix);\r\n\t\t}\r\n\t},\r\n\r\n\tgetStyle: function (style) {\r\n\t\treturn (this.style = extend({\r\n\t\t\tfontFamily: '\"Lucida Grande\", \"Lucida Sans Unicode\", Arial, Helvetica, sans-serif', // default font\r\n\t\t\tfontSize: '12px'\r\n\t\t}, style));\r\n\t},\r\n\r\n\t/**\r\n\t * Detect whether the renderer is hidden. This happens when one of the parent elements\r\n\t * has display: none. #608.\r\n\t */\r\n\tisHidden: function () {\r\n\t\treturn !this.boxWrapper.getBBox().width;\r\n\t},\r\n\r\n\t/**\r\n\t * Destroys the renderer and its allocated members.\r\n\t */\r\n\tdestroy: function () {\r\n\t\tvar renderer = this,\r\n\t\t\trendererDefs = renderer.defs;\r\n\t\trenderer.box = null;\r\n\t\trenderer.boxWrapper = renderer.boxWrapper.destroy();\r\n\r\n\t\t// Call destroy on all gradient elements\r\n\t\tdestroyObjectProperties(renderer.gradients || {});\r\n\t\trenderer.gradients = null;\r\n\r\n\t\t// Defs are null in VMLRenderer\r\n\t\t// Otherwise, destroy them here.\r\n\t\tif (rendererDefs) {\r\n\t\t\trenderer.defs = rendererDefs.destroy();\r\n\t\t}\r\n\r\n\t\t// Remove sub pixel fix handler\r\n\t\t// We need to check that there is a handler, otherwise all functions that are registered for event 'resize' are removed\r\n\t\t// See issue #982\r\n\t\tif (renderer.subPixelFix) {\r\n\t\t\tremoveEvent(win, 'resize', renderer.subPixelFix);\r\n\t\t}\r\n\r\n\t\trenderer.alignedObjects = null;\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t * Create a wrapper for an SVG element\r\n\t * @param {Object} nodeName\r\n\t */\r\n\tcreateElement: function (nodeName) {\r\n\t\tvar wrapper = new this.Element();\r\n\t\twrapper.init(this, nodeName);\r\n\t\treturn wrapper;\r\n\t},\r\n\r\n\t/**\r\n\t * Dummy function for use in canvas renderer\r\n\t */\r\n\tdraw: function () {},\r\n\r\n\t/**\r\n\t * Parse a simple HTML string into SVG tspans\r\n\t *\r\n\t * @param {Object} textNode The parent text SVG node\r\n\t */\r\n\tbuildText: function (wrapper) {\r\n\t\tvar textNode = wrapper.element,\r\n\t\t\trenderer = this,\r\n\t\t\tforExport = renderer.forExport,\r\n\t\t\ttextStr = pick(wrapper.textStr, '').toString(),\r\n\t\t\thasMarkup = textStr.indexOf('<') !== -1,\r\n\t\t\tlines,\r\n\t\t\tchildNodes = textNode.childNodes,\r\n\t\t\tstyleRegex,\r\n\t\t\threfRegex,\r\n\t\t\tparentX = attr(textNode, 'x'),\r\n\t\t\ttextStyles = wrapper.styles,\r\n\t\t\twidth = wrapper.textWidth,\r\n\t\t\ttextLineHeight = textStyles && textStyles.lineHeight,\r\n\t\t\ttextShadow = textStyles && textStyles.textShadow,\r\n\t\t\tellipsis = textStyles && textStyles.textOverflow === 'ellipsis',\r\n\t\t\ti = childNodes.length,\r\n\t\t\ttempParent = width && !wrapper.added && this.box,\r\n\t\t\tgetLineHeight = function (tspan) {\r\n\t\t\t\treturn textLineHeight ? \r\n\t\t\t\t\tpInt(textLineHeight) :\r\n\t\t\t\t\trenderer.fontMetrics(\r\n\t\t\t\t\t\t/(px|em)$/.test(tspan && tspan.style.fontSize) ?\r\n\t\t\t\t\t\t\ttspan.style.fontSize :\r\n\t\t\t\t\t\t\t((textStyles && textStyles.fontSize) || renderer.style.fontSize || 12),\r\n\t\t\t\t\t\ttspan\r\n\t\t\t\t\t).h;\r\n\t\t\t},\r\n\t\t\tunescapeAngleBrackets = function (inputStr) {\r\n\t\t\t\treturn inputStr.replace(/&lt;/g, '<').replace(/&gt;/g, '>');\r\n\t\t\t};\r\n\r\n\t\t/// remove old text\r\n\t\twhile (i--) {\r\n\t\t\ttextNode.removeChild(childNodes[i]);\r\n\t\t}\r\n\r\n\t\t// Skip tspans, add text directly to text node. The forceTSpan is a hook \r\n\t\t// used in text outline hack.\r\n\t\tif (!hasMarkup && !textShadow && !ellipsis && textStr.indexOf(' ') === -1) {\r\n\t\t\ttextNode.appendChild(doc.createTextNode(unescapeAngleBrackets(textStr)));\r\n\t\t\treturn;\r\n\r\n\t\t// Complex strings, add more logic\r\n\t\t} else {\r\n\r\n\t\t\tstyleRegex = /<.*style=\"([^\"]+)\".*>/;\r\n\t\t\threfRegex = /<.*href=\"(http[^\"]+)\".*>/;\r\n\r\n\t\t\tif (tempParent) {\r\n\t\t\t\ttempParent.appendChild(textNode); // attach it to the DOM to read offset width\r\n\t\t\t}\r\n\r\n\t\t\tif (hasMarkup) {\r\n\t\t\t\tlines = textStr\r\n\t\t\t\t\t.replace(/<(b|strong)>/g, '<span style=\"font-weight:bold\">')\r\n\t\t\t\t\t.replace(/<(i|em)>/g, '<span style=\"font-style:italic\">')\r\n\t\t\t\t\t.replace(/<a/g, '<span')\r\n\t\t\t\t\t.replace(/<\\/(b|strong|i|em|a)>/g, '</span>')\r\n\t\t\t\t\t.split(/<br.*?>/g);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tlines = [textStr];\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// remove empty line at end\r\n\t\t\tif (lines[lines.length - 1] === '') {\r\n\t\t\t\tlines.pop();\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\t// build the lines\r\n\t\t\teach(lines, function (line, lineNo) {\r\n\t\t\t\tvar spans, spanNo = 0;\r\n\r\n\t\t\t\tline = line.replace(/<span/g, '|||<span').replace(/<\\/span>/g, '</span>|||');\r\n\t\t\t\tspans = line.split('|||');\r\n\r\n\t\t\t\teach(spans, function (span) {\r\n\t\t\t\t\tif (span !== '' || spans.length === 1) {\r\n\t\t\t\t\t\tvar attributes = {},\r\n\t\t\t\t\t\t\ttspan = doc.createElementNS(SVG_NS, 'tspan'),\r\n\t\t\t\t\t\t\tspanStyle; // #390\r\n\t\t\t\t\t\tif (styleRegex.test(span)) {\r\n\t\t\t\t\t\t\tspanStyle = span.match(styleRegex)[1].replace(/(;| |^)color([ :])/, '$1fill$2');\r\n\t\t\t\t\t\t\tattr(tspan, 'style', spanStyle);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (hrefRegex.test(span) && !forExport) { // Not for export - #1529\r\n\t\t\t\t\t\t\tattr(tspan, 'onclick', 'location.href=\\\"' + span.match(hrefRegex)[1] + '\\\"');\r\n\t\t\t\t\t\t\tcss(tspan, { cursor: 'pointer' });\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tspan = unescapeAngleBrackets(span.replace(/<(.|\\n)*?>/g, '') || ' ');\r\n\r\n\t\t\t\t\t\t// Nested tags aren't supported, and cause crash in Safari (#1596)\r\n\t\t\t\t\t\tif (span !== ' ') {\r\n\r\n\t\t\t\t\t\t\t// add the text node\r\n\t\t\t\t\t\t\ttspan.appendChild(doc.createTextNode(span));\r\n\r\n\t\t\t\t\t\t\tif (!spanNo) { // first span in a line, align it to the left\r\n\t\t\t\t\t\t\t\tif (lineNo && parentX !== null) {\r\n\t\t\t\t\t\t\t\t\tattributes.x = parentX;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tattributes.dx = 0; // #16\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// add attributes\r\n\t\t\t\t\t\t\tattr(tspan, attributes);\r\n\r\n\t\t\t\t\t\t\t// Append it\r\n\t\t\t\t\t\t\ttextNode.appendChild(tspan);\r\n\r\n\t\t\t\t\t\t\t// first span on subsequent line, add the line height\r\n\t\t\t\t\t\t\tif (!spanNo && lineNo) {\r\n\r\n\t\t\t\t\t\t\t\t// allow getting the right offset height in exporting in IE\r\n\t\t\t\t\t\t\t\tif (!hasSVG && forExport) {\r\n\t\t\t\t\t\t\t\t\tcss(tspan, { display: 'block' });\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// Set the line height based on the font size of either\r\n\t\t\t\t\t\t\t\t// the text element or the tspan element\r\n\t\t\t\t\t\t\t\tattr(\r\n\t\t\t\t\t\t\t\t\ttspan,\r\n\t\t\t\t\t\t\t\t\t'dy',\r\n\t\t\t\t\t\t\t\t\tgetLineHeight(tspan)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t/*if (width) {\r\n\t\t\t\t\t\t\t\trenderer.breakText(wrapper, width);\r\n\t\t\t\t\t\t\t}*/\r\n\r\n\t\t\t\t\t\t\t// Check width and apply soft breaks or ellipsis\r\n\t\t\t\t\t\t\tif (width) {\r\n\t\t\t\t\t\t\t\tvar words = span.replace(/([^\\^])-/g, '$1- ').split(' '), // #1273\r\n\t\t\t\t\t\t\t\t\thasWhiteSpace = spans.length > 1 || lineNo || (words.length > 1 && textStyles.whiteSpace !== 'nowrap'),\r\n\t\t\t\t\t\t\t\t\ttooLong,\r\n\t\t\t\t\t\t\t\t\twasTooLong,\r\n\t\t\t\t\t\t\t\t\tactualWidth,\r\n\t\t\t\t\t\t\t\t\trest = [],\r\n\t\t\t\t\t\t\t\t\tdy = getLineHeight(tspan),\r\n\t\t\t\t\t\t\t\t\tsoftLineNo = 1,\r\n\t\t\t\t\t\t\t\t\trotation = wrapper.rotation,\r\n\t\t\t\t\t\t\t\t\twordStr = span, // for ellipsis\r\n\t\t\t\t\t\t\t\t\tcursor = wordStr.length, // binary search cursor\r\n\t\t\t\t\t\t\t\t\tbBox;\r\n\r\n\t\t\t\t\t\t\t\twhile ((hasWhiteSpace || ellipsis) && (words.length || rest.length)) {\r\n\t\t\t\t\t\t\t\t\twrapper.rotation = 0; // discard rotation when computing box\r\n\t\t\t\t\t\t\t\t\tbBox = wrapper.getBBox(true);\r\n\t\t\t\t\t\t\t\t\tactualWidth = bBox.width;\r\n\r\n\t\t\t\t\t\t\t\t\t// Old IE cannot measure the actualWidth for SVG elements (#2314)\r\n\t\t\t\t\t\t\t\t\tif (!hasSVG && renderer.forExport) {\r\n\t\t\t\t\t\t\t\t\t\tactualWidth = renderer.measureSpanWidth(tspan.firstChild.data, wrapper.styles);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\ttooLong = actualWidth > width;\r\n\r\n\t\t\t\t\t\t\t\t\t// For ellipsis, do a binary search for the correct string length\r\n\t\t\t\t\t\t\t\t\tif (wasTooLong === undefined) {\r\n\t\t\t\t\t\t\t\t\t\twasTooLong = tooLong; // First time\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (ellipsis && wasTooLong) {\r\n\t\t\t\t\t\t\t\t\t\tcursor /= 2;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (wordStr === '' || (!tooLong && cursor < 0.5)) {\r\n\t\t\t\t\t\t\t\t\t\t\twords = []; // All ok, break out\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tif (tooLong) {\r\n\t\t\t\t\t\t\t\t\t\t\t\twasTooLong = true;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\twordStr = span.substring(0, wordStr.length + (tooLong ? -1 : 1) * mathCeil(cursor));\r\n\t\t\t\t\t\t\t\t\t\t\twords = [wordStr + '\\u2026'];\r\n\t\t\t\t\t\t\t\t\t\t\ttspan.removeChild(tspan.firstChild);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// Looping down, this is the first word sequence that is not too long,\r\n\t\t\t\t\t\t\t\t\t// so we can move on to build the next line.\r\n\t\t\t\t\t\t\t\t\t} else if (!tooLong || words.length === 1) {\r\n\t\t\t\t\t\t\t\t\t\twords = rest;\r\n\t\t\t\t\t\t\t\t\t\trest = [];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif (words.length) {\r\n\t\t\t\t\t\t\t\t\t\t\tsoftLineNo++;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\ttspan = doc.createElementNS(SVG_NS, 'tspan');\r\n\t\t\t\t\t\t\t\t\t\t\tattr(tspan, {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdy: dy,\r\n\t\t\t\t\t\t\t\t\t\t\t\tx: parentX\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tif (spanStyle) { // #390\r\n\t\t\t\t\t\t\t\t\t\t\t\tattr(tspan, 'style', spanStyle);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\ttextNode.appendChild(tspan);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (actualWidth > width) { // a single word is pressing it out\r\n\t\t\t\t\t\t\t\t\t\t\twidth = actualWidth;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else { // append to existing line tspan\r\n\t\t\t\t\t\t\t\t\t\ttspan.removeChild(tspan.firstChild);\r\n\t\t\t\t\t\t\t\t\t\trest.unshift(words.pop());\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (words.length) {\r\n\t\t\t\t\t\t\t\t\t\ttspan.appendChild(doc.createTextNode(words.join(' ').replace(/- /g, '-')));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (wasTooLong) {\r\n\t\t\t\t\t\t\t\t\twrapper.attr('title', wrapper.textStr);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\twrapper.rotation = rotation;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tspanNo++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tif (tempParent) {\r\n\t\t\t\ttempParent.removeChild(textNode); // attach it to the DOM to read offset width\r\n\t\t\t}\r\n\r\n\t\t\t// Apply the text shadow\r\n\t\t\tif (textShadow && wrapper.applyTextShadow) {\r\n\t\t\t\twrapper.applyTextShadow(textShadow);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t\r\n\r\n\t/*\r\n\tbreakText: function (wrapper, width) {\r\n\t\tvar bBox = wrapper.getBBox(),\r\n\t\t\tnode = wrapper.element,\r\n\t\t\ttextLength = node.textContent.length,\r\n\t\t\tpos = mathRound(width * textLength / bBox.width), // try this position first, based on average character width\r\n\t\t\tincrement = 0,\r\n\t\t\tfinalPos;\r\n\r\n\t\tif (bBox.width > width) {\r\n\t\t\twhile (finalPos === undefined) {\r\n\t\t\t\ttextLength = node.getSubStringLength(0, pos);\r\n\r\n\t\t\t\tif (textLength <= width) {\r\n\t\t\t\t\tif (increment === -1) {\r\n\t\t\t\t\t\tfinalPos = pos;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tincrement = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (increment === 1) {\r\n\t\t\t\t\t\tfinalPos = pos - 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tincrement = -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tpos += increment;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(finalPos, node.getSubStringLength(0, finalPos))\r\n\t},\r\n\t*/\r\n\r\n\t/** \r\n\t * Returns white for dark colors and black for bright colors\r\n\t */\r\n\tgetContrast: function (color) {\r\n\t\tcolor = Color(color).rgba;\r\n\t\treturn color[0] + color[1] + color[2] > 384 ? '#000' : '#FFF';\r\n\t},\r\n\r\n\t/**\r\n\t * Create a button with preset states\r\n\t * @param {String} text\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Function} callback\r\n\t * @param {Object} normalState\r\n\t * @param {Object} hoverState\r\n\t * @param {Object} pressedState\r\n\t */\r\n\tbutton: function (text, x, y, callback, normalState, hoverState, pressedState, disabledState, shape) {\r\n\t\tvar label = this.label(text, x, y, shape, null, null, null, null, 'button'),\r\n\t\t\tcurState = 0,\r\n\t\t\tstateOptions,\r\n\t\t\tstateStyle,\r\n\t\t\tnormalStyle,\r\n\t\t\thoverStyle,\r\n\t\t\tpressedStyle,\r\n\t\t\tdisabledStyle,\r\n\t\t\tverticalGradient = { x1: 0, y1: 0, x2: 0, y2: 1 };\r\n\r\n\t\t// Normal state - prepare the attributes\r\n\t\tnormalState = merge({\r\n\t\t\t'stroke-width': 1,\r\n\t\t\tstroke: '#CCCCCC',\r\n\t\t\tfill: {\r\n\t\t\t\tlinearGradient: verticalGradient,\r\n\t\t\t\tstops: [\r\n\t\t\t\t\t[0, '#FEFEFE'],\r\n\t\t\t\t\t[1, '#F6F6F6']\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tr: 2,\r\n\t\t\tpadding: 5,\r\n\t\t\tstyle: {\r\n\t\t\t\tcolor: 'black'\r\n\t\t\t}\r\n\t\t}, normalState);\r\n\t\tnormalStyle = normalState.style;\r\n\t\tdelete normalState.style;\r\n\r\n\t\t// Hover state\r\n\t\thoverState = merge(normalState, {\r\n\t\t\tstroke: '#68A',\r\n\t\t\tfill: {\r\n\t\t\t\tlinearGradient: verticalGradient,\r\n\t\t\t\tstops: [\r\n\t\t\t\t\t[0, '#FFF'],\r\n\t\t\t\t\t[1, '#ACF']\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}, hoverState);\r\n\t\thoverStyle = hoverState.style;\r\n\t\tdelete hoverState.style;\r\n\r\n\t\t// Pressed state\r\n\t\tpressedState = merge(normalState, {\r\n\t\t\tstroke: '#68A',\r\n\t\t\tfill: {\r\n\t\t\t\tlinearGradient: verticalGradient,\r\n\t\t\t\tstops: [\r\n\t\t\t\t\t[0, '#9BD'],\r\n\t\t\t\t\t[1, '#CDF']\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}, pressedState);\r\n\t\tpressedStyle = pressedState.style;\r\n\t\tdelete pressedState.style;\r\n\r\n\t\t// Disabled state\r\n\t\tdisabledState = merge(normalState, {\r\n\t\t\tstyle: {\r\n\t\t\t\tcolor: '#CCC'\r\n\t\t\t}\r\n\t\t}, disabledState);\r\n\t\tdisabledStyle = disabledState.style;\r\n\t\tdelete disabledState.style;\r\n\r\n\t\t// Add the events. IE9 and IE10 need mouseover and mouseout to funciton (#667).\r\n\t\taddEvent(label.element, isIE ? 'mouseover' : 'mouseenter', function () {\r\n\t\t\tif (curState !== 3) {\r\n\t\t\t\tlabel.attr(hoverState)\r\n\t\t\t\t\t.css(hoverStyle);\r\n\t\t\t}\r\n\t\t});\r\n\t\taddEvent(label.element, isIE ? 'mouseout' : 'mouseleave', function () {\r\n\t\t\tif (curState !== 3) {\r\n\t\t\t\tstateOptions = [normalState, hoverState, pressedState][curState];\r\n\t\t\t\tstateStyle = [normalStyle, hoverStyle, pressedStyle][curState];\r\n\t\t\t\tlabel.attr(stateOptions)\r\n\t\t\t\t\t.css(stateStyle);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlabel.setState = function (state) {\r\n\t\t\tlabel.state = curState = state;\r\n\t\t\tif (!state) {\r\n\t\t\t\tlabel.attr(normalState)\r\n\t\t\t\t\t.css(normalStyle);\r\n\t\t\t} else if (state === 2) {\r\n\t\t\t\tlabel.attr(pressedState)\r\n\t\t\t\t\t.css(pressedStyle);\r\n\t\t\t} else if (state === 3) {\r\n\t\t\t\tlabel.attr(disabledState)\r\n\t\t\t\t\t.css(disabledStyle);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn label\r\n\t\t\t.on('click', function () {\r\n\t\t\t\tif (curState !== 3) {\r\n\t\t\t\t\tcallback.call(label);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.attr(normalState)\r\n\t\t\t.css(extend({ cursor: 'default' }, normalStyle));\r\n\t},\r\n\r\n\t/**\r\n\t * Make a straight line crisper by not spilling out to neighbour pixels\r\n\t * @param {Array} points\r\n\t * @param {Number} width\r\n\t */\r\n\tcrispLine: function (points, width) {\r\n\t\t// points format: [M, 0, 0, L, 100, 0]\r\n\t\t// normalize to a crisp line\r\n\t\tif (points[1] === points[4]) {\r\n\t\t\t// Substract due to #1129. Now bottom and left axis gridlines behave the same.\r\n\t\t\tpoints[1] = points[4] = mathRound(points[1]) - (width % 2 / 2);\r\n\t\t}\r\n\t\tif (points[2] === points[5]) {\r\n\t\t\tpoints[2] = points[5] = mathRound(points[2]) + (width % 2 / 2);\r\n\t\t}\r\n\t\treturn points;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Draw a path\r\n\t * @param {Array} path An SVG path in array form\r\n\t */\r\n\tpath: function (path) {\r\n\t\tvar attr = {\r\n\t\t\tfill: NONE\r\n\t\t};\r\n\t\tif (isArray(path)) {\r\n\t\t\tattr.d = path;\r\n\t\t} else if (isObject(path)) { // attributes\r\n\t\t\textend(attr, path);\r\n\t\t}\r\n\t\treturn this.createElement('path').attr(attr);\r\n\t},\r\n\r\n\t/**\r\n\t * Draw and return an SVG circle\r\n\t * @param {Number} x The x position\r\n\t * @param {Number} y The y position\r\n\t * @param {Number} r The radius\r\n\t */\r\n\tcircle: function (x, y, r) {\r\n\t\tvar attr = isObject(x) ?\r\n\t\t\tx :\r\n\t\t\t{\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\tr: r\r\n\t\t\t},\r\n\t\t\twrapper = this.createElement('circle');\r\n\r\n\t\twrapper.xSetter = function (value) {\r\n\t\t\tthis.element.setAttribute('cx', value);\r\n\t\t};\r\n\t\twrapper.ySetter = function (value) {\r\n\t\t\tthis.element.setAttribute('cy', value);\r\n\t\t};\r\n\t\treturn wrapper.attr(attr);\r\n\t},\r\n\r\n\t/**\r\n\t * Draw and return an arc\r\n\t * @param {Number} x X position\r\n\t * @param {Number} y Y position\r\n\t * @param {Number} r Radius\r\n\t * @param {Number} innerR Inner radius like used in donut charts\r\n\t * @param {Number} start Starting angle\r\n\t * @param {Number} end Ending angle\r\n\t */\r\n\tarc: function (x, y, r, innerR, start, end) {\r\n\t\tvar arc;\r\n\r\n\t\tif (isObject(x)) {\r\n\t\t\ty = x.y;\r\n\t\t\tr = x.r;\r\n\t\t\tinnerR = x.innerR;\r\n\t\t\tstart = x.start;\r\n\t\t\tend = x.end;\r\n\t\t\tx = x.x;\r\n\t\t}\r\n\r\n\t\t// Arcs are defined as symbols for the ability to set\r\n\t\t// attributes in attr and animate\r\n\t\tarc = this.symbol('arc', x || 0, y || 0, r || 0, r || 0, {\r\n\t\t\tinnerR: innerR || 0,\r\n\t\t\tstart: start || 0,\r\n\t\t\tend: end || 0\r\n\t\t});\r\n\t\tarc.r = r; // #959\r\n\t\treturn arc;\r\n\t},\r\n\r\n\t/**\r\n\t * Draw and return a rectangle\r\n\t * @param {Number} x Left position\r\n\t * @param {Number} y Top position\r\n\t * @param {Number} width\r\n\t * @param {Number} height\r\n\t * @param {Number} r Border corner radius\r\n\t * @param {Number} strokeWidth A stroke width can be supplied to allow crisp drawing\r\n\t */\r\n\trect: function (x, y, width, height, r, strokeWidth) {\r\n\r\n\t\tr = isObject(x) ? x.r : r;\r\n\r\n\t\tvar wrapper = this.createElement('rect'),\r\n\t\t\tattribs = isObject(x) ? x : x === UNDEFINED ? {} : {\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\twidth: mathMax(width, 0),\r\n\t\t\t\theight: mathMax(height, 0)\r\n\t\t\t};\r\n\r\n\t\tif (strokeWidth !== UNDEFINED) {\r\n\t\t\tattribs.strokeWidth = strokeWidth;\r\n\t\t\tattribs = wrapper.crisp(attribs);\r\n\t\t}\r\n\r\n\t\tif (r) {\r\n\t\t\tattribs.r = r;\r\n\t\t}\r\n\r\n\t\twrapper.rSetter = function (value) {\r\n\t\t\tattr(this.element, {\r\n\t\t\t\trx: value,\r\n\t\t\t\try: value\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t\treturn wrapper.attr(attribs);\r\n\t},\r\n\r\n\t/**\r\n\t * Resize the box and re-align all aligned elements\r\n\t * @param {Object} width\r\n\t * @param {Object} height\r\n\t * @param {Boolean} animate\r\n\t *\r\n\t */\r\n\tsetSize: function (width, height, animate) {\r\n\t\tvar renderer = this,\r\n\t\t\talignedObjects = renderer.alignedObjects,\r\n\t\t\ti = alignedObjects.length;\r\n\r\n\t\trenderer.width = width;\r\n\t\trenderer.height = height;\r\n\r\n\t\trenderer.boxWrapper[pick(animate, true) ? 'animate' : 'attr']({\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t});\r\n\r\n\t\twhile (i--) {\r\n\t\t\talignedObjects[i].align();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Create a group\r\n\t * @param {String} name The group will be given a class name of 'highcharts-{name}'.\r\n\t *\t This can be used for styling and scripting.\r\n\t */\r\n\tg: function (name) {\r\n\t\tvar elem = this.createElement('g');\r\n\t\treturn defined(name) ? elem.attr({ 'class': PREFIX + name }) : elem;\r\n\t},\r\n\r\n\t/**\r\n\t * Display an image\r\n\t * @param {String} src\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} width\r\n\t * @param {Number} height\r\n\t */\r\n\timage: function (src, x, y, width, height) {\r\n\t\tvar attribs = {\r\n\t\t\t\tpreserveAspectRatio: NONE\r\n\t\t\t},\r\n\t\t\telemWrapper;\r\n\r\n\t\t// optional properties\r\n\t\tif (arguments.length > 1) {\r\n\t\t\textend(attribs, {\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\twidth: width,\r\n\t\t\t\theight: height\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\telemWrapper = this.createElement('image').attr(attribs);\r\n\r\n\t\t// set the href in the xlink namespace\r\n\t\tif (elemWrapper.element.setAttributeNS) {\r\n\t\t\telemWrapper.element.setAttributeNS('http://www.w3.org/1999/xlink',\r\n\t\t\t\t'href', src);\r\n\t\t} else {\r\n\t\t\t// could be exporting in IE\r\n\t\t\t// using href throws \"not supported\" in ie7 and under, requries regex shim to fix later\r\n\t\t\telemWrapper.element.setAttribute('hc-svg-href', src);\r\n\t\t}\r\n\t\treturn elemWrapper;\r\n\t},\r\n\r\n\t/**\r\n\t * Draw a symbol out of pre-defined shape paths from the namespace 'symbol' object.\r\n\t *\r\n\t * @param {Object} symbol\r\n\t * @param {Object} x\r\n\t * @param {Object} y\r\n\t * @param {Object} radius\r\n\t * @param {Object} options\r\n\t */\r\n\tsymbol: function (symbol, x, y, width, height, options) {\r\n\r\n\t\tvar obj,\r\n\r\n\t\t\t// get the symbol definition function\r\n\t\t\tsymbolFn = this.symbols[symbol],\r\n\r\n\t\t\t// check if there's a path defined for this symbol\r\n\t\t\tpath = symbolFn && symbolFn(\r\n\t\t\t\tmathRound(x),\r\n\t\t\t\tmathRound(y),\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\toptions\r\n\t\t\t),\r\n\r\n\t\t\timageElement,\r\n\t\t\timageRegex = /^url\\((.*?)\\)$/,\r\n\t\t\timageSrc,\r\n\t\t\timageSize,\r\n\t\t\tcenterImage;\r\n\r\n\t\tif (path) {\r\n\r\n\t\t\tobj = this.path(path);\r\n\t\t\t// expando properties for use in animate and attr\r\n\t\t\textend(obj, {\r\n\t\t\t\tsymbolName: symbol,\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\twidth: width,\r\n\t\t\t\theight: height\r\n\t\t\t});\r\n\t\t\tif (options) {\r\n\t\t\t\textend(obj, options);\r\n\t\t\t}\r\n\r\n\r\n\t\t// image symbols\r\n\t\t} else if (imageRegex.test(symbol)) {\r\n\r\n\t\t\t// On image load, set the size and position\r\n\t\t\tcenterImage = function (img, size) {\r\n\t\t\t\tif (img.element) { // it may be destroyed in the meantime (#1390)\r\n\t\t\t\t\timg.attr({\r\n\t\t\t\t\t\twidth: size[0],\r\n\t\t\t\t\t\theight: size[1]\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (!img.alignByTranslate) { // #185\r\n\t\t\t\t\t\timg.translate(\r\n\t\t\t\t\t\t\tmathRound((width - size[0]) / 2), // #1378\r\n\t\t\t\t\t\t\tmathRound((height - size[1]) / 2)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\timageSrc = symbol.match(imageRegex)[1];\r\n\t\t\timageSize = symbolSizes[imageSrc] || (options && options.width && options.height && [options.width, options.height]);\r\n\r\n\t\t\t// Ireate the image synchronously, add attribs async\r\n\t\t\tobj = this.image(imageSrc)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y\r\n\t\t\t\t});\r\n\t\t\tobj.isImg = true;\r\n\r\n\t\t\tif (imageSize) {\r\n\t\t\t\tcenterImage(obj, imageSize);\r\n\t\t\t} else {\r\n\t\t\t\t// Initialize image to be 0 size so export will still function if there's no cached sizes.\r\n\t\t\t\tobj.attr({ width: 0, height: 0 });\r\n\r\n\t\t\t\t// Create a dummy JavaScript image to get the width and height. Due to a bug in IE < 8,\r\n\t\t\t\t// the created element must be assigned to a variable in order to load (#292).\r\n\t\t\t\timageElement = createElement('img', {\r\n\t\t\t\t\tonload: function () {\r\n\t\t\t\t\t\tcenterImage(obj, symbolSizes[imageSrc] = [this.width, this.height]);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsrc: imageSrc\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\t},\r\n\r\n\t/**\r\n\t * An extendable collection of functions for defining symbol paths.\r\n\t */\r\n\tsymbols: {\r\n\t\t'circle': function (x, y, w, h) {\r\n\t\t\tvar cpw = 0.166 * w;\r\n\t\t\treturn [\r\n\t\t\t\tM, x + w / 2, y,\r\n\t\t\t\t'C', x + w + cpw, y, x + w + cpw, y + h, x + w / 2, y + h,\r\n\t\t\t\t'C', x - cpw, y + h, x - cpw, y, x + w / 2, y,\r\n\t\t\t\t'Z'\r\n\t\t\t];\r\n\t\t},\r\n\r\n\t\t'square': function (x, y, w, h) {\r\n\t\t\treturn [\r\n\t\t\t\tM, x, y,\r\n\t\t\t\tL, x + w, y,\r\n\t\t\t\tx + w, y + h,\r\n\t\t\t\tx, y + h,\r\n\t\t\t\t'Z'\r\n\t\t\t];\r\n\t\t},\r\n\r\n\t\t'triangle': function (x, y, w, h) {\r\n\t\t\treturn [\r\n\t\t\t\tM, x + w / 2, y,\r\n\t\t\t\tL, x + w, y + h,\r\n\t\t\t\tx, y + h,\r\n\t\t\t\t'Z'\r\n\t\t\t];\r\n\t\t},\r\n\r\n\t\t'triangle-down': function (x, y, w, h) {\r\n\t\t\treturn [\r\n\t\t\t\tM, x, y,\r\n\t\t\t\tL, x + w, y,\r\n\t\t\t\tx + w / 2, y + h,\r\n\t\t\t\t'Z'\r\n\t\t\t];\r\n\t\t},\r\n\t\t'diamond': function (x, y, w, h) {\r\n\t\t\treturn [\r\n\t\t\t\tM, x + w / 2, y,\r\n\t\t\t\tL, x + w, y + h / 2,\r\n\t\t\t\tx + w / 2, y + h,\r\n\t\t\t\tx, y + h / 2,\r\n\t\t\t\t'Z'\r\n\t\t\t];\r\n\t\t},\r\n\t\t'arc': function (x, y, w, h, options) {\r\n\t\t\tvar start = options.start,\r\n\t\t\t\tradius = options.r || w || h,\r\n\t\t\t\tend = options.end - 0.001, // to prevent cos and sin of start and end from becoming equal on 360 arcs (related: #1561)\r\n\t\t\t\tinnerRadius = options.innerR,\r\n\t\t\t\topen = options.open,\r\n\t\t\t\tcosStart = mathCos(start),\r\n\t\t\t\tsinStart = mathSin(start),\r\n\t\t\t\tcosEnd = mathCos(end),\r\n\t\t\t\tsinEnd = mathSin(end),\r\n\t\t\t\tlongArc = options.end - start < mathPI ? 0 : 1;\r\n\r\n\t\t\treturn [\r\n\t\t\t\tM,\r\n\t\t\t\tx + radius * cosStart,\r\n\t\t\t\ty + radius * sinStart,\r\n\t\t\t\t'A', // arcTo\r\n\t\t\t\tradius, // x radius\r\n\t\t\t\tradius, // y radius\r\n\t\t\t\t0, // slanting\r\n\t\t\t\tlongArc, // long or short arc\r\n\t\t\t\t1, // clockwise\r\n\t\t\t\tx + radius * cosEnd,\r\n\t\t\t\ty + radius * sinEnd,\r\n\t\t\t\topen ? M : L,\r\n\t\t\t\tx + innerRadius * cosEnd,\r\n\t\t\t\ty + innerRadius * sinEnd,\r\n\t\t\t\t'A', // arcTo\r\n\t\t\t\tinnerRadius, // x radius\r\n\t\t\t\tinnerRadius, // y radius\r\n\t\t\t\t0, // slanting\r\n\t\t\t\tlongArc, // long or short arc\r\n\t\t\t\t0, // clockwise\r\n\t\t\t\tx + innerRadius * cosStart,\r\n\t\t\t\ty + innerRadius * sinStart,\r\n\r\n\t\t\t\topen ? '' : 'Z' // close\r\n\t\t\t];\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Callout shape used for default tooltips, also used for rounded rectangles in VML\r\n\t\t */\r\n\t\tcallout: function (x, y, w, h, options) {\r\n\t\t\tvar arrowLength = 6,\r\n\t\t\t\thalfDistance = 6,\r\n\t\t\t\tr = mathMin((options && options.r) || 0, w, h),\r\n\t\t\t\tsafeDistance = r + halfDistance,\r\n\t\t\t\tanchorX = options && options.anchorX,\r\n\t\t\t\tanchorY = options && options.anchorY,\r\n\t\t\t\tpath,\r\n\t\t\t\tnormalizer = mathRound(options.strokeWidth || 0) % 2 / 2; // mathRound because strokeWidth can sometimes have roundoff errors;\r\n\r\n\t\t\tx += normalizer;\r\n\t\t\ty += normalizer;\r\n\t\t\tpath = [\r\n\t\t\t\t'M', x + r, y, \r\n\t\t\t\t'L', x + w - r, y, // top side\r\n\t\t\t\t'C', x + w, y, x + w, y, x + w, y + r, // top-right corner\r\n\t\t\t\t'L', x + w, y + h - r, // right side\r\n\t\t\t\t'C', x + w, y + h, x + w, y + h, x + w - r, y + h, // bottom-right corner\r\n\t\t\t\t'L', x + r, y + h, // bottom side\r\n\t\t\t\t'C', x, y + h, x, y + h, x, y + h - r, // bottom-left corner\r\n\t\t\t\t'L', x, y + r, // left side\r\n\t\t\t\t'C', x, y, x, y, x + r, y // top-right corner\r\n\t\t\t];\r\n\t\t\t\r\n\t\t\tif (anchorX && anchorX > w && anchorY > y + safeDistance && anchorY < y + h - safeDistance) { // replace right side\r\n\t\t\t\tpath.splice(13, 3,\r\n\t\t\t\t\t'L', x + w, anchorY - halfDistance, \r\n\t\t\t\t\tx + w + arrowLength, anchorY,\r\n\t\t\t\t\tx + w, anchorY + halfDistance,\r\n\t\t\t\t\tx + w, y + h - r\r\n\t\t\t\t);\r\n\t\t\t} else if (anchorX && anchorX < 0 && anchorY > y + safeDistance && anchorY < y + h - safeDistance) { // replace left side\r\n\t\t\t\tpath.splice(33, 3, \r\n\t\t\t\t\t'L', x, anchorY + halfDistance, \r\n\t\t\t\t\tx - arrowLength, anchorY,\r\n\t\t\t\t\tx, anchorY - halfDistance,\r\n\t\t\t\t\tx, y + r\r\n\t\t\t\t);\r\n\t\t\t} else if (anchorY && anchorY > h && anchorX > x + safeDistance && anchorX < x + w - safeDistance) { // replace bottom\r\n\t\t\t\tpath.splice(23, 3,\r\n\t\t\t\t\t'L', anchorX + halfDistance, y + h,\r\n\t\t\t\t\tanchorX, y + h + arrowLength,\r\n\t\t\t\t\tanchorX - halfDistance, y + h,\r\n\t\t\t\t\tx + r, y + h\r\n\t\t\t\t);\r\n\t\t\t} else if (anchorY && anchorY < 0 && anchorX > x + safeDistance && anchorX < x + w - safeDistance) { // replace top\r\n\t\t\t\tpath.splice(3, 3,\r\n\t\t\t\t\t'L', anchorX - halfDistance, y,\r\n\t\t\t\t\tanchorX, y - arrowLength,\r\n\t\t\t\t\tanchorX + halfDistance, y,\r\n\t\t\t\t\tw - r, y\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn path;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Define a clipping rectangle\r\n\t * @param {String} id\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} width\r\n\t * @param {Number} height\r\n\t */\r\n\tclipRect: function (x, y, width, height) {\r\n\t\tvar wrapper,\r\n\t\t\tid = PREFIX + idCounter++,\r\n\r\n\t\t\tclipPath = this.createElement('clipPath').attr({\r\n\t\t\t\tid: id\r\n\t\t\t}).add(this.defs);\r\n\r\n\t\twrapper = this.rect(x, y, width, height, 0).add(clipPath);\r\n\t\twrapper.id = id;\r\n\t\twrapper.clipPath = clipPath;\r\n\t\twrapper.count = 0;\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\r\n\r\n\t\r\n\r\n\r\n\t/**\r\n\t * Add text to the SVG object\r\n\t * @param {String} str\r\n\t * @param {Number} x Left position\r\n\t * @param {Number} y Top position\r\n\t * @param {Boolean} useHTML Use HTML to render the text\r\n\t */\r\n\ttext: function (str, x, y, useHTML) {\r\n\r\n\t\t// declare variables\r\n\t\tvar renderer = this,\r\n\t\t\tfakeSVG = useCanVG || (!hasSVG && renderer.forExport),\r\n\t\t\twrapper,\r\n\t\t\tattr = {};\r\n\r\n\t\tif (useHTML && !renderer.forExport) {\r\n\t\t\treturn renderer.html(str, x, y);\r\n\t\t}\r\n\r\n\t\tattr.x = Math.round(x || 0); // X is always needed for line-wrap logic\r\n\t\tif (y) {\r\n\t\t\tattr.y = Math.round(y);\r\n\t\t}\r\n\t\tif (str || str === 0) {\r\n\t\t\tattr.text = str;\r\n\t\t}\r\n\r\n\t\twrapper = renderer.createElement('text')\r\n\t\t\t.attr(attr);\r\n\r\n\t\t// Prevent wrapping from creating false offsetWidths in export in legacy IE (#1079, #1063)\r\n\t\tif (fakeSVG) {\r\n\t\t\twrapper.css({\r\n\t\t\t\tposition: ABSOLUTE\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (!useHTML) {\r\n\t\t\twrapper.xSetter = function (value, key, element) {\r\n\t\t\t\tvar tspans = element.getElementsByTagName('tspan'),\r\n\t\t\t\t\ttspan,\r\n\t\t\t\t\tparentVal = element.getAttribute(key),\r\n\t\t\t\t\ti;\r\n\t\t\t\tfor (i = 0; i < tspans.length; i++) {\r\n\t\t\t\t\ttspan = tspans[i];\r\n\t\t\t\t\t// If the x values are equal, the tspan represents a linebreak\r\n\t\t\t\t\tif (tspan.getAttribute(key) === parentVal) {\r\n\t\t\t\t\t\ttspan.setAttribute(key, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telement.setAttribute(key, value);\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\treturn wrapper;\r\n\t},\r\n\r\n\t/**\r\n\t * Utility to return the baseline offset and total line height from the font size\r\n\t */\r\n\tfontMetrics: function (fontSize, elem) {\r\n\t\tfontSize = fontSize || this.style.fontSize;\r\n\t\tif (elem && win.getComputedStyle) {\r\n\t\t\telem = elem.element || elem; // SVGElement\r\n\t\t\tfontSize = win.getComputedStyle(elem, \"\").fontSize;\r\n\t\t}\r\n\t\tfontSize = /px/.test(fontSize) ? pInt(fontSize) : /em/.test(fontSize) ? parseFloat(fontSize) * 12 : 12;\r\n\r\n\t\t// Empirical values found by comparing font size and bounding box height.\r\n\t\t// Applies to the default font family. http://jsfiddle.net/highcharts/7xvn7/\r\n\t\tvar lineHeight = fontSize < 24 ? fontSize + 3 : mathRound(fontSize * 1.2),\r\n\t\t\tbaseline = mathRound(lineHeight * 0.8);\r\n\r\n\t\treturn {\r\n\t\t\th: lineHeight,\r\n\t\t\tb: baseline,\r\n\t\t\tf: fontSize\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Correct X and Y positioning of a label for rotation (#1764)\r\n\t */\r\n\trotCorr: function (baseline, rotation, alterY) {\r\n\t\tvar y = baseline;\r\n\t\tif (rotation && alterY) {\r\n\t\t\ty = mathMax(y * mathCos(rotation * deg2rad), 4);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tx: (-baseline / 3) * mathSin(rotation * deg2rad),\r\n\t\t\ty: y\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Add a label, a text item that can hold a colored or gradient background\r\n\t * as well as a border and shadow.\r\n\t * @param {string} str\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {String} shape\r\n\t * @param {Number} anchorX In case the shape has a pointer, like a flag, this is the\r\n\t *\tcoordinates it should be pinned to\r\n\t * @param {Number} anchorY\r\n\t * @param {Boolean} baseline Whether to position the label relative to the text baseline,\r\n\t *\tlike renderer.text, or to the upper border of the rectangle.\r\n\t * @param {String} className Class name for the group\r\n\t */\r\n\tlabel: function (str, x, y, shape, anchorX, anchorY, useHTML, baseline, className) {\r\n\r\n\t\tvar renderer = this,\r\n\t\t\twrapper = renderer.g(className),\r\n\t\t\ttext = renderer.text('', 0, 0, useHTML)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tzIndex: 1\r\n\t\t\t\t}),\r\n\t\t\t\t//.add(wrapper),\r\n\t\t\tbox,\r\n\t\t\tbBox,\r\n\t\t\talignFactor = 0,\r\n\t\t\tpadding = 3,\r\n\t\t\tpaddingLeft = 0,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\twrapperX,\r\n\t\t\twrapperY,\r\n\t\t\tcrispAdjust = 0,\r\n\t\t\tdeferredAttr = {},\r\n\t\t\tbaselineOffset,\r\n\t\t\tneedsBox;\r\n\r\n\t\t/**\r\n\t\t * This function runs after the label is added to the DOM (when the bounding box is\r\n\t\t * available), and after the text of the label is updated to detect the new bounding\r\n\t\t * box and reflect it in the border box.\r\n\t\t */\r\n\t\tfunction updateBoxSize() {\r\n\t\t\tvar boxX,\r\n\t\t\t\tboxY,\r\n\t\t\t\tstyle = text.element.style;\r\n\r\n\t\t\tbBox = (width === undefined || height === undefined || wrapper.styles.textAlign) && defined(text.textStr) && \r\n\t\t\t\ttext.getBBox(); //#3295 && 3514 box failure when string equals 0\r\n\t\t\twrapper.width = (width || bBox.width || 0) + 2 * padding + paddingLeft;\r\n\t\t\twrapper.height = (height || bBox.height || 0) + 2 * padding;\r\n\r\n\t\t\t// update the label-scoped y offset\r\n\t\t\tbaselineOffset = padding + renderer.fontMetrics(style && style.fontSize, text).b;\r\n\r\n\t\t\t\r\n\t\t\tif (needsBox) {\r\n\r\n\t\t\t\t// create the border box if it is not already present\r\n\t\t\t\tif (!box) {\r\n\t\t\t\t\tboxX = mathRound(-alignFactor * padding);\r\n\t\t\t\t\tboxY = baseline ? -baselineOffset : 0;\r\n\r\n\t\t\t\t\twrapper.box = box = shape ?\r\n\t\t\t\t\t\trenderer.symbol(shape, boxX, boxY, wrapper.width, wrapper.height, deferredAttr) :\r\n\t\t\t\t\t\trenderer.rect(boxX, boxY, wrapper.width, wrapper.height, 0, deferredAttr[STROKE_WIDTH]);\r\n\t\t\t\t\tbox.attr('fill', NONE).add(wrapper);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// apply the box attributes\r\n\t\t\t\tif (!box.isImg) { // #1630\r\n\t\t\t\t\tbox.attr(extend({\r\n\t\t\t\t\t\twidth: mathRound(wrapper.width),\r\n\t\t\t\t\t\theight: mathRound(wrapper.height)\r\n\t\t\t\t\t}, deferredAttr));\r\n\t\t\t\t}\r\n\t\t\t\tdeferredAttr = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * This function runs after setting text or padding, but only if padding is changed\r\n\t\t */\r\n\t\tfunction updateTextPadding() {\r\n\t\t\tvar styles = wrapper.styles,\r\n\t\t\t\ttextAlign = styles && styles.textAlign,\r\n\t\t\t\tx = paddingLeft + padding * (1 - alignFactor),\r\n\t\t\t\ty;\r\n\r\n\t\t\t// determin y based on the baseline\r\n\t\t\ty = baseline ? 0 : baselineOffset;\r\n\r\n\t\t\t// compensate for alignment\r\n\t\t\tif (defined(width) && bBox && (textAlign === 'center' || textAlign === 'right')) {\r\n\t\t\t\tx += { center: 0.5, right: 1 }[textAlign] * (width - bBox.width);\r\n\t\t\t}\r\n\r\n\t\t\t// update if anything changed\r\n\t\t\tif (x !== text.x || y !== text.y) {\r\n\t\t\t\ttext.attr('x', x);\r\n\t\t\t\tif (y !== UNDEFINED) {\r\n\t\t\t\t\ttext.attr('y', y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// record current values\r\n\t\t\ttext.x = x;\r\n\t\t\ttext.y = y;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Set a box attribute, or defer it if the box is not yet created\r\n\t\t * @param {Object} key\r\n\t\t * @param {Object} value\r\n\t\t */\r\n\t\tfunction boxAttr(key, value) {\r\n\t\t\tif (box) {\r\n\t\t\t\tbox.attr(key, value);\r\n\t\t\t} else {\r\n\t\t\t\tdeferredAttr[key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * After the text element is added, get the desired size of the border box\r\n\t\t * and add it before the text in the DOM.\r\n\t\t */\r\n\t\twrapper.onAdd = function () {\r\n\t\t\ttext.add(wrapper);\r\n\t\t\twrapper.attr({\r\n\t\t\t\ttext: (str || str === 0) ? str : '', // alignment is available now // #3295: 0 not rendered if given as a value\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y\r\n\t\t\t});\r\n\r\n\t\t\tif (box && defined(anchorX)) {\r\n\t\t\t\twrapper.attr({\r\n\t\t\t\t\tanchorX: anchorX,\r\n\t\t\t\t\tanchorY: anchorY\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/*\r\n\t\t * Add specific attribute setters.\r\n\t\t */\r\n\r\n\t\t// only change local variables\r\n\t\twrapper.widthSetter = function (value) {\r\n\t\t\twidth = value;\r\n\t\t};\r\n\t\twrapper.heightSetter = function (value) {\r\n\t\t\theight = value;\r\n\t\t};\r\n\t\twrapper.paddingSetter =  function (value) {\r\n\t\t\tif (defined(value) && value !== padding) {\r\n\t\t\t\tpadding = wrapper.padding = value;\r\n\t\t\t\tupdateTextPadding();\r\n\t\t\t}\r\n\t\t};\r\n\t\twrapper.paddingLeftSetter =  function (value) {\r\n\t\t\tif (defined(value) && value !== paddingLeft) {\r\n\t\t\t\tpaddingLeft = value;\r\n\t\t\t\tupdateTextPadding();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t// change local variable and prevent setting attribute on the group\r\n\t\twrapper.alignSetter = function (value) {\r\n\t\t\talignFactor = { left: 0, center: 0.5, right: 1 }[value];\r\n\t\t};\r\n\r\n\t\t// apply these to the box and the text alike\r\n\t\twrapper.textSetter = function (value) {\r\n\t\t\tif (value !== UNDEFINED) {\r\n\t\t\t\ttext.textSetter(value);\r\n\t\t\t}\r\n\t\t\tupdateBoxSize();\r\n\t\t\tupdateTextPadding();\r\n\t\t};\r\n\r\n\t\t// apply these to the box but not to the text\r\n\t\twrapper['stroke-widthSetter'] = function (value, key) {\r\n\t\t\tif (value) {\r\n\t\t\t\tneedsBox = true;\r\n\t\t\t}\r\n\t\t\tcrispAdjust = value % 2 / 2;\r\n\t\t\tboxAttr(key, value);\r\n\t\t};\r\n\t\twrapper.strokeSetter = wrapper.fillSetter = wrapper.rSetter = function (value, key) {\r\n\t\t\tif (key === 'fill' && value) {\r\n\t\t\t\tneedsBox = true;\r\n\t\t\t}\r\n\t\t\tboxAttr(key, value);\r\n\t\t};\r\n\t\twrapper.anchorXSetter = function (value, key) {\r\n\t\t\tanchorX = value;\r\n\t\t\tboxAttr(key, value + crispAdjust - wrapperX);\r\n\t\t};\r\n\t\twrapper.anchorYSetter = function (value, key) {\r\n\t\t\tanchorY = value;\r\n\t\t\tboxAttr(key, value - wrapperY);\r\n\t\t};\r\n\r\n\t\t// rename attributes\r\n\t\twrapper.xSetter = function (value) {\r\n\t\t\twrapper.x = value; // for animation getter\r\n\t\t\tif (alignFactor) {\r\n\t\t\t\tvalue -= alignFactor * ((width || bBox.width) + padding);\r\n\t\t\t}\r\n\t\t\twrapperX = mathRound(value);\r\n\t\t\twrapper.attr('translateX', wrapperX);\r\n\t\t};\r\n\t\twrapper.ySetter = function (value) {\r\n\t\t\twrapperY = wrapper.y = mathRound(value);\r\n\t\t\twrapper.attr('translateY', wrapperY);\r\n\t\t};\r\n\r\n\t\t// Redirect certain methods to either the box or the text\r\n\t\tvar baseCss = wrapper.css;\r\n\t\treturn extend(wrapper, {\r\n\t\t\t/**\r\n\t\t\t * Pick up some properties and apply them to the text instead of the wrapper\r\n\t\t\t */\r\n\t\t\tcss: function (styles) {\r\n\t\t\t\tif (styles) {\r\n\t\t\t\t\tvar textStyles = {};\r\n\t\t\t\t\tstyles = merge(styles); // create a copy to avoid altering the original object (#537)\r\n\t\t\t\t\teach(wrapper.textProps, function (prop) {\r\n\t\t\t\t\t\tif (styles[prop] !== UNDEFINED) {\r\n\t\t\t\t\t\t\ttextStyles[prop] = styles[prop];\r\n\t\t\t\t\t\t\tdelete styles[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttext.css(textStyles);\r\n\t\t\t\t}\r\n\t\t\t\treturn baseCss.call(wrapper, styles);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * Return the bounding box of the box, not the group\r\n\t\t\t */\r\n\t\t\tgetBBox: function () {\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: bBox.width + 2 * padding,\r\n\t\t\t\t\theight: bBox.height + 2 * padding,\r\n\t\t\t\t\tx: bBox.x - padding,\r\n\t\t\t\t\ty: bBox.y - padding\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * Apply the shadow to the box\r\n\t\t\t */\r\n\t\t\tshadow: function (b) {\r\n\t\t\t\tif (box) {\r\n\t\t\t\t\tbox.shadow(b);\r\n\t\t\t\t}\r\n\t\t\t\treturn wrapper;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * Destroy and release memory.\r\n\t\t\t */\r\n\t\t\tdestroy: function () {\r\n\r\n\t\t\t\t// Added by button implementation\r\n\t\t\t\tremoveEvent(wrapper.element, 'mouseenter');\r\n\t\t\t\tremoveEvent(wrapper.element, 'mouseleave');\r\n\r\n\t\t\t\tif (text) {\r\n\t\t\t\t\ttext = text.destroy();\r\n\t\t\t\t}\r\n\t\t\t\tif (box) {\r\n\t\t\t\t\tbox = box.destroy();\r\n\t\t\t\t}\r\n\t\t\t\t// Call base implementation to destroy the rest\r\n\t\t\t\tSVGElement.prototype.destroy.call(wrapper);\r\n\r\n\t\t\t\t// Release local pointers (#1298)\r\n\t\t\t\twrapper = renderer = updateBoxSize = updateTextPadding = boxAttr = null;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}; // end SVGRenderer\r\n\r\n\r\n// general renderer\r\nRenderer = SVGRenderer;\r\n// extend SvgElement for useHTML option\r\nextend(SVGElement.prototype, {\r\n\t/**\r\n\t * Apply CSS to HTML elements. This is used in text within SVG rendering and\r\n\t * by the VML renderer\r\n\t */\r\n\thtmlCss: function (styles) {\r\n\t\tvar wrapper = this,\r\n\t\t\telement = wrapper.element,\r\n\t\t\ttextWidth = styles && element.tagName === 'SPAN' && styles.width;\r\n\r\n\t\tif (textWidth) {\r\n\t\t\tdelete styles.width;\r\n\t\t\twrapper.textWidth = textWidth;\r\n\t\t\twrapper.updateTransform();\r\n\t\t}\r\n\t\tif (styles && styles.textOverflow === 'ellipsis') {\r\n\t\t\tstyles.whiteSpace = 'nowrap';\r\n\t\t\tstyles.overflow = 'hidden';\r\n\t\t}\r\n\t\twrapper.styles = extend(wrapper.styles, styles);\r\n\t\tcss(wrapper.element, styles);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\r\n\t/**\r\n\t * VML and useHTML method for calculating the bounding box based on offsets\r\n\t * @param {Boolean} refresh Whether to force a fresh value from the DOM or to\r\n\t * use the cached value\r\n\t *\r\n\t * @return {Object} A hash containing values for x, y, width and height\r\n\t */\r\n\r\n\thtmlGetBBox: function () {\r\n\t\tvar wrapper = this,\r\n\t\t\telement = wrapper.element;\r\n\r\n\t\t// faking getBBox in exported SVG in legacy IE\r\n\t\t// faking getBBox in exported SVG in legacy IE (is this a duplicate of the fix for #1079?)\r\n\t\tif (element.nodeName === 'text') {\r\n\t\t\telement.style.position = ABSOLUTE;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: element.offsetLeft,\r\n\t\t\ty: element.offsetTop,\r\n\t\t\twidth: element.offsetWidth,\r\n\t\t\theight: element.offsetHeight\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * VML override private method to update elements based on internal\r\n\t * properties based on SVG transform\r\n\t */\r\n\thtmlUpdateTransform: function () {\r\n\t\t// aligning non added elements is expensive\r\n\t\tif (!this.added) {\r\n\t\t\tthis.alignOnAdd = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar wrapper = this,\r\n\t\t\trenderer = wrapper.renderer,\r\n\t\t\telem = wrapper.element,\r\n\t\t\ttranslateX = wrapper.translateX || 0,\r\n\t\t\ttranslateY = wrapper.translateY || 0,\r\n\t\t\tx = wrapper.x || 0,\r\n\t\t\ty = wrapper.y || 0,\r\n\t\t\talign = wrapper.textAlign || 'left',\r\n\t\t\talignCorrection = { left: 0, center: 0.5, right: 1 }[align],\r\n\t\t\tshadows = wrapper.shadows,\r\n\t\t\tstyles = wrapper.styles;\r\n\r\n\t\t// apply translate\r\n\t\tcss(elem, {\r\n\t\t\tmarginLeft: translateX,\r\n\t\t\tmarginTop: translateY\r\n\t\t});\r\n\t\tif (shadows) { // used in labels/tooltip\r\n\t\t\teach(shadows, function (shadow) {\r\n\t\t\t\tcss(shadow, {\r\n\t\t\t\t\tmarginLeft: translateX + 1,\r\n\t\t\t\t\tmarginTop: translateY + 1\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// apply inversion\r\n\t\tif (wrapper.inverted) { // wrapper is a group\r\n\t\t\teach(elem.childNodes, function (child) {\r\n\t\t\t\trenderer.invertChild(child, elem);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (elem.tagName === 'SPAN') {\r\n\r\n\t\t\tvar width,\r\n\t\t\t\trotation = wrapper.rotation,\r\n\t\t\t\tbaseline,\r\n\t\t\t\ttextWidth = pInt(wrapper.textWidth),\r\n\t\t\t\tcurrentTextTransform = [rotation, align, elem.innerHTML, wrapper.textWidth].join(',');\r\n\r\n\t\t\tif (currentTextTransform !== wrapper.cTT) { // do the calculations and DOM access only if properties changed\r\n\r\n\r\n\t\t\t\tbaseline = renderer.fontMetrics(elem.style.fontSize).b;\r\n\r\n\t\t\t\t// Renderer specific handling of span rotation\r\n\t\t\t\tif (defined(rotation)) {\r\n\t\t\t\t\twrapper.setSpanRotation(rotation, alignCorrection, baseline);\r\n\t\t\t\t}\r\n\r\n\t\t\t\twidth = pick(wrapper.elemWidth, elem.offsetWidth);\r\n\r\n\t\t\t\t// Update textWidth\r\n\t\t\t\tif (width > textWidth && /[ \\-]/.test(elem.textContent || elem.innerText)) { // #983, #1254\r\n\t\t\t\t\tcss(elem, {\r\n\t\t\t\t\t\twidth: textWidth + PX,\r\n\t\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\t\twhiteSpace: (styles && styles.whiteSpace) || 'normal' // #3331\r\n\t\t\t\t\t});\r\n\t\t\t\t\twidth = textWidth;\r\n\t\t\t\t}\r\n\r\n\t\t\t\twrapper.getSpanCorrection(width, baseline, alignCorrection, rotation, align);\r\n\t\t\t}\r\n\r\n\t\t\t// apply position with correction\r\n\t\t\tcss(elem, {\r\n\t\t\t\tleft: (x + (wrapper.xCorr || 0)) + PX,\r\n\t\t\t\ttop: (y + (wrapper.yCorr || 0)) + PX\r\n\t\t\t});\r\n\r\n\t\t\t// force reflow in webkit to apply the left and top on useHTML element (#1249)\r\n\t\t\tif (isWebKit) {\r\n\t\t\t\tbaseline = elem.offsetHeight; // assigned to baseline for JSLint purpose\r\n\t\t\t}\r\n\r\n\t\t\t// record current text transform\r\n\t\t\twrapper.cTT = currentTextTransform;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set the rotation of an individual HTML span\r\n\t */\r\n\tsetSpanRotation: function (rotation, alignCorrection, baseline) {\r\n\t\tvar rotationStyle = {},\r\n\t\t\tcssTransformKey = isIE ? '-ms-transform' : isWebKit ? '-webkit-transform' : isFirefox ? 'MozTransform' : isOpera ? '-o-transform' : '';\r\n\r\n\t\trotationStyle[cssTransformKey] = rotationStyle.transform = 'rotate(' + rotation + 'deg)';\r\n\t\trotationStyle[cssTransformKey + (isFirefox ? 'Origin' : '-origin')] = rotationStyle.transformOrigin = (alignCorrection * 100) + '% ' + baseline + 'px';\r\n\t\tcss(this.element, rotationStyle);\r\n\t},\r\n\r\n\t/**\r\n\t * Get the correction in X and Y positioning as the element is rotated.\r\n\t */\r\n\tgetSpanCorrection: function (width, baseline, alignCorrection) {\r\n\t\tthis.xCorr = -width * alignCorrection;\r\n\t\tthis.yCorr = -baseline;\r\n\t}\r\n});\r\n\r\n// Extend SvgRenderer for useHTML option.\r\nextend(SVGRenderer.prototype, {\r\n\t/**\r\n\t * Create HTML text node. This is used by the VML renderer as well as the SVG\r\n\t * renderer through the useHTML option.\r\n\t *\r\n\t * @param {String} str\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t */\r\n\thtml: function (str, x, y) {\r\n\t\tvar wrapper = this.createElement('span'),\r\n\t\t\telement = wrapper.element,\r\n\t\t\trenderer = wrapper.renderer;\r\n\r\n\t\t// Text setter\r\n\t\twrapper.textSetter = function (value) {\r\n\t\t\tif (value !== element.innerHTML) {\r\n\t\t\t\tdelete this.bBox;\r\n\t\t\t}\r\n\t\t\telement.innerHTML = this.textStr = value;\r\n\t\t};\r\n\r\n\t\t// Various setters which rely on update transform\r\n\t\twrapper.xSetter = wrapper.ySetter = wrapper.alignSetter = wrapper.rotationSetter = function (value, key) {\r\n\t\t\tif (key === 'align') {\r\n\t\t\t\tkey = 'textAlign'; // Do not overwrite the SVGElement.align method. Same as VML.\r\n\t\t\t}\r\n\t\t\twrapper[key] = value;\r\n\t\t\twrapper.htmlUpdateTransform();\r\n\t\t};\r\n\r\n\t\t// Set the default attributes\r\n\t\twrapper.attr({\r\n\t\t\t\ttext: str,\r\n\t\t\t\tx: mathRound(x),\r\n\t\t\t\ty: mathRound(y)\r\n\t\t\t})\r\n\t\t\t.css({\r\n\t\t\t\tposition: ABSOLUTE,\r\n\t\t\t\tfontFamily: this.style.fontFamily,\r\n\t\t\t\tfontSize: this.style.fontSize\r\n\t\t\t});\r\n\r\n\t\t// Keep the whiteSpace style outside the wrapper.styles collection\r\n\t\telement.style.whiteSpace = 'nowrap';\r\n\r\n\t\t// Use the HTML specific .css method\r\n\t\twrapper.css = wrapper.htmlCss;\r\n\r\n\t\t// This is specific for HTML within SVG\r\n\t\tif (renderer.isSVG) {\r\n\t\t\twrapper.add = function (svgGroupWrapper) {\r\n\r\n\t\t\t\tvar htmlGroup,\r\n\t\t\t\t\tcontainer = renderer.box.parentNode,\r\n\t\t\t\t\tparentGroup,\r\n\t\t\t\t\tparents = [];\r\n\r\n\t\t\t\tthis.parentGroup = svgGroupWrapper;\r\n\r\n\t\t\t\t// Create a mock group to hold the HTML elements\r\n\t\t\t\tif (svgGroupWrapper) {\r\n\t\t\t\t\thtmlGroup = svgGroupWrapper.div;\r\n\t\t\t\t\tif (!htmlGroup) {\r\n\r\n\t\t\t\t\t\t// Read the parent chain into an array and read from top down\r\n\t\t\t\t\t\tparentGroup = svgGroupWrapper;\r\n\t\t\t\t\t\twhile (parentGroup) {\r\n\r\n\t\t\t\t\t\t\tparents.push(parentGroup);\r\n\r\n\t\t\t\t\t\t\t// Move up to the next parent group\r\n\t\t\t\t\t\t\tparentGroup = parentGroup.parentGroup;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Ensure dynamically updating position when any parent is translated\r\n\t\t\t\t\t\teach(parents.reverse(), function (parentGroup) {\r\n\t\t\t\t\t\t\tvar htmlGroupStyle;\r\n\r\n\t\t\t\t\t\t\t// Create a HTML div and append it to the parent div to emulate\r\n\t\t\t\t\t\t\t// the SVG group structure\r\n\t\t\t\t\t\t\thtmlGroup = parentGroup.div = parentGroup.div || createElement(DIV, {\r\n\t\t\t\t\t\t\t\tclassName: attr(parentGroup.element, 'class')\r\n\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\tposition: ABSOLUTE,\r\n\t\t\t\t\t\t\t\tleft: (parentGroup.translateX || 0) + PX,\r\n\t\t\t\t\t\t\t\ttop: (parentGroup.translateY || 0) + PX\r\n\t\t\t\t\t\t\t}, htmlGroup || container); // the top group is appended to container\r\n\r\n\t\t\t\t\t\t\t// Shortcut\r\n\t\t\t\t\t\t\thtmlGroupStyle = htmlGroup.style;\r\n\r\n\t\t\t\t\t\t\t// Set listeners to update the HTML div's position whenever the SVG group\r\n\t\t\t\t\t\t\t// position is changed\r\n\t\t\t\t\t\t\textend(parentGroup, {\r\n\t\t\t\t\t\t\t\ttranslateXSetter: function (value, key) {\r\n\t\t\t\t\t\t\t\t\thtmlGroupStyle.left = value + PX;\r\n\t\t\t\t\t\t\t\t\tparentGroup[key] = value;\r\n\t\t\t\t\t\t\t\t\tparentGroup.doTransform = true;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttranslateYSetter: function (value, key) {\r\n\t\t\t\t\t\t\t\t\thtmlGroupStyle.top = value + PX;\r\n\t\t\t\t\t\t\t\t\tparentGroup[key] = value;\r\n\t\t\t\t\t\t\t\t\tparentGroup.doTransform = true;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tvisibilitySetter: function (value, key) {\r\n\t\t\t\t\t\t\t\t\thtmlGroupStyle[key] = value;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtmlGroup = container;\r\n\t\t\t\t}\r\n\r\n\t\t\t\thtmlGroup.appendChild(element);\r\n\r\n\t\t\t\t// Shared with VML:\r\n\t\t\t\twrapper.added = true;\r\n\t\t\t\tif (wrapper.alignOnAdd) {\r\n\t\t\t\t\twrapper.htmlUpdateTransform();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn wrapper;\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn wrapper;\r\n\t}\r\n});\r\n\r\n/* ****************************************************************************\r\n *                                                                            *\r\n * START OF INTERNET EXPLORER <= 8 SPECIFIC CODE                              *\r\n *                                                                            *\r\n * For applications and websites that don't need IE support, like platform    *\r\n * targeted mobile apps and web apps, this code can be removed.               *\r\n *                                                                            *\r\n *****************************************************************************/\r\n\r\n/**\r\n * @constructor\r\n */\r\nvar VMLRenderer, VMLElement;\r\nif (!hasSVG && !useCanVG) {\r\n\r\n/**\r\n * The VML element wrapper.\r\n */\r\nVMLElement = {\r\n\r\n\t/**\r\n\t * Initialize a new VML element wrapper. It builds the markup as a string\r\n\t * to minimize DOM traffic.\r\n\t * @param {Object} renderer\r\n\t * @param {Object} nodeName\r\n\t */\r\n\tinit: function (renderer, nodeName) {\r\n\t\tvar wrapper = this,\r\n\t\t\tmarkup =  ['<', nodeName, ' filled=\"f\" stroked=\"f\"'],\r\n\t\t\tstyle = ['position: ', ABSOLUTE, ';'],\r\n\t\t\tisDiv = nodeName === DIV;\r\n\r\n\t\t// divs and shapes need size\r\n\t\tif (nodeName === 'shape' || isDiv) {\r\n\t\t\tstyle.push('left:0;top:0;width:1px;height:1px;');\r\n\t\t}\r\n\t\tstyle.push('visibility: ', isDiv ? HIDDEN : VISIBLE);\r\n\r\n\t\tmarkup.push(' style=\"', style.join(''), '\"/>');\r\n\r\n\t\t// create element with default attributes and style\r\n\t\tif (nodeName) {\r\n\t\t\tmarkup = isDiv || nodeName === 'span' || nodeName === 'img' ?\r\n\t\t\t\tmarkup.join('')\r\n\t\t\t\t: renderer.prepVML(markup);\r\n\t\t\twrapper.element = createElement(markup);\r\n\t\t}\r\n\r\n\t\twrapper.renderer = renderer;\r\n\t},\r\n\r\n\t/**\r\n\t * Add the node to the given parent\r\n\t * @param {Object} parent\r\n\t */\r\n\tadd: function (parent) {\r\n\t\tvar wrapper = this,\r\n\t\t\trenderer = wrapper.renderer,\r\n\t\t\telement = wrapper.element,\r\n\t\t\tbox = renderer.box,\r\n\t\t\tinverted = parent && parent.inverted,\r\n\r\n\t\t\t// get the parent node\r\n\t\t\tparentNode = parent ?\r\n\t\t\t\tparent.element || parent :\r\n\t\t\t\tbox;\r\n\r\n\r\n\t\t// if the parent group is inverted, apply inversion on all children\r\n\t\tif (inverted) { // only on groups\r\n\t\t\trenderer.invertChild(element, parentNode);\r\n\t\t}\r\n\r\n\t\t// append it\r\n\t\tparentNode.appendChild(element);\r\n\r\n\t\t// align text after adding to be able to read offset\r\n\t\twrapper.added = true;\r\n\t\tif (wrapper.alignOnAdd && !wrapper.deferUpdateTransform) {\r\n\t\t\twrapper.updateTransform();\r\n\t\t}\r\n\r\n\t\t// fire an event for internal hooks\r\n\t\tif (wrapper.onAdd) {\r\n\t\t\twrapper.onAdd();\r\n\t\t}\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\r\n\t/**\r\n\t * VML always uses htmlUpdateTransform\r\n\t */\r\n\tupdateTransform: SVGElement.prototype.htmlUpdateTransform,\r\n\r\n\t/**\r\n\t * Set the rotation of a span with oldIE's filter\r\n\t */\r\n\tsetSpanRotation: function () {\r\n\t\t// Adjust for alignment and rotation. Rotation of useHTML content is not yet implemented\r\n\t\t// but it can probably be implemented for Firefox 3.5+ on user request. FF3.5+\r\n\t\t// has support for CSS3 transform. The getBBox method also needs to be updated\r\n\t\t// to compensate for the rotation, like it currently does for SVG.\r\n\t\t// Test case: http://jsfiddle.net/highcharts/Ybt44/\r\n\r\n\t\tvar rotation = this.rotation,\r\n\t\t\tcostheta = mathCos(rotation * deg2rad),\r\n\t\t\tsintheta = mathSin(rotation * deg2rad);\r\n\t\t\t\t\t\r\n\t\tcss(this.element, {\r\n\t\t\tfilter: rotation ? ['progid:DXImageTransform.Microsoft.Matrix(M11=', costheta,\r\n\t\t\t\t', M12=', -sintheta, ', M21=', sintheta, ', M22=', costheta,\r\n\t\t\t\t', sizingMethod=\\'auto expand\\')'].join('') : NONE\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Get the positioning correction for the span after rotating. \r\n\t */\r\n\tgetSpanCorrection: function (width, baseline, alignCorrection, rotation, align) {\r\n\r\n\t\tvar costheta = rotation ? mathCos(rotation * deg2rad) : 1,\r\n\t\t\tsintheta = rotation ? mathSin(rotation * deg2rad) : 0,\r\n\t\t\theight = pick(this.elemHeight, this.element.offsetHeight),\r\n\t\t\tquad,\r\n\t\t\tnonLeft = align && align !== 'left';\r\n\r\n\t\t// correct x and y\r\n\t\tthis.xCorr = costheta < 0 && -width;\r\n\t\tthis.yCorr = sintheta < 0 && -height;\r\n\r\n\t\t// correct for baseline and corners spilling out after rotation\r\n\t\tquad = costheta * sintheta < 0;\r\n\t\tthis.xCorr += sintheta * baseline * (quad ? 1 - alignCorrection : alignCorrection);\r\n\t\tthis.yCorr -= costheta * baseline * (rotation ? (quad ? alignCorrection : 1 - alignCorrection) : 1);\r\n\t\t// correct for the length/height of the text\r\n\t\tif (nonLeft) {\r\n\t\t\tthis.xCorr -= width * alignCorrection * (costheta < 0 ? -1 : 1);\r\n\t\t\tif (rotation) {\r\n\t\t\t\tthis.yCorr -= height * alignCorrection * (sintheta < 0 ? -1 : 1);\r\n\t\t\t}\r\n\t\t\tcss(this.element, {\r\n\t\t\t\ttextAlign: align\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Converts a subset of an SVG path definition to its VML counterpart. Takes an array\r\n\t * as the parameter and returns a string.\r\n\t */\r\n\tpathToVML: function (value) {\r\n\t\t// convert paths\r\n\t\tvar i = value.length,\r\n\t\t\tpath = [];\r\n\r\n\t\twhile (i--) {\r\n\r\n\t\t\t// Multiply by 10 to allow subpixel precision.\r\n\t\t\t// Substracting half a pixel seems to make the coordinates\r\n\t\t\t// align with SVG, but this hasn't been tested thoroughly\r\n\t\t\tif (isNumber(value[i])) {\r\n\t\t\t\tpath[i] = mathRound(value[i] * 10) - 5;\r\n\t\t\t} else if (value[i] === 'Z') { // close the path\r\n\t\t\t\tpath[i] = 'x';\r\n\t\t\t} else {\r\n\t\t\t\tpath[i] = value[i];\r\n\r\n\t\t\t\t// When the start X and end X coordinates of an arc are too close,\r\n\t\t\t\t// they are rounded to the same value above. In this case, substract or \r\n\t\t\t\t// add 1 from the end X and Y positions. #186, #760, #1371, #1410.\r\n\t\t\t\tif (value.isArc && (value[i] === 'wa' || value[i] === 'at')) {\r\n\t\t\t\t\t// Start and end X\r\n\t\t\t\t\tif (path[i + 5] === path[i + 7]) {\r\n\t\t\t\t\t\tpath[i + 7] += value[i + 7] > value[i + 5] ? 1 : -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Start and end Y\r\n\t\t\t\t\tif (path[i + 6] === path[i + 8]) {\r\n\t\t\t\t\t\tpath[i + 8] += value[i + 8] > value[i + 6] ? 1 : -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\r\n\t\t// Loop up again to handle path shortcuts (#2132)\r\n\t\t/*while (i++ < path.length) {\r\n\t\t\tif (path[i] === 'H') { // horizontal line to\r\n\t\t\t\tpath[i] = 'L';\r\n\t\t\t\tpath.splice(i + 2, 0, path[i - 1]);\r\n\t\t\t} else if (path[i] === 'V') { // vertical line to\r\n\t\t\t\tpath[i] = 'L';\r\n\t\t\t\tpath.splice(i + 1, 0, path[i - 2]);\r\n\t\t\t}\r\n\t\t}*/\r\n\t\treturn path.join(' ') || 'x';\r\n\t},\r\n\r\n\t/**\r\n\t * Set the element's clipping to a predefined rectangle\r\n\t *\r\n\t * @param {String} id The id of the clip rectangle\r\n\t */\r\n\tclip: function (clipRect) {\r\n\t\tvar wrapper = this,\r\n\t\t\tclipMembers,\r\n\t\t\tcssRet;\r\n\r\n\t\tif (clipRect) {\r\n\t\t\tclipMembers = clipRect.members;\r\n\t\t\terase(clipMembers, wrapper); // Ensure unique list of elements (#1258)\r\n\t\t\tclipMembers.push(wrapper);\r\n\t\t\twrapper.destroyClip = function () {\r\n\t\t\t\terase(clipMembers, wrapper);\r\n\t\t\t};\r\n\t\t\tcssRet = clipRect.getCSS(wrapper);\r\n\r\n\t\t} else {\r\n\t\t\tif (wrapper.destroyClip) {\r\n\t\t\t\twrapper.destroyClip();\r\n\t\t\t}\r\n\t\t\tcssRet = { clip: docMode8 ? 'inherit' : 'rect(auto)' }; // #1214\r\n\t\t}\r\n\r\n\t\treturn wrapper.css(cssRet);\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set styles for the element\r\n\t * @param {Object} styles\r\n\t */\r\n\tcss: SVGElement.prototype.htmlCss,\r\n\r\n\t/**\r\n\t * Removes a child either by removeChild or move to garbageBin.\r\n\t * Issue 490; in VML removeChild results in Orphaned nodes according to sIEve, discardElement does not.\r\n\t */\r\n\tsafeRemoveChild: function (element) {\r\n\t\t// discardElement will detach the node from its parent before attaching it\r\n\t\t// to the garbage bin. Therefore it is important that the node is attached and have parent.\r\n\t\tif (element.parentNode) {\r\n\t\t\tdiscardElement(element);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Extend element.destroy by removing it from the clip members array\r\n\t */\r\n\tdestroy: function () {\r\n\t\tif (this.destroyClip) {\r\n\t\t\tthis.destroyClip();\r\n\t\t}\r\n\r\n\t\treturn SVGElement.prototype.destroy.apply(this);\r\n\t},\r\n\r\n\t/**\r\n\t * Add an event listener. VML override for normalizing event parameters.\r\n\t * @param {String} eventType\r\n\t * @param {Function} handler\r\n\t */\r\n\ton: function (eventType, handler) {\r\n\t\t// simplest possible event model for internal use\r\n\t\tthis.element['on' + eventType] = function () {\r\n\t\t\tvar evt = win.event;\r\n\t\t\tevt.target = evt.srcElement;\r\n\t\t\thandler(evt);\r\n\t\t};\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * In stacked columns, cut off the shadows so that they don't overlap\r\n\t */\r\n\tcutOffPath: function (path, length) {\r\n\r\n\t\tvar len;\r\n\r\n\t\tpath = path.split(/[ ,]/);\r\n\t\tlen = path.length;\r\n\r\n\t\tif (len === 9 || len === 11) {\r\n\t\t\tpath[len - 4] = path[len - 2] = pInt(path[len - 2]) - 10 * length;\r\n\t\t}\r\n\t\treturn path.join(' ');\r\n\t},\r\n\r\n\t/**\r\n\t * Apply a drop shadow by copying elements and giving them different strokes\r\n\t * @param {Boolean|Object} shadowOptions\r\n\t */\r\n\tshadow: function (shadowOptions, group, cutOff) {\r\n\t\tvar shadows = [],\r\n\t\t\ti,\r\n\t\t\telement = this.element,\r\n\t\t\trenderer = this.renderer,\r\n\t\t\tshadow,\r\n\t\t\telemStyle = element.style,\r\n\t\t\tmarkup,\r\n\t\t\tpath = element.path,\r\n\t\t\tstrokeWidth,\r\n\t\t\tmodifiedPath,\r\n\t\t\tshadowWidth,\r\n\t\t\tshadowElementOpacity;\r\n\r\n\t\t// some times empty paths are not strings\r\n\t\tif (path && typeof path.value !== 'string') {\r\n\t\t\tpath = 'x';\r\n\t\t}\r\n\t\tmodifiedPath = path;\r\n\r\n\t\tif (shadowOptions) {\r\n\t\t\tshadowWidth = pick(shadowOptions.width, 3);\r\n\t\t\tshadowElementOpacity = (shadowOptions.opacity || 0.15) / shadowWidth;\r\n\t\t\tfor (i = 1; i <= 3; i++) {\r\n\r\n\t\t\t\tstrokeWidth = (shadowWidth * 2) + 1 - (2 * i);\r\n\r\n\t\t\t\t// Cut off shadows for stacked column items\r\n\t\t\t\tif (cutOff) {\r\n\t\t\t\t\tmodifiedPath = this.cutOffPath(path.value, strokeWidth + 0.5);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmarkup = ['<shape isShadow=\"true\" strokeweight=\"', strokeWidth,\r\n\t\t\t\t\t'\" filled=\"false\" path=\"', modifiedPath,\r\n\t\t\t\t\t'\" coordsize=\"10 10\" style=\"', element.style.cssText, '\" />'];\r\n\r\n\t\t\t\tshadow = createElement(renderer.prepVML(markup),\r\n\t\t\t\t\tnull, {\r\n\t\t\t\t\t\tleft: pInt(elemStyle.left) + pick(shadowOptions.offsetX, 1),\r\n\t\t\t\t\t\ttop: pInt(elemStyle.top) + pick(shadowOptions.offsetY, 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tif (cutOff) {\r\n\t\t\t\t\tshadow.cutOff = strokeWidth + 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// apply the opacity\r\n\t\t\t\tmarkup = ['<stroke color=\"', shadowOptions.color || 'black', '\" opacity=\"', shadowElementOpacity * i, '\"/>'];\r\n\t\t\t\tcreateElement(renderer.prepVML(markup), null, null, shadow);\r\n\r\n\r\n\t\t\t\t// insert it\r\n\t\t\t\tif (group) {\r\n\t\t\t\t\tgroup.element.appendChild(shadow);\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.parentNode.insertBefore(shadow, element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// record it\r\n\t\t\t\tshadows.push(shadow);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.shadows = shadows;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\tupdateShadows: noop, // Used in SVG only\r\n\r\n\tsetAttr: function (key, value) {\r\n\t\tif (docMode8) { // IE8 setAttribute bug\r\n\t\t\tthis.element[key] = value;\r\n\t\t} else {\r\n\t\t\tthis.element.setAttribute(key, value);\r\n\t\t}\r\n\t},\r\n\tclassSetter: function (value) {\r\n\t\t// IE8 Standards mode has problems retrieving the className unless set like this\r\n\t\tthis.element.className = value;\r\n\t},\r\n\tdashstyleSetter: function (value, key, element) {\r\n\t\tvar strokeElem = element.getElementsByTagName('stroke')[0] ||\r\n\t\t\tcreateElement(this.renderer.prepVML(['<stroke/>']), null, null, element);\r\n\t\tstrokeElem[key] = value || 'solid';\r\n\t\tthis[key] = value; /* because changing stroke-width will change the dash length\r\n\t\t\tand cause an epileptic effect */\r\n\t},\r\n\tdSetter: function (value, key, element) {\r\n\t\tvar i,\r\n\t\t\tshadows = this.shadows;\r\n\t\tvalue = value || [];\r\n\t\tthis.d = value.join && value.join(' '); // used in getter for animation\r\n\r\n\t\telement.path = value = this.pathToVML(value);\r\n\r\n\t\t// update shadows\r\n\t\tif (shadows) {\r\n\t\t\ti = shadows.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tshadows[i].path = shadows[i].cutOff ? this.cutOffPath(value, shadows[i].cutOff) : value;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setAttr(key, value);\r\n\t},\r\n\tfillSetter: function (value, key, element) {\r\n\t\tvar nodeName = element.nodeName;\r\n\t\tif (nodeName === 'SPAN') { // text color\r\n\t\t\telement.style.color = value;\r\n\t\t} else if (nodeName !== 'IMG') { // #1336\r\n\t\t\telement.filled = value !== NONE;\r\n\t\t\tthis.setAttr('fillcolor', this.renderer.color(value, element, key, this));\r\n\t\t}\r\n\t},\r\n\topacitySetter: noop, // Don't bother - animation is too slow and filters introduce artifacts\r\n\trotationSetter: function (value, key, element) {\r\n\t\tvar style = element.style;\r\n\t\tthis[key] = style[key] = value; // style is for #1873\r\n\r\n\t\t// Correction for the 1x1 size of the shape container. Used in gauge needles.\r\n\t\tstyle.left = -mathRound(mathSin(value * deg2rad) + 1) + PX;\r\n\t\tstyle.top = mathRound(mathCos(value * deg2rad)) + PX;\r\n\t},\r\n\tstrokeSetter: function (value, key, element) {\r\n\t\tthis.setAttr('strokecolor', this.renderer.color(value, element, key));\r\n\t},\r\n\t'stroke-widthSetter': function (value, key, element) {\r\n\t\telement.stroked = !!value; // VML \"stroked\" attribute\r\n\t\tthis[key] = value; // used in getter, issue #113\r\n\t\tif (isNumber(value)) {\r\n\t\t\tvalue += PX;\r\n\t\t}\r\n\t\tthis.setAttr('strokeweight', value);\r\n\t},\r\n\ttitleSetter: function (value, key) {\r\n\t\tthis.setAttr(key, value);\r\n\t},\r\n\tvisibilitySetter: function (value, key, element) {\r\n\r\n\t\t// Handle inherited visibility\r\n\t\tif (value === 'inherit') {\r\n\t\t\tvalue = VISIBLE;\r\n\t\t}\r\n\t\t\r\n\t\t// Let the shadow follow the main element\r\n\t\tif (this.shadows) {\r\n\t\t\teach(this.shadows, function (shadow) {\r\n\t\t\t\tshadow.style[key] = value;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Instead of toggling the visibility CSS property, move the div out of the viewport.\r\n\t\t// This works around #61 and #586\r\n\t\tif (element.nodeName === 'DIV') {\r\n\t\t\tvalue = value === HIDDEN ? '-999em' : 0;\r\n\r\n\t\t\t// In order to redraw, IE7 needs the div to be visible when tucked away\r\n\t\t\t// outside the viewport. So the visibility is actually opposite of\r\n\t\t\t// the expected value. This applies to the tooltip only.\r\n\t\t\tif (!docMode8) {\r\n\t\t\t\telement.style[key] = value ? VISIBLE : HIDDEN;\r\n\t\t\t}\r\n\t\t\tkey = 'top';\r\n\t\t}\r\n\t\telement.style[key] = value;\r\n\t},\r\n\txSetter: function (value, key, element) {\r\n\t\tthis[key] = value; // used in getter\r\n\r\n\t\tif (key === 'x') {\r\n\t\t\tkey = 'left';\r\n\t\t} else if (key === 'y') {\r\n\t\t\tkey = 'top';\r\n\t\t}/* else {\r\n\t\t\tvalue = mathMax(0, value); // don't set width or height below zero (#311)\r\n\t\t}*/\r\n\r\n\t\t// clipping rectangle special\r\n\t\tif (this.updateClipping) {\r\n\t\t\tthis[key] = value; // the key is now 'left' or 'top' for 'x' and 'y'\r\n\t\t\tthis.updateClipping();\r\n\t\t} else {\r\n\t\t\t// normal\r\n\t\t\telement.style[key] = value;\r\n\t\t}\r\n\t},\r\n\tzIndexSetter: function (value, key, element) {\r\n\t\telement.style[key] = value;\r\n\t}\r\n};\r\nHighcharts.VMLElement = VMLElement = extendClass(SVGElement, VMLElement);\r\n\r\n// Some shared setters\r\nVMLElement.prototype.ySetter =\r\n\tVMLElement.prototype.widthSetter = \r\n\tVMLElement.prototype.heightSetter = \r\n\tVMLElement.prototype.xSetter;\r\n\r\n\r\n/**\r\n * The VML renderer\r\n */\r\nvar VMLRendererExtension = { // inherit SVGRenderer\r\n\r\n\tElement: VMLElement,\r\n\tisIE8: userAgent.indexOf('MSIE 8.0') > -1,\r\n\r\n\r\n\t/**\r\n\t * Initialize the VMLRenderer\r\n\t * @param {Object} container\r\n\t * @param {Number} width\r\n\t * @param {Number} height\r\n\t */\r\n\tinit: function (container, width, height, style) {\r\n\t\tvar renderer = this,\r\n\t\t\tboxWrapper,\r\n\t\t\tbox,\r\n\t\t\tcss;\r\n\r\n\t\trenderer.alignedObjects = [];\r\n\r\n\t\tboxWrapper = renderer.createElement(DIV)\r\n\t\t\t.css(extend(this.getStyle(style), { position: RELATIVE}));\r\n\t\tbox = boxWrapper.element;\r\n\t\tcontainer.appendChild(boxWrapper.element);\r\n\r\n\r\n\t\t// generate the containing box\r\n\t\trenderer.isVML = true;\r\n\t\trenderer.box = box;\r\n\t\trenderer.boxWrapper = boxWrapper;\r\n\t\trenderer.cache = {};\r\n\r\n\r\n\t\trenderer.setSize(width, height, false);\r\n\r\n\t\t// The only way to make IE6 and IE7 print is to use a global namespace. However,\r\n\t\t// with IE8 the only way to make the dynamic shapes visible in screen and print mode\r\n\t\t// seems to be to add the xmlns attribute and the behaviour style inline.\r\n\t\tif (!doc.namespaces.hcv) {\r\n\r\n\t\t\tdoc.namespaces.add('hcv', 'urn:schemas-microsoft-com:vml');\r\n\r\n\t\t\t// Setup default CSS (#2153, #2368, #2384)\r\n\t\t\tcss = 'hcv\\\\:fill, hcv\\\\:path, hcv\\\\:shape, hcv\\\\:stroke' +\r\n\t\t\t\t'{ behavior:url(#default#VML); display: inline-block; } ';\r\n\t\t\ttry {\r\n\t\t\t\tdoc.createStyleSheet().cssText = css;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tdoc.styleSheets[0].cssText += css;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Detect whether the renderer is hidden. This happens when one of the parent elements\r\n\t * has display: none\r\n\t */\r\n\tisHidden: function () {\r\n\t\treturn !this.box.offsetWidth;\r\n\t},\r\n\r\n\t/**\r\n\t * Define a clipping rectangle. In VML it is accomplished by storing the values\r\n\t * for setting the CSS style to all associated members.\r\n\t *\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} width\r\n\t * @param {Number} height\r\n\t */\r\n\tclipRect: function (x, y, width, height) {\r\n\r\n\t\t// create a dummy element\r\n\t\tvar clipRect = this.createElement(),\r\n\t\t\tisObj = isObject(x);\r\n\r\n\t\t// mimic a rectangle with its style object for automatic updating in attr\r\n\t\treturn extend(clipRect, {\r\n\t\t\tmembers: [],\r\n\t\t\tcount: 0,\r\n\t\t\tleft: (isObj ? x.x : x) + 1,\r\n\t\t\ttop: (isObj ? x.y : y) + 1,\r\n\t\t\twidth: (isObj ? x.width : width) - 1,\r\n\t\t\theight: (isObj ? x.height : height) - 1,\r\n\t\t\tgetCSS: function (wrapper) {\r\n\t\t\t\tvar element = wrapper.element,\r\n\t\t\t\t\tnodeName = element.nodeName,\r\n\t\t\t\t\tisShape = nodeName === 'shape',\r\n\t\t\t\t\tinverted = wrapper.inverted,\r\n\t\t\t\t\trect = this,\r\n\t\t\t\t\ttop = rect.top - (isShape ? element.offsetTop : 0),\r\n\t\t\t\t\tleft = rect.left,\r\n\t\t\t\t\tright = left + rect.width,\r\n\t\t\t\t\tbottom = top + rect.height,\r\n\t\t\t\t\tret = {\r\n\t\t\t\t\t\tclip: 'rect(' +\r\n\t\t\t\t\t\t\tmathRound(inverted ? left : top) + 'px,' +\r\n\t\t\t\t\t\t\tmathRound(inverted ? bottom : right) + 'px,' +\r\n\t\t\t\t\t\t\tmathRound(inverted ? right : bottom) + 'px,' +\r\n\t\t\t\t\t\t\tmathRound(inverted ? top : left) + 'px)'\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t// issue 74 workaround\r\n\t\t\t\tif (!inverted && docMode8 && nodeName === 'DIV') {\r\n\t\t\t\t\textend(ret, {\r\n\t\t\t\t\t\twidth: right + PX,\r\n\t\t\t\t\t\theight: bottom + PX\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn ret;\r\n\t\t\t},\r\n\r\n\t\t\t// used in attr and animation to update the clipping of all members\r\n\t\t\tupdateClipping: function () {\r\n\t\t\t\teach(clipRect.members, function (member) {\r\n\t\t\t\t\tif (member.element) { // Deleted series, like in stock/members/series-remove demo. Should be removed from members, but this will do.\r\n\t\t\t\t\t\tmember.css(clipRect.getCSS(member));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Take a color and return it if it's a string, make it a gradient if it's a\r\n\t * gradient configuration object, and apply opacity.\r\n\t *\r\n\t * @param {Object} color The color or config object\r\n\t */\r\n\tcolor: function (color, elem, prop, wrapper) {\r\n\t\tvar renderer = this,\r\n\t\t\tcolorObject,\r\n\t\t\tregexRgba = /^rgba/,\r\n\t\t\tmarkup,\r\n\t\t\tfillType,\r\n\t\t\tret = NONE;\r\n\r\n\t\t// Check for linear or radial gradient\r\n\t\tif (color && color.linearGradient) {\r\n\t\t\tfillType = 'gradient';\r\n\t\t} else if (color && color.radialGradient) {\r\n\t\t\tfillType = 'pattern';\r\n\t\t}\r\n\r\n\r\n\t\tif (fillType) {\r\n\r\n\t\t\tvar stopColor,\r\n\t\t\t\tstopOpacity,\r\n\t\t\t\tgradient = color.linearGradient || color.radialGradient,\r\n\t\t\t\tx1,\r\n\t\t\t\ty1,\r\n\t\t\t\tx2,\r\n\t\t\t\ty2,\r\n\t\t\t\topacity1,\r\n\t\t\t\topacity2,\r\n\t\t\t\tcolor1,\r\n\t\t\t\tcolor2,\r\n\t\t\t\tfillAttr = '',\r\n\t\t\t\tstops = color.stops,\r\n\t\t\t\tfirstStop,\r\n\t\t\t\tlastStop,\r\n\t\t\t\tcolors = [],\r\n\t\t\t\taddFillNode = function () {\r\n\t\t\t\t\t// Add the fill subnode. When colors attribute is used, the meanings of opacity and o:opacity2\r\n\t\t\t\t\t// are reversed.\r\n\t\t\t\t\tmarkup = ['<fill colors=\"' + colors.join(',') + '\" opacity=\"', opacity2, '\" o:opacity2=\"', opacity1,\r\n\t\t\t\t\t\t'\" type=\"', fillType, '\" ', fillAttr, 'focus=\"100%\" method=\"any\" />'];\r\n\t\t\t\t\tcreateElement(renderer.prepVML(markup), null, null, elem);\r\n\t\t\t\t};\r\n\r\n\t\t\t// Extend from 0 to 1\r\n\t\t\tfirstStop = stops[0];\r\n\t\t\tlastStop = stops[stops.length - 1];\r\n\t\t\tif (firstStop[0] > 0) {\r\n\t\t\t\tstops.unshift([\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tfirstStop[1]\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\tif (lastStop[0] < 1) {\r\n\t\t\t\tstops.push([\r\n\t\t\t\t\t1,\r\n\t\t\t\t\tlastStop[1]\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\r\n\t\t\t// Compute the stops\r\n\t\t\teach(stops, function (stop, i) {\r\n\t\t\t\tif (regexRgba.test(stop[1])) {\r\n\t\t\t\t\tcolorObject = Color(stop[1]);\r\n\t\t\t\t\tstopColor = colorObject.get('rgb');\r\n\t\t\t\t\tstopOpacity = colorObject.get('a');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstopColor = stop[1];\r\n\t\t\t\t\tstopOpacity = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Build the color attribute\r\n\t\t\t\tcolors.push((stop[0] * 100) + '% ' + stopColor);\r\n\r\n\t\t\t\t// Only start and end opacities are allowed, so we use the first and the last\r\n\t\t\t\tif (!i) {\r\n\t\t\t\t\topacity1 = stopOpacity;\r\n\t\t\t\t\tcolor2 = stopColor;\r\n\t\t\t\t} else {\r\n\t\t\t\t\topacity2 = stopOpacity;\r\n\t\t\t\t\tcolor1 = stopColor;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Apply the gradient to fills only.\r\n\t\t\tif (prop === 'fill') {\r\n\r\n\t\t\t\t// Handle linear gradient angle\r\n\t\t\t\tif (fillType === 'gradient') {\r\n\t\t\t\t\tx1 = gradient.x1 || gradient[0] || 0;\r\n\t\t\t\t\ty1 = gradient.y1 || gradient[1] || 0;\r\n\t\t\t\t\tx2 = gradient.x2 || gradient[2] || 0;\r\n\t\t\t\t\ty2 = gradient.y2 || gradient[3] || 0;\r\n\t\t\t\t\tfillAttr = 'angle=\"' + (90  - math.atan(\r\n\t\t\t\t\t\t(y2 - y1) / // y vector\r\n\t\t\t\t\t\t(x2 - x1) // x vector\r\n\t\t\t\t\t\t) * 180 / mathPI) + '\"';\r\n\r\n\t\t\t\t\taddFillNode();\r\n\r\n\t\t\t\t// Radial (circular) gradient\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar r = gradient.r,\r\n\t\t\t\t\t\tsizex = r * 2,\r\n\t\t\t\t\t\tsizey = r * 2,\r\n\t\t\t\t\t\tcx = gradient.cx,\r\n\t\t\t\t\t\tcy = gradient.cy,\r\n\t\t\t\t\t\tradialReference = elem.radialReference,\r\n\t\t\t\t\t\tbBox,\r\n\t\t\t\t\t\tapplyRadialGradient = function () {\r\n\t\t\t\t\t\t\tif (radialReference) {\r\n\t\t\t\t\t\t\t\tbBox = wrapper.getBBox();\r\n\t\t\t\t\t\t\t\tcx += (radialReference[0] - bBox.x) / bBox.width - 0.5;\r\n\t\t\t\t\t\t\t\tcy += (radialReference[1] - bBox.y) / bBox.height - 0.5;\r\n\t\t\t\t\t\t\t\tsizex *= radialReference[2] / bBox.width;\r\n\t\t\t\t\t\t\t\tsizey *= radialReference[2] / bBox.height;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfillAttr = 'src=\"' + defaultOptions.global.VMLRadialGradientURL + '\" ' +\r\n\t\t\t\t\t\t\t\t'size=\"' + sizex + ',' + sizey + '\" ' +\r\n\t\t\t\t\t\t\t\t'origin=\"0.5,0.5\" ' +\r\n\t\t\t\t\t\t\t\t'position=\"' + cx + ',' + cy + '\" ' +\r\n\t\t\t\t\t\t\t\t'color2=\"' + color2 + '\" ';\r\n\r\n\t\t\t\t\t\t\taddFillNode();\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// Apply radial gradient\r\n\t\t\t\t\tif (wrapper.added) {\r\n\t\t\t\t\t\tapplyRadialGradient();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// We need to know the bounding box to get the size and position right\r\n\t\t\t\t\t\twrapper.onAdd = applyRadialGradient;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// The fill element's color attribute is broken in IE8 standards mode, so we\r\n\t\t\t\t\t// need to set the parent shape's fillcolor attribute instead.\r\n\t\t\t\t\tret = color1;\r\n\t\t\t\t}\r\n\r\n\t\t\t// Gradients are not supported for VML stroke, return the first color. #722.\r\n\t\t\t} else {\r\n\t\t\t\tret = stopColor;\r\n\t\t\t}\r\n\r\n\t\t// if the color is an rgba color, split it and add a fill node\r\n\t\t// to hold the opacity component\r\n\t\t} else if (regexRgba.test(color) && elem.tagName !== 'IMG') {\r\n\r\n\t\t\tcolorObject = Color(color);\r\n\r\n\t\t\tmarkup = ['<', prop, ' opacity=\"', colorObject.get('a'), '\"/>'];\r\n\t\t\tcreateElement(this.prepVML(markup), null, null, elem);\r\n\r\n\t\t\tret = colorObject.get('rgb');\r\n\r\n\r\n\t\t} else {\r\n\t\t\tvar propNodes = elem.getElementsByTagName(prop); // 'stroke' or 'fill' node\r\n\t\t\tif (propNodes.length) {\r\n\t\t\t\tpropNodes[0].opacity = 1;\r\n\t\t\t\tpropNodes[0].type = 'solid';\r\n\t\t\t}\r\n\t\t\tret = color;\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t/**\r\n\t * Take a VML string and prepare it for either IE8 or IE6/IE7.\r\n\t * @param {Array} markup A string array of the VML markup to prepare\r\n\t */\r\n\tprepVML: function (markup) {\r\n\t\tvar vmlStyle = 'display:inline-block;behavior:url(#default#VML);',\r\n\t\t\tisIE8 = this.isIE8;\r\n\r\n\t\tmarkup = markup.join('');\r\n\r\n\t\tif (isIE8) { // add xmlns and style inline\r\n\t\t\tmarkup = markup.replace('/>', ' xmlns=\"urn:schemas-microsoft-com:vml\" />');\r\n\t\t\tif (markup.indexOf('style=\"') === -1) {\r\n\t\t\t\tmarkup = markup.replace('/>', ' style=\"' + vmlStyle + '\" />');\r\n\t\t\t} else {\r\n\t\t\t\tmarkup = markup.replace('style=\"', 'style=\"' + vmlStyle);\r\n\t\t\t}\r\n\r\n\t\t} else { // add namespace\r\n\t\t\tmarkup = markup.replace('<', '<hcv:');\r\n\t\t}\r\n\r\n\t\treturn markup;\r\n\t},\r\n\r\n\t/**\r\n\t * Create rotated and aligned text\r\n\t * @param {String} str\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t */\r\n\ttext: SVGRenderer.prototype.html,\r\n\r\n\t/**\r\n\t * Create and return a path element\r\n\t * @param {Array} path\r\n\t */\r\n\tpath: function (path) {\r\n\t\tvar attr = {\r\n\t\t\t// subpixel precision down to 0.1 (width and height = 1px)\r\n\t\t\tcoordsize: '10 10'\r\n\t\t};\r\n\t\tif (isArray(path)) {\r\n\t\t\tattr.d = path;\r\n\t\t} else if (isObject(path)) { // attributes\r\n\t\t\textend(attr, path);\r\n\t\t}\r\n\t\t// create the shape\r\n\t\treturn this.createElement('shape').attr(attr);\r\n\t},\r\n\r\n\t/**\r\n\t * Create and return a circle element. In VML circles are implemented as\r\n\t * shapes, which is faster than v:oval\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} r\r\n\t */\r\n\tcircle: function (x, y, r) {\r\n\t\tvar circle = this.symbol('circle');\r\n\t\tif (isObject(x)) {\r\n\t\t\tr = x.r;\r\n\t\t\ty = x.y;\r\n\t\t\tx = x.x;\r\n\t\t}\r\n\t\tcircle.isCircle = true; // Causes x and y to mean center (#1682)\r\n\t\tcircle.r = r;\r\n\t\treturn circle.attr({ x: x, y: y });\r\n\t},\r\n\r\n\t/**\r\n\t * Create a group using an outer div and an inner v:group to allow rotating\r\n\t * and flipping. A simple v:group would have problems with positioning\r\n\t * child HTML elements and CSS clip.\r\n\t *\r\n\t * @param {String} name The name of the group\r\n\t */\r\n\tg: function (name) {\r\n\t\tvar wrapper,\r\n\t\t\tattribs;\r\n\r\n\t\t// set the class name\r\n\t\tif (name) {\r\n\t\t\tattribs = { 'className': PREFIX + name, 'class': PREFIX + name };\r\n\t\t}\r\n\r\n\t\t// the div to hold HTML and clipping\r\n\t\twrapper = this.createElement(DIV).attr(attribs);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\r\n\t/**\r\n\t * VML override to create a regular HTML image\r\n\t * @param {String} src\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} width\r\n\t * @param {Number} height\r\n\t */\r\n\timage: function (src, x, y, width, height) {\r\n\t\tvar obj = this.createElement('img')\r\n\t\t\t.attr({ src: src });\r\n\r\n\t\tif (arguments.length > 1) {\r\n\t\t\tobj.attr({\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\twidth: width,\r\n\t\t\t\theight: height\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\r\n\t/**\r\n\t * For rectangles, VML uses a shape for rect to overcome bugs and rotation problems\r\n\t */\r\n\tcreateElement: function (nodeName) {\r\n\t\treturn nodeName === 'rect' ? this.symbol(nodeName) : SVGRenderer.prototype.createElement.call(this, nodeName);\t\r\n\t},\r\n\r\n\t/**\r\n\t * In the VML renderer, each child of an inverted div (group) is inverted\r\n\t * @param {Object} element\r\n\t * @param {Object} parentNode\r\n\t */\r\n\tinvertChild: function (element, parentNode) {\r\n\t\tvar ren = this,\r\n\t\t\tparentStyle = parentNode.style,\r\n\t\t\timgStyle = element.tagName === 'IMG' && element.style; // #1111\r\n\r\n\t\tcss(element, {\r\n\t\t\tflip: 'x',\r\n\t\t\tleft: pInt(parentStyle.width) - (imgStyle ? pInt(imgStyle.top) : 1),\r\n\t\t\ttop: pInt(parentStyle.height) - (imgStyle ? pInt(imgStyle.left) : 1),\r\n\t\t\trotation: -90\r\n\t\t});\r\n\r\n\t\t// Recursively invert child elements, needed for nested composite shapes like box plots and error bars. #1680, #1806.\r\n\t\teach(element.childNodes, function (child) {\r\n\t\t\tren.invertChild(child, element);\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Symbol definitions that override the parent SVG renderer's symbols\r\n\t *\r\n\t */\r\n\tsymbols: {\r\n\t\t// VML specific arc function\r\n\t\tarc: function (x, y, w, h, options) {\r\n\t\t\tvar start = options.start,\r\n\t\t\t\tend = options.end,\r\n\t\t\t\tradius = options.r || w || h,\r\n\t\t\t\tinnerRadius = options.innerR,\r\n\t\t\t\tcosStart = mathCos(start),\r\n\t\t\t\tsinStart = mathSin(start),\r\n\t\t\t\tcosEnd = mathCos(end),\r\n\t\t\t\tsinEnd = mathSin(end),\r\n\t\t\t\tret;\r\n\r\n\t\t\tif (end - start === 0) { // no angle, don't show it.\r\n\t\t\t\treturn ['x'];\r\n\t\t\t}\r\n\r\n\t\t\tret = [\r\n\t\t\t\t'wa', // clockwise arc to\r\n\t\t\t\tx - radius, // left\r\n\t\t\t\ty - radius, // top\r\n\t\t\t\tx + radius, // right\r\n\t\t\t\ty + radius, // bottom\r\n\t\t\t\tx + radius * cosStart, // start x\r\n\t\t\t\ty + radius * sinStart, // start y\r\n\t\t\t\tx + radius * cosEnd, // end x\r\n\t\t\t\ty + radius * sinEnd  // end y\r\n\t\t\t];\r\n\r\n\t\t\tif (options.open && !innerRadius) {\r\n\t\t\t\tret.push(\r\n\t\t\t\t\t'e',\r\n\t\t\t\t\tM,\r\n\t\t\t\t\tx,// - innerRadius,\r\n\t\t\t\t\ty// - innerRadius\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tret.push(\r\n\t\t\t\t'at', // anti clockwise arc to\r\n\t\t\t\tx - innerRadius, // left\r\n\t\t\t\ty - innerRadius, // top\r\n\t\t\t\tx + innerRadius, // right\r\n\t\t\t\ty + innerRadius, // bottom\r\n\t\t\t\tx + innerRadius * cosEnd, // start x\r\n\t\t\t\ty + innerRadius * sinEnd, // start y\r\n\t\t\t\tx + innerRadius * cosStart, // end x\r\n\t\t\t\ty + innerRadius * sinStart, // end y\r\n\t\t\t\t'x', // finish path\r\n\t\t\t\t'e' // close\r\n\t\t\t);\r\n\r\n\t\t\tret.isArc = true;\r\n\t\t\treturn ret;\r\n\r\n\t\t},\r\n\t\t// Add circle symbol path. This performs significantly faster than v:oval.\r\n\t\tcircle: function (x, y, w, h, wrapper) {\r\n\r\n\t\t\tif (wrapper) {\r\n\t\t\t\tw = h = 2 * wrapper.r;\r\n\t\t\t}\r\n\r\n\t\t\t// Center correction, #1682\r\n\t\t\tif (wrapper && wrapper.isCircle) {\r\n\t\t\t\tx -= w / 2;\r\n\t\t\t\ty -= h / 2;\r\n\t\t\t}\r\n\r\n\t\t\t// Return the path\r\n\t\t\treturn [\r\n\t\t\t\t'wa', // clockwisearcto\r\n\t\t\t\tx, // left\r\n\t\t\t\ty, // top\r\n\t\t\t\tx + w, // right\r\n\t\t\t\ty + h, // bottom\r\n\t\t\t\tx + w, // start x\r\n\t\t\t\ty + h / 2,     // start y\r\n\t\t\t\tx + w, // end x\r\n\t\t\t\ty + h / 2,     // end y\r\n\t\t\t\t//'x', // finish path\r\n\t\t\t\t'e' // close\r\n\t\t\t];\r\n\t\t},\r\n\t\t/**\r\n\t\t * Add rectangle symbol path which eases rotation and omits arcsize problems\r\n\t\t * compared to the built-in VML roundrect shape. When borders are not rounded,\r\n\t\t * use the simpler square path, else use the callout path without the arrow.\r\n\t\t */\r\n\t\trect: function (x, y, w, h, options) {\r\n\t\t\treturn SVGRenderer.prototype.symbols[\r\n\t\t\t\t!defined(options) || !options.r ? 'square' : 'callout'\r\n\t\t\t].call(0, x, y, w, h, options);\r\n\t\t}\r\n\t}\r\n};\r\nHighcharts.VMLRenderer = VMLRenderer = function () {\r\n\tthis.init.apply(this, arguments);\r\n};\r\nVMLRenderer.prototype = merge(SVGRenderer.prototype, VMLRendererExtension);\r\n\r\n\t// general renderer\r\n\tRenderer = VMLRenderer;\r\n}\r\n\r\n// This method is used with exporting in old IE, when emulating SVG (see #2314)\r\nSVGRenderer.prototype.measureSpanWidth = function (text, styles) {\r\n\tvar measuringSpan = doc.createElement('span'),\r\n\t\toffsetWidth,\r\n\ttextNode = doc.createTextNode(text);\r\n\r\n\tmeasuringSpan.appendChild(textNode);\r\n\tcss(measuringSpan, styles);\r\n\tthis.box.appendChild(measuringSpan);\r\n\toffsetWidth = measuringSpan.offsetWidth;\r\n\tdiscardElement(measuringSpan); // #2463\r\n\treturn offsetWidth;\r\n};\r\n\r\n\r\n/* ****************************************************************************\r\n *                                                                            *\r\n * END OF INTERNET EXPLORER <= 8 SPECIFIC CODE                                *\r\n *                                                                            *\r\n *****************************************************************************/\r\n/* ****************************************************************************\r\n *                                                                            *\r\n * START OF ANDROID < 3 SPECIFIC CODE. THIS CAN BE REMOVED IF YOU'RE NOT      *\r\n * TARGETING THAT SYSTEM.                                                     *\r\n *                                                                            *\r\n *****************************************************************************/\r\nvar CanVGRenderer,\r\n\tCanVGController;\r\n\r\nif (useCanVG) {\r\n\t/**\r\n\t * The CanVGRenderer is empty from start to keep the source footprint small.\r\n\t * When requested, the CanVGController downloads the rest of the source packaged\r\n\t * together with the canvg library.\r\n\t */\r\n\tHighcharts.CanVGRenderer = CanVGRenderer = function () {\r\n\t\t// Override the global SVG namespace to fake SVG/HTML that accepts CSS\r\n\t\tSVG_NS = 'http://www.w3.org/1999/xhtml';\r\n\t};\r\n\r\n\t/**\r\n\t * Start with an empty symbols object. This is needed when exporting is used (exporting.src.js will add a few symbols), but \r\n\t * the implementation from SvgRenderer will not be merged in until first render.\r\n\t */\r\n\tCanVGRenderer.prototype.symbols = {};\r\n\r\n\t/**\r\n\t * Handles on demand download of canvg rendering support.\r\n\t */\r\n\tCanVGController = (function () {\r\n\t\t// List of renderering calls\r\n\t\tvar deferredRenderCalls = [];\r\n\r\n\t\t/**\r\n\t\t * When downloaded, we are ready to draw deferred charts.\r\n\t\t */\r\n\t\tfunction drawDeferred() {\r\n\t\t\tvar callLength = deferredRenderCalls.length,\r\n\t\t\t\tcallIndex;\r\n\r\n\t\t\t// Draw all pending render calls\r\n\t\t\tfor (callIndex = 0; callIndex < callLength; callIndex++) {\r\n\t\t\t\tdeferredRenderCalls[callIndex]();\r\n\t\t\t}\r\n\t\t\t// Clear the list\r\n\t\t\tdeferredRenderCalls = [];\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tpush: function (func, scriptLocation) {\r\n\t\t\t\t// Only get the script once\r\n\t\t\t\tif (deferredRenderCalls.length === 0) {\r\n\t\t\t\t\tgetScript(scriptLocation, drawDeferred);\r\n\t\t\t\t}\r\n\t\t\t\t// Register render call\r\n\t\t\t\tdeferredRenderCalls.push(func);\r\n\t\t\t}\r\n\t\t};\r\n\t}());\r\n\r\n\tRenderer = CanVGRenderer;\r\n} // end CanVGRenderer\r\n\r\n/* ****************************************************************************\r\n *                                                                            *\r\n * END OF ANDROID < 3 SPECIFIC CODE                                           *\r\n *                                                                            *\r\n *****************************************************************************/\r\n\r\n/**\r\n * The Tick class\r\n */\r\nfunction Tick(axis, pos, type, noLabel) {\r\n\tthis.axis = axis;\r\n\tthis.pos = pos;\r\n\tthis.type = type || '';\r\n\tthis.isNew = true;\r\n\r\n\tif (!type && !noLabel) {\r\n\t\tthis.addLabel();\r\n\t}\r\n}\r\n\r\nTick.prototype = {\r\n\t/**\r\n\t * Write the tick label\r\n\t */\r\n\taddLabel: function () {\r\n\t\tvar tick = this,\r\n\t\t\taxis = tick.axis,\r\n\t\t\toptions = axis.options,\r\n\t\t\tchart = axis.chart,\r\n\t\t\tcategories = axis.categories,\r\n\t\t\tnames = axis.names,\r\n\t\t\tpos = tick.pos,\r\n\t\t\tlabelOptions = options.labels,\r\n\t\t\tstr,\r\n\t\t\ttickPositions = axis.tickPositions,\r\n\t\t\tisFirst = pos === tickPositions[0],\r\n\t\t\tisLast = pos === tickPositions[tickPositions.length - 1],\r\n\t\t\tvalue = categories ?\r\n\t\t\t\tpick(categories[pos], names[pos], pos) :\r\n\t\t\t\tpos,\r\n\t\t\tlabel = tick.label,\r\n\t\t\ttickPositionInfo = tickPositions.info,\r\n\t\t\tdateTimeLabelFormat;\r\n\r\n\t\t// Set the datetime label format. If a higher rank is set for this position, use that. If not,\r\n\t\t// use the general format.\r\n\t\tif (axis.isDatetimeAxis && tickPositionInfo) {\r\n\t\t\tdateTimeLabelFormat = options.dateTimeLabelFormats[tickPositionInfo.higherRanks[pos] || tickPositionInfo.unitName];\r\n\t\t}\r\n\t\t// set properties for access in render method\r\n\t\ttick.isFirst = isFirst;\r\n\t\ttick.isLast = isLast;\r\n\r\n\t\t// get the string\r\n\t\tstr = axis.labelFormatter.call({\r\n\t\t\taxis: axis,\r\n\t\t\tchart: chart,\r\n\t\t\tisFirst: isFirst,\r\n\t\t\tisLast: isLast,\r\n\t\t\tdateTimeLabelFormat: dateTimeLabelFormat,\r\n\t\t\tvalue: axis.isLog ? correctFloat(lin2log(value)) : value\r\n\t\t});\r\n\r\n\t\t// prepare CSS\r\n\t\t//css = width && { width: mathMax(1, mathRound(width - 2 * (labelOptions.padding || 10))) + PX };\r\n\t\t\r\n\t\t// first call\r\n\t\tif (!defined(label)) {\r\n\r\n\t\t\ttick.label = label =\r\n\t\t\t\tdefined(str) && labelOptions.enabled ?\r\n\t\t\t\t\tchart.renderer.text(\r\n\t\t\t\t\t\t\tstr,\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\tlabelOptions.useHTML\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t//.attr(attr)\r\n\t\t\t\t\t\t// without position absolute, IE export sometimes is wrong\r\n\t\t\t\t\t\t.css(merge(labelOptions.style))\r\n\t\t\t\t\t\t.add(axis.labelGroup) :\r\n\t\t\t\t\tnull;\r\n\t\t\ttick.labelLength = label && label.getBBox().width; // Un-rotated length\r\n\t\t\ttick.rotation = 0; // Base value to detect change for new calls to getBBox\r\n\r\n\t\t// update\r\n\t\t} else if (label) {\r\n\t\t\tlabel.attr({ text: str });\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Get the offset height or width of the label\r\n\t */\r\n\tgetLabelSize: function () {\r\n\t\treturn this.label ?\r\n\t\t\tthis.label.getBBox()[this.axis.horiz ? 'height' : 'width'] :\r\n\t\t\t0;\r\n\t},\r\n\r\n\t/**\r\n\t * Handle the label overflow by adjusting the labels to the left and right edge, or\r\n\t * hide them if they collide into the neighbour label.\r\n\t */\r\n\thandleOverflow: function (xy) {\r\n\t\tvar axis = this.axis,\r\n\t\t\tpxPos = xy.x,\r\n\t\t\tchartWidth = axis.chart.chartWidth,\r\n\t\t\tspacing = axis.chart.spacing,\r\n\t\t\tleftBound = pick(axis.labelLeft, spacing[3]),\r\n\t\t\trightBound = pick(axis.labelRight, chartWidth - spacing[1]),\r\n\t\t\tlabel = this.label,\r\n\t\t\trotation = this.rotation,\r\n\t\t\tfactor = { left: 0, center: 0.5, right: 1 }[axis.labelAlign],\r\n\t\t\tlabelWidth = label.getBBox().width,\r\n\t\t\tslotWidth = axis.slotWidth,\r\n\t\t\tleftPos,\r\n\t\t\trightPos,\r\n\t\t\ttextWidth;\r\n\r\n\t\t// Check if the label overshoots the chart spacing box. If it does, move it.\r\n\t\t// If it now overshoots the slotWidth, add ellipsis.\r\n\t\tif (!rotation) {\r\n\t\t\tleftPos = pxPos - factor * labelWidth;\r\n\t\t\trightPos = pxPos + factor * labelWidth;\r\n\r\n\t\t\tif (leftPos < leftBound) {\r\n\t\t\t\tslotWidth -= leftBound - leftPos;\r\n\t\t\t\txy.x = leftBound;\r\n\t\t\t\tlabel.attr({ align: 'left' });\t\t\t\t\r\n\t\t\t} else if (rightPos > rightBound) {\r\n\t\t\t\tslotWidth -= rightPos - rightBound;\r\n\t\t\t\txy.x = rightBound;\r\n\t\t\t\tlabel.attr({ align: 'right' });\r\n\t\t\t}\r\n\r\n\t\t\tif (labelWidth > slotWidth) {\r\n\t\t\t\ttextWidth = slotWidth;\r\n\t\t\t}\r\n\t\t\r\n\r\n\t\t// Add ellipsis to prevent rotated labels to be clipped against the edge of the chart\r\n\t\t} else if (rotation < 0 && pxPos - factor * labelWidth < leftBound) {\r\n\t\t\ttextWidth = mathRound(pxPos / mathCos(rotation * deg2rad) - leftBound);\r\n\t\t} else if (rotation > 0 && pxPos + factor * labelWidth > rightBound) {\r\n\t\t\ttextWidth = mathRound((chartWidth - pxPos) / mathCos(rotation * deg2rad));\r\n\t\t}\r\n\r\n\t\tif (textWidth) {\r\n\t\t\tlabel.css({\r\n\t\t\t\twidth: textWidth,\r\n\t\t\t\ttextOverflow: 'ellipsis'\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Get the x and y position for ticks and labels\r\n\t */\r\n\tgetPosition: function (horiz, pos, tickmarkOffset, old) {\r\n\t\tvar axis = this.axis,\r\n\t\t\tchart = axis.chart,\r\n\t\t\tcHeight = (old && chart.oldChartHeight) || chart.chartHeight;\r\n\r\n\t\treturn {\r\n\t\t\tx: horiz ?\r\n\t\t\t\taxis.translate(pos + tickmarkOffset, null, null, old) + axis.transB :\r\n\t\t\t\taxis.left + axis.offset + (axis.opposite ? ((old && chart.oldChartWidth) || chart.chartWidth) - axis.right - axis.left : 0),\r\n\r\n\t\t\ty: horiz ?\r\n\t\t\t\tcHeight - axis.bottom + axis.offset - (axis.opposite ? axis.height : 0) :\r\n\t\t\t\tcHeight - axis.translate(pos + tickmarkOffset, null, null, old) - axis.transB\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Get the x, y position of the tick label\r\n\t */\r\n\tgetLabelPosition: function (x, y, label, horiz, labelOptions, tickmarkOffset, index, step) {\r\n\t\tvar axis = this.axis,\r\n\t\t\ttransA = axis.transA,\r\n\t\t\treversed = axis.reversed,\r\n\t\t\tstaggerLines = axis.staggerLines,\r\n\t\t\trotCorr = axis.tickRotCorr || { x: 0, y: 0 },\r\n\t\t\tyOffset = pick(labelOptions.y, rotCorr.y + (axis.side === 2 ? 8 : -(label.getBBox().height / 2))),\r\n\t\t\tline;\r\n\r\n\t\tx = x + labelOptions.x + rotCorr.x - (tickmarkOffset && horiz ?\r\n\t\t\ttickmarkOffset * transA * (reversed ? -1 : 1) : 0);\r\n\t\ty = y + yOffset - (tickmarkOffset && !horiz ?\r\n\t\t\ttickmarkOffset * transA * (reversed ? 1 : -1) : 0);\r\n\r\n\t\t// Correct for staggered labels\r\n\t\tif (staggerLines) {\r\n\t\t\tline = (index / (step || 1) % staggerLines);\r\n\t\t\ty += line * (axis.labelOffset / staggerLines);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: x,\r\n\t\t\ty: mathRound(y)\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Extendible method to return the path of the marker\r\n\t */\r\n\tgetMarkPath: function (x, y, tickLength, tickWidth, horiz, renderer) {\r\n\t\treturn renderer.crispLine([\r\n\t\t\t\tM,\r\n\t\t\t\tx,\r\n\t\t\t\ty,\r\n\t\t\t\tL,\r\n\t\t\t\tx + (horiz ? 0 : -tickLength),\r\n\t\t\t\ty + (horiz ? tickLength : 0)\r\n\t\t\t], tickWidth);\r\n\t},\r\n\r\n\t/**\r\n\t * Put everything in place\r\n\t *\r\n\t * @param index {Number}\r\n\t * @param old {Boolean} Use old coordinates to prepare an animation into new position\r\n\t */\r\n\trender: function (index, old, opacity) {\r\n\t\tvar tick = this,\r\n\t\t\taxis = tick.axis,\r\n\t\t\toptions = axis.options,\r\n\t\t\tchart = axis.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\thoriz = axis.horiz,\r\n\t\t\ttype = tick.type,\r\n\t\t\tlabel = tick.label,\r\n\t\t\tpos = tick.pos,\r\n\t\t\tlabelOptions = options.labels,\r\n\t\t\tgridLine = tick.gridLine,\r\n\t\t\tgridPrefix = type ? type + 'Grid' : 'grid',\r\n\t\t\ttickPrefix = type ? type + 'Tick' : 'tick',\r\n\t\t\tgridLineWidth = options[gridPrefix + 'LineWidth'],\r\n\t\t\tgridLineColor = options[gridPrefix + 'LineColor'],\r\n\t\t\tdashStyle = options[gridPrefix + 'LineDashStyle'],\r\n\t\t\ttickLength = options[tickPrefix + 'Length'],\r\n\t\t\ttickWidth = options[tickPrefix + 'Width'] || 0,\r\n\t\t\ttickColor = options[tickPrefix + 'Color'],\r\n\t\t\ttickPosition = options[tickPrefix + 'Position'],\r\n\t\t\tgridLinePath,\r\n\t\t\tmark = tick.mark,\r\n\t\t\tmarkPath,\r\n\t\t\tstep = /*axis.labelStep || */labelOptions.step,\r\n\t\t\tattribs,\r\n\t\t\tshow = true,\r\n\t\t\ttickmarkOffset = axis.tickmarkOffset,\r\n\t\t\txy = tick.getPosition(horiz, pos, tickmarkOffset, old),\r\n\t\t\tx = xy.x,\r\n\t\t\ty = xy.y,\r\n\t\t\treverseCrisp = ((horiz && x === axis.pos + axis.len) || (!horiz && y === axis.pos)) ? -1 : 1; // #1480, #1687\r\n\r\n\t\topacity = pick(opacity, 1);\r\n\t\tthis.isActive = true;\r\n\r\n\t\t// create the grid line\r\n\t\tif (gridLineWidth) {\r\n\t\t\tgridLinePath = axis.getPlotLinePath(pos + tickmarkOffset, gridLineWidth * reverseCrisp, old, true);\r\n\r\n\t\t\tif (gridLine === UNDEFINED) {\r\n\t\t\t\tattribs = {\r\n\t\t\t\t\tstroke: gridLineColor,\r\n\t\t\t\t\t'stroke-width': gridLineWidth\r\n\t\t\t\t};\r\n\t\t\t\tif (dashStyle) {\r\n\t\t\t\t\tattribs.dashstyle = dashStyle;\r\n\t\t\t\t}\r\n\t\t\t\tif (!type) {\r\n\t\t\t\t\tattribs.zIndex = 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (old) {\r\n\t\t\t\t\tattribs.opacity = 0;\r\n\t\t\t\t}\r\n\t\t\t\ttick.gridLine = gridLine =\r\n\t\t\t\t\tgridLineWidth ?\r\n\t\t\t\t\t\trenderer.path(gridLinePath)\r\n\t\t\t\t\t\t\t.attr(attribs).add(axis.gridGroup) :\r\n\t\t\t\t\t\tnull;\r\n\t\t\t}\r\n\r\n\t\t\t// If the parameter 'old' is set, the current call will be followed\r\n\t\t\t// by another call, therefore do not do any animations this time\r\n\t\t\tif (!old && gridLine && gridLinePath) {\r\n\t\t\t\tgridLine[tick.isNew ? 'attr' : 'animate']({\r\n\t\t\t\t\td: gridLinePath,\r\n\t\t\t\t\topacity: opacity\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// create the tick mark\r\n\t\tif (tickWidth && tickLength) {\r\n\r\n\t\t\t// negate the length\r\n\t\t\tif (tickPosition === 'inside') {\r\n\t\t\t\ttickLength = -tickLength;\r\n\t\t\t}\r\n\t\t\tif (axis.opposite) {\r\n\t\t\t\ttickLength = -tickLength;\r\n\t\t\t}\r\n\r\n\t\t\tmarkPath = tick.getMarkPath(x, y, tickLength, tickWidth * reverseCrisp, horiz, renderer);\r\n\t\t\tif (mark) { // updating\r\n\t\t\t\tmark.animate({\r\n\t\t\t\t\td: markPath,\r\n\t\t\t\t\topacity: opacity\r\n\t\t\t\t});\r\n\t\t\t} else { // first time\r\n\t\t\t\ttick.mark = renderer.path(\r\n\t\t\t\t\tmarkPath\r\n\t\t\t\t).attr({\r\n\t\t\t\t\tstroke: tickColor,\r\n\t\t\t\t\t'stroke-width': tickWidth,\r\n\t\t\t\t\topacity: opacity\r\n\t\t\t\t}).add(axis.axisGroup);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// the label is created on init - now move it into place\r\n\t\tif (label && !isNaN(x)) {\r\n\t\t\tlabel.xy = xy = tick.getLabelPosition(x, y, label, horiz, labelOptions, tickmarkOffset, index, step);\r\n\r\n\t\t\t// Apply show first and show last. If the tick is both first and last, it is\r\n\t\t\t// a single centered tick, in which case we show the label anyway (#2100).\r\n\t\t\tif ((tick.isFirst && !tick.isLast && !pick(options.showFirstLabel, 1)) ||\r\n\t\t\t\t\t(tick.isLast && !tick.isFirst && !pick(options.showLastLabel, 1))) {\r\n\t\t\t\tshow = false;\r\n\r\n\t\t\t// Handle label overflow and show or hide accordingly\r\n\t\t\t} else if (horiz && !axis.isRadial && !labelOptions.step && !labelOptions.rotation && !old && opacity !== 0) {\r\n\t\t\t\ttick.handleOverflow(xy);\r\n\t\t\t}\r\n\r\n\t\t\t// apply step\r\n\t\t\tif (step && index % step) {\r\n\t\t\t\t// show those indices dividable by step\r\n\t\t\t\tshow = false;\r\n\t\t\t}\r\n\r\n\t\t\t// Set the new position, and show or hide\r\n\t\t\tif (show && !isNaN(xy.y)) {\r\n\t\t\t\txy.opacity = opacity;\r\n\t\t\t\tlabel[tick.isNew ? 'attr' : 'animate'](xy);\r\n\t\t\t\ttick.isNew = false;\r\n\t\t\t} else {\r\n\t\t\t\tlabel.attr('y', -9999); // #1338\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Destructor for the tick prototype\r\n\t */\r\n\tdestroy: function () {\r\n\t\tdestroyObjectProperties(this, this.axis);\r\n\t}\r\n};\r\n\r\n/**\r\n * The object wrapper for plot lines and plot bands\r\n * @param {Object} options\r\n */\r\nHighcharts.PlotLineOrBand = function (axis, options) {\r\n\tthis.axis = axis;\r\n\r\n\tif (options) {\r\n\t\tthis.options = options;\r\n\t\tthis.id = options.id;\r\n\t}\r\n};\r\n\r\nHighcharts.PlotLineOrBand.prototype = {\r\n\t\r\n\t/**\r\n\t * Render the plot line or plot band. If it is already existing,\r\n\t * move it.\r\n\t */\r\n\trender: function () {\r\n\t\tvar plotLine = this,\r\n\t\t\taxis = plotLine.axis,\r\n\t\t\thoriz = axis.horiz,\r\n\t\t\toptions = plotLine.options,\r\n\t\t\toptionsLabel = options.label,\r\n\t\t\tlabel = plotLine.label,\r\n\t\t\twidth = options.width,\r\n\t\t\tto = options.to,\r\n\t\t\tfrom = options.from,\r\n\t\t\tisBand = defined(from) && defined(to),\r\n\t\t\tvalue = options.value,\r\n\t\t\tdashStyle = options.dashStyle,\r\n\t\t\tsvgElem = plotLine.svgElem,\r\n\t\t\tpath = [],\r\n\t\t\taddEvent,\r\n\t\t\teventType,\r\n\t\t\txs,\r\n\t\t\tys,\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\tcolor = options.color,\r\n\t\t\tzIndex = options.zIndex,\r\n\t\t\tevents = options.events,\r\n\t\t\tattribs = {},\r\n\t\t\trenderer = axis.chart.renderer;\r\n\r\n\t\t// logarithmic conversion\r\n\t\tif (axis.isLog) {\r\n\t\t\tfrom = log2lin(from);\r\n\t\t\tto = log2lin(to);\r\n\t\t\tvalue = log2lin(value);\r\n\t\t}\r\n\r\n\t\t// plot line\r\n\t\tif (width) {\r\n\t\t\tpath = axis.getPlotLinePath(value, width);\r\n\t\t\tattribs = {\r\n\t\t\t\tstroke: color,\r\n\t\t\t\t'stroke-width': width\r\n\t\t\t};\r\n\t\t\tif (dashStyle) {\r\n\t\t\t\tattribs.dashstyle = dashStyle;\r\n\t\t\t}\r\n\t\t} else if (isBand) { // plot band\r\n\r\n\t\t\tpath = axis.getPlotBandPath(from, to, options);\r\n\t\t\tif (color) {\r\n\t\t\t\tattribs.fill = color;\r\n\t\t\t}\r\n\t\t\tif (options.borderWidth) {\r\n\t\t\t\tattribs.stroke = options.borderColor;\r\n\t\t\t\tattribs['stroke-width'] = options.borderWidth;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// zIndex\r\n\t\tif (defined(zIndex)) {\r\n\t\t\tattribs.zIndex = zIndex;\r\n\t\t}\r\n\r\n\t\t// common for lines and bands\r\n\t\tif (svgElem) {\r\n\t\t\tif (path) {\r\n\t\t\t\tsvgElem.animate({\r\n\t\t\t\t\td: path\r\n\t\t\t\t}, null, svgElem.onGetPath);\r\n\t\t\t} else {\r\n\t\t\t\tsvgElem.hide();\r\n\t\t\t\tsvgElem.onGetPath = function () {\r\n\t\t\t\t\tsvgElem.show();\r\n\t\t\t\t};\r\n\t\t\t\tif (label) {\r\n\t\t\t\t\tplotLine.label = label = label.destroy();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (path && path.length) {\r\n\t\t\tplotLine.svgElem = svgElem = renderer.path(path)\r\n\t\t\t\t.attr(attribs).add();\r\n\r\n\t\t\t// events\r\n\t\t\tif (events) {\r\n\t\t\t\taddEvent = function (eventType) {\r\n\t\t\t\t\tsvgElem.on(eventType, function (e) {\r\n\t\t\t\t\t\tevents[eventType].apply(plotLine, [e]);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tfor (eventType in events) {\r\n\t\t\t\t\taddEvent(eventType);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// the plot band/line label\r\n\t\tif (optionsLabel && defined(optionsLabel.text) && path && path.length && axis.width > 0 && axis.height > 0) {\r\n\t\t\t// apply defaults\r\n\t\t\toptionsLabel = merge({\r\n\t\t\t\talign: horiz && isBand && 'center',\r\n\t\t\t\tx: horiz ? !isBand && 4 : 10,\r\n\t\t\t\tverticalAlign : !horiz && isBand && 'middle',\r\n\t\t\t\ty: horiz ? isBand ? 16 : 10 : isBand ? 6 : -4,\r\n\t\t\t\trotation: horiz && !isBand && 90\r\n\t\t\t}, optionsLabel);\r\n\r\n\t\t\t// add the SVG element\r\n\t\t\tif (!label) {\r\n\t\t\t\tattribs = {\r\n\t\t\t\t\talign: optionsLabel.textAlign || optionsLabel.align,\r\n\t\t\t\t\trotation: optionsLabel.rotation\r\n\t\t\t\t};\r\n\t\t\t\tif (defined(zIndex)) {\r\n\t\t\t\t\tattribs.zIndex = zIndex;\r\n\t\t\t\t}\r\n\t\t\t\tplotLine.label = label = renderer.text(\r\n\t\t\t\t\t\toptionsLabel.text,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\toptionsLabel.useHTML\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.attr(attribs)\r\n\t\t\t\t\t.css(optionsLabel.style)\r\n\t\t\t\t\t.add();\r\n\t\t\t}\r\n\r\n\t\t\t// get the bounding box and align the label\r\n\t\t\t// #3000 changed to better handle choice between plotband or plotline\r\n\t\t\txs = [path[1], path[4], (isBand ? path[6] : path[1])];\r\n\t\t\tys = [path[2], path[5], (isBand ? path[7] : path[2])];\r\n\t\t\tx = arrayMin(xs);\r\n\t\t\ty = arrayMin(ys);\r\n\r\n\t\t\tlabel.align(optionsLabel, false, {\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\twidth: arrayMax(xs) - x,\r\n\t\t\t\theight: arrayMax(ys) - y\r\n\t\t\t});\r\n\t\t\tlabel.show();\r\n\r\n\t\t} else if (label) { // move out of sight\r\n\t\t\tlabel.hide();\r\n\t\t}\r\n\r\n\t\t// chainable\r\n\t\treturn plotLine;\r\n\t},\r\n\r\n\t/**\r\n\t * Remove the plot line or band\r\n\t */\r\n\tdestroy: function () {\r\n\t\t// remove it from the lookup\r\n\t\terase(this.axis.plotLinesAndBands, this);\r\n\t\t\r\n\t\tdelete this.axis;\r\n\t\tdestroyObjectProperties(this);\r\n\t}\r\n};\r\n\r\n/**\r\n * Object with members for extending the Axis prototype\r\n */\r\n\r\nAxisPlotLineOrBandExtension = {\r\n\r\n\t/**\r\n\t * Create the path for a plot band\r\n\t */ \r\n\tgetPlotBandPath: function (from, to) {\r\n\t\tvar toPath = this.getPlotLinePath(to, null, null, true),\r\n\t\t\tpath = this.getPlotLinePath(from, null, null, true);\r\n\r\n\t\tif (path && toPath && path.toString() !== toPath.toString()) { // #3836\r\n\t\t\tpath.push(\r\n\t\t\t\ttoPath[4],\r\n\t\t\t\ttoPath[5],\r\n\t\t\t\ttoPath[1],\r\n\t\t\t\ttoPath[2]\r\n\t\t\t);\r\n\t\t} else { // outside the axis area\r\n\t\t\tpath = null;\r\n\t\t}\r\n\t\t\r\n\t\treturn path;\r\n\t},\r\n\r\n\taddPlotBand: function (options) {\r\n\t\treturn this.addPlotBandOrLine(options, 'plotBands');\r\n\t},\r\n\t\r\n\taddPlotLine: function (options) {\r\n\t\treturn this.addPlotBandOrLine(options, 'plotLines');\r\n\t},\r\n\r\n\t/**\r\n\t * Add a plot band or plot line after render time\r\n\t *\r\n\t * @param options {Object} The plotBand or plotLine configuration object\r\n\t */\r\n\taddPlotBandOrLine: function (options, coll) {\r\n\t\tvar obj = new Highcharts.PlotLineOrBand(this, options).render(),\r\n\t\t\tuserOptions = this.userOptions;\r\n\r\n\t\tif (obj) { // #2189\r\n\t\t\t// Add it to the user options for exporting and Axis.update\r\n\t\t\tif (coll) {\r\n\t\t\t\tuserOptions[coll] = userOptions[coll] || [];\r\n\t\t\t\tuserOptions[coll].push(options); \r\n\t\t\t}\r\n\t\t\tthis.plotLinesAndBands.push(obj); \r\n\t\t}\r\n\t\t\r\n\t\treturn obj;\r\n\t},\r\n\r\n\t/**\r\n\t * Remove a plot band or plot line from the chart by id\r\n\t * @param {Object} id\r\n\t */\r\n\tremovePlotBandOrLine: function (id) {\r\n\t\tvar plotLinesAndBands = this.plotLinesAndBands,\r\n\t\t\toptions = this.options,\r\n\t\t\tuserOptions = this.userOptions,\r\n\t\t\ti = plotLinesAndBands.length;\r\n\t\twhile (i--) {\r\n\t\t\tif (plotLinesAndBands[i].id === id) {\r\n\t\t\t\tplotLinesAndBands[i].destroy();\r\n\t\t\t}\r\n\t\t}\r\n\t\teach([options.plotLines || [], userOptions.plotLines || [], options.plotBands || [], userOptions.plotBands || []], function (arr) {\r\n\t\t\ti = arr.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (arr[i].id === id) {\r\n\t\t\t\t\terase(arr, arr[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n\r\n/**\r\n * Create a new axis object\r\n * @param {Object} chart\r\n * @param {Object} options\r\n */\r\nvar Axis = Highcharts.Axis = function () {\r\n\tthis.init.apply(this, arguments);\r\n};\r\n\r\nAxis.prototype = {\r\n\r\n\t/**\r\n\t * Default options for the X axis - the Y axis has extended defaults\r\n\t */\r\n\tdefaultOptions: {\r\n\t\t// allowDecimals: null,\r\n\t\t// alternateGridColor: null,\r\n\t\t// categories: [],\r\n\t\tdateTimeLabelFormats: {\r\n\t\t\tmillisecond: '%H:%M:%S.%L',\r\n\t\t\tsecond: '%H:%M:%S',\r\n\t\t\tminute: '%H:%M',\r\n\t\t\thour: '%H:%M',\r\n\t\t\tday: '%e. %b',\r\n\t\t\tweek: '%e. %b',\r\n\t\t\tmonth: '%b \\'%y',\r\n\t\t\tyear: '%Y'\r\n\t\t},\r\n\t\tendOnTick: false,\r\n\t\tgridLineColor: '#D8D8D8',\r\n\t\t// gridLineDashStyle: 'solid',\r\n\t\t// gridLineWidth: 0,\r\n\t\t// reversed: false,\r\n\r\n\t\tlabels: {\r\n\t\t\tenabled: true,\r\n\t\t\t// rotation: 0,\r\n\t\t\t// align: 'center',\r\n\t\t\t// step: null,\r\n\t\t\tstyle: {\r\n\t\t\t\tcolor: '#606060',\r\n\t\t\t\tcursor: 'default',\r\n\t\t\t\tfontSize: '11px'\r\n\t\t\t},\r\n\t\t\tx: 0,\r\n\t\t\ty: 15\r\n\t\t\t/*formatter: function () {\r\n\t\t\t\treturn this.value;\r\n\t\t\t},*/\r\n\t\t},\r\n\t\tlineColor: '#C0D0E0',\r\n\t\tlineWidth: 1,\r\n\t\t//linkedTo: null,\r\n\t\t//max: undefined,\r\n\t\t//min: undefined,\r\n\t\tminPadding: 0.01,\r\n\t\tmaxPadding: 0.01,\r\n\t\t//minRange: null,\r\n\t\tminorGridLineColor: '#E0E0E0',\r\n\t\t// minorGridLineDashStyle: null,\r\n\t\tminorGridLineWidth: 1,\r\n\t\tminorTickColor: '#A0A0A0',\r\n\t\t//minorTickInterval: null,\r\n\t\tminorTickLength: 2,\r\n\t\tminorTickPosition: 'outside', // inside or outside\r\n\t\t//minorTickWidth: 0,\r\n\t\t//opposite: false,\r\n\t\t//offset: 0,\r\n\t\t//plotBands: [{\r\n\t\t//\tevents: {},\r\n\t\t//\tzIndex: 1,\r\n\t\t//\tlabels: { align, x, verticalAlign, y, style, rotation, textAlign }\r\n\t\t//}],\r\n\t\t//plotLines: [{\r\n\t\t//\tevents: {}\r\n\t\t//  dashStyle: {}\r\n\t\t//\tzIndex:\r\n\t\t//\tlabels: { align, x, verticalAlign, y, style, rotation, textAlign }\r\n\t\t//}],\r\n\t\t//reversed: false,\r\n\t\t// showFirstLabel: true,\r\n\t\t// showLastLabel: true,\r\n\t\tstartOfWeek: 1,\r\n\t\tstartOnTick: false,\r\n\t\ttickColor: '#C0D0E0',\r\n\t\t//tickInterval: null,\r\n\t\ttickLength: 10,\r\n\t\ttickmarkPlacement: 'between', // on or between\r\n\t\ttickPixelInterval: 100,\r\n\t\ttickPosition: 'outside',\r\n\t\ttickWidth: 1,\r\n\t\ttitle: {\r\n\t\t\t//text: null,\r\n\t\t\talign: 'middle', // low, middle or high\r\n\t\t\t//margin: 0 for horizontal, 10 for vertical axes,\r\n\t\t\t//rotation: 0,\r\n\t\t\t//side: 'outside',\r\n\t\t\tstyle: {\r\n\t\t\t\tcolor: '#707070'\r\n\t\t\t}\r\n\t\t\t//x: 0,\r\n\t\t\t//y: 0\r\n\t\t},\r\n\t\ttype: 'linear' // linear, logarithmic or datetime\r\n\t},\r\n\r\n\t/**\r\n\t * This options set extends the defaultOptions for Y axes\r\n\t */\r\n\tdefaultYAxisOptions: {\r\n\t\tendOnTick: true,\r\n\t\tgridLineWidth: 1,\r\n\t\ttickPixelInterval: 72,\r\n\t\tshowLastLabel: true,\r\n\t\tlabels: {\r\n\t\t\tx: -8,\r\n\t\t\ty: 3\r\n\t\t},\r\n\t\tlineWidth: 0,\r\n\t\tmaxPadding: 0.05,\r\n\t\tminPadding: 0.05,\r\n\t\tstartOnTick: true,\r\n\t\ttickWidth: 0,\r\n\t\ttitle: {\r\n\t\t\trotation: 270,\r\n\t\t\ttext: 'Values'\r\n\t\t},\r\n\t\tstackLabels: {\r\n\t\t\tenabled: false,\r\n\t\t\t//align: dynamic,\r\n\t\t\t//y: dynamic,\r\n\t\t\t//x: dynamic,\r\n\t\t\t//verticalAlign: dynamic,\r\n\t\t\t//textAlign: dynamic,\r\n\t\t\t//rotation: 0,\r\n\t\t\tformatter: function () {\r\n\t\t\t\treturn Highcharts.numberFormat(this.total, -1);\r\n\t\t\t},\r\n\t\t\tstyle: merge(defaultPlotOptions.line.dataLabels.style, { color: '#000000' })\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * These options extend the defaultOptions for left axes\r\n\t */\r\n\tdefaultLeftAxisOptions: {\r\n\t\tlabels: {\r\n\t\t\tx: -15,\r\n\t\t\ty: null\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\trotation: 270\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * These options extend the defaultOptions for right axes\r\n\t */\r\n\tdefaultRightAxisOptions: {\r\n\t\tlabels: {\r\n\t\t\tx: 15,\r\n\t\t\ty: null\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\trotation: 90\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * These options extend the defaultOptions for bottom axes\r\n\t */\r\n\tdefaultBottomAxisOptions: {\r\n\t\tlabels: {\r\n\t\t\tautoRotation: [-45],\r\n\t\t\tx: 0,\r\n\t\t\ty: null // based on font size\r\n\t\t\t// overflow: undefined,\r\n\t\t\t// staggerLines: null\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\trotation: 0\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * These options extend the defaultOptions for top axes\r\n\t */\r\n\tdefaultTopAxisOptions: {\r\n\t\tlabels: {\r\n\t\t\tautoRotation: [-45],\r\n\t\t\tx: 0,\r\n\t\t\ty: -15\r\n\t\t\t// overflow: undefined\r\n\t\t\t// staggerLines: null\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\trotation: 0\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Initialize the axis\r\n\t */\r\n\tinit: function (chart, userOptions) {\r\n\r\n\r\n\t\tvar isXAxis = userOptions.isX,\r\n\t\t\taxis = this;\r\n\r\n\t\t// Flag, is the axis horizontal\r\n\t\taxis.horiz = chart.inverted ? !isXAxis : isXAxis;\r\n\r\n\t\t// Flag, isXAxis\r\n\t\taxis.isXAxis = isXAxis;\r\n\t\taxis.coll = isXAxis ? 'xAxis' : 'yAxis';\r\n\r\n\t\taxis.opposite = userOptions.opposite; // needed in setOptions\r\n\t\taxis.side = userOptions.side || (axis.horiz ?\r\n\t\t\t\t(axis.opposite ? 0 : 2) : // top : bottom\r\n\t\t\t\t(axis.opposite ? 1 : 3));  // right : left\r\n\r\n\t\taxis.setOptions(userOptions);\r\n\r\n\r\n\t\tvar options = this.options,\r\n\t\t\ttype = options.type,\r\n\t\t\tisDatetimeAxis = type === 'datetime';\r\n\r\n\t\taxis.labelFormatter = options.labels.formatter || axis.defaultLabelFormatter; // can be overwritten by dynamic format\r\n\r\n\r\n\t\t// Flag, stagger lines or not\r\n\t\taxis.userOptions = userOptions;\r\n\r\n\t\t//axis.axisTitleMargin = UNDEFINED,// = options.title.margin,\r\n\t\taxis.minPixelPadding = 0;\r\n\t\t//axis.ignoreMinPadding = UNDEFINED; // can be set to true by a column or bar series\r\n\t\t//axis.ignoreMaxPadding = UNDEFINED;\r\n\r\n\t\taxis.chart = chart;\r\n\t\taxis.reversed = options.reversed;\r\n\t\taxis.zoomEnabled = options.zoomEnabled !== false;\r\n\r\n\t\t// Initial categories\r\n\t\taxis.categories = options.categories || type === 'category';\r\n\t\taxis.names = axis.names || []; // Preserve on update (#3830)\r\n\r\n\t\t// Elements\r\n\t\t//axis.axisGroup = UNDEFINED;\r\n\t\t//axis.gridGroup = UNDEFINED;\r\n\t\t//axis.axisTitle = UNDEFINED;\r\n\t\t//axis.axisLine = UNDEFINED;\r\n\r\n\t\t// Shorthand types\r\n\t\taxis.isLog = type === 'logarithmic';\r\n\t\taxis.isDatetimeAxis = isDatetimeAxis;\r\n\r\n\t\t// Flag, if axis is linked to another axis\r\n\t\taxis.isLinked = defined(options.linkedTo);\r\n\t\t// Linked axis.\r\n\t\t//axis.linkedParent = UNDEFINED;\r\n\r\n\t\t// Tick positions\r\n\t\t//axis.tickPositions = UNDEFINED; // array containing predefined positions\r\n\t\t// Tick intervals\r\n\t\t//axis.tickInterval = UNDEFINED;\r\n\t\t//axis.minorTickInterval = UNDEFINED;\r\n\r\n\t\t\r\n\t\t// Major ticks\r\n\t\taxis.ticks = {};\r\n\t\taxis.labelEdge = [];\r\n\t\t// Minor ticks\r\n\t\taxis.minorTicks = {};\r\n\r\n\t\t// List of plotLines/Bands\r\n\t\taxis.plotLinesAndBands = [];\r\n\r\n\t\t// Alternate bands\r\n\t\taxis.alternateBands = {};\r\n\r\n\t\t// Axis metrics\r\n\t\t//axis.left = UNDEFINED;\r\n\t\t//axis.top = UNDEFINED;\r\n\t\t//axis.width = UNDEFINED;\r\n\t\t//axis.height = UNDEFINED;\r\n\t\t//axis.bottom = UNDEFINED;\r\n\t\t//axis.right = UNDEFINED;\r\n\t\t//axis.transA = UNDEFINED;\r\n\t\t//axis.transB = UNDEFINED;\r\n\t\t//axis.oldTransA = UNDEFINED;\r\n\t\taxis.len = 0;\r\n\t\t//axis.oldMin = UNDEFINED;\r\n\t\t//axis.oldMax = UNDEFINED;\r\n\t\t//axis.oldUserMin = UNDEFINED;\r\n\t\t//axis.oldUserMax = UNDEFINED;\r\n\t\t//axis.oldAxisLength = UNDEFINED;\r\n\t\taxis.minRange = axis.userMinRange = options.minRange || options.maxZoom;\r\n\t\taxis.range = options.range;\r\n\t\taxis.offset = options.offset || 0;\r\n\r\n\r\n\t\t// Dictionary for stacks\r\n\t\taxis.stacks = {};\r\n\t\taxis.oldStacks = {};\r\n\t\t\r\n\t\t// Min and max in the data\r\n\t\t//axis.dataMin = UNDEFINED,\r\n\t\t//axis.dataMax = UNDEFINED,\r\n\r\n\t\t// The axis range\r\n\t\taxis.max = null;\r\n\t\taxis.min = null;\r\n\r\n\t\t// User set min and max\r\n\t\t//axis.userMin = UNDEFINED,\r\n\t\t//axis.userMax = UNDEFINED,\r\n\r\n\t\t// Crosshair options\r\n\t\taxis.crosshair = pick(options.crosshair, splat(chart.options.tooltip.crosshairs)[isXAxis ? 0 : 1], false);\r\n\t\t// Run Axis\r\n\r\n\t\tvar eventType,\r\n\t\t\tevents = axis.options.events;\r\n\r\n\t\t// Register\r\n\t\tif (inArray(axis, chart.axes) === -1) { // don't add it again on Axis.update()\r\n\t\t\tif (isXAxis && !this.isColorAxis) { // #2713\r\n\t\t\t\tchart.axes.splice(chart.xAxis.length, 0, axis);\r\n\t\t\t} else {\r\n\t\t\t\tchart.axes.push(axis);\r\n\t\t\t}\r\n\r\n\t\t\tchart[axis.coll].push(axis);\r\n\t\t}\r\n\r\n\t\taxis.series = axis.series || []; // populated by Series\r\n\r\n\t\t// inverted charts have reversed xAxes as default\r\n\t\tif (chart.inverted && isXAxis && axis.reversed === UNDEFINED) {\r\n\t\t\taxis.reversed = true;\r\n\t\t}\r\n\r\n\t\taxis.removePlotBand = axis.removePlotBandOrLine;\r\n\t\taxis.removePlotLine = axis.removePlotBandOrLine;\r\n\r\n\r\n\t\t// register event listeners\r\n\t\tfor (eventType in events) {\r\n\t\t\taddEvent(axis, eventType, events[eventType]);\r\n\t\t}\r\n\r\n\t\t// extend logarithmic axis\r\n\t\tif (axis.isLog) {\r\n\t\t\taxis.val2lin = log2lin;\r\n\t\t\taxis.lin2val = lin2log;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Merge and set options\r\n\t */\r\n\tsetOptions: function (userOptions) {\r\n\t\tthis.options = merge(\r\n\t\t\tthis.defaultOptions,\r\n\t\t\tthis.isXAxis ? {} : this.defaultYAxisOptions,\r\n\t\t\t[this.defaultTopAxisOptions, this.defaultRightAxisOptions,\r\n\t\t\t\tthis.defaultBottomAxisOptions, this.defaultLeftAxisOptions][this.side],\r\n\t\t\tmerge(\r\n\t\t\t\tdefaultOptions[this.coll], // if set in setOptions (#1053)\r\n\t\t\t\tuserOptions\r\n\t\t\t)\r\n\t\t);\r\n\t},\r\n\r\n\t/**\r\n\t * The default label formatter. The context is a special config object for the label.\r\n\t */\r\n\tdefaultLabelFormatter: function () {\r\n\t\tvar axis = this.axis,\r\n\t\t\tvalue = this.value,\r\n\t\t\tcategories = axis.categories,\r\n\t\t\tdateTimeLabelFormat = this.dateTimeLabelFormat,\r\n\t\t\tnumericSymbols = defaultOptions.lang.numericSymbols,\r\n\t\t\ti = numericSymbols && numericSymbols.length,\r\n\t\t\tmulti,\r\n\t\t\tret,\r\n\t\t\tformatOption = axis.options.labels.format,\r\n\r\n\t\t\t// make sure the same symbol is added for all labels on a linear axis\r\n\t\t\tnumericSymbolDetector = axis.isLog ? value : axis.tickInterval;\r\n\r\n\t\tif (formatOption) {\r\n\t\t\tret = format(formatOption, this);\r\n\r\n\t\t} else if (categories) {\r\n\t\t\tret = value;\r\n\r\n\t\t} else if (dateTimeLabelFormat) { // datetime axis\r\n\t\t\tret = dateFormat(dateTimeLabelFormat, value);\r\n\r\n\t\t} else if (i && numericSymbolDetector >= 1000) {\r\n\t\t\t// Decide whether we should add a numeric symbol like k (thousands) or M (millions).\r\n\t\t\t// If we are to enable this in tooltip or other places as well, we can move this\r\n\t\t\t// logic to the numberFormatter and enable it by a parameter.\r\n\t\t\twhile (i-- && ret === UNDEFINED) {\r\n\t\t\t\tmulti = Math.pow(1000, i + 1);\r\n\t\t\t\tif (numericSymbolDetector >= multi && numericSymbols[i] !== null) {\r\n\t\t\t\t\tret = Highcharts.numberFormat(value / multi, -1) + numericSymbols[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (ret === UNDEFINED) {\r\n\t\t\tif (mathAbs(value) >= 10000) { // add thousands separators\r\n\t\t\t\tret = Highcharts.numberFormat(value, 0);\r\n\r\n\t\t\t} else { // small numbers\r\n\t\t\t\tret = Highcharts.numberFormat(value, -1, UNDEFINED, ''); // #2466\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t/**\r\n\t * Get the minimum and maximum for the series of each axis\r\n\t */\r\n\tgetSeriesExtremes: function () {\r\n\t\tvar axis = this,\r\n\t\t\tchart = axis.chart;\r\n\r\n\t\taxis.hasVisibleSeries = false;\r\n\r\n\t\t// Reset properties in case we're redrawing (#3353)\r\n\t\taxis.dataMin = axis.dataMax = axis.ignoreMinPadding = axis.ignoreMaxPadding = null;\r\n\t\t\r\n\t\tif (axis.buildStacks) {\r\n\t\t\taxis.buildStacks();\r\n\t\t}\r\n\r\n\t\t// loop through this axis' series\r\n\t\teach(axis.series, function (series) {\r\n\r\n\t\t\tif (series.visible || !chart.options.chart.ignoreHiddenSeries) {\r\n\r\n\t\t\t\tvar seriesOptions = series.options,\r\n\t\t\t\t\txData,\r\n\t\t\t\t\tthreshold = seriesOptions.threshold,\r\n\t\t\t\t\tseriesDataMin,\r\n\t\t\t\t\tseriesDataMax;\r\n\r\n\t\t\t\taxis.hasVisibleSeries = true;\r\n\r\n\t\t\t\t// Validate threshold in logarithmic axes\r\n\t\t\t\tif (axis.isLog && threshold <= 0) {\r\n\t\t\t\t\tthreshold = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Get dataMin and dataMax for X axes\r\n\t\t\t\tif (axis.isXAxis) {\r\n\t\t\t\t\txData = series.xData;\r\n\t\t\t\t\tif (xData.length) {\r\n\t\t\t\t\t\taxis.dataMin = mathMin(pick(axis.dataMin, xData[0]), arrayMin(xData));\r\n\t\t\t\t\t\taxis.dataMax = mathMax(pick(axis.dataMax, xData[0]), arrayMax(xData));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t// Get dataMin and dataMax for Y axes, as well as handle stacking and processed data\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Get this particular series extremes\r\n\t\t\t\t\tseries.getExtremes();\r\n\t\t\t\t\tseriesDataMax = series.dataMax;\r\n\t\t\t\t\tseriesDataMin = series.dataMin;\r\n\r\n\t\t\t\t\t// Get the dataMin and dataMax so far. If percentage is used, the min and max are\r\n\t\t\t\t\t// always 0 and 100. If seriesDataMin and seriesDataMax is null, then series\r\n\t\t\t\t\t// doesn't have active y data, we continue with nulls\r\n\t\t\t\t\tif (defined(seriesDataMin) && defined(seriesDataMax)) {\r\n\t\t\t\t\t\taxis.dataMin = mathMin(pick(axis.dataMin, seriesDataMin), seriesDataMin);\r\n\t\t\t\t\t\taxis.dataMax = mathMax(pick(axis.dataMax, seriesDataMax), seriesDataMax);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Adjust to threshold\r\n\t\t\t\t\tif (defined(threshold)) {\r\n\t\t\t\t\t\tif (axis.dataMin >= threshold) {\r\n\t\t\t\t\t\t\taxis.dataMin = threshold;\r\n\t\t\t\t\t\t\taxis.ignoreMinPadding = true;\r\n\t\t\t\t\t\t} else if (axis.dataMax < threshold) {\r\n\t\t\t\t\t\t\taxis.dataMax = threshold;\r\n\t\t\t\t\t\t\taxis.ignoreMaxPadding = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Translate from axis value to pixel position on the chart, or back\r\n\t *\r\n\t */\r\n\ttranslate: function (val, backwards, cvsCoord, old, handleLog, pointPlacement) {\r\n\t\tvar axis = this,\r\n\t\t\tsign = 1,\r\n\t\t\tcvsOffset = 0,\r\n\t\t\tlocalA = old ? axis.oldTransA : axis.transA,\r\n\t\t\tlocalMin = old ? axis.oldMin : axis.min,\r\n\t\t\treturnValue,\r\n\t\t\tminPixelPadding = axis.minPixelPadding,\r\n\t\t\tdoPostTranslate = (axis.doPostTranslate || (axis.isLog && handleLog)) && axis.lin2val;\r\n\r\n\t\tif (!localA) {\r\n\t\t\tlocalA = axis.transA;\r\n\t\t}\r\n\r\n\t\t// In vertical axes, the canvas coordinates start from 0 at the top like in\r\n\t\t// SVG.\r\n\t\tif (cvsCoord) {\r\n\t\t\tsign *= -1; // canvas coordinates inverts the value\r\n\t\t\tcvsOffset = axis.len;\r\n\t\t}\r\n\r\n\t\t// Handle reversed axis\r\n\t\tif (axis.reversed) {\r\n\t\t\tsign *= -1;\r\n\t\t\tcvsOffset -= sign * (axis.sector || axis.len);\r\n\t\t}\r\n\r\n\t\t// From pixels to value\r\n\t\tif (backwards) { // reverse translation\r\n\r\n\t\t\tval = val * sign + cvsOffset;\r\n\t\t\tval -= minPixelPadding;\r\n\t\t\treturnValue = val / localA + localMin; // from chart pixel to value\r\n\t\t\tif (doPostTranslate) { // log and ordinal axes\r\n\t\t\t\treturnValue = axis.lin2val(returnValue);\r\n\t\t\t}\r\n\r\n\t\t// From value to pixels\r\n\t\t} else {\r\n\t\t\tif (doPostTranslate) { // log and ordinal axes\r\n\t\t\t\tval = axis.val2lin(val);\r\n\t\t\t}\r\n\t\t\tif (pointPlacement === 'between') {\r\n\t\t\t\tpointPlacement = 0.5;\r\n\t\t\t}\r\n\t\t\treturnValue = sign * (val - localMin) * localA + cvsOffset + (sign * minPixelPadding) +\r\n\t\t\t\t(isNumber(pointPlacement) ? localA * pointPlacement * axis.pointRange : 0);\r\n\t\t}\r\n\r\n\t\treturn returnValue;\r\n\t},\r\n\r\n\t/**\r\n\t * Utility method to translate an axis value to pixel position.\r\n\t * @param {Number} value A value in terms of axis units\r\n\t * @param {Boolean} paneCoordinates Whether to return the pixel coordinate relative to the chart\r\n\t *        or just the axis/pane itself.\r\n\t */\r\n\ttoPixels: function (value, paneCoordinates) {\r\n\t\treturn this.translate(value, false, !this.horiz, null, true) + (paneCoordinates ? 0 : this.pos);\r\n\t},\r\n\r\n\t/*\r\n\t * Utility method to translate a pixel position in to an axis value\r\n\t * @param {Number} pixel The pixel value coordinate\r\n\t * @param {Boolean} paneCoordiantes Whether the input pixel is relative to the chart or just the\r\n\t *        axis/pane itself.\r\n\t */\r\n\ttoValue: function (pixel, paneCoordinates) {\r\n\t\treturn this.translate(pixel - (paneCoordinates ? 0 : this.pos), true, !this.horiz, null, true);\r\n\t},\r\n\r\n\t/**\r\n\t * Create the path for a plot line that goes from the given value on\r\n\t * this axis, across the plot to the opposite side\r\n\t * @param {Number} value\r\n\t * @param {Number} lineWidth Used for calculation crisp line\r\n\t * @param {Number] old Use old coordinates (for resizing and rescaling)\r\n\t */\r\n\tgetPlotLinePath: function (value, lineWidth, old, force, translatedValue) {\r\n\t\tvar axis = this,\r\n\t\t\tchart = axis.chart,\r\n\t\t\taxisLeft = axis.left,\r\n\t\t\taxisTop = axis.top,\r\n\t\t\tx1,\r\n\t\t\ty1,\r\n\t\t\tx2,\r\n\t\t\ty2,\r\n\t\t\tcHeight = (old && chart.oldChartHeight) || chart.chartHeight,\r\n\t\t\tcWidth = (old && chart.oldChartWidth) || chart.chartWidth,\r\n\t\t\tskip,\r\n\t\t\ttransB = axis.transB,\r\n\t\t\t/**\r\n\t\t\t * Check if x is between a and b. If not, either move to a/b or skip, \r\n\t\t\t * depending on the force parameter.\r\n\t\t\t */\r\n\t\t\tbetween = function (x, a, b) {\r\n\t\t\t\tif (x < a || x > b) {\r\n\t\t\t\t\tif (force) {\r\n\t\t\t\t\t\tx = mathMin(mathMax(a, x), b);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tskip = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn x;\r\n\t\t\t};\r\n\r\n\t\ttranslatedValue = pick(translatedValue, axis.translate(value, null, null, old));\r\n\t\tx1 = x2 = mathRound(translatedValue + transB);\r\n\t\ty1 = y2 = mathRound(cHeight - translatedValue - transB);\r\n\r\n\t\tif (isNaN(translatedValue)) { // no min or max\r\n\t\t\tskip = true;\r\n\r\n\t\t} else if (axis.horiz) {\r\n\t\t\ty1 = axisTop;\r\n\t\t\ty2 = cHeight - axis.bottom;\r\n\t\t\tx1 = x2 = between(x1, axisLeft, axisLeft + axis.width);\r\n\t\t} else {\r\n\t\t\tx1 = axisLeft;\r\n\t\t\tx2 = cWidth - axis.right;\r\n\t\t\ty1 = y2 = between(y1, axisTop, axisTop + axis.height);\r\n\t\t}\r\n\t\treturn skip && !force ?\r\n\t\t\tnull :\r\n\t\t\tchart.renderer.crispLine([M, x1, y1, L, x2, y2], lineWidth || 1);\r\n\t},\r\n\r\n\t/**\r\n\t * Set the tick positions of a linear axis to round values like whole tens or every five.\r\n\t */\r\n\tgetLinearTickPositions: function (tickInterval, min, max) {\r\n\t\tvar pos,\r\n\t\t\tlastPos,\r\n\t\t\troundedMin = correctFloat(mathFloor(min / tickInterval) * tickInterval),\r\n\t\t\troundedMax = correctFloat(mathCeil(max / tickInterval) * tickInterval),\r\n\t\t\ttickPositions = [];\r\n\r\n\t\t// For single points, add a tick regardless of the relative position (#2662)\r\n\t\tif (min === max && isNumber(min)) {\r\n\t\t\treturn [min];\r\n\t\t}\r\n\r\n\t\t// Populate the intermediate values\r\n\t\tpos = roundedMin;\r\n\t\twhile (pos <= roundedMax) {\r\n\r\n\t\t\t// Place the tick on the rounded value\r\n\t\t\ttickPositions.push(pos);\r\n\r\n\t\t\t// Always add the raw tickInterval, not the corrected one.\r\n\t\t\tpos = correctFloat(pos + tickInterval);\r\n\r\n\t\t\t// If the interval is not big enough in the current min - max range to actually increase\r\n\t\t\t// the loop variable, we need to break out to prevent endless loop. Issue #619\r\n\t\t\tif (pos === lastPos) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// Record the last value\r\n\t\t\tlastPos = pos;\r\n\t\t}\r\n\t\treturn tickPositions;\r\n\t},\r\n\r\n\t/**\r\n\t * Return the minor tick positions. For logarithmic axes, reuse the same logic\r\n\t * as for major ticks.\r\n\t */\r\n\tgetMinorTickPositions: function () {\r\n\t\tvar axis = this,\r\n\t\t\toptions = axis.options,\r\n\t\t\ttickPositions = axis.tickPositions,\r\n\t\t\tminorTickInterval = axis.minorTickInterval,\r\n\t\t\tminorTickPositions = [],\r\n\t\t\tpos,\r\n\t\t\ti,\r\n\t\t\tmin = axis.min,\r\n\t\t\tmax = axis.max,\r\n\t\t\trange = max - min,\r\n\t\t\tlen;\r\n\r\n\t\t// If minor ticks get too dense, they are hard to read, and may cause long running script. So we don't draw them.\r\n\t\tif (range && range / minorTickInterval < axis.len / 3) { // #3875\r\n\r\n\t\t\tif (axis.isLog) {\r\n\t\t\t\tlen = tickPositions.length;\r\n\t\t\t\tfor (i = 1; i < len; i++) {\r\n\t\t\t\t\tminorTickPositions = minorTickPositions.concat(\r\n\t\t\t\t\t\taxis.getLogTickPositions(minorTickInterval, tickPositions[i - 1], tickPositions[i], true)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else if (axis.isDatetimeAxis && options.minorTickInterval === 'auto') { // #1314\r\n\t\t\t\tminorTickPositions = minorTickPositions.concat(\r\n\t\t\t\t\taxis.getTimeTicks(\r\n\t\t\t\t\t\taxis.normalizeTimeTickInterval(minorTickInterval),\r\n\t\t\t\t\t\tmin,\r\n\t\t\t\t\t\tmax,\r\n\t\t\t\t\t\toptions.startOfWeek\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tfor (pos = min + (tickPositions[0] - min) % minorTickInterval; pos <= max; pos += minorTickInterval) {\r\n\t\t\t\t\tminorTickPositions.push(pos);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\taxis.trimTicks(minorTickPositions); // #3652 #3743\r\n\t\treturn minorTickPositions;\r\n\t},\r\n\r\n\t/**\r\n\t * Adjust the min and max for the minimum range. Keep in mind that the series data is\r\n\t * not yet processed, so we don't have information on data cropping and grouping, or\r\n\t * updated axis.pointRange or series.pointRange. The data can't be processed until\r\n\t * we have finally established min and max.\r\n\t */\r\n\tadjustForMinRange: function () {\r\n\t\tvar axis = this,\r\n\t\t\toptions = axis.options,\r\n\t\t\tmin = axis.min,\r\n\t\t\tmax = axis.max,\r\n\t\t\tzoomOffset,\r\n\t\t\tspaceAvailable = axis.dataMax - axis.dataMin >= axis.minRange,\r\n\t\t\tclosestDataRange,\r\n\t\t\ti,\r\n\t\t\tdistance,\r\n\t\t\txData,\r\n\t\t\tloopLength,\r\n\t\t\tminArgs,\r\n\t\t\tmaxArgs;\r\n\r\n\t\t// Set the automatic minimum range based on the closest point distance\r\n\t\tif (axis.isXAxis && axis.minRange === UNDEFINED && !axis.isLog) {\r\n\r\n\t\t\tif (defined(options.min) || defined(options.max)) {\r\n\t\t\t\taxis.minRange = null; // don't do this again\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Find the closest distance between raw data points, as opposed to\r\n\t\t\t\t// closestPointRange that applies to processed points (cropped and grouped)\r\n\t\t\t\teach(axis.series, function (series) {\r\n\t\t\t\t\txData = series.xData;\r\n\t\t\t\t\tloopLength = series.xIncrement ? 1 : xData.length - 1;\r\n\t\t\t\t\tfor (i = loopLength; i > 0; i--) {\r\n\t\t\t\t\t\tdistance = xData[i] - xData[i - 1];\r\n\t\t\t\t\t\tif (closestDataRange === UNDEFINED || distance < closestDataRange) {\r\n\t\t\t\t\t\t\tclosestDataRange = distance;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\taxis.minRange = mathMin(closestDataRange * 5, axis.dataMax - axis.dataMin);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// if minRange is exceeded, adjust\r\n\t\tif (max - min < axis.minRange) {\r\n\t\t\tvar minRange = axis.minRange;\r\n\t\t\tzoomOffset = (minRange - max + min) / 2;\r\n\r\n\t\t\t// if min and max options have been set, don't go beyond it\r\n\t\t\tminArgs = [min - zoomOffset, pick(options.min, min - zoomOffset)];\r\n\t\t\tif (spaceAvailable) { // if space is available, stay within the data range\r\n\t\t\t\tminArgs[2] = axis.dataMin;\r\n\t\t\t}\r\n\t\t\tmin = arrayMax(minArgs);\r\n\r\n\t\t\tmaxArgs = [min + minRange, pick(options.max, min + minRange)];\r\n\t\t\tif (spaceAvailable) { // if space is availabe, stay within the data range\r\n\t\t\t\tmaxArgs[2] = axis.dataMax;\r\n\t\t\t}\r\n\r\n\t\t\tmax = arrayMin(maxArgs);\r\n\r\n\t\t\t// now if the max is adjusted, adjust the min back\r\n\t\t\tif (max - min < minRange) {\r\n\t\t\t\tminArgs[0] = max - minRange;\r\n\t\t\t\tminArgs[1] = pick(options.min, max - minRange);\r\n\t\t\t\tmin = arrayMax(minArgs);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Record modified extremes\r\n\t\taxis.min = min;\r\n\t\taxis.max = max;\r\n\t},\r\n\r\n\t/**\r\n\t * Update translation information\r\n\t */\r\n\tsetAxisTranslation: function (saveOld) {\r\n\t\tvar axis = this,\r\n\t\t\trange = axis.max - axis.min,\r\n\t\t\tpointRange = axis.axisPointRange || 0,\r\n\t\t\tclosestPointRange,\r\n\t\t\tminPointOffset = 0,\r\n\t\t\tpointRangePadding = 0,\r\n\t\t\tlinkedParent = axis.linkedParent,\r\n\t\t\tordinalCorrection,\r\n\t\t\thasCategories = !!axis.categories,\r\n\t\t\ttransA = axis.transA;\r\n\r\n\t\t// Adjust translation for padding. Y axis with categories need to go through the same (#1784).\r\n\t\tif (axis.isXAxis || hasCategories || pointRange) {\r\n\t\t\tif (linkedParent) {\r\n\t\t\t\tminPointOffset = linkedParent.minPointOffset;\r\n\t\t\t\tpointRangePadding = linkedParent.pointRangePadding;\r\n\r\n\t\t\t} else {\r\n\t\t\t\teach(axis.series, function (series) {\r\n\t\t\t\t\tvar seriesPointRange = hasCategories ? 1 : (axis.isXAxis ? series.pointRange : (axis.axisPointRange || 0)), // #2806\r\n\t\t\t\t\t\tpointPlacement = series.options.pointPlacement,\r\n\t\t\t\t\t\tseriesClosestPointRange = series.closestPointRange;\r\n\r\n\t\t\t\t\tif (seriesPointRange > range) { // #1446\r\n\t\t\t\t\t\tseriesPointRange = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpointRange = mathMax(pointRange, seriesPointRange);\r\n\r\n\t\t\t\t\tif (!axis.single) {\r\n\t\t\t\t\t\t// minPointOffset is the value padding to the left of the axis in order to make\r\n\t\t\t\t\t\t// room for points with a pointRange, typically columns. When the pointPlacement option\r\n\t\t\t\t\t\t// is 'between' or 'on', this padding does not apply.\r\n\t\t\t\t\t\tminPointOffset = mathMax(\r\n\t\t\t\t\t\t\tminPointOffset,\r\n\t\t\t\t\t\t\tisString(pointPlacement) ? 0 : seriesPointRange / 2\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// Determine the total padding needed to the length of the axis to make room for the\r\n\t\t\t\t\t\t// pointRange. If the series' pointPlacement is 'on', no padding is added.\r\n\t\t\t\t\t\tpointRangePadding = mathMax(\r\n\t\t\t\t\t\t\tpointRangePadding,\r\n\t\t\t\t\t\t\tpointPlacement === 'on' ? 0 : seriesPointRange\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Set the closestPointRange\r\n\t\t\t\t\tif (!series.noSharedTooltip && defined(seriesClosestPointRange)) {\r\n\t\t\t\t\t\tclosestPointRange = defined(closestPointRange) ?\r\n\t\t\t\t\t\t\tmathMin(closestPointRange, seriesClosestPointRange) :\r\n\t\t\t\t\t\t\tseriesClosestPointRange;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Record minPointOffset and pointRangePadding\r\n\t\t\tordinalCorrection = axis.ordinalSlope && closestPointRange ? axis.ordinalSlope / closestPointRange : 1; // #988, #1853\r\n\t\t\taxis.minPointOffset = minPointOffset = minPointOffset * ordinalCorrection;\r\n\t\t\taxis.pointRangePadding = pointRangePadding = pointRangePadding * ordinalCorrection;\r\n\r\n\t\t\t// pointRange means the width reserved for each point, like in a column chart\r\n\t\t\taxis.pointRange = mathMin(pointRange, range);\r\n\r\n\t\t\t// closestPointRange means the closest distance between points. In columns\r\n\t\t\t// it is mostly equal to pointRange, but in lines pointRange is 0 while closestPointRange\r\n\t\t\t// is some other value\r\n\t\t\taxis.closestPointRange = closestPointRange;\r\n\t\t}\r\n\r\n\t\t// Secondary values\r\n\t\tif (saveOld) {\r\n\t\t\taxis.oldTransA = transA;\r\n\t\t}\r\n\t\taxis.translationSlope = axis.transA = transA = axis.len / ((range + pointRangePadding) || 1);\r\n\t\taxis.transB = axis.horiz ? axis.left : axis.bottom; // translation addend\r\n\t\taxis.minPixelPadding = transA * minPointOffset;\r\n\t},\r\n\r\n\t/**\r\n\t * Set the tick positions to round values and optionally extend the extremes\r\n\t * to the nearest tick\r\n\t */\r\n\tsetTickInterval: function (secondPass) {\r\n\t\tvar axis = this,\r\n\t\t\tchart = axis.chart,\r\n\t\t\toptions = axis.options,\r\n\t\t\tisLog = axis.isLog,\r\n\t\t\tisDatetimeAxis = axis.isDatetimeAxis,\r\n\t\t\tisXAxis = axis.isXAxis,\r\n\t\t\tisLinked = axis.isLinked,\r\n\t\t\tmaxPadding = options.maxPadding,\r\n\t\t\tminPadding = options.minPadding,\r\n\t\t\tlength,\r\n\t\t\tlinkedParentExtremes,\r\n\t\t\ttickIntervalOption = options.tickInterval,\r\n\t\t\tminTickInterval,\r\n\t\t\ttickPixelIntervalOption = options.tickPixelInterval,\r\n\t\t\tcategories = axis.categories;\r\n\r\n\t\tif (!isDatetimeAxis && !categories && !isLinked) {\r\n\t\t\tthis.getTickAmount();\r\n\t\t}\r\n\r\n\t\t// linked axis gets the extremes from the parent axis\r\n\t\tif (isLinked) {\r\n\t\t\taxis.linkedParent = chart[axis.coll][options.linkedTo];\r\n\t\t\tlinkedParentExtremes = axis.linkedParent.getExtremes();\r\n\t\t\taxis.min = pick(linkedParentExtremes.min, linkedParentExtremes.dataMin);\r\n\t\t\taxis.max = pick(linkedParentExtremes.max, linkedParentExtremes.dataMax);\r\n\t\t\tif (options.type !== axis.linkedParent.options.type) {\r\n\t\t\t\terror(11, 1); // Can't link axes of different type\r\n\t\t\t}\r\n\t\t} else { // initial min and max from the extreme data values\r\n\t\t\taxis.min = pick(axis.userMin, options.min, axis.dataMin);\r\n\t\t\taxis.max = pick(axis.userMax, options.max, axis.dataMax);\r\n\t\t}\r\n\r\n\t\tif (isLog) {\r\n\t\t\tif (!secondPass && mathMin(axis.min, pick(axis.dataMin, axis.min)) <= 0) { // #978\r\n\t\t\t\terror(10, 1); // Can't plot negative values on log axis\r\n\t\t\t}\r\n\t\t\taxis.min = correctFloat(log2lin(axis.min)); // correctFloat cures #934\r\n\t\t\taxis.max = correctFloat(log2lin(axis.max));\r\n\t\t}\r\n\r\n\t\t// handle zoomed range\r\n\t\tif (axis.range && defined(axis.max)) {\r\n\t\t\taxis.userMin = axis.min = mathMax(axis.min, axis.max - axis.range); // #618\r\n\t\t\taxis.userMax = axis.max;\r\n\r\n\t\t\taxis.range = null;  // don't use it when running setExtremes\r\n\t\t}\r\n\r\n\t\t// Hook for adjusting this.min and this.max. Used by bubble series.\r\n\t\tif (axis.beforePadding) {\r\n\t\t\taxis.beforePadding();\r\n\t\t}\r\n\r\n\t\t// adjust min and max for the minimum range\r\n\t\taxis.adjustForMinRange();\r\n\r\n\t\t// Pad the values to get clear of the chart's edges. To avoid tickInterval taking the padding\r\n\t\t// into account, we do this after computing tick interval (#1337).\r\n\t\tif (!categories && !axis.axisPointRange && !axis.usePercentage && !isLinked && defined(axis.min) && defined(axis.max)) {\r\n\t\t\tlength = axis.max - axis.min;\r\n\t\t\tif (length) {\r\n\t\t\t\tif (!defined(options.min) && !defined(axis.userMin) && minPadding && (axis.dataMin < 0 || !axis.ignoreMinPadding)) {\r\n\t\t\t\t\taxis.min -= length * minPadding;\r\n\t\t\t\t}\r\n\t\t\t\tif (!defined(options.max) && !defined(axis.userMax)  && maxPadding && (axis.dataMax > 0 || !axis.ignoreMaxPadding)) {\r\n\t\t\t\t\taxis.max += length * maxPadding;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Stay within floor and ceiling\r\n\t\tif (isNumber(options.floor)) {\r\n\t\t\taxis.min = mathMax(axis.min, options.floor);\r\n\t\t}\r\n\t\tif (isNumber(options.ceiling)) {\r\n\t\t\taxis.max = mathMin(axis.max, options.ceiling);\r\n\t\t}\r\n\r\n\t\t// get tickInterval\r\n\t\tif (axis.min === axis.max || axis.min === undefined || axis.max === undefined) {\r\n\t\t\taxis.tickInterval = 1;\r\n\t\t} else if (isLinked && !tickIntervalOption &&\r\n\t\t\t\ttickPixelIntervalOption === axis.linkedParent.options.tickPixelInterval) {\r\n\t\t\taxis.tickInterval = axis.linkedParent.tickInterval;\r\n\t\t} else {\r\n\t\t\taxis.tickInterval = pick(\r\n\t\t\t\ttickIntervalOption,\r\n\t\t\t\tthis.tickAmount ? ((axis.max - axis.min) / mathMax(this.tickAmount - 1, 1)) : undefined,\r\n\t\t\t\tcategories ? // for categoried axis, 1 is default, for linear axis use tickPix\r\n\t\t\t\t\t1 :\r\n\t\t\t\t\t// don't let it be more than the data range\r\n\t\t\t\t\t(axis.max - axis.min) * tickPixelIntervalOption / mathMax(axis.len, tickPixelIntervalOption)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// Now we're finished detecting min and max, crop and group series data. This\r\n\t\t// is in turn needed in order to find tick positions in ordinal axes.\r\n\t\tif (isXAxis && !secondPass) {\r\n\t\t\teach(axis.series, function (series) {\r\n\t\t\t\tseries.processData(axis.min !== axis.oldMin || axis.max !== axis.oldMax);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// set the translation factor used in translate function\r\n\t\taxis.setAxisTranslation(true);\r\n\r\n\t\t// hook for ordinal axes and radial axes\r\n\t\tif (axis.beforeSetTickPositions) {\r\n\t\t\taxis.beforeSetTickPositions();\r\n\t\t}\r\n\r\n\t\t// hook for extensions, used in Highstock ordinal axes\r\n\t\tif (axis.postProcessTickInterval) {\r\n\t\t\taxis.tickInterval = axis.postProcessTickInterval(axis.tickInterval);\r\n\t\t}\r\n\r\n\t\t// In column-like charts, don't cramp in more ticks than there are points (#1943)\r\n\t\tif (axis.pointRange) {\r\n\t\t\taxis.tickInterval = mathMax(axis.pointRange, axis.tickInterval);\r\n\t\t}\r\n\r\n\t\t// Before normalizing the tick interval, handle minimum tick interval. This applies only if tickInterval is not defined.\r\n\t\tminTickInterval = pick(options.minTickInterval, axis.isDatetimeAxis && axis.closestPointRange);\r\n\t\tif (!tickIntervalOption && axis.tickInterval < minTickInterval) {\r\n\t\t\taxis.tickInterval = minTickInterval;\r\n\t\t}\r\n\r\n\t\t// for linear axes, get magnitude and normalize the interval\r\n\t\tif (!isDatetimeAxis && !isLog) { // linear\r\n\t\t\tif (!tickIntervalOption) {\r\n\t\t\t\taxis.tickInterval = normalizeTickInterval(\r\n\t\t\t\t\taxis.tickInterval, \r\n\t\t\t\t\tnull, \r\n\t\t\t\t\tgetMagnitude(axis.tickInterval), \r\n\t\t\t\t\t// If the tick interval is between 0.5 and 5 and the axis max is in the order of\r\n\t\t\t\t\t// thousands, chances are we are dealing with years. Don't allow decimals. #3363.\r\n\t\t\t\t\tpick(options.allowDecimals, !(axis.tickInterval > 0.5 && axis.tickInterval < 5 && axis.max > 1000 && axis.max < 9999)),\r\n\t\t\t\t\t!!this.tickAmount\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Prevent ticks from getting so close that we can't draw the labels\r\n\t\tif (!this.tickAmount && this.len) { // Color axis with disabled legend has no length\r\n\t\t\taxis.tickInterval = axis.unsquish();\r\n\t\t}\r\n\r\n\t\tthis.setTickPositions();\r\n\t},\r\n\r\n\t/**\r\n\t * Now we have computed the normalized tickInterval, get the tick positions\r\n\t */\r\n\tsetTickPositions: function () {\r\n\r\n\t\tvar options = this.options,\r\n\t\t\ttickPositions,\r\n\t\t\ttickPositionsOption = options.tickPositions,\r\n\t\t\ttickPositioner = options.tickPositioner,\r\n\t\t\tstartOnTick = options.startOnTick,\r\n\t\t\tendOnTick = options.endOnTick,\r\n\t\t\tsingle;\r\n\r\n\t\t// Set the tickmarkOffset\r\n\t\tthis.tickmarkOffset = (this.categories && options.tickmarkPlacement === 'between' && \r\n\t\t\tthis.tickInterval === 1) ? 0.5 : 0; // #3202\r\n\r\n\r\n\t\t// get minorTickInterval\r\n\t\tthis.minorTickInterval = options.minorTickInterval === 'auto' && this.tickInterval ?\r\n\t\t\tthis.tickInterval / 5 : options.minorTickInterval;\r\n\r\n\t\t// Find the tick positions\r\n\t\tthis.tickPositions = tickPositions = options.tickPositions && options.tickPositions.slice(); // Work on a copy (#1565)\r\n\t\tif (!tickPositions) {\r\n\r\n\t\t\tif (this.isDatetimeAxis) {\r\n\t\t\t\ttickPositions = this.getTimeTicks(\r\n\t\t\t\t\tthis.normalizeTimeTickInterval(this.tickInterval, options.units),\r\n\t\t\t\t\tthis.min,\r\n\t\t\t\t\tthis.max,\r\n\t\t\t\t\toptions.startOfWeek,\r\n\t\t\t\t\tthis.ordinalPositions,\r\n\t\t\t\t\tthis.closestPointRange,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t);\r\n\t\t\t} else if (this.isLog) {\r\n\t\t\t\ttickPositions = this.getLogTickPositions(this.tickInterval, this.min, this.max);\r\n\t\t\t} else {\r\n\t\t\t\ttickPositions = this.getLinearTickPositions(this.tickInterval, this.min, this.max);\r\n\t\t\t}\r\n\r\n\t\t\tthis.tickPositions = tickPositions;\r\n\r\n\t\t\t// Run the tick positioner callback, that allows modifying auto tick positions.\r\n\t\t\tif (tickPositioner) {\r\n\t\t\t\ttickPositioner = tickPositioner.apply(this, [this.min, this.max]);\r\n\t\t\t\tif (tickPositioner) {\r\n\t\t\t\t\tthis.tickPositions = tickPositions = tickPositioner;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (!this.isLinked) {\r\n\r\n\t\t\t// reset min/max or remove extremes based on start/end on tick\r\n\t\t\tthis.trimTicks(tickPositions, startOnTick, endOnTick);\r\n\r\n\t\t\t// When there is only one point, or all points have the same value on this axis, then min\r\n\t\t\t// and max are equal and tickPositions.length is 0 or 1. In this case, add some padding\r\n\t\t\t// in order to center the point, but leave it with one tick. #1337.\r\n\t\t\tif (this.min === this.max && defined(this.min) && !this.tickAmount) {\r\n\t\t\t\t// Substract half a unit (#2619, #2846, #2515, #3390)\r\n\t\t\t\tsingle = true;\r\n\t\t\t\tthis.min -= 0.5;\r\n\t\t\t\tthis.max += 0.5;\r\n\t\t\t}\r\n\t\t\tthis.single = single;\r\n\r\n\t\t\tif (!tickPositionsOption && !tickPositioner) {\r\n\t\t\t\tthis.adjustTickAmount();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Handle startOnTick and endOnTick by either adapting to padding min/max or rounded min/max\r\n\t */\r\n\ttrimTicks: function (tickPositions, startOnTick, endOnTick) {\r\n\t\tvar roundedMin = tickPositions[0],\r\n\t\t\troundedMax = tickPositions[tickPositions.length - 1],\r\n\t\t\tminPointOffset = this.minPointOffset || 0;\r\n\t\t\t\r\n\t\tif (startOnTick) {\r\n\t\t\tthis.min = roundedMin;\r\n\t\t} else if (this.min - minPointOffset > roundedMin) {\r\n\t\t\ttickPositions.shift();\r\n\t\t}\r\n\r\n\t\tif (endOnTick) {\r\n\t\t\tthis.max = roundedMax;\r\n\t\t} else if (this.max + minPointOffset < roundedMax) {\r\n\t\t\ttickPositions.pop();\r\n\t\t}\r\n\r\n\t\t// If no tick are left, set one tick in the middle (#3195) \r\n\t\tif (tickPositions.length === 0 && defined(roundedMin)) {\r\n\t\t\ttickPositions.push((roundedMax + roundedMin) / 2);\r\n\t\t}\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * Set the max ticks of either the x and y axis collection\r\n\t */\r\n\tgetTickAmount: function () {\r\n\t\tvar others = {}, // Whether there is another axis to pair with this one\r\n\t\t\thasOther,\r\n\t\t\toptions = this.options,\r\n\t\t\ttickAmount = options.tickAmount,\r\n\t\t\ttickPixelInterval = options.tickPixelInterval;\r\n\r\n\t\tif (!defined(options.tickInterval) && this.len < tickPixelInterval && !this.isRadial &&\r\n\t\t\t\t!this.isLog && options.startOnTick && options.endOnTick) {\r\n\t\t\ttickAmount = 2;\r\n\t\t}\r\n\r\n\t\tif (!tickAmount && this.chart.options.chart.alignTicks !== false && options.alignTicks !== false) {\r\n\t\t\t// Check if there are multiple axes in the same pane\r\n\t\t\teach(this.chart[this.coll], function (axis) {\r\n\t\t\t\tvar options = axis.options,\r\n\t\t\t\t\thoriz = axis.horiz,\r\n\t\t\t\t\tkey = [horiz ? options.left : options.top, horiz ? options.width : options.height, options.pane].join(',');\r\n\t\t\t\t\r\n\t\t\t\tif (others[key]) {\r\n\t\t\t\t\thasOther = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tothers[key] = 1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (hasOther) {\r\n\t\t\t\t// Add 1 because 4 tick intervals require 5 ticks (including first and last)\r\n\t\t\t\ttickAmount = mathCeil(this.len / tickPixelInterval) + 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// For tick amounts of 2 and 3, compute five ticks and remove the intermediate ones. This\r\n\t\t// prevents the axis from adding ticks that are too far away from the data extremes.\r\n\t\tif (tickAmount < 4) {\r\n\t\t\tthis.finalTickAmt = tickAmount;\r\n\t\t\ttickAmount = 5;\r\n\t\t}\r\n\t\t\r\n\t\tthis.tickAmount = tickAmount;\r\n\t},\r\n\r\n\t/**\r\n\t * When using multiple axes, adjust the number of ticks to match the highest\r\n\t * number of ticks in that group\r\n\t */\r\n\tadjustTickAmount: function () {\r\n\t\tvar tickInterval = this.tickInterval,\r\n\t\t\ttickPositions = this.tickPositions,\r\n\t\t\ttickAmount = this.tickAmount,\r\n\t\t\tfinalTickAmt = this.finalTickAmt,\r\n\t\t\tcurrentTickAmount = tickPositions && tickPositions.length,\r\n\t\t\ti,\r\n\t\t\tlen;\r\n\r\n\t\tif (currentTickAmount < tickAmount) { // TODO: Check #3411\r\n\t\t\twhile (tickPositions.length < tickAmount) {\r\n\t\t\t\ttickPositions.push(correctFloat(\r\n\t\t\t\t\ttickPositions[tickPositions.length - 1] + tickInterval\r\n\t\t\t\t));\r\n\t\t\t}\r\n\t\t\tthis.transA *= (currentTickAmount - 1) / (tickAmount - 1);\r\n\t\t\tthis.max = tickPositions[tickPositions.length - 1];\r\n\r\n\t\t// We have too many ticks, run second pass to try to reduce ticks\r\n\t\t} else if (currentTickAmount > tickAmount) {\r\n\t\t\tthis.tickInterval *= 2;\r\n\t\t\tthis.setTickPositions();\r\n\t\t}\r\n\r\n\t\t// The finalTickAmt property is set in getTickAmount\r\n\t\tif (defined(finalTickAmt)) {\r\n\t\t\ti = len = tickPositions.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t(finalTickAmt === 3 && i % 2 === 1) || // Remove every other tick\r\n\t\t\t\t\t(finalTickAmt <= 2 && i > 0 && i < len - 1) // Remove all but first and last\r\n\t\t\t\t) {\r\n\t\t\t\t\ttickPositions.splice(i, 1);\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\tthis.finalTickAmt = UNDEFINED;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set the scale based on data min and max, user set min and max or options\r\n\t *\r\n\t */\r\n\tsetScale: function () {\r\n\t\tvar axis = this,\r\n\t\t\tstacks = axis.stacks,\r\n\t\t\ttype,\r\n\t\t\ti,\r\n\t\t\tisDirtyData,\r\n\t\t\tisDirtyAxisLength;\r\n\r\n\t\taxis.oldMin = axis.min;\r\n\t\taxis.oldMax = axis.max;\r\n\t\taxis.oldAxisLength = axis.len;\r\n\r\n\t\t// set the new axisLength\r\n\t\taxis.setAxisSize();\r\n\t\t//axisLength = horiz ? axisWidth : axisHeight;\r\n\t\tisDirtyAxisLength = axis.len !== axis.oldAxisLength;\r\n\r\n\t\t// is there new data?\r\n\t\teach(axis.series, function (series) {\r\n\t\t\tif (series.isDirtyData || series.isDirty ||\r\n\t\t\t\t\tseries.xAxis.isDirty) { // when x axis is dirty, we need new data extremes for y as well\r\n\t\t\t\tisDirtyData = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// do we really need to go through all this?\r\n\t\tif (isDirtyAxisLength || isDirtyData || axis.isLinked || axis.forceRedraw ||\r\n\t\t\taxis.userMin !== axis.oldUserMin || axis.userMax !== axis.oldUserMax) {\r\n\r\n\t\t\t// reset stacks\r\n\t\t\tif (!axis.isXAxis) {\r\n\t\t\t\tfor (type in stacks) {\r\n\t\t\t\t\tfor (i in stacks[type]) {\r\n\t\t\t\t\t\tstacks[type][i].total = null;\r\n\t\t\t\t\t\tstacks[type][i].cum = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\taxis.forceRedraw = false;\r\n\r\n\t\t\t// get data extremes if needed\r\n\t\t\taxis.getSeriesExtremes();\r\n\r\n\t\t\t// get fixed positions based on tickInterval\r\n\t\t\taxis.setTickInterval();\r\n\r\n\t\t\t// record old values to decide whether a rescale is necessary later on (#540)\r\n\t\t\taxis.oldUserMin = axis.userMin;\r\n\t\t\taxis.oldUserMax = axis.userMax;\r\n\r\n\t\t\t// Mark as dirty if it is not already set to dirty and extremes have changed. #595.\r\n\t\t\tif (!axis.isDirty) {\r\n\t\t\t\taxis.isDirty = isDirtyAxisLength || axis.min !== axis.oldMin || axis.max !== axis.oldMax;\r\n\t\t\t}\r\n\t\t} else if (!axis.isXAxis) {\r\n\t\t\tif (axis.oldStacks) {\r\n\t\t\t\tstacks = axis.stacks = axis.oldStacks;\r\n\t\t\t}\r\n\r\n\t\t\t// reset stacks\r\n\t\t\tfor (type in stacks) {\r\n\t\t\t\tfor (i in stacks[type]) {\r\n\t\t\t\t\tstacks[type][i].cum = stacks[type][i].total;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set the extremes and optionally redraw\r\n\t * @param {Number} newMin\r\n\t * @param {Number} newMax\r\n\t * @param {Boolean} redraw\r\n\t * @param {Boolean|Object} animation Whether to apply animation, and optionally animation\r\n\t *    configuration\r\n\t * @param {Object} eventArguments\r\n\t *\r\n\t */\r\n\tsetExtremes: function (newMin, newMax, redraw, animation, eventArguments) {\r\n\t\tvar axis = this,\r\n\t\t\tchart = axis.chart;\r\n\r\n\t\tredraw = pick(redraw, true); // defaults to true\r\n\r\n\t\teach(axis.series, function (serie) {\r\n\t\t\tdelete serie.kdTree;\r\n\t\t});\r\n\r\n\t\t// Extend the arguments with min and max\r\n\t\teventArguments = extend(eventArguments, {\r\n\t\t\tmin: newMin,\r\n\t\t\tmax: newMax\r\n\t\t});\r\n\r\n\t\t// Fire the event\r\n\t\tfireEvent(axis, 'setExtremes', eventArguments, function () { // the default event handler\r\n\r\n\t\t\taxis.userMin = newMin;\r\n\t\t\taxis.userMax = newMax;\r\n\t\t\taxis.eventArgs = eventArguments;\r\n\r\n\t\t\t// Mark for running afterSetExtremes\r\n\t\t\taxis.isDirtyExtremes = true;\r\n\r\n\t\t\t// redraw\r\n\t\t\tif (redraw) {\r\n\t\t\t\tchart.redraw(animation);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Overridable method for zooming chart. Pulled out in a separate method to allow overriding\r\n\t * in stock charts.\r\n\t */\r\n\tzoom: function (newMin, newMax) {\r\n\t\tvar dataMin = this.dataMin,\r\n\t\t\tdataMax = this.dataMax,\r\n\t\t\toptions = this.options;\r\n\r\n\t\t// Prevent pinch zooming out of range. Check for defined is for #1946. #1734.\r\n\t\tif (!this.allowZoomOutside) {\r\n\t\t\tif (defined(dataMin) && newMin <= mathMin(dataMin, pick(options.min, dataMin))) {\r\n\t\t\t\tnewMin = UNDEFINED;\r\n\t\t\t}\r\n\t\t\tif (defined(dataMax) && newMax >= mathMax(dataMax, pick(options.max, dataMax))) {\r\n\t\t\t\tnewMax = UNDEFINED;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// In full view, displaying the reset zoom button is not required\r\n\t\tthis.displayBtn = newMin !== UNDEFINED || newMax !== UNDEFINED;\r\n\r\n\t\t// Do it\r\n\t\tthis.setExtremes(\r\n\t\t\tnewMin,\r\n\t\t\tnewMax,\r\n\t\t\tfalse,\r\n\t\t\tUNDEFINED,\r\n\t\t\t{ trigger: 'zoom' }\r\n\t\t);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t * Update the axis metrics\r\n\t */\r\n\tsetAxisSize: function () {\r\n\t\tvar chart = this.chart,\r\n\t\t\toptions = this.options,\r\n\t\t\toffsetLeft = options.offsetLeft || 0,\r\n\t\t\toffsetRight = options.offsetRight || 0,\r\n\t\t\thoriz = this.horiz,\r\n\t\t\twidth = pick(options.width, chart.plotWidth - offsetLeft + offsetRight),\r\n\t\t\theight = pick(options.height, chart.plotHeight),\r\n\t\t\ttop = pick(options.top, chart.plotTop),\r\n\t\t\tleft = pick(options.left, chart.plotLeft + offsetLeft),\r\n\t\t\tpercentRegex = /%$/;\r\n\r\n\t\t// Check for percentage based input values\r\n\t\tif (percentRegex.test(height)) {\r\n\t\t\theight = parseFloat(height) / 100 * chart.plotHeight;\r\n\t\t}\r\n\t\tif (percentRegex.test(top)) {\r\n\t\t\ttop = parseFloat(top) / 100 * chart.plotHeight + chart.plotTop;\r\n\t\t}\r\n\r\n\t\t// Expose basic values to use in Series object and navigator\r\n\t\tthis.left = left;\r\n\t\tthis.top = top;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.bottom = chart.chartHeight - height - top;\r\n\t\tthis.right = chart.chartWidth - width - left;\r\n\r\n\t\t// Direction agnostic properties\r\n\t\tthis.len = mathMax(horiz ? width : height, 0); // mathMax fixes #905\r\n\t\tthis.pos = horiz ? left : top; // distance from SVG origin\r\n\t},\r\n\r\n\t/**\r\n\t * Get the actual axis extremes\r\n\t */\r\n\tgetExtremes: function () {\r\n\t\tvar axis = this,\r\n\t\t\tisLog = axis.isLog;\r\n\r\n\t\treturn {\r\n\t\t\tmin: isLog ? correctFloat(lin2log(axis.min)) : axis.min,\r\n\t\t\tmax: isLog ? correctFloat(lin2log(axis.max)) : axis.max,\r\n\t\t\tdataMin: axis.dataMin,\r\n\t\t\tdataMax: axis.dataMax,\r\n\t\t\tuserMin: axis.userMin,\r\n\t\t\tuserMax: axis.userMax\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Get the zero plane either based on zero or on the min or max value.\r\n\t * Used in bar and area plots\r\n\t */\r\n\tgetThreshold: function (threshold) {\r\n\t\tvar axis = this,\r\n\t\t\tisLog = axis.isLog;\r\n\r\n\t\tvar realMin = isLog ? lin2log(axis.min) : axis.min,\r\n\t\t\trealMax = isLog ? lin2log(axis.max) : axis.max;\r\n\r\n\t\tif (realMin > threshold || threshold === null) {\r\n\t\t\tthreshold = realMin;\r\n\t\t} else if (realMax < threshold) {\r\n\t\t\tthreshold = realMax;\r\n\t\t}\r\n\r\n\t\treturn axis.translate(threshold, 0, 1, 0, 1);\r\n\t},\r\n\r\n\t/**\r\n\t * Compute auto alignment for the axis label based on which side the axis is on\r\n\t * and the given rotation for the label\r\n\t */\r\n\tautoLabelAlign: function (rotation) {\r\n\t\tvar ret,\r\n\t\t\tangle = (pick(rotation, 0) - (this.side * 90) + 720) % 360;\r\n\r\n\t\tif (angle > 15 && angle < 165) {\r\n\t\t\tret = 'right';\r\n\t\t} else if (angle > 195 && angle < 345) {\r\n\t\t\tret = 'left';\r\n\t\t} else {\r\n\t\t\tret = 'center';\r\n\t\t}\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t/**\r\n\t * Prevent the ticks from getting so close we can't draw the labels. On a horizontal\r\n\t * axis, this is handled by rotating the labels, removing ticks and adding ellipsis. \r\n\t * On a vertical axis remove ticks and add ellipsis.\r\n\t */\r\n\tunsquish: function () {\r\n\t\tvar chart = this.chart,\r\n\t\t\tticks = this.ticks,\r\n\t\t\tlabelOptions = this.options.labels,\r\n\t\t\thoriz = this.horiz,\r\n\t\t\ttickInterval = this.tickInterval,\r\n\t\t\tnewTickInterval = tickInterval,\r\n\t\t\tslotSize = this.len / (((this.categories ? 1 : 0) + this.max - this.min) / tickInterval),\r\n\t\t\trotation,\r\n\t\t\trotationOption = labelOptions.rotation,\r\n\t\t\tlabelMetrics = chart.renderer.fontMetrics(labelOptions.style.fontSize, ticks[0] && ticks[0].label),\r\n\t\t\tstep,\r\n\t\t\tbestScore = Number.MAX_VALUE,\r\n\t\t\tautoRotation,\r\n\t\t\t// Return the multiple of tickInterval that is needed to avoid collision\r\n\t\t\tgetStep = function (spaceNeeded) {\r\n\t\t\t\tvar step = spaceNeeded / (slotSize || 1);\r\n\t\t\t\tstep = step > 1 ? mathCeil(step) : 1;\r\n\t\t\t\treturn step * tickInterval;\r\n\t\t\t};\r\n\t\t\r\n\t\tif (horiz) {\r\n\t\t\tautoRotation = defined(rotationOption) ? \r\n\t\t\t\t[rotationOption] :\r\n\t\t\t\tslotSize < 80 && !labelOptions.staggerLines && !labelOptions.step && labelOptions.autoRotation;\r\n\r\n\t\t\tif (autoRotation) {\r\n\r\n\t\t\t\t// Loop over the given autoRotation options, and determine which gives the best score. The \r\n\t\t\t\t// best score is that with the lowest number of steps and a rotation closest to horizontal.\r\n\t\t\t\teach(autoRotation, function (rot) {\r\n\t\t\t\t\tvar score;\r\n\r\n\t\t\t\t\tif (rot && rot >= -90 && rot <= 90) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tstep = getStep(mathAbs(labelMetrics.h / mathSin(deg2rad * rot)));\r\n\r\n\t\t\t\t\t\tscore = step + mathAbs(rot / 360);\r\n\r\n\t\t\t\t\t\tif (score < bestScore) {\r\n\t\t\t\t\t\t\tbestScore = score;\r\n\t\t\t\t\t\t\trotation = rot;\r\n\t\t\t\t\t\t\tnewTickInterval = step;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tnewTickInterval = getStep(labelMetrics.h);\r\n\t\t}\r\n\r\n\t\tthis.autoRotation = autoRotation;\r\n\t\tthis.labelRotation = rotation;\r\n\r\n\t\treturn newTickInterval;\r\n\t},\r\n\r\n\trenderUnsquish: function () {\r\n\t\tvar chart = this.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\ttickPositions = this.tickPositions,\r\n\t\t\tticks = this.ticks,\r\n\t\t\tlabelOptions = this.options.labels,\r\n\t\t\thoriz = this.horiz,\r\n\t\t\tmargin = chart.margin,\r\n\t\t\tslotWidth = this.slotWidth = (horiz && !labelOptions.step && !labelOptions.rotation &&\r\n\t\t\t\t((this.staggerLines || 1) * chart.plotWidth) / tickPositions.length) ||\r\n\t\t\t\t(!horiz && ((margin[3] && (margin[3] - chart.spacing[3])) || chart.chartWidth * 0.33)), // #1580, #1931,\r\n\t\t\tinnerWidth = mathMax(1, mathRound(slotWidth - 2 * (labelOptions.padding || 5))),\r\n\t\t\tattr = {},\r\n\t\t\tlabelMetrics = renderer.fontMetrics(labelOptions.style.fontSize, ticks[0] && ticks[0].label),\r\n\t\t\tcss,\r\n\t\t\tlabelLength = 0,\r\n\t\t\tlabel,\r\n\t\t\ti,\r\n\t\t\tpos;\r\n\r\n\t\t// Set rotation option unless it is \"auto\", like in gauges\r\n\t\tif (!isString(labelOptions.rotation)) {\r\n\t\t\tattr.rotation = labelOptions.rotation;\r\n\t\t}\r\n\t\t\r\n\t\t// Handle auto rotation on horizontal axis\r\n\t\tif (this.autoRotation) {\r\n\r\n\t\t\t// Get the longest label length\r\n\t\t\teach(tickPositions, function (tick) {\r\n\t\t\t\ttick = ticks[tick];\r\n\t\t\t\tif (tick && tick.labelLength > labelLength) {\r\n\t\t\t\t\tlabelLength = tick.labelLength;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// Apply rotation only if the label is too wide for the slot, and\r\n\t\t\t// the label is wider than its height.\r\n\t\t\tif (labelLength > innerWidth && labelLength > labelMetrics.h) {\r\n\t\t\t\tattr.rotation = this.labelRotation;\r\n\t\t\t} else {\r\n\t\t\t\tthis.labelRotation = 0;\r\n\t\t\t}\r\n\r\n\t\t// Handle word-wrap or ellipsis on vertical axis\r\n\t\t} else if (slotWidth) {\r\n\t\t\t// For word-wrap or ellipsis\r\n\t\t\tcss = { width: innerWidth + PX, textOverflow: 'clip' };\r\n\r\n\t\t\t// On vertical axis, only allow word wrap if there is room for more lines.\r\n\t\t\ti = tickPositions.length;\r\n\t\t\twhile (!horiz && i--) {\r\n\t\t\t\tpos = tickPositions[i];\r\n\t\t\t\tlabel = ticks[pos].label;\r\n\t\t\t\tif (label) {\r\n\t\t\t\t\tif (this.len / tickPositions.length - 4 < label.getBBox().height) {\r\n\t\t\t\t\t\tlabel.specCss = { textOverflow: 'ellipsis' };\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// Add ellipsis if the label length is significantly longer than ideal\r\n\t\tif (attr.rotation) {\r\n\t\t\tcss = { \r\n\t\t\t\twidth: (labelLength > chart.chartHeight * 0.5 ? chart.chartHeight * 0.33 : chart.chartHeight) + PX,\r\n\t\t\t\ttextOverflow: 'ellipsis'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// Set the explicit or automatic label alignment\r\n\t\tthis.labelAlign = attr.align = labelOptions.align || this.autoLabelAlign(this.labelRotation);\r\n\r\n\t\t// Apply general and specific CSS\r\n\t\teach(tickPositions, function (pos) {\r\n\t\t\tvar tick = ticks[pos],\r\n\t\t\t\tlabel = tick && tick.label;\r\n\t\t\tif (label) {\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tlabel.css(merge(css, label.specCss));\r\n\t\t\t\t}\r\n\t\t\t\tdelete label.specCss;\r\n\t\t\t\tlabel.attr(attr);\r\n\t\t\t\ttick.rotation = attr.rotation;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// TODO: Why not part of getLabelPosition?\r\n\t\tthis.tickRotCorr = renderer.rotCorr(labelMetrics.b, this.labelRotation || 0, this.side === 2);\r\n\t},\r\n\r\n\t/**\r\n\t * Render the tick labels to a preliminary position to get their sizes\r\n\t */\r\n\tgetOffset: function () {\r\n\t\tvar axis = this,\r\n\t\t\tchart = axis.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\toptions = axis.options,\r\n\t\t\ttickPositions = axis.tickPositions,\r\n\t\t\tticks = axis.ticks,\r\n\t\t\thoriz = axis.horiz,\r\n\t\t\tside = axis.side,\r\n\t\t\tinvertedSide = chart.inverted ? [1, 0, 3, 2][side] : side,\r\n\t\t\thasData,\r\n\t\t\tshowAxis,\r\n\t\t\ttitleOffset = 0,\r\n\t\t\ttitleOffsetOption,\r\n\t\t\ttitleMargin = 0,\r\n\t\t\taxisTitleOptions = options.title,\r\n\t\t\tlabelOptions = options.labels,\r\n\t\t\tlabelOffset = 0, // reset\r\n\t\t\tlabelOffsetPadded,\r\n\t\t\taxisOffset = chart.axisOffset,\r\n\t\t\tclipOffset = chart.clipOffset,\r\n\t\t\tdirectionFactor = [-1, 1, 1, -1][side],\r\n\t\t\tn,\r\n\t\t\tlineHeightCorrection;\r\n\r\n\t\t// For reuse in Axis.render\r\n\t\taxis.hasData = hasData = (axis.hasVisibleSeries || (defined(axis.min) && defined(axis.max) && !!tickPositions));\r\n\t\taxis.showAxis = showAxis = hasData || pick(options.showEmpty, true);\r\n\r\n\t\t// Set/reset staggerLines\r\n\t\taxis.staggerLines = axis.horiz && labelOptions.staggerLines;\r\n\r\n\t\t// Create the axisGroup and gridGroup elements on first iteration\r\n\t\tif (!axis.axisGroup) {\r\n\t\t\taxis.gridGroup = renderer.g('grid')\r\n\t\t\t\t.attr({ zIndex: options.gridZIndex || 1 })\r\n\t\t\t\t.add();\r\n\t\t\taxis.axisGroup = renderer.g('axis')\r\n\t\t\t\t.attr({ zIndex: options.zIndex || 2 })\r\n\t\t\t\t.add();\r\n\t\t\taxis.labelGroup = renderer.g('axis-labels')\r\n\t\t\t\t.attr({ zIndex: labelOptions.zIndex || 7 })\r\n\t\t\t\t.addClass(PREFIX + axis.coll.toLowerCase() + '-labels')\r\n\t\t\t\t.add();\r\n\t\t}\r\n\r\n\t\tif (hasData || axis.isLinked) {\r\n\t\t\t\r\n\t\t\t// Generate ticks\r\n\t\t\teach(tickPositions, function (pos) {\r\n\t\t\t\tif (!ticks[pos]) {\r\n\t\t\t\t\tticks[pos] = new Tick(axis, pos);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tticks[pos].addLabel(); // update labels depending on tick interval\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\taxis.renderUnsquish();\r\n\r\n\t\t\teach(tickPositions, function (pos) {\r\n\t\t\t\t// left side must be align: right and right side must have align: left for labels\r\n\t\t\t\tif (side === 0 || side === 2 || { 1: 'left', 3: 'right' }[side] === axis.labelAlign) {\r\n\r\n\t\t\t\t\t// get the highest offset\r\n\t\t\t\t\tlabelOffset = mathMax(\r\n\t\t\t\t\t\tticks[pos].getLabelSize(),\r\n\t\t\t\t\t\tlabelOffset\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (axis.staggerLines) {\r\n\t\t\t\tlabelOffset *= axis.staggerLines;\r\n\t\t\t\taxis.labelOffset = labelOffset;\r\n\t\t\t}\r\n\r\n\r\n\t\t} else { // doesn't have data\r\n\t\t\tfor (n in ticks) {\r\n\t\t\t\tticks[n].destroy();\r\n\t\t\t\tdelete ticks[n];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (axisTitleOptions && axisTitleOptions.text && axisTitleOptions.enabled !== false) {\r\n\t\t\tif (!axis.axisTitle) {\r\n\t\t\t\taxis.axisTitle = renderer.text(\r\n\t\t\t\t\taxisTitleOptions.text,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\taxisTitleOptions.useHTML\r\n\t\t\t\t)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tzIndex: 7,\r\n\t\t\t\t\trotation: axisTitleOptions.rotation || 0,\r\n\t\t\t\t\talign:\r\n\t\t\t\t\t\taxisTitleOptions.textAlign ||\r\n\t\t\t\t\t\t{ low: 'left', middle: 'center', high: 'right' }[axisTitleOptions.align]\r\n\t\t\t\t})\r\n\t\t\t\t.addClass(PREFIX + this.coll.toLowerCase() + '-title')\r\n\t\t\t\t.css(axisTitleOptions.style)\r\n\t\t\t\t.add(axis.axisGroup);\r\n\t\t\t\taxis.axisTitle.isNew = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (showAxis) {\r\n\t\t\t\ttitleOffset = axis.axisTitle.getBBox()[horiz ? 'height' : 'width'];\r\n\t\t\t\ttitleOffsetOption = axisTitleOptions.offset;\r\n\t\t\t\ttitleMargin = defined(titleOffsetOption) ? 0 : pick(axisTitleOptions.margin, horiz ? 5 : 10);\r\n\t\t\t}\r\n\r\n\t\t\t// hide or show the title depending on whether showEmpty is set\r\n\t\t\taxis.axisTitle[showAxis ? 'show' : 'hide']();\r\n\t\t}\r\n\r\n\t\t// handle automatic or user set offset\r\n\t\taxis.offset = directionFactor * pick(options.offset, axisOffset[side]);\r\n\r\n\t\taxis.tickRotCorr = axis.tickRotCorr || { x: 0, y: 0 }; // polar\r\n\t\tlineHeightCorrection = side === 2 ? axis.tickRotCorr.y : 0;\r\n\t\tlabelOffsetPadded = labelOffset + titleMargin +\r\n\t\t\t(labelOffset && (directionFactor * (horiz ? pick(labelOptions.y, axis.tickRotCorr.y + 8) : labelOptions.x) - lineHeightCorrection));\r\n\t\taxis.axisTitleMargin = pick(titleOffsetOption, labelOffsetPadded);\r\n\r\n\t\taxisOffset[side] = mathMax(\r\n\t\t\taxisOffset[side],\r\n\t\t\taxis.axisTitleMargin + titleOffset + directionFactor * axis.offset,\r\n\t\t\tlabelOffsetPadded // #3027\r\n\t\t);\r\n\t\tclipOffset[invertedSide] = mathMax(clipOffset[invertedSide], mathFloor(options.lineWidth / 2) * 2);\r\n\t},\r\n\r\n\t/**\r\n\t * Get the path for the axis line\r\n\t */\r\n\tgetLinePath: function (lineWidth) {\r\n\t\tvar chart = this.chart,\r\n\t\t\topposite = this.opposite,\r\n\t\t\toffset = this.offset,\r\n\t\t\thoriz = this.horiz,\r\n\t\t\tlineLeft = this.left + (opposite ? this.width : 0) + offset,\r\n\t\t\tlineTop = chart.chartHeight - this.bottom - (opposite ? this.height : 0) + offset;\r\n\r\n\t\tif (opposite) {\r\n\t\t\tlineWidth *= -1; // crispify the other way - #1480, #1687\r\n\t\t}\r\n\r\n\t\treturn chart.renderer.crispLine([\r\n\t\t\t\tM,\r\n\t\t\t\thoriz ?\r\n\t\t\t\t\tthis.left :\r\n\t\t\t\t\tlineLeft,\r\n\t\t\t\thoriz ?\r\n\t\t\t\t\tlineTop :\r\n\t\t\t\t\tthis.top,\r\n\t\t\t\tL,\r\n\t\t\t\thoriz ?\r\n\t\t\t\t\tchart.chartWidth - this.right :\r\n\t\t\t\t\tlineLeft,\r\n\t\t\t\thoriz ?\r\n\t\t\t\t\tlineTop :\r\n\t\t\t\t\tchart.chartHeight - this.bottom\r\n\t\t\t], lineWidth);\r\n\t},\r\n\r\n\t/**\r\n\t * Position the title\r\n\t */\r\n\tgetTitlePosition: function () {\r\n\t\t// compute anchor points for each of the title align options\r\n\t\tvar horiz = this.horiz,\r\n\t\t\taxisLeft = this.left,\r\n\t\t\taxisTop = this.top,\r\n\t\t\taxisLength = this.len,\r\n\t\t\taxisTitleOptions = this.options.title,\r\n\t\t\tmargin = horiz ? axisLeft : axisTop,\r\n\t\t\topposite = this.opposite,\r\n\t\t\toffset = this.offset,\r\n\t\t\tfontSize = pInt(axisTitleOptions.style.fontSize || 12),\r\n\r\n\t\t\t// the position in the length direction of the axis\r\n\t\t\talongAxis = {\r\n\t\t\t\tlow: margin + (horiz ? 0 : axisLength),\r\n\t\t\t\tmiddle: margin + axisLength / 2,\r\n\t\t\t\thigh: margin + (horiz ? axisLength : 0)\r\n\t\t\t}[axisTitleOptions.align],\r\n\r\n\t\t\t// the position in the perpendicular direction of the axis\r\n\t\t\toffAxis = (horiz ? axisTop + this.height : axisLeft) +\r\n\t\t\t\t(horiz ? 1 : -1) * // horizontal axis reverses the margin\r\n\t\t\t\t(opposite ? -1 : 1) * // so does opposite axes\r\n\t\t\t\tthis.axisTitleMargin +\r\n\t\t\t\t(this.side === 2 ? fontSize : 0);\r\n\r\n\t\treturn {\r\n\t\t\tx: horiz ?\r\n\t\t\t\talongAxis :\r\n\t\t\t\toffAxis + (opposite ? this.width : 0) + offset +\r\n\t\t\t\t\t(axisTitleOptions.x || 0), // x\r\n\t\t\ty: horiz ?\r\n\t\t\t\toffAxis - (opposite ? this.height : 0) + offset :\r\n\t\t\t\talongAxis + (axisTitleOptions.y || 0) // y\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Render the axis\r\n\t */\r\n\trender: function () {\r\n\t\tvar axis = this,\r\n\t\t\tchart = axis.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\toptions = axis.options,\r\n\t\t\tisLog = axis.isLog,\r\n\t\t\tisLinked = axis.isLinked,\r\n\t\t\ttickPositions = axis.tickPositions,\r\n\t\t\taxisTitle = axis.axisTitle,\t\t\t\r\n\t\t\tticks = axis.ticks,\r\n\t\t\tminorTicks = axis.minorTicks,\r\n\t\t\talternateBands = axis.alternateBands,\r\n\t\t\tstackLabelOptions = options.stackLabels,\r\n\t\t\talternateGridColor = options.alternateGridColor,\r\n\t\t\ttickmarkOffset = axis.tickmarkOffset,\r\n\t\t\tlineWidth = options.lineWidth,\r\n\t\t\tlinePath,\r\n\t\t\thasRendered = chart.hasRendered,\r\n\t\t\tslideInTicks = hasRendered && defined(axis.oldMin) && !isNaN(axis.oldMin),\r\n\t\t\thasData = axis.hasData,\r\n\t\t\tshowAxis = axis.showAxis,\r\n\t\t\tfrom,\r\n\t\t\tto;\r\n\r\n\t\t// Reset\r\n\t\taxis.labelEdge.length = 0;\r\n\t\t//axis.justifyToPlot = overflow === 'justify';\r\n\t\taxis.overlap = false;\r\n\r\n\t\t// Mark all elements inActive before we go over and mark the active ones\r\n\t\teach([ticks, minorTicks, alternateBands], function (coll) {\r\n\t\t\tvar pos;\r\n\t\t\tfor (pos in coll) {\r\n\t\t\t\tcoll[pos].isActive = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// If the series has data draw the ticks. Else only the line and title\r\n\t\tif (hasData || isLinked) {\r\n\r\n\t\t\t// minor ticks\r\n\t\t\tif (axis.minorTickInterval && !axis.categories) {\r\n\t\t\t\teach(axis.getMinorTickPositions(), function (pos) {\r\n\t\t\t\t\tif (!minorTicks[pos]) {\r\n\t\t\t\t\t\tminorTicks[pos] = new Tick(axis, pos, 'minor');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// render new ticks in old position\r\n\t\t\t\t\tif (slideInTicks && minorTicks[pos].isNew) {\r\n\t\t\t\t\t\tminorTicks[pos].render(null, true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tminorTicks[pos].render(null, false, 1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Major ticks. Pull out the first item and render it last so that\r\n\t\t\t// we can get the position of the neighbour label. #808.\r\n\t\t\tif (tickPositions.length) { // #1300\r\n\t\t\t\teach(tickPositions, function (pos, i) {\r\n\r\n\t\t\t\t\t// linked axes need an extra check to find out if\r\n\t\t\t\t\tif (!isLinked || (pos >= axis.min && pos <= axis.max)) {\r\n\r\n\t\t\t\t\t\tif (!ticks[pos]) {\r\n\t\t\t\t\t\t\tticks[pos] = new Tick(axis, pos);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// render new ticks in old position\r\n\t\t\t\t\t\tif (slideInTicks && ticks[pos].isNew) {\r\n\t\t\t\t\t\t\tticks[pos].render(i, true, 0.1);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tticks[pos].render(i);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t\t// In a categorized axis, the tick marks are displayed between labels. So\r\n\t\t\t\t// we need to add a tick mark and grid line at the left edge of the X axis.\r\n\t\t\t\tif (tickmarkOffset && (axis.min === 0 || axis.single)) {\r\n\t\t\t\t\tif (!ticks[-1]) {\r\n\t\t\t\t\t\tticks[-1] = new Tick(axis, -1, null, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tticks[-1].render(-1);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// alternate grid color\r\n\t\t\tif (alternateGridColor) {\r\n\t\t\t\teach(tickPositions, function (pos, i) {\r\n\t\t\t\t\tif (i % 2 === 0 && pos < axis.max) {\r\n\t\t\t\t\t\tif (!alternateBands[pos]) {\r\n\t\t\t\t\t\t\talternateBands[pos] = new Highcharts.PlotLineOrBand(axis);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfrom = pos + tickmarkOffset; // #949\r\n\t\t\t\t\t\tto = tickPositions[i + 1] !== UNDEFINED ? tickPositions[i + 1] + tickmarkOffset : axis.max;\r\n\t\t\t\t\t\talternateBands[pos].options = {\r\n\t\t\t\t\t\t\tfrom: isLog ? lin2log(from) : from,\r\n\t\t\t\t\t\t\tto: isLog ? lin2log(to) : to,\r\n\t\t\t\t\t\t\tcolor: alternateGridColor\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\talternateBands[pos].render();\r\n\t\t\t\t\t\talternateBands[pos].isActive = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// custom plot lines and bands\r\n\t\t\tif (!axis._addedPlotLB) { // only first time\r\n\t\t\t\teach((options.plotLines || []).concat(options.plotBands || []), function (plotLineOptions) {\r\n\t\t\t\t\taxis.addPlotBandOrLine(plotLineOptions);\r\n\t\t\t\t});\r\n\t\t\t\taxis._addedPlotLB = true;\r\n\t\t\t}\r\n\r\n\t\t} // end if hasData\r\n\r\n\t\t// Remove inactive ticks\r\n\t\teach([ticks, minorTicks, alternateBands], function (coll) {\r\n\t\t\tvar pos,\r\n\t\t\t\ti,\r\n\t\t\t\tforDestruction = [],\r\n\t\t\t\tdelay = globalAnimation ? globalAnimation.duration || 500 : 0,\r\n\t\t\t\tdestroyInactiveItems = function () {\r\n\t\t\t\t\ti = forDestruction.length;\r\n\t\t\t\t\twhile (i--) {\r\n\t\t\t\t\t\t// When resizing rapidly, the same items may be destroyed in different timeouts,\r\n\t\t\t\t\t\t// or the may be reactivated\r\n\t\t\t\t\t\tif (coll[forDestruction[i]] && !coll[forDestruction[i]].isActive) {\r\n\t\t\t\t\t\t\tcoll[forDestruction[i]].destroy();\r\n\t\t\t\t\t\t\tdelete coll[forDestruction[i]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\tfor (pos in coll) {\r\n\r\n\t\t\t\tif (!coll[pos].isActive) {\r\n\t\t\t\t\t// Render to zero opacity\r\n\t\t\t\t\tcoll[pos].render(pos, false, 0);\r\n\t\t\t\t\tcoll[pos].isActive = false;\r\n\t\t\t\t\tforDestruction.push(pos);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// When the objects are finished fading out, destroy them\r\n\t\t\tif (coll === alternateBands || !chart.hasRendered || !delay) {\r\n\t\t\t\tdestroyInactiveItems();\r\n\t\t\t} else if (delay) {\r\n\t\t\t\tsetTimeout(destroyInactiveItems, delay);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Static items. As the axis group is cleared on subsequent calls\r\n\t\t// to render, these items are added outside the group.\r\n\t\t// axis line\r\n\t\tif (lineWidth) {\r\n\t\t\tlinePath = axis.getLinePath(lineWidth);\r\n\t\t\tif (!axis.axisLine) {\r\n\t\t\t\taxis.axisLine = renderer.path(linePath)\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\tstroke: options.lineColor,\r\n\t\t\t\t\t\t'stroke-width': lineWidth,\r\n\t\t\t\t\t\tzIndex: 7\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add(axis.axisGroup);\r\n\t\t\t} else {\r\n\t\t\t\taxis.axisLine.animate({ d: linePath });\r\n\t\t\t}\r\n\r\n\t\t\t// show or hide the line depending on options.showEmpty\r\n\t\t\taxis.axisLine[showAxis ? 'show' : 'hide']();\r\n\t\t}\r\n\r\n\t\tif (axisTitle && showAxis) {\r\n\r\n\t\t\taxisTitle[axisTitle.isNew ? 'attr' : 'animate'](\r\n\t\t\t\taxis.getTitlePosition()\r\n\t\t\t);\r\n\t\t\taxisTitle.isNew = false;\r\n\t\t}\r\n\r\n\t\t// Stacked totals:\r\n\t\tif (stackLabelOptions && stackLabelOptions.enabled) {\r\n\t\t\taxis.renderStackTotals();\r\n\t\t}\r\n\t\t// End stacked totals\r\n\r\n\t\taxis.isDirty = false;\r\n\t},\r\n\r\n\t/**\r\n\t * Redraw the axis to reflect changes in the data or axis extremes\r\n\t */\r\n\tredraw: function () {\r\n\t\t\r\n\t\t// render the axis\r\n\t\tthis.render();\r\n\r\n\t\t// move plot lines and bands\r\n\t\teach(this.plotLinesAndBands, function (plotLine) {\r\n\t\t\tplotLine.render();\r\n\t\t});\r\n\r\n\t\t// mark associated series as dirty and ready for redraw\r\n\t\teach(this.series, function (series) {\r\n\t\t\tseries.isDirty = true;\r\n\t\t});\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Destroys an Axis instance.\r\n\t */\r\n\tdestroy: function (keepEvents) {\r\n\t\tvar axis = this,\r\n\t\t\tstacks = axis.stacks,\r\n\t\t\tstackKey,\r\n\t\t\tplotLinesAndBands = axis.plotLinesAndBands,\r\n\t\t\ti;\r\n\r\n\t\t// Remove the events\r\n\t\tif (!keepEvents) {\r\n\t\t\tremoveEvent(axis);\r\n\t\t}\r\n\r\n\t\t// Destroy each stack total\r\n\t\tfor (stackKey in stacks) {\r\n\t\t\tdestroyObjectProperties(stacks[stackKey]);\r\n\r\n\t\t\tstacks[stackKey] = null;\r\n\t\t}\r\n\r\n\t\t// Destroy collections\r\n\t\teach([axis.ticks, axis.minorTicks, axis.alternateBands], function (coll) {\r\n\t\t\tdestroyObjectProperties(coll);\r\n\t\t});\r\n\t\ti = plotLinesAndBands.length;\r\n\t\twhile (i--) { // #1975\r\n\t\t\tplotLinesAndBands[i].destroy();\r\n\t\t}\r\n\r\n\t\t// Destroy local variables\r\n\t\teach(['stackTotalGroup', 'axisLine', 'axisTitle', 'axisGroup', 'cross', 'gridGroup', 'labelGroup'], function (prop) {\r\n\t\t\tif (axis[prop]) {\r\n\t\t\t\taxis[prop] = axis[prop].destroy();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Destroy crosshair\r\n\t\tif (this.cross) {\r\n\t\t\tthis.cross.destroy();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Draw the crosshair\r\n\t */\r\n\tdrawCrosshair: function (e, point) { // docs: Missing docs for Axis.crosshair. Also for properties.\r\n\r\n\t\tvar path,\r\n\t\t\toptions = this.crosshair,\r\n\t\t\tanimation = options.animation,\r\n\t\t\tpos,\r\n\t\t\tattribs,\r\n\t\t\tcategorized;\r\n\t\t\r\n\t\tif (\r\n\t\t\t// Disabled in options\r\n\t\t\t!this.crosshair || \r\n\t\t\t// Snap\r\n\t\t\t((defined(point) || !pick(this.crosshair.snap, true)) === false)\r\n\t\t) {\r\n\t\t\tthis.hideCrosshair();\r\n\t\t\r\n\t\t} else {\t\t\t\r\n\r\n\t\t\t// Get the path\r\n\t\t\tif (!pick(options.snap, true)) {\r\n\t\t\t\tpos = (this.horiz ? e.chartX - this.pos : this.len - e.chartY + this.pos);\r\n\t\t\t} else if (defined(point)) {\r\n\t\t\t\t/*jslint eqeq: true*/\r\n\t\t\t\tpos = this.isXAxis ? point.plotX : this.len - point.plotY; // #3834\r\n\t\t\t\t/*jslint eqeq: false*/\r\n\t\t\t}\r\n\r\n\t\t\tif (this.isRadial) {\r\n\t\t\t\tpath = this.getPlotLinePath(this.isXAxis ? point.x : pick(point.stackY, point.y)) || null; // #3189\r\n\t\t\t} else {\r\n\t\t\t\tpath = this.getPlotLinePath(null, null, null, null, pos) || null; // #3189\r\n\t\t\t}\r\n\r\n\t\t\tif (path === null) {\r\n\t\t\t\tthis.hideCrosshair();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Draw the cross\r\n\t\t\tif (this.cross) {\r\n\t\t\t\tthis.cross\r\n\t\t\t\t\t.attr({ visibility: VISIBLE })[animation ? 'animate' : 'attr']({ d: path }, animation);\r\n\t\t\t} else {\r\n\t\t\t\tcategorized = this.categories && !this.isRadial;\r\n\t\t\t\tattribs = {\r\n\t\t\t\t\t'stroke-width': options.width || (categorized ? this.transA : 1),\r\n\t\t\t\t\tstroke: options.color || (categorized ? 'rgba(155,200,255,0.2)' : '#C0C0C0'),\r\n\t\t\t\t\tzIndex: options.zIndex || 2\r\n\t\t\t\t};\r\n\t\t\t\tif (options.dashStyle) {\r\n\t\t\t\t\tattribs.dashstyle = options.dashStyle;\r\n\t\t\t\t}\r\n\t\t\t\tthis.cross = this.chart.renderer.path(path).attr(attribs).add();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t *\tHide the crosshair.\r\n\t */\r\n\thideCrosshair: function () {\r\n\t\tif (this.cross) {\r\n\t\t\tthis.cross.hide();\r\n\t\t}\r\n\t}\r\n}; // end Axis\r\n\r\nextend(Axis.prototype, AxisPlotLineOrBandExtension);\r\n\r\n/**\r\n * Set the tick positions to a time unit that makes sense, for example\r\n * on the first of each month or on every Monday. Return an array\r\n * with the time positions. Used in datetime axes as well as for grouping\r\n * data on a datetime axis.\r\n *\r\n * @param {Object} normalizedInterval The interval in axis values (ms) and the count\r\n * @param {Number} min The minimum in axis values\r\n * @param {Number} max The maximum in axis values\r\n * @param {Number} startOfWeek\r\n */\r\nAxis.prototype.getTimeTicks = function (normalizedInterval, min, max, startOfWeek) {\r\n\tvar tickPositions = [],\r\n\t\ti,\r\n\t\thigherRanks = {},\r\n\t\tuseUTC = defaultOptions.global.useUTC,\r\n\t\tminYear, // used in months and years as a basis for Date.UTC()\r\n\t\tminDate = new Date(min - getTZOffset(min)),\r\n\t\tinterval = normalizedInterval.unitRange,\r\n\t\tcount = normalizedInterval.count;\r\n\r\n\tif (defined(min)) { // #1300\r\n\t\tminDate.setMilliseconds(interval >= timeUnits.second ? 0 :\r\n\t\t\tcount * mathFloor(minDate.getMilliseconds() / count)); // #3652, #3654\r\n\r\n\t\tif (interval >= timeUnits.second) { // second\r\n\t\t\tminDate.setSeconds(interval >= timeUnits.minute ? 0 :\r\n\t\t\t\tcount * mathFloor(minDate.getSeconds() / count));\r\n\t\t}\r\n\t\r\n\t\tif (interval >= timeUnits.minute) { // minute\r\n\t\t\tminDate[setMinutes](interval >= timeUnits.hour ? 0 :\r\n\t\t\t\tcount * mathFloor(minDate[getMinutes]() / count));\r\n\t\t}\r\n\t\r\n\t\tif (interval >= timeUnits.hour) { // hour\r\n\t\t\tminDate[setHours](interval >= timeUnits.day ? 0 :\r\n\t\t\t\tcount * mathFloor(minDate[getHours]() / count));\r\n\t\t}\r\n\t\r\n\t\tif (interval >= timeUnits.day) { // day\r\n\t\t\tminDate[setDate](interval >= timeUnits.month ? 1 :\r\n\t\t\t\tcount * mathFloor(minDate[getDate]() / count));\r\n\t\t}\r\n\t\r\n\t\tif (interval >= timeUnits.month) { // month\r\n\t\t\tminDate[setMonth](interval >= timeUnits.year ? 0 :\r\n\t\t\t\tcount * mathFloor(minDate[getMonth]() / count));\r\n\t\t\tminYear = minDate[getFullYear]();\r\n\t\t}\r\n\t\r\n\t\tif (interval >= timeUnits.year) { // year\r\n\t\t\tminYear -= minYear % count;\r\n\t\t\tminDate[setFullYear](minYear);\r\n\t\t}\r\n\t\r\n\t\t// week is a special case that runs outside the hierarchy\r\n\t\tif (interval === timeUnits.week) {\r\n\t\t\t// get start of current week, independent of count\r\n\t\t\tminDate[setDate](minDate[getDate]() - minDate[getDay]() +\r\n\t\t\t\tpick(startOfWeek, 1));\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// get tick positions\r\n\t\ti = 1;\r\n\t\tif (timezoneOffset || getTimezoneOffset) {\r\n\t\t\tminDate = minDate.getTime();\r\n\t\t\tminDate = new Date(minDate + getTZOffset(minDate));\r\n\t\t}\r\n\t\tminYear = minDate[getFullYear]();\r\n\t\tvar time = minDate.getTime(),\r\n\t\t\tminMonth = minDate[getMonth](),\r\n\t\t\tminDateDate = minDate[getDate](),\r\n\t\t\tlocalTimezoneOffset = (timeUnits.day + \r\n\t\t\t\t\t(useUTC ? getTZOffset(minDate) : minDate.getTimezoneOffset() * 60 * 1000)\r\n\t\t\t\t) % timeUnits.day; // #950, #3359\r\n\t\r\n\t\t// iterate and add tick positions at appropriate values\r\n\t\twhile (time < max) {\r\n\t\t\ttickPositions.push(time);\r\n\t\r\n\t\t\t// if the interval is years, use Date.UTC to increase years\r\n\t\t\tif (interval === timeUnits.year) {\r\n\t\t\t\ttime = makeTime(minYear + i * count, 0);\r\n\t\r\n\t\t\t// if the interval is months, use Date.UTC to increase months\r\n\t\t\t} else if (interval === timeUnits.month) {\r\n\t\t\t\ttime = makeTime(minYear, minMonth + i * count);\r\n\t\r\n\t\t\t// if we're using global time, the interval is not fixed as it jumps\r\n\t\t\t// one hour at the DST crossover\r\n\t\t\t} else if (!useUTC && (interval === timeUnits.day || interval === timeUnits.week)) {\r\n\t\t\t\ttime = makeTime(minYear, minMonth, minDateDate +\r\n\t\t\t\t\ti * count * (interval === timeUnits.day ? 1 : 7));\r\n\t\r\n\t\t\t// else, the interval is fixed and we use simple addition\r\n\t\t\t} else {\r\n\t\t\t\ttime += interval * count;\r\n\t\t\t}\r\n\t\r\n\t\t\ti++;\r\n\t\t}\r\n\t\r\n\t\t// push the last time\r\n\t\ttickPositions.push(time);\r\n\r\n\r\n\t\t// mark new days if the time is dividible by day (#1649, #1760)\r\n\t\teach(grep(tickPositions, function (time) {\r\n\t\t\treturn interval <= timeUnits.hour && time % timeUnits.day === localTimezoneOffset;\r\n\t\t}), function (time) {\r\n\t\t\thigherRanks[time] = 'day';\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// record information on the chosen unit - for dynamic label formatter\r\n\ttickPositions.info = extend(normalizedInterval, {\r\n\t\thigherRanks: higherRanks,\r\n\t\ttotalRange: interval * count\r\n\t});\r\n\r\n\treturn tickPositions;\r\n};\r\n\r\n/**\r\n * Get a normalized tick interval for dates. Returns a configuration object with\r\n * unit range (interval), count and name. Used to prepare data for getTimeTicks. \r\n * Previously this logic was part of getTimeTicks, but as getTimeTicks now runs\r\n * of segments in stock charts, the normalizing logic was extracted in order to \r\n * prevent it for running over again for each segment having the same interval. \r\n * #662, #697.\r\n */\r\nAxis.prototype.normalizeTimeTickInterval = function (tickInterval, unitsOption) {\r\n\tvar units = unitsOption || [[\r\n\t\t\t\t'millisecond', // unit name\r\n\t\t\t\t[1, 2, 5, 10, 20, 25, 50, 100, 200, 500] // allowed multiples\r\n\t\t\t], [\r\n\t\t\t\t'second',\r\n\t\t\t\t[1, 2, 5, 10, 15, 30]\r\n\t\t\t], [\r\n\t\t\t\t'minute',\r\n\t\t\t\t[1, 2, 5, 10, 15, 30]\r\n\t\t\t], [\r\n\t\t\t\t'hour',\r\n\t\t\t\t[1, 2, 3, 4, 6, 8, 12]\r\n\t\t\t], [\r\n\t\t\t\t'day',\r\n\t\t\t\t[1, 2]\r\n\t\t\t], [\r\n\t\t\t\t'week',\r\n\t\t\t\t[1, 2]\r\n\t\t\t], [\r\n\t\t\t\t'month',\r\n\t\t\t\t[1, 2, 3, 4, 6]\r\n\t\t\t], [\r\n\t\t\t\t'year',\r\n\t\t\t\tnull\r\n\t\t\t]],\r\n\t\tunit = units[units.length - 1], // default unit is years\r\n\t\tinterval = timeUnits[unit[0]],\r\n\t\tmultiples = unit[1],\r\n\t\tcount,\r\n\t\ti;\r\n\t\t\r\n\t// loop through the units to find the one that best fits the tickInterval\r\n\tfor (i = 0; i < units.length; i++) {\r\n\t\tunit = units[i];\r\n\t\tinterval = timeUnits[unit[0]];\r\n\t\tmultiples = unit[1];\r\n\r\n\r\n\t\tif (units[i + 1]) {\r\n\t\t\t// lessThan is in the middle between the highest multiple and the next unit.\r\n\t\t\tvar lessThan = (interval * multiples[multiples.length - 1] +\r\n\t\t\t\t\t\ttimeUnits[units[i + 1][0]]) / 2;\r\n\r\n\t\t\t// break and keep the current unit\r\n\t\t\tif (tickInterval <= lessThan) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// prevent 2.5 years intervals, though 25, 250 etc. are allowed\r\n\tif (interval === timeUnits.year && tickInterval < 5 * interval) {\r\n\t\tmultiples = [1, 2, 5];\r\n\t}\r\n\r\n\t// get the count\r\n\tcount = normalizeTickInterval(\r\n\t\ttickInterval / interval, \r\n\t\tmultiples,\r\n\t\tunit[0] === 'year' ? mathMax(getMagnitude(tickInterval / interval), 1) : 1 // #1913, #2360\r\n\t);\r\n\t\r\n\treturn {\r\n\t\tunitRange: interval,\r\n\t\tcount: count,\r\n\t\tunitName: unit[0]\r\n\t};\r\n};/**\r\n * Methods defined on the Axis prototype\r\n */\r\n\r\n/**\r\n * Set the tick positions of a logarithmic axis\r\n */\r\nAxis.prototype.getLogTickPositions = function (interval, min, max, minor) {\r\n\tvar axis = this,\r\n\t\toptions = axis.options,\r\n\t\taxisLength = axis.len,\r\n\t\t// Since we use this method for both major and minor ticks,\r\n\t\t// use a local variable and return the result\r\n\t\tpositions = []; \r\n\t\r\n\t// Reset\r\n\tif (!minor) {\r\n\t\taxis._minorAutoInterval = null;\r\n\t}\r\n\t\r\n\t// First case: All ticks fall on whole logarithms: 1, 10, 100 etc.\r\n\tif (interval >= 0.5) {\r\n\t\tinterval = mathRound(interval);\r\n\t\tpositions = axis.getLinearTickPositions(interval, min, max);\r\n\t\t\r\n\t// Second case: We need intermediary ticks. For example \r\n\t// 1, 2, 4, 6, 8, 10, 20, 40 etc. \r\n\t} else if (interval >= 0.08) {\r\n\t\tvar roundedMin = mathFloor(min),\r\n\t\t\tintermediate,\r\n\t\t\ti,\r\n\t\t\tj,\r\n\t\t\tlen,\r\n\t\t\tpos,\r\n\t\t\tlastPos,\r\n\t\t\tbreak2;\r\n\t\t\t\r\n\t\tif (interval > 0.3) {\r\n\t\t\tintermediate = [1, 2, 4];\r\n\t\t} else if (interval > 0.15) { // 0.2 equals five minor ticks per 1, 10, 100 etc\r\n\t\t\tintermediate = [1, 2, 4, 6, 8];\r\n\t\t} else { // 0.1 equals ten minor ticks per 1, 10, 100 etc\r\n\t\t\tintermediate = [1, 2, 3, 4, 5, 6, 7, 8, 9];\r\n\t\t}\r\n\t\t\r\n\t\tfor (i = roundedMin; i < max + 1 && !break2; i++) {\r\n\t\t\tlen = intermediate.length;\r\n\t\t\tfor (j = 0; j < len && !break2; j++) {\r\n\t\t\t\tpos = log2lin(lin2log(i) * intermediate[j]);\r\n\t\t\t\tif (pos > min && (!minor || lastPos <= max) && lastPos !== UNDEFINED) { // #1670, lastPos is #3113\r\n\t\t\t\t\tpositions.push(lastPos);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (lastPos > max) {\r\n\t\t\t\t\tbreak2 = true;\r\n\t\t\t\t}\r\n\t\t\t\tlastPos = pos;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t// Third case: We are so deep in between whole logarithmic values that\r\n\t// we might as well handle the tick positions like a linear axis. For\r\n\t// example 1.01, 1.02, 1.03, 1.04.\r\n\t} else {\r\n\t\tvar realMin = lin2log(min),\r\n\t\t\trealMax = lin2log(max),\r\n\t\t\ttickIntervalOption = options[minor ? 'minorTickInterval' : 'tickInterval'],\r\n\t\t\tfilteredTickIntervalOption = tickIntervalOption === 'auto' ? null : tickIntervalOption,\r\n\t\t\ttickPixelIntervalOption = options.tickPixelInterval / (minor ? 5 : 1),\r\n\t\t\ttotalPixelLength = minor ? axisLength / axis.tickPositions.length : axisLength;\r\n\t\t\r\n\t\tinterval = pick(\r\n\t\t\tfilteredTickIntervalOption,\r\n\t\t\taxis._minorAutoInterval,\r\n\t\t\t(realMax - realMin) * tickPixelIntervalOption / (totalPixelLength || 1)\r\n\t\t);\r\n\t\t\r\n\t\tinterval = normalizeTickInterval(\r\n\t\t\tinterval, \r\n\t\t\tnull, \r\n\t\t\tgetMagnitude(interval)\r\n\t\t);\r\n\t\t\r\n\t\tpositions = map(axis.getLinearTickPositions(\r\n\t\t\tinterval, \r\n\t\t\trealMin,\r\n\t\t\trealMax\t\r\n\t\t), log2lin);\r\n\t\t\r\n\t\tif (!minor) {\r\n\t\t\taxis._minorAutoInterval = interval / 5;\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Set the axis-level tickInterval variable \r\n\tif (!minor) {\r\n\t\taxis.tickInterval = interval;\r\n\t}\r\n\treturn positions;\r\n};/**\r\n * The tooltip object\r\n * @param {Object} chart The chart instance\r\n * @param {Object} options Tooltip options\r\n */\r\nvar Tooltip = Highcharts.Tooltip = function () {\r\n\tthis.init.apply(this, arguments);\r\n};\r\n\r\nTooltip.prototype = {\r\n\r\n\tinit: function (chart, options) {\r\n\r\n\t\tvar borderWidth = options.borderWidth,\r\n\t\t\tstyle = options.style,\r\n\t\t\tpadding = pInt(style.padding);\r\n\r\n\t\t// Save the chart and options\r\n\t\tthis.chart = chart;\r\n\t\tthis.options = options;\r\n\r\n\t\t// Keep track of the current series\r\n\t\t//this.currentSeries = UNDEFINED;\r\n\r\n\t\t// List of crosshairs\r\n\t\tthis.crosshairs = [];\r\n\r\n\t\t// Current values of x and y when animating\r\n\t\tthis.now = { x: 0, y: 0 };\r\n\r\n\t\t// The tooltip is initially hidden\r\n\t\tthis.isHidden = true;\r\n\r\n\r\n\t\t// create the label\t\t\r\n\t\tthis.label = chart.renderer.label('', 0, 0, options.shape || 'callout', null, null, options.useHTML, null, 'tooltip')\r\n\t\t\t.attr({\r\n\t\t\t\tpadding: padding,\r\n\t\t\t\tfill: options.backgroundColor,\r\n\t\t\t\t'stroke-width': borderWidth,\r\n\t\t\t\tr: options.borderRadius,\r\n\t\t\t\tzIndex: 8\r\n\t\t\t})\r\n\t\t\t.css(style)\r\n\t\t\t.css({ padding: 0 }) // Remove it from VML, the padding is applied as an attribute instead (#1117)\r\n\t\t\t.add()\r\n\t\t\t.attr({ y: -9999 }); // #2301, #2657\r\n\r\n\t\t// When using canVG the shadow shows up as a gray circle\r\n\t\t// even if the tooltip is hidden.\r\n\t\tif (!useCanVG) {\r\n\t\t\tthis.label.shadow(options.shadow);\r\n\t\t}\r\n\r\n\t\t// Public property for getting the shared state.\r\n\t\tthis.shared = options.shared;\r\n\t},\r\n\r\n\t/**\r\n\t * Destroy the tooltip and its elements.\r\n\t */\r\n\tdestroy: function () {\r\n\t\t// Destroy and clear local variables\r\n\t\tif (this.label) {\r\n\t\t\tthis.label = this.label.destroy();\r\n\t\t}\r\n\t\tclearTimeout(this.hideTimer);\r\n\t\tclearTimeout(this.tooltipTimeout);\r\n\t},\r\n\r\n\t/**\r\n\t * Provide a soft movement for the tooltip\r\n\t *\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @private\r\n\t */\r\n\tmove: function (x, y, anchorX, anchorY) {\r\n\t\tvar tooltip = this,\r\n\t\t\tnow = tooltip.now,\r\n\t\t\tanimate = tooltip.options.animation !== false && !tooltip.isHidden && \r\n\t\t\t\t// When we get close to the target position, abort animation and land on the right place (#3056)\r\n\t\t\t\t(mathAbs(x - now.x) > 1 || mathAbs(y - now.y) > 1),\r\n\t\t\tskipAnchor = tooltip.followPointer || tooltip.len > 1;\r\n\r\n\t\t// Get intermediate values for animation\r\n\t\textend(now, {\r\n\t\t\tx: animate ? (2 * now.x + x) / 3 : x,\r\n\t\t\ty: animate ? (now.y + y) / 2 : y,\r\n\t\t\tanchorX: skipAnchor ? UNDEFINED : animate ? (2 * now.anchorX + anchorX) / 3 : anchorX,\r\n\t\t\tanchorY: skipAnchor ? UNDEFINED : animate ? (now.anchorY + anchorY) / 2 : anchorY\r\n\t\t});\r\n\r\n\t\t// Move to the intermediate value\r\n\t\ttooltip.label.attr(now);\r\n\r\n\t\t\r\n\t\t// Run on next tick of the mouse tracker\r\n\t\tif (animate) {\r\n\t\t\r\n\t\t\t// Never allow two timeouts\r\n\t\t\tclearTimeout(this.tooltipTimeout);\r\n\t\t\t\r\n\t\t\t// Set the fixed interval ticking for the smooth tooltip\r\n\t\t\tthis.tooltipTimeout = setTimeout(function () {\r\n\t\t\t\t// The interval function may still be running during destroy, so check that the chart is really there before calling.\r\n\t\t\t\tif (tooltip) {\r\n\t\t\t\t\ttooltip.move(x, y, anchorX, anchorY);\r\n\t\t\t\t}\r\n\t\t\t}, 32);\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Hide the tooltip\r\n\t */\r\n\thide: function (delay) {\r\n\t\tvar tooltip = this,\r\n\t\t\thoverPoints;\r\n\t\t\r\n\t\tclearTimeout(this.hideTimer); // disallow duplicate timers (#1728, #1766)\r\n\t\tif (!this.isHidden) {\r\n\t\t\thoverPoints = this.chart.hoverPoints;\r\n\r\n\t\t\tthis.hideTimer = setTimeout(function () {\r\n\t\t\t\ttooltip.label.fadeOut();\r\n\t\t\t\ttooltip.isHidden = true;\r\n\t\t\t}, pick(delay, this.options.hideDelay, 500));\r\n\r\n\t\t\t// hide previous hoverPoints and set new\r\n\t\t\tif (hoverPoints) {\r\n\t\t\t\teach(hoverPoints, function (point) {\r\n\t\t\t\t\tpoint.setState();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.chart.hoverPoints = null;\r\n\t\t\tthis.chart.hoverSeries = null;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/** \r\n\t * Extendable method to get the anchor position of the tooltip\r\n\t * from a point or set of points\r\n\t */\r\n\tgetAnchor: function (points, mouseEvent) {\r\n\t\tvar ret,\r\n\t\t\tchart = this.chart,\r\n\t\t\tinverted = chart.inverted,\r\n\t\t\tplotTop = chart.plotTop,\r\n\t\t\tplotLeft = chart.plotLeft,\r\n\t\t\tplotX = 0,\r\n\t\t\tplotY = 0,\r\n\t\t\tyAxis,\r\n\t\t\txAxis;\r\n\t\t\r\n\t\tpoints = splat(points);\r\n\t\t\r\n\t\t// Pie uses a special tooltipPos\r\n\t\tret = points[0].tooltipPos;\r\n\t\t\r\n\t\t// When tooltip follows mouse, relate the position to the mouse\r\n\t\tif (this.followPointer && mouseEvent) {\r\n\t\t\tif (mouseEvent.chartX === UNDEFINED) {\r\n\t\t\t\tmouseEvent = chart.pointer.normalize(mouseEvent);\r\n\t\t\t}\r\n\t\t\tret = [\r\n\t\t\t\tmouseEvent.chartX - chart.plotLeft,\r\n\t\t\t\tmouseEvent.chartY - plotTop\r\n\t\t\t];\r\n\t\t}\r\n\t\t// When shared, use the average position\r\n\t\tif (!ret) {\r\n\t\t\teach(points, function (point) {\r\n\t\t\t\tyAxis = point.series.yAxis;\r\n\t\t\t\txAxis = point.series.xAxis;\r\n\t\t\t\tplotX += point.plotX  + (!inverted && xAxis ? xAxis.left - plotLeft : 0); \r\n\t\t\t\tplotY += (point.plotLow ? (point.plotLow + point.plotHigh) / 2 : point.plotY) +\r\n\t\t\t\t\t(!inverted && yAxis ? yAxis.top - plotTop : 0); // #1151\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tplotX /= points.length;\r\n\t\t\tplotY /= points.length;\r\n\t\t\t\r\n\t\t\tret = [\r\n\t\t\t\tinverted ? chart.plotWidth - plotY : plotX,\r\n\t\t\t\tthis.shared && !inverted && points.length > 1 && mouseEvent ? \r\n\t\t\t\t\tmouseEvent.chartY - plotTop : // place shared tooltip next to the mouse (#424)\r\n\t\t\t\t\tinverted ? chart.plotHeight - plotX : plotY\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\treturn map(ret, mathRound);\r\n\t},\r\n\t\r\n\t/**\r\n\t * Place the tooltip in a chart without spilling over\r\n\t * and not covering the point it self.\r\n\t */\r\n\tgetPosition: function (boxWidth, boxHeight, point) {\r\n\t\t\r\n\t\tvar chart = this.chart,\r\n\t\t\tdistance = this.distance,\r\n\t\t\tret = {},\r\n\t\t\tswapped,\r\n\t\t\tfirst = ['y', chart.chartHeight, boxHeight, point.plotY + chart.plotTop],\r\n\t\t\tsecond = ['x', chart.chartWidth, boxWidth, point.plotX + chart.plotLeft],\r\n\t\t\t// The far side is right or bottom\r\n\t\t\tpreferFarSide = pick(point.ttBelow, (chart.inverted && !point.negative) || (!chart.inverted && point.negative)),\r\n\t\t\t/**\r\n\t\t\t * Handle the preferred dimension. When the preferred dimension is tooltip\r\n\t\t\t * on top or bottom of the point, it will look for space there.\r\n\t\t\t */\r\n\t\t\tfirstDimension = function (dim, outerSize, innerSize, point) {\r\n\t\t\t\tvar roomLeft = innerSize < point - distance,\r\n\t\t\t\t\troomRight = point + distance + innerSize < outerSize,\r\n\t\t\t\t\talignedLeft = point - distance - innerSize,\r\n\t\t\t\t\talignedRight = point + distance;\r\n\r\n\t\t\t\tif (preferFarSide && roomRight) {\r\n\t\t\t\t\tret[dim] = alignedRight;\r\n\t\t\t\t} else if (!preferFarSide && roomLeft) {\r\n\t\t\t\t\tret[dim] = alignedLeft;\r\n\t\t\t\t} else if (roomLeft) {\r\n\t\t\t\t\tret[dim] = alignedLeft;\r\n\t\t\t\t} else if (roomRight) {\r\n\t\t\t\t\tret[dim] = alignedRight;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * Handle the secondary dimension. If the preferred dimension is tooltip\r\n\t\t\t * on top or bottom of the point, the second dimension is to align the tooltip\r\n\t\t\t * above the point, trying to align center but allowing left or right\r\n\t\t\t * align within the chart box.\r\n\t\t\t */\r\n\t\t\tsecondDimension = function (dim, outerSize, innerSize, point) {\r\n\t\t\t\t// Too close to the edge, return false and swap dimensions\r\n\t\t\t\tif (point < distance || point > outerSize - distance) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t\r\n\t\t\t\t// Align left/top\r\n\t\t\t\t} else if (point < innerSize / 2) {\r\n\t\t\t\t\tret[dim] = 1;\r\n\t\t\t\t// Align right/bottom\r\n\t\t\t\t} else if (point > outerSize - innerSize / 2) {\r\n\t\t\t\t\tret[dim] = outerSize - innerSize - 2;\r\n\t\t\t\t// Align center\r\n\t\t\t\t} else {\r\n\t\t\t\t\tret[dim] = point - innerSize / 2;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * Swap the dimensions \r\n\t\t\t */\r\n\t\t\tswap = function (count) {\r\n\t\t\t\tvar temp = first;\r\n\t\t\t\tfirst = second;\r\n\t\t\t\tsecond = temp;\r\n\t\t\t\tswapped = count;\r\n\t\t\t},\r\n\t\t\trun = function () {\r\n\t\t\t\tif (firstDimension.apply(0, first) !== false) {\r\n\t\t\t\t\tif (secondDimension.apply(0, second) === false && !swapped) {\r\n\t\t\t\t\t\tswap(true);\r\n\t\t\t\t\t\trun();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (!swapped) {\r\n\t\t\t\t\tswap(true);\r\n\t\t\t\t\trun();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tret.x = ret.y = 0;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t// Under these conditions, prefer the tooltip on the side of the point\r\n\t\tif (chart.inverted || this.len > 1) {\r\n\t\t\tswap();\r\n\t\t}\r\n\t\trun();\r\n\r\n\t\treturn ret;\r\n\t\r\n\t},\r\n\r\n\t/**\r\n\t * In case no user defined formatter is given, this will be used. Note that the context\r\n\t * here is an object holding point, series, x, y etc.\r\n\t */\r\n\tdefaultFormatter: function (tooltip) {\r\n\t\tvar items = this.points || splat(this),\r\n\t\t\ts;\r\n\r\n\t\t// build the header\r\n\t\ts = [tooltip.tooltipFooterHeaderFormatter(items[0])]; //#3397: abstraction to enable formatting of footer and header\r\n\r\n\t\t// build the values\r\n\t\ts = s.concat(tooltip.bodyFormatter(items));\r\n\r\n\t\t// footer\r\n\t\ts.push(tooltip.tooltipFooterHeaderFormatter(items[0], true)); //#3397: abstraction to enable formatting of footer and header\r\n\r\n\t\treturn s.join('');\r\n\t},\r\n\r\n\t/**\r\n\t * Refresh the tooltip's text and position.\r\n\t * @param {Object} point\r\n\t */\r\n\trefresh: function (point, mouseEvent) {\r\n\t\tvar tooltip = this,\r\n\t\t\tchart = tooltip.chart,\r\n\t\t\tlabel = tooltip.label,\r\n\t\t\toptions = tooltip.options,\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\tanchor,\r\n\t\t\ttextConfig = {},\r\n\t\t\ttext,\r\n\t\t\tpointConfig = [],\r\n\t\t\tformatter = options.formatter || tooltip.defaultFormatter,\r\n\t\t\thoverPoints = chart.hoverPoints,\r\n\t\t\tborderColor,\r\n\t\t\tshared = tooltip.shared,\r\n\t\t\tcurrentSeries;\r\n\t\t\t\r\n\t\tclearTimeout(this.hideTimer);\r\n\t\t\r\n\t\t// get the reference point coordinates (pie charts use tooltipPos)\r\n\t\ttooltip.followPointer = splat(point)[0].series.tooltipOptions.followPointer;\r\n\t\tanchor = tooltip.getAnchor(point, mouseEvent);\r\n\t\tx = anchor[0];\r\n\t\ty = anchor[1];\r\n\r\n\t\t// shared tooltip, array is sent over\r\n\t\tif (shared && !(point.series && point.series.noSharedTooltip)) {\r\n\t\t\t\r\n\t\t\t// hide previous hoverPoints and set new\r\n\t\t\t\r\n\t\t\tchart.hoverPoints = point;\r\n\t\t\tif (hoverPoints) {\r\n\t\t\t\teach(hoverPoints, function (point) {\r\n\t\t\t\t\tpoint.setState();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\teach(point, function (item) {\r\n\t\t\t\titem.setState(HOVER_STATE);\r\n\r\n\t\t\t\tpointConfig.push(item.getLabelConfig());\r\n\t\t\t});\r\n\r\n\t\t\ttextConfig = {\r\n\t\t\t\tx: point[0].category,\r\n\t\t\t\ty: point[0].y\r\n\t\t\t};\r\n\t\t\ttextConfig.points = pointConfig;\r\n\t\t\tthis.len = pointConfig.length;\r\n\t\t\tpoint = point[0];\r\n\r\n\t\t// single point tooltip\r\n\t\t} else {\r\n\t\t\ttextConfig = point.getLabelConfig();\r\n\t\t}\r\n\t\ttext = formatter.call(textConfig, tooltip);\r\n\r\n\t\t// register the current series\r\n\t\tcurrentSeries = point.series;\r\n\t\tthis.distance = pick(currentSeries.tooltipOptions.distance, 16);\r\n\r\n\t\t// update the inner HTML\r\n\t\tif (text === false) {\r\n\t\t\tthis.hide();\r\n\t\t} else {\r\n\r\n\t\t\t// show it\r\n\t\t\tif (tooltip.isHidden) {\r\n\t\t\t\tstop(label);\r\n\t\t\t\tlabel.attr('opacity', 1).show();\r\n\t\t\t}\r\n\r\n\t\t\t// update text\r\n\t\t\tlabel.attr({\r\n\t\t\t\ttext: text\r\n\t\t\t});\r\n\r\n\t\t\t// set the stroke color of the box\r\n\t\t\tborderColor = options.borderColor || point.color || currentSeries.color || '#606060';\r\n\t\t\tlabel.attr({\r\n\t\t\t\tstroke: borderColor\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\ttooltip.updatePosition({ plotX: x, plotY: y, negative: point.negative, ttBelow: point.ttBelow });\r\n\t\t\r\n\t\t\tthis.isHidden = false;\r\n\t\t}\r\n\t\tfireEvent(chart, 'tooltipRefresh', {\r\n\t\t\t\ttext: text,\r\n\t\t\t\tx: x + chart.plotLeft,\r\n\t\t\t\ty: y + chart.plotTop,\r\n\t\t\t\tborderColor: borderColor\r\n\t\t\t});\r\n\t},\r\n\t\r\n\t/**\r\n\t * Find the new position and perform the move\r\n\t */\r\n\tupdatePosition: function (point) {\r\n\t\tvar chart = this.chart,\r\n\t\t\tlabel = this.label, \r\n\t\t\tpos = (this.options.positioner || this.getPosition).call(\r\n\t\t\t\tthis,\r\n\t\t\t\tlabel.width,\r\n\t\t\t\tlabel.height,\r\n\t\t\t\tpoint\r\n\t\t\t);\r\n\r\n\t\t// do the move\r\n\t\tthis.move(\r\n\t\t\tmathRound(pos.x), \r\n\t\t\tmathRound(pos.y), \r\n\t\t\tpoint.plotX + chart.plotLeft, \r\n\t\t\tpoint.plotY + chart.plotTop\r\n\t\t);\r\n\t},\r\n\r\n\t/** \r\n\t * Get the best X date format based on the closest point range on the axis.\r\n\t */\r\n\tgetXDateFormat: function (point, options, xAxis) {\r\n\t\tvar xDateFormat,\r\n\t\t\tdateTimeLabelFormats = options.dateTimeLabelFormats,\r\n\t\t\tclosestPointRange = xAxis && xAxis.closestPointRange,\r\n\t\t\tn,\r\n\t\t\tblank = '01-01 00:00:00.000',\r\n\t\t\tstrpos = {\r\n\t\t\t\tmillisecond: 15,\r\n\t\t\t\tsecond: 12,\r\n\t\t\t\tminute: 9,\r\n\t\t\t\thour: 6,\r\n\t\t\t\tday: 3\r\n\t\t\t},\r\n\t\t\tdate,\r\n\t\t\tlastN;\r\n\r\n\t\tif (closestPointRange) {\r\n\t\t\tdate = dateFormat('%m-%d %H:%M:%S.%L', point.x);\r\n\t\t\tfor (n in timeUnits) {\r\n\r\n\t\t\t\t// If the range is exactly one week and we're looking at a Sunday/Monday, go for the week format\r\n\t\t\t\tif (closestPointRange === timeUnits.week && +dateFormat('%w', point.x) === xAxis.options.startOfWeek && \r\n\t\t\t\t\t\tdate.substr(6) === blank.substr(6)) {\r\n\t\t\t\t\tn = 'week';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t// The first format that is too great for the range\r\n\t\t\t\t} else if (timeUnits[n] > closestPointRange) {\r\n\t\t\t\t\tn = lastN;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\t// If the point is placed every day at 23:59, we need to show\r\n\t\t\t\t// the minutes as well. #2637.\r\n\t\t\t\t} else if (strpos[n] && date.substr(strpos[n]) !== blank.substr(strpos[n])) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Weeks are outside the hierarchy, only apply them on Mondays/Sundays like in the first condition\r\n\t\t\t\tif (n !== 'week') {\r\n\t\t\t\t\tlastN = n;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (n) {\r\n\t\t\t\txDateFormat = dateTimeLabelFormats[n];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\txDateFormat = dateTimeLabelFormats.day;\r\n\t\t}\r\n\r\n\t\treturn xDateFormat || dateTimeLabelFormats.year; // #2546, 2581\r\n\t},\r\n\r\n\t/**\r\n\t * Format the footer/header of the tooltip\r\n\t * #3397: abstraction to enable formatting of footer and header\r\n\t */\r\n\ttooltipFooterHeaderFormatter: function (point, isFooter) {\r\n\t\tvar footOrHead = isFooter ? 'footer' : 'header',\r\n\t\t\tseries = point.series,\r\n\t\t\ttooltipOptions = series.tooltipOptions,\r\n\t\t\txDateFormat = tooltipOptions.xDateFormat,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\tisDateTime = xAxis && xAxis.options.type === 'datetime' && isNumber(point.key),\r\n\t\t\tformatString = tooltipOptions[footOrHead+'Format'];\r\n\r\n\t\t// Guess the best date format based on the closest point distance (#568, #3418)\r\n\t\tif (isDateTime && !xDateFormat) {\r\n\t\t\txDateFormat = this.getXDateFormat(point, tooltipOptions, xAxis);\r\n\t\t}\r\n\r\n\t\t// Insert the footer date format if any\r\n\t\tif (isDateTime && xDateFormat) {\r\n\t\t\tformatString = formatString.replace('{point.key}', '{point.key:' + xDateFormat + '}');\r\n\t\t}\r\n\r\n\t\treturn format(formatString, {\r\n\t\t\tpoint: point,\r\n\t\t\tseries: series\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n     * Build the body (lines) of the tooltip by iterating over the items and returning one entry for each item,\r\n     * abstracting this functionality allows to easily overwrite and extend it. \r\n\t */\r\n\tbodyFormatter: function (items) {\r\n        return map(items, function (item) {\r\n            var tooltipOptions = item.series.tooltipOptions;\r\n            return (tooltipOptions.pointFormatter || item.point.tooltipFormatter).call(item.point, tooltipOptions.pointFormat);\r\n        });\r\n    }\r\n    \r\n};\r\n\r\nvar hoverChartIndex;\r\n\r\n// Global flag for touch support\r\nhasTouch = doc.documentElement.ontouchstart !== UNDEFINED;\r\n\r\n/**\r\n * The mouse tracker object. All methods starting with \"on\" are primary DOM event handlers. \r\n * Subsequent methods should be named differently from what they are doing.\r\n * @param {Object} chart The Chart instance\r\n * @param {Object} options The root options object\r\n */\r\nvar Pointer = Highcharts.Pointer = function (chart, options) {\r\n\tthis.init(chart, options);\r\n};\r\n\r\nPointer.prototype = {\r\n\t/**\r\n\t * Initialize Pointer\r\n\t */\r\n\tinit: function (chart, options) {\r\n\t\t\r\n\t\tvar chartOptions = options.chart,\r\n\t\t\tchartEvents = chartOptions.events,\r\n\t\t\tzoomType = useCanVG ? '' : chartOptions.zoomType,\r\n\t\t\tinverted = chart.inverted,\r\n\t\t\tzoomX,\r\n\t\t\tzoomY;\r\n\r\n\t\t// Store references\r\n\t\tthis.options = options;\r\n\t\tthis.chart = chart;\r\n\t\t\r\n\t\t// Zoom status\r\n\t\tthis.zoomX = zoomX = /x/.test(zoomType);\r\n\t\tthis.zoomY = zoomY = /y/.test(zoomType);\r\n\t\tthis.zoomHor = (zoomX && !inverted) || (zoomY && inverted);\r\n\t\tthis.zoomVert = (zoomY && !inverted) || (zoomX && inverted);\r\n\t\tthis.hasZoom = zoomX || zoomY;\r\n\r\n\t\t// Do we need to handle click on a touch device?\r\n\t\tthis.runChartClick = chartEvents && !!chartEvents.click;\r\n\r\n\t\tthis.pinchDown = [];\r\n\t\tthis.lastValidTouch = {};\r\n\r\n\t\tif (Highcharts.Tooltip && options.tooltip.enabled) {\r\n\t\t\tchart.tooltip = new Tooltip(chart, options.tooltip);\r\n\t\t\tthis.followTouchMove = pick(options.tooltip.followTouchMove, true);\r\n\t\t}\r\n\r\n\t\tthis.setDOMEvents();\r\n\t}, \r\n\r\n\t/**\r\n\t * Add crossbrowser support for chartX and chartY\r\n\t * @param {Object} e The event object in standard browsers\r\n\t */\r\n\tnormalize: function (e, chartPosition) {\r\n\t\tvar chartX,\r\n\t\t\tchartY,\r\n\t\t\tePos;\r\n\r\n\t\t// common IE normalizing\r\n\t\te = e || window.event;\r\n\r\n\t\t// Framework specific normalizing (#1165)\r\n\t\te = washMouseEvent(e);\r\n\r\n\t\t// More IE normalizing, needs to go after washMouseEvent\r\n\t\tif (!e.target) {\r\n\t\t\te.target = e.srcElement;\r\n\t\t}\r\n\t\t\r\n\t\t// iOS (#2757)\r\n\t\tePos = e.touches ?  (e.touches.length ? e.touches.item(0) : e.changedTouches[0]) : e;\r\n\r\n\t\t// Get mouse position\r\n\t\tif (!chartPosition) {\r\n\t\t\tthis.chartPosition = chartPosition = offset(this.chart.container);\r\n\t\t}\r\n\r\n\t\t// chartX and chartY\r\n\t\tif (ePos.pageX === UNDEFINED) { // IE < 9. #886.\r\n\t\t\tchartX = mathMax(e.x, e.clientX - chartPosition.left); // #2005, #2129: the second case is \r\n\t\t\t\t// for IE10 quirks mode within framesets\r\n\t\t\tchartY = e.y;\r\n\t\t} else {\r\n\t\t\tchartX = ePos.pageX - chartPosition.left;\r\n\t\t\tchartY = ePos.pageY - chartPosition.top;\r\n\t\t}\r\n\r\n\t\treturn extend(e, {\r\n\t\t\tchartX: mathRound(chartX),\r\n\t\t\tchartY: mathRound(chartY)\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Get the click position in terms of axis values.\r\n\t *\r\n\t * @param {Object} e A pointer event\r\n\t */\r\n\tgetCoordinates: function (e) {\r\n\t\tvar coordinates = {\r\n\t\t\t\txAxis: [],\r\n\t\t\t\tyAxis: []\r\n\t\t\t};\r\n\r\n\t\teach(this.chart.axes, function (axis) {\r\n\t\t\tcoordinates[axis.isXAxis ? 'xAxis' : 'yAxis'].push({\r\n\t\t\t\taxis: axis,\r\n\t\t\t\tvalue: axis.toValue(e[axis.horiz ? 'chartX' : 'chartY'])\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn coordinates;\r\n\t},\r\n\t\r\n\t/**\r\n\t * With line type charts with a single tracker, get the point closest to the mouse.\r\n\t * Run Point.onMouseOver and display tooltip for the point or points.\r\n\t */\r\n\trunPointActions: function (e) {\r\n\r\n\t\tvar pointer = this,\r\n\t\t\tchart = pointer.chart,\r\n\t\t\tseries = chart.series,\r\n\t\t\ttooltip = chart.tooltip,\r\n\t\t\tshared = tooltip ? tooltip.shared : false,\r\n\t\t\tfollowPointer,\r\n\t\t\t//point,\r\n\t\t\t//points,\r\n\t\t\thoverPoint = chart.hoverPoint,\r\n\t\t\thoverSeries = chart.hoverSeries,\r\n\t\t\ti,\r\n\t\t\ttrueXkd,\r\n\t\t\ttrueX,\r\n\t\t\t//j,\r\n\t\t\tdistance = chart.chartWidth,\r\n\t\t\trdistance = chart.chartWidth,\r\n\t\t\tanchor,\r\n\t\t\tnoSharedTooltip,\r\n\t\t\tkdpoints = [],\r\n\t\t\tkdpoint,\r\n\t\t\tkdpointT;\r\n\r\n\t\t// For hovering over the empty parts of the plot area (hoverSeries is undefined). \r\n\t\t// If there is one series with point tracking (combo chart), don't go to nearest neighbour.\r\n\t\tif (!shared && !hoverSeries) {\r\n\t\t\tfor (i = 0; i < series.length; i++) {\r\n\t\t\t\tif (series[i].directTouch || !series[i].options.stickyTracking) {\r\n\t\t\t\t\tseries = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!(hoverSeries && hoverSeries.noSharedTooltip) && (shared || !hoverSeries)) { // #3821 \r\n\t\t\t// Find nearest points on all series\r\n\t\t\teach(series, function (s) {\r\n\t\t\t\t// Skip hidden series\r\n\t\t\t\tnoSharedTooltip = s.noSharedTooltip && shared;\r\n\t\t\t\tif (s.visible && !noSharedTooltip && pick(s.options.enableMouseTracking, true)) { // #3821\r\n\t\t\t\t\tkdpointT = s.searchPoint(e); // #3828\r\n\t\t\t\t\tif (kdpointT) {\r\n\t\t\t\t\t\tkdpoints.push(kdpointT);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// Find absolute nearest point\r\n\t\t\teach(kdpoints, function (p) {\r\n\t\t\t\tif (p && defined(p.plotX) && defined(p.plotY)) {\r\n\t\t\t\t\tif ((p.dist.distX < distance) || ((p.dist.distX === distance || p.series.kdDimensions > 1) && p.dist.distR < rdistance)) {\r\n\t\t\t\t\t\tdistance = p.dist.distX;\r\n\t\t\t\t\t\trdistance = p.dist.distR;\r\n\t\t\t\t\t\tkdpoint = p;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//point = kdpoints[0];\r\n\t\t\t});\t\r\n\t\t} else {\r\n\t\t\tkdpoint = hoverSeries ? hoverSeries.searchPoint(e) : UNDEFINED;\r\n\t\t}\r\n\r\n\t\t// Refresh tooltip for kdpoint\r\n\t\tif (kdpoint && kdpoint !== hoverPoint) {\r\n\t\t\t// Draw tooltip if necessary\r\n\t\t\tif (shared && !kdpoint.series.noSharedTooltip) {\r\n\t\t\t\ti = kdpoints.length;\r\n\t\t\t\ttrueXkd = kdpoint.clientX;\r\n\t\t\t\twhile (i--) {\r\n\t\t\t\t\ttrueX = kdpoints[i].clientX;\r\n\t\t\t\t\tif (kdpoints[i].x !== kdpoint.x || trueX !== trueXkd || !defined(kdpoints[i].y) || (kdpoints[i].series.noSharedTooltip || false)) {\r\n\t\t\t\t\t\tkdpoints.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (tooltip) {\r\n\t\t\t\t\ttooltip.refresh(kdpoints, e);\r\n\t\t\t\t}\r\n\t\t\t\teach(kdpoints, function (point) {\r\n\t\t\t\t\tpoint.onMouseOver(e);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (tooltip) {\r\n\t\t\t\t\ttooltip.refresh(kdpoint, e);\r\n\t\t\t\t}\r\n\t\t\t\tkdpoint.onMouseOver(e);\r\n\t\t\t}\r\n\t\t\r\n\t\t// Update positions (regardless of kdpoint or hoverPoint)\r\n\t\t} else {\r\n\t\t\tfollowPointer = hoverSeries && hoverSeries.tooltipOptions.followPointer;\r\n\t\t\tif (tooltip && followPointer && !tooltip.isHidden) {\r\n\t\t\t\tanchor = tooltip.getAnchor([{}], e);\r\n\t\t\t\ttooltip.updatePosition({ plotX: anchor[0], plotY: anchor[1] });\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Start the event listener to pick up the tooltip \r\n\t\tif (tooltip && !pointer._onDocumentMouseMove) {\r\n\t\t\tpointer._onDocumentMouseMove = function (e) {\r\n\t\t\t\tpointer.onDocumentMouseMove(e);\r\n\t\t\t};\r\n\t\t\taddEvent(doc, 'mousemove', pointer._onDocumentMouseMove);\r\n\t\t}\r\n\t\t\r\n\t\t// Crosshair\r\n\t\teach(chart.axes, function (axis) {\r\n\t\t\taxis.drawCrosshair(e, pick(kdpoint, hoverPoint));\r\n\t\t});\t\r\n\t\t\t\t\r\n\t},\r\n\r\n\r\n\r\n\t/**\r\n\t * Reset the tracking by hiding the tooltip, the hover series state and the hover point\r\n\t * \r\n\t * @param allowMove {Boolean} Instead of destroying the tooltip altogether, allow moving it if possible\r\n\t */\r\n\treset: function (allowMove, delay) {\r\n\t\tvar pointer = this,\r\n\t\t\tchart = pointer.chart,\r\n\t\t\thoverSeries = chart.hoverSeries,\r\n\t\t\thoverPoint = chart.hoverPoint,\r\n\t\t\ttooltip = chart.tooltip,\r\n\t\t\ttooltipPoints = tooltip && tooltip.shared ? chart.hoverPoints : hoverPoint;\r\n\t\t\t\r\n\t\t// Narrow in allowMove\r\n\t\tallowMove = allowMove && tooltip && tooltipPoints;\r\n\t\t\t\r\n\t\t// Check if the points have moved outside the plot area, #1003\t\t\r\n\t\tif (allowMove  && splat(tooltipPoints)[0].plotX === UNDEFINED) {\r\n\t\t\tallowMove = false;\r\n\t\t}\t\r\n\t\t// Just move the tooltip, #349\r\n\t\tif (allowMove) {\r\n\t\t\ttooltip.refresh(tooltipPoints);\r\n\t\t\tif (hoverPoint) { // #2500\r\n\t\t\t\thoverPoint.setState(hoverPoint.state, true);\r\n\t\t\t\teach(chart.axes, function (axis) {\r\n\t\t\t\t\tif (pick(axis.options.crosshair && axis.options.crosshair.snap, true)) {\r\n\t\t\t\t\t\taxis.drawCrosshair(null, allowMove);\r\n\t\t\t\t\t}  else {\r\n\t\t\t\t\t\taxis.hideCrosshair();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t// Full reset\r\n\t\t} else {\r\n\r\n\t\t\tif (hoverPoint) {\r\n\t\t\t\thoverPoint.onMouseOut();\r\n\t\t\t}\r\n\r\n\t\t\tif (hoverSeries) {\r\n\t\t\t\thoverSeries.onMouseOut();\r\n\t\t\t}\r\n\r\n\t\t\tif (tooltip) {\r\n\t\t\t\ttooltip.hide(delay);\r\n\t\t\t}\r\n\r\n\t\t\tif (pointer._onDocumentMouseMove) {\r\n\t\t\t\tremoveEvent(doc, 'mousemove', pointer._onDocumentMouseMove);\r\n\t\t\t\tpointer._onDocumentMouseMove = null;\r\n\t\t\t}\r\n\r\n\t\t\t// Remove crosshairs\r\n\t\t\teach(chart.axes, function (axis) {\r\n\t\t\t\taxis.hideCrosshair();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tpointer.hoverX = null;\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Scale series groups to a certain scale and translation\r\n\t */\r\n\tscaleGroups: function (attribs, clip) {\r\n\r\n\t\tvar chart = this.chart,\r\n\t\t\tseriesAttribs;\r\n\r\n\t\t// Scale each series\r\n\t\teach(chart.series, function (series) {\r\n\t\t\tseriesAttribs = attribs || series.getPlotBox(); // #1701\r\n\t\t\tif (series.xAxis && series.xAxis.zoomEnabled) {\r\n\t\t\t\tseries.group.attr(seriesAttribs);\r\n\t\t\t\tif (series.markerGroup) {\r\n\t\t\t\t\tseries.markerGroup.attr(seriesAttribs);\r\n\t\t\t\t\tseries.markerGroup.clip(clip ? chart.clipRect : null);\r\n\t\t\t\t}\r\n\t\t\t\tif (series.dataLabelsGroup) {\r\n\t\t\t\t\tseries.dataLabelsGroup.attr(seriesAttribs);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// Clip\r\n\t\tchart.clipRect.attr(clip || chart.clipBox);\r\n\t},\r\n\r\n\t/**\r\n\t * Start a drag operation\r\n\t */\r\n\tdragStart: function (e) {\r\n\t\tvar chart = this.chart;\r\n\r\n\t\t// Record the start position\r\n\t\tchart.mouseIsDown = e.type;\r\n\t\tchart.cancelClick = false;\r\n\t\tchart.mouseDownX = this.mouseDownX = e.chartX;\r\n\t\tchart.mouseDownY = this.mouseDownY = e.chartY;\r\n\t},\r\n\r\n\t/**\r\n\t * Perform a drag operation in response to a mousemove event while the mouse is down\r\n\t */\r\n\tdrag: function (e) {\r\n\r\n\t\tvar chart = this.chart,\r\n\t\t\tchartOptions = chart.options.chart,\r\n\t\t\tchartX = e.chartX,\r\n\t\t\tchartY = e.chartY,\r\n\t\t\tzoomHor = this.zoomHor,\r\n\t\t\tzoomVert = this.zoomVert,\r\n\t\t\tplotLeft = chart.plotLeft,\r\n\t\t\tplotTop = chart.plotTop,\r\n\t\t\tplotWidth = chart.plotWidth,\r\n\t\t\tplotHeight = chart.plotHeight,\r\n\t\t\tclickedInside,\r\n\t\t\tsize,\r\n\t\t\tmouseDownX = this.mouseDownX,\r\n\t\t\tmouseDownY = this.mouseDownY,\r\n\t\t\tpanKey = chartOptions.panKey && e[chartOptions.panKey + 'Key'];\r\n\r\n\t\t// If the mouse is outside the plot area, adjust to cooordinates\r\n\t\t// inside to prevent the selection marker from going outside\r\n\t\tif (chartX < plotLeft) {\r\n\t\t\tchartX = plotLeft;\r\n\t\t} else if (chartX > plotLeft + plotWidth) {\r\n\t\t\tchartX = plotLeft + plotWidth;\r\n\t\t}\r\n\r\n\t\tif (chartY < plotTop) {\r\n\t\t\tchartY = plotTop;\r\n\t\t} else if (chartY > plotTop + plotHeight) {\r\n\t\t\tchartY = plotTop + plotHeight;\r\n\t\t}\r\n\t\t\r\n\t\t// determine if the mouse has moved more than 10px\r\n\t\tthis.hasDragged = Math.sqrt(\r\n\t\t\tMath.pow(mouseDownX - chartX, 2) +\r\n\t\t\tMath.pow(mouseDownY - chartY, 2)\r\n\t\t);\r\n\t\t\r\n\t\tif (this.hasDragged > 10) {\r\n\t\t\tclickedInside = chart.isInsidePlot(mouseDownX - plotLeft, mouseDownY - plotTop);\r\n\r\n\t\t\t// make a selection\r\n\t\t\tif (chart.hasCartesianSeries && (this.zoomX || this.zoomY) && clickedInside && !panKey) {\r\n\t\t\t\tif (!this.selectionMarker) {\r\n\t\t\t\t\tthis.selectionMarker = chart.renderer.rect(\r\n\t\t\t\t\t\tplotLeft,\r\n\t\t\t\t\t\tplotTop,\r\n\t\t\t\t\t\tzoomHor ? 1 : plotWidth,\r\n\t\t\t\t\t\tzoomVert ? 1 : plotHeight,\r\n\t\t\t\t\t\t0\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\tfill: chartOptions.selectionMarkerFill || 'rgba(69,114,167,0.25)',\r\n\t\t\t\t\t\tzIndex: 7\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// adjust the width of the selection marker\r\n\t\t\tif (this.selectionMarker && zoomHor) {\r\n\t\t\t\tsize = chartX - mouseDownX;\r\n\t\t\t\tthis.selectionMarker.attr({\r\n\t\t\t\t\twidth: mathAbs(size),\r\n\t\t\t\t\tx: (size > 0 ? 0 : size) + mouseDownX\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// adjust the height of the selection marker\r\n\t\t\tif (this.selectionMarker && zoomVert) {\r\n\t\t\t\tsize = chartY - mouseDownY;\r\n\t\t\t\tthis.selectionMarker.attr({\r\n\t\t\t\t\theight: mathAbs(size),\r\n\t\t\t\t\ty: (size > 0 ? 0 : size) + mouseDownY\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// panning\r\n\t\t\tif (clickedInside && !this.selectionMarker && chartOptions.panning) {\r\n\t\t\t\tchart.pan(e, chartOptions.panning);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * On mouse up or touch end across the entire document, drop the selection.\r\n\t */\r\n\tdrop: function (e) {\r\n\t\tvar pointer = this,\r\n\t\t\tchart = this.chart,\r\n\t\t\thasPinched = this.hasPinched;\r\n\r\n\t\tif (this.selectionMarker) {\r\n\t\t\tvar selectionData = {\r\n\t\t\t\t\txAxis: [],\r\n\t\t\t\t\tyAxis: [],\r\n\t\t\t\t\toriginalEvent: e.originalEvent || e\r\n\t\t\t\t},\r\n\t\t\t\tselectionBox = this.selectionMarker,\r\n\t\t\t\tselectionLeft = selectionBox.attr ? selectionBox.attr('x') : selectionBox.x,\r\n\t\t\t\tselectionTop = selectionBox.attr ? selectionBox.attr('y') : selectionBox.y,\r\n\t\t\t\tselectionWidth = selectionBox.attr ? selectionBox.attr('width') : selectionBox.width,\r\n\t\t\t\tselectionHeight = selectionBox.attr ? selectionBox.attr('height') : selectionBox.height,\r\n\t\t\t\trunZoom;\r\n\r\n\t\t\t// a selection has been made\r\n\t\t\tif (this.hasDragged || hasPinched) {\r\n\r\n\t\t\t\t// record each axis' min and max\r\n\t\t\t\teach(chart.axes, function (axis) {\r\n\t\t\t\t\tif (axis.zoomEnabled && defined(axis.min) && (hasPinched || pointer[{ xAxis: 'zoomX', yAxis: 'zoomY' }[axis.coll]])) { // #859, #3569\r\n\t\t\t\t\t\tvar horiz = axis.horiz,\r\n\t\t\t\t\t\t\tminPixelPadding = e.type === 'touchend' ? axis.minPixelPadding: 0, // #1207, #3075\r\n\t\t\t\t\t\t\tselectionMin = axis.toValue((horiz ? selectionLeft : selectionTop) + minPixelPadding),\r\n\t\t\t\t\t\t\tselectionMax = axis.toValue((horiz ? selectionLeft + selectionWidth : selectionTop + selectionHeight) - minPixelPadding);\r\n\r\n\t\t\t\t\t\tselectionData[axis.coll].push({\r\n\t\t\t\t\t\t\taxis: axis,\r\n\t\t\t\t\t\t\tmin: mathMin(selectionMin, selectionMax), // for reversed axes\r\n\t\t\t\t\t\t\tmax: mathMax(selectionMin, selectionMax)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\trunZoom = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (runZoom) {\r\n\t\t\t\t\tfireEvent(chart, 'selection', selectionData, function (args) { \r\n\t\t\t\t\t\tchart.zoom(extend(args, hasPinched ? { animation: false } : null)); \r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis.selectionMarker = this.selectionMarker.destroy();\r\n\r\n\t\t\t// Reset scaling preview\r\n\t\t\tif (hasPinched) {\r\n\t\t\t\tthis.scaleGroups();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Reset all\r\n\t\tif (chart) { // it may be destroyed on mouse up - #877\r\n\t\t\tcss(chart.container, { cursor: chart._cursor });\r\n\t\t\tchart.cancelClick = this.hasDragged > 10; // #370\r\n\t\t\tchart.mouseIsDown = this.hasDragged = this.hasPinched = false;\r\n\t\t\tthis.pinchDown = [];\r\n\t\t}\r\n\t},\r\n\r\n\tonContainerMouseDown: function (e) {\r\n\r\n\t\te = this.normalize(e);\r\n\r\n\t\t// issue #295, dragging not always working in Firefox\r\n\t\tif (e.preventDefault) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\r\n\t\tthis.dragStart(e);\r\n\t},\r\n\r\n\t\r\n\r\n\tonDocumentMouseUp: function (e) {\r\n\t\tif (charts[hoverChartIndex]) {\r\n\t\t\tcharts[hoverChartIndex].pointer.drop(e);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Special handler for mouse move that will hide the tooltip when the mouse leaves the plotarea.\r\n\t * Issue #149 workaround. The mouseleave event does not always fire. \r\n\t */\r\n\tonDocumentMouseMove: function (e) {\r\n\t\tvar chart = this.chart,\r\n\t\t\tchartPosition = this.chartPosition;\r\n\r\n\t\te = this.normalize(e, chartPosition);\r\n\r\n\t\t// If we're outside, hide the tooltip\r\n\t\tif (chartPosition && !this.inClass(e.target, 'highcharts-tracker') &&\r\n\t\t\t\t!chart.isInsidePlot(e.chartX - chart.plotLeft, e.chartY - chart.plotTop)) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * When mouse leaves the container, hide the tooltip.\r\n\t */\r\n\tonContainerMouseLeave: function () {\r\n\t\tvar chart = charts[hoverChartIndex];\r\n\t\tif (chart) {\r\n\t\t\tchart.pointer.reset();\r\n\t\t\tchart.pointer.chartPosition = null; // also reset the chart position, used in #149 fix\r\n\t\t}\r\n\t},\r\n\r\n\t// The mousemove, touchmove and touchstart event handler\r\n\tonContainerMouseMove: function (e) {\r\n\r\n\t\tvar chart = this.chart;\r\n\r\n\t\thoverChartIndex = chart.index;\r\n\r\n\t\te = this.normalize(e);\t\t\r\n\t\te.returnValue = false; // #2251, #3224\r\n\t\t\r\n\t\tif (chart.mouseIsDown === 'mousedown') {\r\n\t\t\tthis.drag(e);\r\n\t\t} \r\n\t\t\r\n\t\t// Show the tooltip and run mouse over events (#977)\r\n\t\tif ((this.inClass(e.target, 'highcharts-tracker') || \r\n\t\t\t\tchart.isInsidePlot(e.chartX - chart.plotLeft, e.chartY - chart.plotTop)) && !chart.openMenu) {\r\n\t\t\tthis.runPointActions(e);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Utility to detect whether an element has, or has a parent with, a specific\r\n\t * class name. Used on detection of tracker objects and on deciding whether\r\n\t * hovering the tooltip should cause the active series to mouse out.\r\n\t */\r\n\tinClass: function (element, className) {\r\n\t\tvar elemClassName;\r\n\t\twhile (element) {\r\n\t\t\telemClassName = attr(element, 'class');\r\n\t\t\tif (elemClassName) {\r\n\t\t\t\tif (elemClassName.indexOf(className) !== -1) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else if (elemClassName.indexOf(PREFIX + 'container') !== -1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telement = element.parentNode;\r\n\t\t}\t\t\r\n\t},\r\n\r\n\tonTrackerMouseOut: function (e) {\r\n\t\tvar series = this.chart.hoverSeries,\r\n\t\t\trelatedTarget = e.relatedTarget || e.toElement,\r\n\t\t\trelatedSeries = relatedTarget && relatedTarget.point && relatedTarget.point.series; // #2499\r\n\t\t\r\n\t\tif (series && !series.options.stickyTracking && !this.inClass(relatedTarget, PREFIX + 'tooltip') &&\r\n\t\t\t\trelatedSeries !== series) {\r\n\t\t\tseries.onMouseOut();\r\n\t\t}\r\n\t},\r\n\r\n\tonContainerClick: function (e) {\r\n\t\tvar chart = this.chart,\r\n\t\t\thoverPoint = chart.hoverPoint, \r\n\t\t\tplotLeft = chart.plotLeft,\r\n\t\t\tplotTop = chart.plotTop;\r\n\t\t\r\n\t\te = this.normalize(e);\r\n\t\te.cancelBubble = true; // IE specific\r\n\r\n\t\tif (!chart.cancelClick) {\r\n\t\t\t\r\n\t\t\t// On tracker click, fire the series and point events. #783, #1583\r\n\t\t\tif (hoverPoint && this.inClass(e.target, PREFIX + 'tracker')) {\r\n\r\n\t\t\t\t// the series click event\r\n\t\t\t\tfireEvent(hoverPoint.series, 'click', extend(e, {\r\n\t\t\t\t\tpoint: hoverPoint\r\n\t\t\t\t}));\r\n\r\n\t\t\t\t// the point click event\r\n\t\t\t\tif (chart.hoverPoint) { // it may be destroyed (#1844)\r\n\t\t\t\t\thoverPoint.firePointEvent('click', e);\r\n\t\t\t\t}\r\n\r\n\t\t\t// When clicking outside a tracker, fire a chart event\r\n\t\t\t} else {\r\n\t\t\t\textend(e, this.getCoordinates(e));\r\n\r\n\t\t\t\t// fire a click event in the chart\r\n\t\t\t\tif (chart.isInsidePlot(e.chartX - plotLeft, e.chartY - plotTop)) {\r\n\t\t\t\t\tfireEvent(chart, 'click', e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set the JS DOM events on the container and document. This method should contain\r\n\t * a one-to-one assignment between methods and their handlers. Any advanced logic should\r\n\t * be moved to the handler reflecting the event's name.\r\n\t */\r\n\tsetDOMEvents: function () {\r\n\r\n\t\tvar pointer = this,\r\n\t\t\tcontainer = pointer.chart.container;\r\n\r\n\t\tcontainer.onmousedown = function (e) {\r\n\t\t\tpointer.onContainerMouseDown(e);\r\n\t\t};\r\n\t\tcontainer.onmousemove = function (e) {\r\n\t\t\tpointer.onContainerMouseMove(e);\r\n\t\t};\r\n\t\tcontainer.onclick = function (e) {\r\n\t\t\tpointer.onContainerClick(e);\r\n\t\t};\r\n\t\taddEvent(container, 'mouseleave', pointer.onContainerMouseLeave);\r\n\t\tif (chartCount === 1) {\r\n\t\t\taddEvent(doc, 'mouseup', pointer.onDocumentMouseUp);\r\n\t\t}\r\n\t\tif (hasTouch) {\r\n\t\t\tcontainer.ontouchstart = function (e) {\r\n\t\t\t\tpointer.onContainerTouchStart(e);\r\n\t\t\t};\r\n\t\t\tcontainer.ontouchmove = function (e) {\r\n\t\t\t\tpointer.onContainerTouchMove(e);\r\n\t\t\t};\r\n\t\t\tif (chartCount === 1) {\r\n\t\t\t\taddEvent(doc, 'touchend', pointer.onDocumentTouchEnd);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * Destroys the Pointer object and disconnects DOM events.\r\n\t */\r\n\tdestroy: function () {\r\n\t\tvar prop;\r\n\r\n\t\tremoveEvent(this.chart.container, 'mouseleave', this.onContainerMouseLeave);\r\n\t\tif (!chartCount) {\r\n\t\t\tremoveEvent(doc, 'mouseup', this.onDocumentMouseUp);\r\n\t\t\tremoveEvent(doc, 'touchend', this.onDocumentTouchEnd);\r\n\t\t}\r\n\r\n\t\t// memory and CPU leak\r\n\t\tclearInterval(this.tooltipTimeout);\r\n\r\n\t\tfor (prop in this) {\r\n\t\t\tthis[prop] = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n/* Support for touch devices */\r\nextend(Highcharts.Pointer.prototype, {\r\n\r\n\t/**\r\n\t * Run translation operations\r\n\t */\r\n\tpinchTranslate: function (pinchDown, touches, transform, selectionMarker, clip, lastValidTouch) {\r\n\t\tif (this.zoomHor || this.pinchHor) {\r\n\t\t\tthis.pinchTranslateDirection(true, pinchDown, touches, transform, selectionMarker, clip, lastValidTouch);\r\n\t\t}\r\n\t\tif (this.zoomVert || this.pinchVert) {\r\n\t\t\tthis.pinchTranslateDirection(false, pinchDown, touches, transform, selectionMarker, clip, lastValidTouch);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Run translation operations for each direction (horizontal and vertical) independently\r\n\t */\r\n\tpinchTranslateDirection: function (horiz, pinchDown, touches, transform, selectionMarker, clip, lastValidTouch, forcedScale) {\r\n\t\tvar chart = this.chart,\r\n\t\t\txy = horiz ? 'x' : 'y',\r\n\t\t\tXY = horiz ? 'X' : 'Y',\r\n\t\t\tsChartXY = 'chart' + XY,\r\n\t\t\twh = horiz ? 'width' : 'height',\r\n\t\t\tplotLeftTop = chart['plot' + (horiz ? 'Left' : 'Top')],\r\n\t\t\tselectionWH,\r\n\t\t\tselectionXY,\r\n\t\t\tclipXY,\r\n\t\t\tscale = forcedScale || 1,\r\n\t\t\tinverted = chart.inverted,\r\n\t\t\tbounds = chart.bounds[horiz ? 'h' : 'v'],\r\n\t\t\tsingleTouch = pinchDown.length === 1,\r\n\t\t\ttouch0Start = pinchDown[0][sChartXY],\r\n\t\t\ttouch0Now = touches[0][sChartXY],\r\n\t\t\ttouch1Start = !singleTouch && pinchDown[1][sChartXY],\r\n\t\t\ttouch1Now = !singleTouch && touches[1][sChartXY],\r\n\t\t\toutOfBounds,\r\n\t\t\ttransformScale,\r\n\t\t\tscaleKey,\r\n\t\t\tsetScale = function () {\r\n\t\t\t\tif (!singleTouch && mathAbs(touch0Start - touch1Start) > 20) { // Don't zoom if fingers are too close on this axis\r\n\t\t\t\t\tscale = forcedScale || mathAbs(touch0Now - touch1Now) / mathAbs(touch0Start - touch1Start); \r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tclipXY = ((plotLeftTop - touch0Now) / scale) + touch0Start;\r\n\t\t\t\tselectionWH = chart['plot' + (horiz ? 'Width' : 'Height')] / scale;\r\n\t\t\t};\r\n\r\n\t\t// Set the scale, first pass\r\n\t\tsetScale();\r\n\r\n\t\tselectionXY = clipXY; // the clip position (x or y) is altered if out of bounds, the selection position is not\r\n\r\n\t\t// Out of bounds\r\n\t\tif (selectionXY < bounds.min) {\r\n\t\t\tselectionXY = bounds.min;\r\n\t\t\toutOfBounds = true;\r\n\t\t} else if (selectionXY + selectionWH > bounds.max) {\r\n\t\t\tselectionXY = bounds.max - selectionWH;\r\n\t\t\toutOfBounds = true;\r\n\t\t}\r\n\t\t\r\n\t\t// Is the chart dragged off its bounds, determined by dataMin and dataMax?\r\n\t\tif (outOfBounds) {\r\n\r\n\t\t\t// Modify the touchNow position in order to create an elastic drag movement. This indicates\r\n\t\t\t// to the user that the chart is responsive but can't be dragged further.\r\n\t\t\ttouch0Now -= 0.8 * (touch0Now - lastValidTouch[xy][0]);\r\n\t\t\tif (!singleTouch) {\r\n\t\t\t\ttouch1Now -= 0.8 * (touch1Now - lastValidTouch[xy][1]);\r\n\t\t\t}\r\n\r\n\t\t\t// Set the scale, second pass to adapt to the modified touchNow positions\r\n\t\t\tsetScale();\r\n\r\n\t\t} else {\r\n\t\t\tlastValidTouch[xy] = [touch0Now, touch1Now];\r\n\t\t}\r\n\r\n\t\t// Set geometry for clipping, selection and transformation\r\n\t\tif (!inverted) { // TODO: implement clipping for inverted charts\r\n\t\t\tclip[xy] = clipXY - plotLeftTop;\r\n\t\t\tclip[wh] = selectionWH;\r\n\t\t}\r\n\t\tscaleKey = inverted ? (horiz ? 'scaleY' : 'scaleX') : 'scale' + XY;\r\n\t\ttransformScale = inverted ? 1 / scale : scale;\r\n\r\n\t\tselectionMarker[wh] = selectionWH;\r\n\t\tselectionMarker[xy] = selectionXY;\r\n\t\ttransform[scaleKey] = scale;\r\n\t\ttransform['translate' + XY] = (transformScale * plotLeftTop) + (touch0Now - (transformScale * touch0Start));\r\n\t},\r\n\t\r\n\t/**\r\n\t * Handle touch events with two touches\r\n\t */\r\n\tpinch: function (e) {\r\n\r\n\t\tvar self = this,\r\n\t\t\tchart = self.chart,\r\n\t\t\tpinchDown = self.pinchDown,\r\n\t\t\ttouches = e.touches,\r\n\t\t\ttouchesLength = touches.length,\r\n\t\t\tlastValidTouch = self.lastValidTouch,\r\n\t\t\thasZoom = self.hasZoom,\r\n\t\t\tselectionMarker = self.selectionMarker,\r\n\t\t\ttransform = {},\r\n\t\t\tfireClickEvent = touchesLength === 1 && ((self.inClass(e.target, PREFIX + 'tracker') && \r\n\t\t\t\tchart.runTrackerClick) || self.runChartClick),\r\n\t\t\tclip = {};\r\n\r\n\t\t// On touch devices, only proceed to trigger click if a handler is defined\r\n\t\tif (hasZoom && !fireClickEvent) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\r\n\t\t// Normalize each touch\r\n\t\tmap(touches, function (e) {\r\n\t\t\treturn self.normalize(e);\r\n\t\t});\r\n\t\t\r\n\t\t// Register the touch start position\r\n\t\tif (e.type === 'touchstart') {\r\n\t\t\teach(touches, function (e, i) {\r\n\t\t\t\tpinchDown[i] = { chartX: e.chartX, chartY: e.chartY };\r\n\t\t\t});\r\n\t\t\tlastValidTouch.x = [pinchDown[0].chartX, pinchDown[1] && pinchDown[1].chartX];\r\n\t\t\tlastValidTouch.y = [pinchDown[0].chartY, pinchDown[1] && pinchDown[1].chartY];\r\n\r\n\t\t\t// Identify the data bounds in pixels\r\n\t\t\teach(chart.axes, function (axis) {\r\n\t\t\t\tif (axis.zoomEnabled) {\r\n\t\t\t\t\tvar bounds = chart.bounds[axis.horiz ? 'h' : 'v'],\r\n\t\t\t\t\t\tminPixelPadding = axis.minPixelPadding,\r\n\t\t\t\t\t\tmin = axis.toPixels(pick(axis.options.min, axis.dataMin)),\r\n\t\t\t\t\t\tmax = axis.toPixels(pick(axis.options.max, axis.dataMax)),\r\n\t\t\t\t\t\tabsMin = mathMin(min, max),\r\n\t\t\t\t\t\tabsMax = mathMax(min, max);\r\n\r\n\t\t\t\t\t// Store the bounds for use in the touchmove handler\r\n\t\t\t\t\tbounds.min = mathMin(axis.pos, absMin - minPixelPadding);\r\n\t\t\t\t\tbounds.max = mathMax(axis.pos + axis.len, absMax + minPixelPadding);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tself.res = true; // reset on next move\r\n\t\t\r\n\t\t// Event type is touchmove, handle panning and pinching\r\n\t\t} else if (pinchDown.length) { // can be 0 when releasing, if touchend fires first\r\n\t\t\t\r\n\r\n\t\t\t// Set the marker\r\n\t\t\tif (!selectionMarker) {\r\n\t\t\t\tself.selectionMarker = selectionMarker = extend({\r\n\t\t\t\t\tdestroy: noop\r\n\t\t\t\t}, chart.plotBox);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself.pinchTranslate(pinchDown, touches, transform, selectionMarker, clip, lastValidTouch);\r\n\r\n\t\t\tself.hasPinched = hasZoom;\r\n\r\n\t\t\t// Scale and translate the groups to provide visual feedback during pinching\r\n\t\t\tself.scaleGroups(transform, clip);\r\n\t\t\t\r\n\t\t\t// Optionally move the tooltip on touchmove\r\n\t\t\tif (!hasZoom && self.followTouchMove && touchesLength === 1) {\r\n\t\t\t\tthis.runPointActions(self.normalize(e));\r\n\t\t\t} else if (self.res) {\r\n\t\t\t\tself.res = false;\r\n\t\t\t\tthis.reset(false, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tonContainerTouchStart: function (e) {\r\n\t\tvar chart = this.chart;\r\n\r\n\t\thoverChartIndex = chart.index;\r\n\r\n\t\tif (e.touches.length === 1) {\r\n\r\n\t\t\te = this.normalize(e);\r\n\r\n\t\t\tif (chart.isInsidePlot(e.chartX - chart.plotLeft, e.chartY - chart.plotTop) && !chart.openMenu) {\r\n\r\n\t\t\t\t// Run mouse events and display tooltip etc\r\n\t\t\t\tthis.runPointActions(e);\r\n\r\n\t\t\t\tthis.pinch(e);\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// Hide the tooltip on touching outside the plot area (#1203)\r\n\t\t\t\tthis.reset();\r\n\t\t\t}\r\n\r\n\t\t} else if (e.touches.length === 2) {\r\n\t\t\tthis.pinch(e);\r\n\t\t}   \r\n\t},\r\n\r\n\tonContainerTouchMove: function (e) {\r\n\t\tif (e.touches.length === 1 || e.touches.length === 2) {\r\n\t\t\tthis.pinch(e);\r\n\t\t}\r\n\t},\r\n\r\n\tonDocumentTouchEnd: function (e) {\r\n\t\tif (charts[hoverChartIndex]) {\r\n\t\t\tcharts[hoverChartIndex].pointer.drop(e);\r\n\t\t}\r\n\t}\r\n\r\n});\r\nif (win.PointerEvent || win.MSPointerEvent) {\r\n\t\r\n\t// The touches object keeps track of the points being touched at all times\r\n\tvar touches = {},\r\n\t\thasPointerEvent = !!win.PointerEvent,\r\n\t\tgetWebkitTouches = function () {\r\n\t\t\tvar key, fake = [];\r\n\t\t\tfake.item = function (i) { return this[i]; };\r\n\t\t\tfor (key in touches) {\r\n\t\t\t\tif (touches.hasOwnProperty(key)) {\r\n\t\t\t\t\tfake.push({\r\n\t\t\t\t\t\tpageX: touches[key].pageX,\r\n\t\t\t\t\t\tpageY: touches[key].pageY,\r\n\t\t\t\t\t\ttarget: touches[key].target\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn fake;\r\n\t\t},\r\n\t\ttranslateMSPointer = function (e, method, wktype, callback) {\r\n\t\t\tvar p;\r\n\t\t\te = e.originalEvent || e;\r\n\t\t\tif ((e.pointerType === 'touch' || e.pointerType === e.MSPOINTER_TYPE_TOUCH) && charts[hoverChartIndex]) {\r\n\t\t\t\tcallback(e);\r\n\t\t\t\tp = charts[hoverChartIndex].pointer;\r\n\t\t\t\tp[method]({\r\n\t\t\t\t\ttype: wktype,\r\n\t\t\t\t\ttarget: e.currentTarget,\r\n\t\t\t\t\tpreventDefault: noop,\r\n\t\t\t\t\ttouches: getWebkitTouches()\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t/**\r\n\t * Extend the Pointer prototype with methods for each event handler and more\r\n\t */\r\n\textend(Pointer.prototype, {\r\n\t\tonContainerPointerDown: function (e) {\r\n\t\t\ttranslateMSPointer(e, 'onContainerTouchStart', 'touchstart', function (e) {\r\n\t\t\t\ttouches[e.pointerId] = { pageX: e.pageX, pageY: e.pageY, target: e.currentTarget };\r\n\t\t\t});\r\n\t\t},\r\n\t\tonContainerPointerMove: function (e) {\r\n\t\t\ttranslateMSPointer(e, 'onContainerTouchMove', 'touchmove', function (e) {\r\n\t\t\t\ttouches[e.pointerId] = { pageX: e.pageX, pageY: e.pageY };\r\n\t\t\t\tif (!touches[e.pointerId].target) {\r\n\t\t\t\t\ttouches[e.pointerId].target = e.currentTarget;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tonDocumentPointerUp: function (e) {\r\n\t\t\ttranslateMSPointer(e, 'onContainerTouchEnd', 'touchend', function (e) {\r\n\t\t\t\tdelete touches[e.pointerId];\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Add or remove the MS Pointer specific events\r\n\t\t */\r\n\t\tbatchMSEvents: function (fn) {\r\n\t\t\tfn(this.chart.container, hasPointerEvent ? 'pointerdown' : 'MSPointerDown', this.onContainerPointerDown);\r\n\t\t\tfn(this.chart.container, hasPointerEvent ? 'pointermove' : 'MSPointerMove', this.onContainerPointerMove);\r\n\t\t\tfn(doc, hasPointerEvent ? 'pointerup' : 'MSPointerUp', this.onDocumentPointerUp);\r\n\t\t}\r\n\t});\r\n\r\n\t// Disable default IE actions for pinch and such on chart element\r\n\twrap(Pointer.prototype, 'init', function (proceed, chart, options) {\r\n\t\tproceed.call(this, chart, options);\r\n\t\tif (this.hasZoom || this.followTouchMove) {\r\n\t\t\tcss(chart.container, {\r\n\t\t\t\t'-ms-touch-action': NONE,\r\n\t\t\t\t'touch-action': NONE\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t// Add IE specific touch events to chart\r\n\twrap(Pointer.prototype, 'setDOMEvents', function (proceed) {\r\n\t\tproceed.apply(this);\r\n\t\tif (this.hasZoom || this.followTouchMove) {\r\n\t\t\tthis.batchMSEvents(addEvent);\r\n\t\t}\r\n\t});\r\n\t// Destroy MS events also\r\n\twrap(Pointer.prototype, 'destroy', function (proceed) {\r\n\t\tthis.batchMSEvents(removeEvent);\r\n\t\tproceed.call(this);\r\n\t});\r\n}\r\n/**\r\n * The overview of the chart's series\r\n */\r\nvar Legend = Highcharts.Legend = function (chart, options) {\r\n\tthis.init(chart, options);\r\n};\r\n\r\nLegend.prototype = {\r\n\t\r\n\t/**\r\n\t * Initialize the legend\r\n\t */\r\n\tinit: function (chart, options) {\r\n\t\t\r\n\t\tvar legend = this,\r\n\t\t\titemStyle = options.itemStyle,\r\n\t\t\tpadding,\r\n\t\t\titemMarginTop = options.itemMarginTop || 0;\r\n\t\r\n\t\tthis.options = options;\r\n\r\n\t\tif (!options.enabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\r\n\t\tlegend.itemStyle = itemStyle;\r\n\t\tlegend.itemHiddenStyle = merge(itemStyle, options.itemHiddenStyle);\r\n\t\tlegend.itemMarginTop = itemMarginTop;\r\n\t\tlegend.padding = padding = pick(options.padding, 8);\r\n\t\tlegend.initialItemX = padding;\r\n\t\tlegend.initialItemY = padding - 5; // 5 is the number of pixels above the text\r\n\t\tlegend.maxItemWidth = 0;\r\n\t\tlegend.chart = chart;\r\n\t\tlegend.itemHeight = 0;\r\n\t\tlegend.symbolWidth = pick(options.symbolWidth, 16);\r\n\t\tlegend.pages = [];\r\n\r\n\r\n\t\t// Render it\r\n\t\tlegend.render();\r\n\r\n\t\t// move checkboxes\r\n\t\taddEvent(legend.chart, 'endResize', function () { \r\n\t\t\tlegend.positionCheckboxes();\r\n\t\t});\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set the colors for the legend item\r\n\t * @param {Object} item A Series or Point instance\r\n\t * @param {Object} visible Dimmed or colored\r\n\t */\r\n\tcolorizeItem: function (item, visible) {\r\n\t\tvar legend = this,\r\n\t\t\toptions = legend.options,\r\n\t\t\tlegendItem = item.legendItem,\r\n\t\t\tlegendLine = item.legendLine,\r\n\t\t\tlegendSymbol = item.legendSymbol,\r\n\t\t\thiddenColor = legend.itemHiddenStyle.color,\r\n\t\t\ttextColor = visible ? options.itemStyle.color : hiddenColor,\r\n\t\t\tsymbolColor = visible ? (item.legendColor || item.color || '#CCC') : hiddenColor,\r\n\t\t\tmarkerOptions = item.options && item.options.marker,\r\n\t\t\tsymbolAttr = { fill: symbolColor },\r\n\t\t\tkey,\r\n\t\t\tval;\r\n\t\t\r\n\t\tif (legendItem) {\r\n\t\t\tlegendItem.css({ fill: textColor, color: textColor }); // color for #1553, oldIE\r\n\t\t}\r\n\t\tif (legendLine) {\r\n\t\t\tlegendLine.attr({ stroke: symbolColor });\r\n\t\t}\r\n\t\t\r\n\t\tif (legendSymbol) {\r\n\t\t\t\r\n\t\t\t// Apply marker options\r\n\t\t\tif (markerOptions && legendSymbol.isMarker) { // #585\r\n\t\t\t\tsymbolAttr.stroke = symbolColor;\r\n\t\t\t\tmarkerOptions = item.convertAttribs(markerOptions);\r\n\t\t\t\tfor (key in markerOptions) {\r\n\t\t\t\t\tval = markerOptions[key];\r\n\t\t\t\t\tif (val !== UNDEFINED) {\r\n\t\t\t\t\t\tsymbolAttr[key] = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlegendSymbol.attr(symbolAttr);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Position the legend item\r\n\t * @param {Object} item A Series or Point instance\r\n\t */\r\n\tpositionItem: function (item) {\r\n\t\tvar legend = this,\r\n\t\t\toptions = legend.options,\r\n\t\t\tsymbolPadding = options.symbolPadding,\r\n\t\t\tltr = !options.rtl,\r\n\t\t\tlegendItemPos = item._legendItemPos,\r\n\t\t\titemX = legendItemPos[0],\r\n\t\t\titemY = legendItemPos[1],\r\n\t\t\tcheckbox = item.checkbox;\r\n\r\n\t\tif (item.legendGroup) {\r\n\t\t\titem.legendGroup.translate(\r\n\t\t\t\tltr ? itemX : legend.legendWidth - itemX - 2 * symbolPadding - 4,\r\n\t\t\t\titemY\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (checkbox) {\r\n\t\t\tcheckbox.x = itemX;\r\n\t\t\tcheckbox.y = itemY;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Destroy a single legend item\r\n\t * @param {Object} item The series or point\r\n\t */\r\n\tdestroyItem: function (item) {\r\n\t\tvar checkbox = item.checkbox;\r\n\r\n\t\t// destroy SVG elements\r\n\t\teach(['legendItem', 'legendLine', 'legendSymbol', 'legendGroup'], function (key) {\r\n\t\t\tif (item[key]) {\r\n\t\t\t\titem[key] = item[key].destroy();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (checkbox) {\r\n\t\t\tdiscardElement(item.checkbox);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Destroy all items.\r\n\t */\r\n\tclearItems: function () {\r\n\t\tvar legend = this;\r\n\t\teach(legend.getAllItems(), function (item) {\r\n\t\t\tlegend.destroyItem(item); \r\n\t\t});\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * Destroys the legend.\r\n\t */\r\n\tdestroy: function () {\r\n\t\tvar legend = this,\r\n\t\t\tlegendGroup = legend.group,\r\n\t\t\tbox = legend.box;\r\n\r\n\t\tif (box) {\r\n\t\t\tlegend.box = box.destroy();\r\n\t\t}\r\n\r\n\t\tif (legendGroup) {\r\n\t\t\tlegend.group = legendGroup.destroy();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Position the checkboxes after the width is determined\r\n\t */\r\n\tpositionCheckboxes: function (scrollOffset) {\r\n\t\tvar alignAttr = this.group.alignAttr,\r\n\t\t\ttranslateY,\r\n\t\t\tclipHeight = this.clipHeight || this.legendHeight;\r\n\r\n\t\tif (alignAttr) {\r\n\t\t\ttranslateY = alignAttr.translateY;\r\n\t\t\teach(this.allItems, function (item) {\r\n\t\t\t\tvar checkbox = item.checkbox,\r\n\t\t\t\t\ttop;\r\n\t\t\t\t\r\n\t\t\t\tif (checkbox) {\r\n\t\t\t\t\ttop = (translateY + checkbox.y + (scrollOffset || 0) + 3);\r\n\t\t\t\t\tcss(checkbox, {\r\n\t\t\t\t\t\tleft: (alignAttr.translateX + item.checkboxOffset + checkbox.x - 20) + PX,\r\n\t\t\t\t\t\ttop: top + PX,\r\n\t\t\t\t\t\tdisplay: top > translateY - 6 && top < translateY + clipHeight - 6 ? '' : NONE\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Render the legend title on top of the legend\r\n\t */\r\n\trenderTitle: function () {\r\n\t\tvar options = this.options,\r\n\t\t\tpadding = this.padding,\r\n\t\t\ttitleOptions = options.title,\r\n\t\t\ttitleHeight = 0,\r\n\t\t\tbBox;\r\n\t\t\r\n\t\tif (titleOptions.text) {\r\n\t\t\tif (!this.title) {\r\n\t\t\t\tthis.title = this.chart.renderer.label(titleOptions.text, padding - 3, padding - 4, null, null, null, null, null, 'legend-title')\r\n\t\t\t\t\t.attr({ zIndex: 1 })\r\n\t\t\t\t\t.css(titleOptions.style)\r\n\t\t\t\t\t.add(this.group);\r\n\t\t\t}\r\n\t\t\tbBox = this.title.getBBox();\r\n\t\t\ttitleHeight = bBox.height;\r\n\t\t\tthis.offsetWidth = bBox.width; // #1717\r\n\t\t\tthis.contentGroup.attr({ translateY: titleHeight });\r\n\t\t}\r\n\t\tthis.titleHeight = titleHeight;\r\n\t},\r\n\r\n\t/**\r\n\t * Render a single specific legend item\r\n\t * @param {Object} item A series or point\r\n\t */\r\n\trenderItem: function (item) {\r\n\t\tvar legend = this,\r\n\t\t\tchart = legend.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\toptions = legend.options,\r\n\t\t\thorizontal = options.layout === 'horizontal',\r\n\t\t\tsymbolWidth = legend.symbolWidth,\r\n\t\t\tsymbolPadding = options.symbolPadding,\r\n\t\t\titemStyle = legend.itemStyle,\r\n\t\t\titemHiddenStyle = legend.itemHiddenStyle,\r\n\t\t\tpadding = legend.padding,\r\n\t\t\titemDistance = horizontal ? pick(options.itemDistance, 20) : 0,\r\n\t\t\tltr = !options.rtl,\r\n\t\t\titemHeight,\r\n\t\t\twidthOption = options.width,\r\n\t\t\titemMarginBottom = options.itemMarginBottom || 0,\r\n\t\t\titemMarginTop = legend.itemMarginTop,\r\n\t\t\tinitialItemX = legend.initialItemX,\r\n\t\t\tbBox,\r\n\t\t\titemWidth,\r\n\t\t\tli = item.legendItem,\r\n\t\t\tseries = item.series && item.series.drawLegendSymbol ? item.series : item,\r\n\t\t\tseriesOptions = series.options,\r\n\t\t\tshowCheckbox = legend.createCheckboxForItem && seriesOptions && seriesOptions.showCheckbox,\r\n\t\t\tuseHTML = options.useHTML;\r\n\r\n\t\tif (!li) { // generate it once, later move it\r\n\r\n\t\t\t// Generate the group box\r\n\t\t\t// A group to hold the symbol and text. Text is to be appended in Legend class.\r\n\t\t\titem.legendGroup = renderer.g('legend-item')\r\n\t\t\t\t.attr({ zIndex: 1 })\r\n\t\t\t\t.add(legend.scrollGroup);\r\n\r\n\t\t\t// Generate the list item text and add it to the group\r\n\t\t\titem.legendItem = li = renderer.text(\r\n\t\t\t\t\toptions.labelFormat ? format(options.labelFormat, item) : options.labelFormatter.call(item),\r\n\t\t\t\t\tltr ? symbolWidth + symbolPadding : -symbolPadding,\r\n\t\t\t\t\tlegend.baseline || 0,\r\n\t\t\t\t\tuseHTML\r\n\t\t\t\t)\r\n\t\t\t\t.css(merge(item.visible ? itemStyle : itemHiddenStyle)) // merge to prevent modifying original (#1021)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\talign: ltr ? 'left' : 'right',\r\n\t\t\t\t\tzIndex: 2\r\n\t\t\t\t})\r\n\t\t\t\t.add(item.legendGroup);\r\n\r\n\t\t\t// Get the baseline for the first item - the font size is equal for all\r\n\t\t\tif (!legend.baseline) {\r\n\t\t\t\tlegend.baseline = renderer.fontMetrics(itemStyle.fontSize, li).f + 3 + itemMarginTop;\r\n\t\t\t\tli.attr('y', legend.baseline);\r\n\t\t\t}\r\n\r\n\t\t\t// Draw the legend symbol inside the group box\r\n\t\t\tseries.drawLegendSymbol(legend, item);\r\n\r\n\t\t\tif (legend.setItemEvents) {\r\n\t\t\t\tlegend.setItemEvents(item, li, useHTML, itemStyle, itemHiddenStyle);\r\n\t\t\t}\t\t\t\r\n\r\n\t\t\t// Colorize the items\r\n\t\t\tlegend.colorizeItem(item, item.visible);\r\n\r\n\t\t\t// add the HTML checkbox on top\r\n\t\t\tif (showCheckbox) {\r\n\t\t\t\tlegend.createCheckboxForItem(item);\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// calculate the positions for the next line\r\n\t\tbBox = li.getBBox();\r\n\r\n\t\titemWidth = item.checkboxOffset = \r\n\t\t\toptions.itemWidth || \r\n\t\t\titem.legendItemWidth || \r\n\t\t\tsymbolWidth + symbolPadding + bBox.width + itemDistance + (showCheckbox ? 20 : 0);\r\n\t\tlegend.itemHeight = itemHeight = mathRound(item.legendItemHeight || bBox.height);\r\n\r\n\t\t// if the item exceeds the width, start a new line\r\n\t\tif (horizontal && legend.itemX - initialItemX + itemWidth >\r\n\t\t\t\t(widthOption || (chart.chartWidth - 2 * padding - initialItemX - options.x))) {\r\n\t\t\tlegend.itemX = initialItemX;\r\n\t\t\tlegend.itemY += itemMarginTop + legend.lastLineHeight + itemMarginBottom;\r\n\t\t}\r\n\r\n\t\t// If the item exceeds the height, start a new column\r\n\t\t/*if (!horizontal && legend.itemY + options.y + itemHeight > chart.chartHeight - spacingTop - spacingBottom) {\r\n\t\t\tlegend.itemY = legend.initialItemY;\r\n\t\t\tlegend.itemX += legend.maxItemWidth;\r\n\t\t\tlegend.maxItemWidth = 0;\r\n\t\t}*/\r\n\r\n\t\t// Set the edge positions\r\n\t\tlegend.maxItemWidth = mathMax(legend.maxItemWidth, itemWidth);\r\n\t\tlegend.lastItemY = itemMarginTop + legend.itemY + itemMarginBottom;\r\n\t\tlegend.lastLineHeight = mathMax(itemHeight, legend.lastLineHeight); // #915\r\n\r\n\t\t// cache the position of the newly generated or reordered items\r\n\t\titem._legendItemPos = [legend.itemX, legend.itemY];\r\n\r\n\t\t// advance\r\n\t\tif (horizontal) {\r\n\t\t\tlegend.itemX += itemWidth;\r\n\r\n\t\t} else {\r\n\t\t\tlegend.itemY += itemMarginTop + itemHeight + itemMarginBottom;\r\n\t\t\tlegend.lastLineHeight = itemHeight;\r\n\t\t}\r\n\r\n\t\t// the width of the widest item\r\n\t\tlegend.offsetWidth = widthOption || mathMax(\r\n\t\t\t(horizontal ? legend.itemX - initialItemX - itemDistance : itemWidth) + padding,\r\n\t\t\tlegend.offsetWidth\r\n\t\t);\r\n\t},\r\n\r\n\t/**\r\n\t * Get all items, which is one item per series for normal series and one item per point\r\n\t * for pie series.\r\n\t */\r\n\tgetAllItems: function () {\r\n\t\tvar allItems = [];\r\n\t\teach(this.chart.series, function (series) {\r\n\t\t\tvar seriesOptions = series.options;\r\n\r\n\t\t\t// Handle showInLegend. If the series is linked to another series, defaults to false.\r\n\t\t\tif (!pick(seriesOptions.showInLegend, !defined(seriesOptions.linkedTo) ? UNDEFINED : false, true)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// use points or series for the legend item depending on legendType\r\n\t\t\tallItems = allItems.concat(\r\n\t\t\t\t\tseries.legendItems ||\r\n\t\t\t\t\t(seriesOptions.legendType === 'point' ?\r\n\t\t\t\t\t\t\tseries.data :\r\n\t\t\t\t\t\t\tseries)\r\n\t\t\t);\r\n\t\t});\r\n\t\treturn allItems;\r\n\t},\r\n\r\n\t/**\r\n\t * Adjust the chart margins by reserving space for the legend on only one side\r\n\t * of the chart. If the position is set to a corner, top or bottom is reserved\r\n\t * for horizontal legends and left or right for vertical ones.\r\n\t */\r\n\tadjustMargins: function (margin, spacing) {\r\n\t\tvar chart = this.chart, \r\n\t\t\toptions = this.options,\r\n\t\t\t// Use the first letter of each alignment option in order to detect the side \r\n\t\t\talignment = options.align[0] + options.verticalAlign[0] + options.layout[0];\r\n\t\t\t\r\n\t\tif (this.display && !options.floating) {\r\n\r\n\t\t\teach([\r\n\t\t\t\t/(lth|ct|rth)/,\r\n\t\t\t\t/(rtv|rm|rbv)/,\r\n\t\t\t\t/(rbh|cb|lbh)/,\r\n\t\t\t\t/(lbv|lm|ltv)/\r\n\t\t\t], function (alignments, side) {\r\n\t\t\t\tif (alignments.test(alignment) && !defined(margin[side])) {\r\n\t\t\t\t\t// Now we have detected on which side of the chart we should reserve space for the legend\r\n\t\t\t\t\tchart[marginNames[side]] = mathMax(\r\n\t\t\t\t\t\tchart[marginNames[side]],\r\n\t\t\t\t\t\tchart.legend[(side + 1) % 2 ? 'legendHeight' : 'legendWidth'] + \r\n\t\t\t\t\t\t\t[1, -1, -1, 1][side] * options[(side % 2) ? 'x' : 'y'] + \r\n\t\t\t\t\t\t\tpick(options.margin, 12) +\r\n\t\t\t\t\t\t\tspacing[side]\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Render the legend. This method can be called both before and after\r\n\t * chart.render. If called after, it will only rearrange items instead\r\n\t * of creating new ones.\r\n\t */\r\n\trender: function () {\r\n\t\tvar legend = this,\r\n\t\t\tchart = legend.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tlegendGroup = legend.group,\r\n\t\t\tallItems,\r\n\t\t\tdisplay,\r\n\t\t\tlegendWidth,\r\n\t\t\tlegendHeight,\r\n\t\t\tbox = legend.box,\r\n\t\t\toptions = legend.options,\r\n\t\t\tpadding = legend.padding,\r\n\t\t\tlegendBorderWidth = options.borderWidth,\r\n\t\t\tlegendBackgroundColor = options.backgroundColor;\r\n\r\n\t\tlegend.itemX = legend.initialItemX;\r\n\t\tlegend.itemY = legend.initialItemY;\r\n\t\tlegend.offsetWidth = 0;\r\n\t\tlegend.lastItemY = 0;\r\n\r\n\t\tif (!legendGroup) {\r\n\t\t\tlegend.group = legendGroup = renderer.g('legend')\r\n\t\t\t\t.attr({ zIndex: 7 }) \r\n\t\t\t\t.add();\r\n\t\t\tlegend.contentGroup = renderer.g()\r\n\t\t\t\t.attr({ zIndex: 1 }) // above background\r\n\t\t\t\t.add(legendGroup);\r\n\t\t\tlegend.scrollGroup = renderer.g()\r\n\t\t\t\t.add(legend.contentGroup);\r\n\t\t}\r\n\t\t\r\n\t\tlegend.renderTitle();\r\n\r\n\t\t// add each series or point\r\n\t\tallItems = legend.getAllItems();\r\n\r\n\t\t// sort by legendIndex\r\n\t\tstableSort(allItems, function (a, b) {\r\n\t\t\treturn ((a.options && a.options.legendIndex) || 0) - ((b.options && b.options.legendIndex) || 0);\r\n\t\t});\r\n\r\n\t\t// reversed legend\r\n\t\tif (options.reversed) {\r\n\t\t\tallItems.reverse();\r\n\t\t}\r\n\r\n\t\tlegend.allItems = allItems;\r\n\t\tlegend.display = display = !!allItems.length;\r\n\r\n\t\t// render the items\r\n\t\tlegend.lastLineHeight = 0;\r\n\t\teach(allItems, function (item) {\r\n\t\t\tlegend.renderItem(item); \r\n\t\t});\r\n\r\n\t\t// Get the box\r\n\t\tlegendWidth = (options.width || legend.offsetWidth) + padding;\r\n\t\tlegendHeight = legend.lastItemY + legend.lastLineHeight + legend.titleHeight;\r\n\t\tlegendHeight = legend.handleOverflow(legendHeight);\r\n\t\tlegendHeight += padding;\r\n\r\n\t\t// Draw the border and/or background\r\n\t\tif (legendBorderWidth || legendBackgroundColor) {\r\n\r\n\t\t\tif (!box) {\r\n\t\t\t\tlegend.box = box = renderer.rect(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tlegendWidth,\r\n\t\t\t\t\tlegendHeight,\r\n\t\t\t\t\toptions.borderRadius,\r\n\t\t\t\t\tlegendBorderWidth || 0\r\n\t\t\t\t).attr({\r\n\t\t\t\t\tstroke: options.borderColor,\r\n\t\t\t\t\t'stroke-width': legendBorderWidth || 0,\r\n\t\t\t\t\tfill: legendBackgroundColor || NONE\r\n\t\t\t\t})\r\n\t\t\t\t.add(legendGroup)\r\n\t\t\t\t.shadow(options.shadow);\r\n\t\t\t\tbox.isNew = true;\r\n\r\n\t\t\t} else if (legendWidth > 0 && legendHeight > 0) {\r\n\t\t\t\tbox[box.isNew ? 'attr' : 'animate'](\r\n\t\t\t\t\tbox.crisp({ width: legendWidth, height: legendHeight })\r\n\t\t\t\t);\r\n\t\t\t\tbox.isNew = false;\r\n\t\t\t}\r\n\r\n\t\t\t// hide the border if no items\r\n\t\t\tbox[display ? 'show' : 'hide']();\r\n\t\t}\r\n\t\t\r\n\t\tlegend.legendWidth = legendWidth;\r\n\t\tlegend.legendHeight = legendHeight;\r\n\r\n\t\t// Now that the legend width and height are established, put the items in the \r\n\t\t// final position\r\n\t\teach(allItems, function (item) {\r\n\t\t\tlegend.positionItem(item);\r\n\t\t});\r\n\r\n\t\t// 1.x compatibility: positioning based on style\r\n\t\t/*var props = ['left', 'right', 'top', 'bottom'],\r\n\t\t\tprop,\r\n\t\t\ti = 4;\r\n\t\twhile (i--) {\r\n\t\t\tprop = props[i];\r\n\t\t\tif (options.style[prop] && options.style[prop] !== 'auto') {\r\n\t\t\t\toptions[i < 2 ? 'align' : 'verticalAlign'] = prop;\r\n\t\t\t\toptions[i < 2 ? 'x' : 'y'] = pInt(options.style[prop]) * (i % 2 ? -1 : 1);\r\n\t\t\t}\r\n\t\t}*/\r\n\r\n\t\tif (display) {\r\n\t\t\tlegendGroup.align(extend({\r\n\t\t\t\twidth: legendWidth,\r\n\t\t\t\theight: legendHeight\r\n\t\t\t}, options), true, 'spacingBox');\r\n\t\t}\r\n\r\n\t\tif (!chart.isResizing) {\r\n\t\t\tthis.positionCheckboxes();\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Set up the overflow handling by adding navigation with up and down arrows below the\r\n\t * legend.\r\n\t */\r\n\thandleOverflow: function (legendHeight) {\r\n\t\tvar legend = this,\r\n\t\t\tchart = this.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\toptions = this.options,\r\n\t\t\toptionsY = options.y,\r\n\t\t\talignTop = options.verticalAlign === 'top',\r\n\t\t\tspaceHeight = chart.spacingBox.height + (alignTop ? -optionsY : optionsY) - this.padding,\r\n\t\t\tmaxHeight = options.maxHeight,\r\n\t\t\tclipHeight,\r\n\t\t\tclipRect = this.clipRect,\r\n\t\t\tnavOptions = options.navigation,\r\n\t\t\tanimation = pick(navOptions.animation, true),\r\n\t\t\tarrowSize = navOptions.arrowSize || 12,\r\n\t\t\tnav = this.nav,\r\n\t\t\tpages = this.pages,\r\n\t\t\tlastY,\r\n\t\t\tallItems = this.allItems;\r\n\t\t\t\r\n\t\t// Adjust the height\r\n\t\tif (options.layout === 'horizontal') {\r\n\t\t\tspaceHeight /= 2;\r\n\t\t}\r\n\t\tif (maxHeight) {\r\n\t\t\tspaceHeight = mathMin(spaceHeight, maxHeight);\r\n\t\t}\r\n\t\t\r\n\t\t// Reset the legend height and adjust the clipping rectangle\r\n\t\tpages.length = 0;\r\n\t\tif (legendHeight > spaceHeight && !options.useHTML) {\r\n\r\n\t\t\tthis.clipHeight = clipHeight = mathMax(spaceHeight - 20 - this.titleHeight - this.padding, 0);\r\n\t\t\tthis.currentPage = pick(this.currentPage, 1);\r\n\t\t\tthis.fullHeight = legendHeight;\r\n\t\t\t\r\n\t\t\t// Fill pages with Y positions so that the top of each a legend item defines\r\n\t\t\t// the scroll top for each page (#2098)\r\n\t\t\teach(allItems, function (item, i) {\r\n\t\t\t\tvar y = item._legendItemPos[1],\r\n\t\t\t\t\th = mathRound(item.legendItem.getBBox().height),\r\n\t\t\t\t\tlen = pages.length;\r\n\t\t\t\t\r\n\t\t\t\tif (!len || (y - pages[len - 1] > clipHeight && (lastY || y) !== pages[len - 1])) {\r\n\t\t\t\t\tpages.push(lastY || y);\r\n\t\t\t\t\tlen++;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (i === allItems.length - 1 && y + h - pages[len - 1] > clipHeight) {\r\n\t\t\t\t\tpages.push(y);\r\n\t\t\t\t}\r\n\t\t\t\tif (y !== lastY) {\r\n\t\t\t\t\tlastY = y;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Only apply clipping if needed. Clipping causes blurred legend in PDF export (#1787)\r\n\t\t\tif (!clipRect) {\r\n\t\t\t\tclipRect = legend.clipRect = renderer.clipRect(0, this.padding, 9999, 0);\r\n\t\t\t\tlegend.contentGroup.clip(clipRect);\r\n\t\t\t}\r\n\t\t\tclipRect.attr({\r\n\t\t\t\theight: clipHeight\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// Add navigation elements\r\n\t\t\tif (!nav) {\r\n\t\t\t\tthis.nav = nav = renderer.g().attr({ zIndex: 1 }).add(this.group);\r\n\t\t\t\tthis.up = renderer.symbol('triangle', 0, 0, arrowSize, arrowSize)\r\n\t\t\t\t\t.on('click', function () {\r\n\t\t\t\t\t\tlegend.scroll(-1, animation);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add(nav);\r\n\t\t\t\tthis.pager = renderer.text('', 15, 10)\r\n\t\t\t\t\t.css(navOptions.style)\r\n\t\t\t\t\t.add(nav);\r\n\t\t\t\tthis.down = renderer.symbol('triangle-down', 0, 0, arrowSize, arrowSize)\r\n\t\t\t\t\t.on('click', function () {\r\n\t\t\t\t\t\tlegend.scroll(1, animation);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add(nav);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Set initial position\r\n\t\t\tlegend.scroll(0);\r\n\t\t\t\r\n\t\t\tlegendHeight = spaceHeight;\r\n\t\t\t\r\n\t\t} else if (nav) {\r\n\t\t\tclipRect.attr({\r\n\t\t\t\theight: chart.chartHeight\r\n\t\t\t});\r\n\t\t\tnav.hide();\r\n\t\t\tthis.scrollGroup.attr({\r\n\t\t\t\ttranslateY: 1\r\n\t\t\t});\r\n\t\t\tthis.clipHeight = 0; // #1379\r\n\t\t}\r\n\t\t\r\n\t\treturn legendHeight;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Scroll the legend by a number of pages\r\n\t * @param {Object} scrollBy\r\n\t * @param {Object} animation\r\n\t */\r\n\tscroll: function (scrollBy, animation) {\r\n\t\tvar pages = this.pages,\r\n\t\t\tpageCount = pages.length,\r\n\t\t\tcurrentPage = this.currentPage + scrollBy,\r\n\t\t\tclipHeight = this.clipHeight,\r\n\t\t\tnavOptions = this.options.navigation,\r\n\t\t\tactiveColor = navOptions.activeColor,\r\n\t\t\tinactiveColor = navOptions.inactiveColor,\r\n\t\t\tpager = this.pager,\r\n\t\t\tpadding = this.padding,\r\n\t\t\tscrollOffset;\r\n\t\t\r\n\t\t// When resizing while looking at the last page\r\n\t\tif (currentPage > pageCount) {\r\n\t\t\tcurrentPage = pageCount;\r\n\t\t}\r\n\t\t\r\n\t\tif (currentPage > 0) {\r\n\t\t\t\r\n\t\t\tif (animation !== UNDEFINED) {\r\n\t\t\t\tsetAnimation(animation, this.chart);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.nav.attr({\r\n\t\t\t\ttranslateX: padding,\r\n\t\t\t\ttranslateY: clipHeight + this.padding + 7 + this.titleHeight,\r\n\t\t\t\tvisibility: VISIBLE\r\n\t\t\t});\r\n\t\t\tthis.up.attr({\r\n\t\t\t\t\tfill: currentPage === 1 ? inactiveColor : activeColor\r\n\t\t\t\t})\r\n\t\t\t\t.css({\r\n\t\t\t\t\tcursor: currentPage === 1 ? 'default' : 'pointer'\r\n\t\t\t\t});\r\n\t\t\tpager.attr({\r\n\t\t\t\ttext: currentPage + '/' + pageCount\r\n\t\t\t});\r\n\t\t\tthis.down.attr({\r\n\t\t\t\t\tx: 18 + this.pager.getBBox().width, // adjust to text width\r\n\t\t\t\t\tfill: currentPage === pageCount ? inactiveColor : activeColor\r\n\t\t\t\t})\r\n\t\t\t\t.css({\r\n\t\t\t\t\tcursor: currentPage === pageCount ? 'default' : 'pointer'\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\tscrollOffset = -pages[currentPage - 1] + this.initialItemY;\r\n\r\n\t\t\tthis.scrollGroup.animate({\r\n\t\t\t\ttranslateY: scrollOffset\r\n\t\t\t});\t\t\t\r\n\t\t\t\r\n\t\t\tthis.currentPage = currentPage;\r\n\t\t\tthis.positionCheckboxes(scrollOffset);\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\t\r\n};\r\n\r\n/*\r\n * LegendSymbolMixin\r\n */ \r\n\r\nvar LegendSymbolMixin = Highcharts.LegendSymbolMixin = {\r\n\r\n\t/**\r\n\t * Get the series' symbol in the legend\r\n\t * \r\n\t * @param {Object} legend The legend object\r\n\t * @param {Object} item The series (this) or point\r\n\t */\r\n\tdrawRectangle: function (legend, item) {\r\n\t\tvar symbolHeight = legend.options.symbolHeight || 12;\r\n\t\t\r\n\t\titem.legendSymbol = this.chart.renderer.rect(\r\n\t\t\t0,\r\n\t\t\tlegend.baseline - 5 - (symbolHeight / 2),\r\n\t\t\tlegend.symbolWidth,\r\n\t\t\tsymbolHeight,\r\n\t\t\tlegend.options.symbolRadius || 0\r\n\t\t).attr({\r\n\t\t\tzIndex: 3\r\n\t\t}).add(item.legendGroup);\t\t\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * Get the series' symbol in the legend. This method should be overridable to create custom \r\n\t * symbols through Highcharts.seriesTypes[type].prototype.drawLegendSymbols.\r\n\t * \r\n\t * @param {Object} legend The legend object\r\n\t */\r\n\tdrawLineMarker: function (legend) {\r\n\r\n\t\tvar options = this.options,\r\n\t\t\tmarkerOptions = options.marker,\r\n\t\t\tradius,\r\n\t\t\tlegendOptions = legend.options,\r\n\t\t\tlegendSymbol,\r\n\t\t\tsymbolWidth = legend.symbolWidth,\r\n\t\t\trenderer = this.chart.renderer,\r\n\t\t\tlegendItemGroup = this.legendGroup,\r\n\t\t\tverticalCenter = legend.baseline - mathRound(renderer.fontMetrics(legendOptions.itemStyle.fontSize, this.legendItem).b * 0.3),\r\n\t\t\tattr;\r\n\r\n\t\t// Draw the line\r\n\t\tif (options.lineWidth) {\r\n\t\t\tattr = {\r\n\t\t\t\t'stroke-width': options.lineWidth\r\n\t\t\t};\r\n\t\t\tif (options.dashStyle) {\r\n\t\t\t\tattr.dashstyle = options.dashStyle;\r\n\t\t\t}\r\n\t\t\tthis.legendLine = renderer.path([\r\n\t\t\t\tM,\r\n\t\t\t\t0,\r\n\t\t\t\tverticalCenter,\r\n\t\t\t\tL,\r\n\t\t\t\tsymbolWidth,\r\n\t\t\t\tverticalCenter\r\n\t\t\t])\r\n\t\t\t.attr(attr)\r\n\t\t\t.add(legendItemGroup);\r\n\t\t}\r\n\t\t\r\n\t\t// Draw the marker\r\n\t\tif (markerOptions && markerOptions.enabled !== false) {\r\n\t\t\tradius = markerOptions.radius;\r\n\t\t\tthis.legendSymbol = legendSymbol = renderer.symbol(\r\n\t\t\t\tthis.symbol,\r\n\t\t\t\t(symbolWidth / 2) - radius,\r\n\t\t\t\tverticalCenter - radius,\r\n\t\t\t\t2 * radius,\r\n\t\t\t\t2 * radius\r\n\t\t\t)\r\n\t\t\t.add(legendItemGroup);\r\n\t\t\tlegendSymbol.isMarker = true;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Workaround for #2030, horizontal legend items not displaying in IE11 Preview,\r\n// and for #2580, a similar drawing flaw in Firefox 26.\r\n// TODO: Explore if there's a general cause for this. The problem may be related \r\n// to nested group elements, as the legend item texts are within 4 group elements.\r\nif (/Trident\\/7\\.0/.test(userAgent) || isFirefox) {\r\n\twrap(Legend.prototype, 'positionItem', function (proceed, item) {\r\n\t\tvar legend = this,\r\n\t\t\trunPositionItem = function () { // If chart destroyed in sync, this is undefined (#2030)\r\n\t\t\t\tif (item._legendItemPos) {\r\n\t\t\t\t\tproceed.call(legend, item);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t// Do it now, for export and to get checkbox placement\r\n\t\trunPositionItem();\r\n\t\t\r\n\t\t// Do it after to work around the core issue\r\n\t\tsetTimeout(runPositionItem);\r\n\t});\r\n}\r\n/**\r\n * The chart class\r\n * @param {Object} options\r\n * @param {Function} callback Function to run when the chart has loaded\r\n */\r\nvar Chart = Highcharts.Chart = function () {\r\n\tthis.init.apply(this, arguments);\r\n};\r\n\r\nChart.prototype = {\r\n\r\n\t/**\r\n\t * Hook for modules\r\n\t */\r\n\tcallbacks: [],\r\n\r\n\t/**\r\n\t * Initialize the chart\r\n\t */\r\n\tinit: function (userOptions, callback) {\r\n\r\n\t\t// Handle regular options\r\n\t\tvar options,\r\n\t\t\tseriesOptions = userOptions.series; // skip merging data points to increase performance\r\n\r\n\t\tuserOptions.series = null;\r\n\t\toptions = merge(defaultOptions, userOptions); // do the merge\r\n\t\toptions.series = userOptions.series = seriesOptions; // set back the series data\r\n\t\tthis.userOptions = userOptions;\r\n\r\n\t\tvar optionsChart = options.chart;\r\n\t\t\r\n\t\t// Create margin & spacing array\r\n\t\tthis.margin = this.splashArray('margin', optionsChart);\r\n\t\tthis.spacing = this.splashArray('spacing', optionsChart);\r\n\r\n\t\tvar chartEvents = optionsChart.events;\r\n\r\n\t\t//this.runChartClick = chartEvents && !!chartEvents.click;\r\n\t\tthis.bounds = { h: {}, v: {} }; // Pixel data bounds for touch zoom\r\n\r\n\t\tthis.callback = callback;\r\n\t\tthis.isResizing = 0;\r\n\t\tthis.options = options;\r\n\t\t//chartTitleOptions = UNDEFINED;\r\n\t\t//chartSubtitleOptions = UNDEFINED;\r\n\r\n\t\tthis.axes = [];\r\n\t\tthis.series = [];\r\n\t\tthis.hasCartesianSeries = optionsChart.showAxes;\r\n\t\t//this.axisOffset = UNDEFINED;\r\n\t\t//this.maxTicks = UNDEFINED; // handle the greatest amount of ticks on grouped axes\r\n\t\t//this.inverted = UNDEFINED;\r\n\t\t//this.loadingShown = UNDEFINED;\r\n\t\t//this.container = UNDEFINED;\r\n\t\t//this.chartWidth = UNDEFINED;\r\n\t\t//this.chartHeight = UNDEFINED;\r\n\t\t//this.marginRight = UNDEFINED;\r\n\t\t//this.marginBottom = UNDEFINED;\r\n\t\t//this.containerWidth = UNDEFINED;\r\n\t\t//this.containerHeight = UNDEFINED;\r\n\t\t//this.oldChartWidth = UNDEFINED;\r\n\t\t//this.oldChartHeight = UNDEFINED;\r\n\r\n\t\t//this.renderTo = UNDEFINED;\r\n\t\t//this.renderToClone = UNDEFINED;\r\n\r\n\t\t//this.spacingBox = UNDEFINED\r\n\r\n\t\t//this.legend = UNDEFINED;\r\n\r\n\t\t// Elements\r\n\t\t//this.chartBackground = UNDEFINED;\r\n\t\t//this.plotBackground = UNDEFINED;\r\n\t\t//this.plotBGImage = UNDEFINED;\r\n\t\t//this.plotBorder = UNDEFINED;\r\n\t\t//this.loadingDiv = UNDEFINED;\r\n\t\t//this.loadingSpan = UNDEFINED;\r\n\r\n\t\tvar chart = this,\r\n\t\t\teventType;\r\n\r\n\t\t// Add the chart to the global lookup\r\n\t\tchart.index = charts.length;\r\n\t\tcharts.push(chart);\r\n\t\tchartCount++;\r\n\r\n\t\t// Set up auto resize\r\n\t\tif (optionsChart.reflow !== false) {\r\n\t\t\taddEvent(chart, 'load', function () {\r\n\t\t\t\tchart.initReflow();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Chart event handlers\r\n\t\tif (chartEvents) {\r\n\t\t\tfor (eventType in chartEvents) {\r\n\t\t\t\taddEvent(chart, eventType, chartEvents[eventType]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tchart.xAxis = [];\r\n\t\tchart.yAxis = [];\r\n\r\n\t\t// Expose methods and variables\r\n\t\tchart.animation = useCanVG ? false : pick(optionsChart.animation, true);\r\n\t\tchart.pointCount = chart.colorCounter = chart.symbolCounter = 0;\r\n\r\n\t\tchart.firstRender();\r\n\t},\r\n\r\n\t/**\r\n\t * Initialize an individual series, called internally before render time\r\n\t */\r\n\tinitSeries: function (options) {\r\n\t\tvar chart = this,\r\n\t\t\toptionsChart = chart.options.chart,\r\n\t\t\ttype = options.type || optionsChart.type || optionsChart.defaultSeriesType,\r\n\t\t\tseries,\r\n\t\t\tconstr = seriesTypes[type];\r\n\r\n\t\t// No such series type\r\n\t\tif (!constr) {\r\n\t\t\terror(17, true);\r\n\t\t}\r\n\r\n\t\tseries = new constr();\r\n\t\tseries.init(this, options);\r\n\t\treturn series;\r\n\t},\r\n\r\n\t/**\r\n\t * Check whether a given point is within the plot area\r\n\t *\r\n\t * @param {Number} plotX Pixel x relative to the plot area\r\n\t * @param {Number} plotY Pixel y relative to the plot area\r\n\t * @param {Boolean} inverted Whether the chart is inverted\r\n\t */\r\n\tisInsidePlot: function (plotX, plotY, inverted) {\r\n\t\tvar x = inverted ? plotY : plotX,\r\n\t\t\ty = inverted ? plotX : plotY;\r\n\t\t\t\r\n\t\treturn x >= 0 &&\r\n\t\t\tx <= this.plotWidth &&\r\n\t\t\ty >= 0 &&\r\n\t\t\ty <= this.plotHeight;\r\n\t},\r\n\r\n\t/**\r\n\t * Redraw legend, axes or series based on updated data\r\n\t *\r\n\t * @param {Boolean|Object} animation Whether to apply animation, and optionally animation\r\n\t *    configuration\r\n\t */\r\n\tredraw: function (animation) {\r\n\t\tvar chart = this,\r\n\t\t\taxes = chart.axes,\r\n\t\t\tseries = chart.series,\r\n\t\t\tpointer = chart.pointer,\r\n\t\t\tlegend = chart.legend,\r\n\t\t\tredrawLegend = chart.isDirtyLegend,\r\n\t\t\thasStackedSeries,\r\n\t\t\thasDirtyStacks,\r\n\t\t\thasCartesianSeries = chart.hasCartesianSeries,\r\n\t\t\tisDirtyBox = chart.isDirtyBox, // todo: check if it has actually changed?\r\n\t\t\tseriesLength = series.length,\r\n\t\t\ti = seriesLength,\r\n\t\t\tserie,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tisHiddenChart = renderer.isHidden(),\r\n\t\t\tafterRedraw = [];\r\n\t\t\t\r\n\t\tsetAnimation(animation, chart);\r\n\t\t\r\n\t\tif (isHiddenChart) {\r\n\t\t\tchart.cloneRenderTo();\r\n\t\t}\r\n\r\n\t\t// Adjust title layout (reflow multiline text)\r\n\t\tchart.layOutTitles();\r\n\r\n\t\t// link stacked series\r\n\t\twhile (i--) {\r\n\t\t\tserie = series[i];\r\n\r\n\t\t\tif (serie.options.stacking) {\r\n\t\t\t\thasStackedSeries = true;\r\n\t\t\t\t\r\n\t\t\t\tif (serie.isDirty) {\r\n\t\t\t\t\thasDirtyStacks = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (hasDirtyStacks) { // mark others as dirty\r\n\t\t\ti = seriesLength;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tserie = series[i];\r\n\t\t\t\tif (serie.options.stacking) {\r\n\t\t\t\t\tserie.isDirty = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// handle updated data in the series\r\n\t\teach(series, function (serie) {\r\n\t\t\tif (serie.isDirty) { // prepare the data so axis can read it\r\n\t\t\t\tif (serie.options.legendType === 'point') {\r\n\t\t\t\t\tredrawLegend = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// handle added or removed series\r\n\t\tif (redrawLegend && legend.options.enabled) { // series or pie points are added or removed\r\n\t\t\t// draw legend graphics\r\n\t\t\tlegend.render();\r\n\r\n\t\t\tchart.isDirtyLegend = false;\r\n\t\t}\r\n\r\n\t\t// reset stacks\r\n\t\tif (hasStackedSeries) {\r\n\t\t\tchart.getStacks();\r\n\t\t}\r\n\r\n\r\n\t\tif (hasCartesianSeries) {\r\n\t\t\tif (!chart.isResizing) {\r\n\r\n\t\t\t\t// reset maxTicks\r\n\t\t\t\tchart.maxTicks = null;\r\n\r\n\t\t\t\t// set axes scales\r\n\t\t\t\teach(axes, function (axis) {\r\n\t\t\t\t\taxis.setScale();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tchart.getMargins(); // #3098\r\n\r\n\t\tif (hasCartesianSeries) {\r\n\t\t\t// If one axis is dirty, all axes must be redrawn (#792, #2169)\r\n\t\t\teach(axes, function (axis) {\r\n\t\t\t\tif (axis.isDirty) {\r\n\t\t\t\t\tisDirtyBox = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// redraw axes\r\n\t\t\teach(axes, function (axis) {\r\n\t\t\t\t\r\n\t\t\t\t// Fire 'afterSetExtremes' only if extremes are set\r\n\t\t\t\tif (axis.isDirtyExtremes) { // #821\r\n\t\t\t\t\taxis.isDirtyExtremes = false;\r\n\t\t\t\t\tafterRedraw.push(function () { // prevent a recursive call to chart.redraw() (#1119)\r\n\t\t\t\t\t\tfireEvent(axis, 'afterSetExtremes', extend(axis.eventArgs, axis.getExtremes())); // #747, #751\r\n\t\t\t\t\t\tdelete axis.eventArgs;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (isDirtyBox || hasStackedSeries) {\r\n\t\t\t\t\taxis.redraw();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// the plot areas size has changed\r\n\t\tif (isDirtyBox) {\r\n\t\t\tchart.drawChartBox();\r\n\t\t}\r\n\r\n\r\n\t\t// redraw affected series\r\n\t\teach(series, function (serie) {\r\n\t\t\tif (serie.isDirty && serie.visible &&\r\n\t\t\t\t\t(!serie.isCartesian || serie.xAxis)) { // issue #153\r\n\t\t\t\tserie.redraw();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// move tooltip or reset\r\n\t\tif (pointer) {\r\n\t\t\tpointer.reset(true);\r\n\t\t}\r\n\r\n\t\t// redraw if canvas\r\n\t\trenderer.draw();\r\n\r\n\t\t// fire the event\r\n\t\tfireEvent(chart, 'redraw'); // jQuery breaks this when calling it from addEvent. Overwrites chart.redraw\r\n\t\t\r\n\t\tif (isHiddenChart) {\r\n\t\t\tchart.cloneRenderTo(true);\r\n\t\t}\r\n\t\t\r\n\t\t// Fire callbacks that are put on hold until after the redraw\r\n\t\teach(afterRedraw, function (callback) {\r\n\t\t\tcallback.call();\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Get an axis, series or point object by id.\r\n\t * @param id {String} The id as given in the configuration options\r\n\t */\r\n\tget: function (id) {\r\n\t\tvar chart = this,\r\n\t\t\taxes = chart.axes,\r\n\t\t\tseries = chart.series;\r\n\r\n\t\tvar i,\r\n\t\t\tj,\r\n\t\t\tpoints;\r\n\r\n\t\t// search axes\r\n\t\tfor (i = 0; i < axes.length; i++) {\r\n\t\t\tif (axes[i].options.id === id) {\r\n\t\t\t\treturn axes[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// search series\r\n\t\tfor (i = 0; i < series.length; i++) {\r\n\t\t\tif (series[i].options.id === id) {\r\n\t\t\t\treturn series[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// search points\r\n\t\tfor (i = 0; i < series.length; i++) {\r\n\t\t\tpoints = series[i].points || [];\r\n\t\t\tfor (j = 0; j < points.length; j++) {\r\n\t\t\t\tif (points[j].id === id) {\r\n\t\t\t\t\treturn points[j];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t * Create the Axis instances based on the config options\r\n\t */\r\n\tgetAxes: function () {\r\n\t\tvar chart = this,\r\n\t\t\toptions = this.options,\r\n\t\t\txAxisOptions = options.xAxis = splat(options.xAxis || {}),\r\n\t\t\tyAxisOptions = options.yAxis = splat(options.yAxis || {}),\r\n\t\t\toptionsArray,\r\n\t\t\taxis;\r\n\r\n\t\t// make sure the options are arrays and add some members\r\n\t\teach(xAxisOptions, function (axis, i) {\r\n\t\t\taxis.index = i;\r\n\t\t\taxis.isX = true;\r\n\t\t});\r\n\r\n\t\teach(yAxisOptions, function (axis, i) {\r\n\t\t\taxis.index = i;\r\n\t\t});\r\n\r\n\t\t// concatenate all axis options into one array\r\n\t\toptionsArray = xAxisOptions.concat(yAxisOptions);\r\n\r\n\t\teach(optionsArray, function (axisOptions) {\r\n\t\t\taxis = new Axis(chart, axisOptions);\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Get the currently selected points from all series\r\n\t */\r\n\tgetSelectedPoints: function () {\r\n\t\tvar points = [];\r\n\t\teach(this.series, function (serie) {\r\n\t\t\tpoints = points.concat(grep(serie.points || [], function (point) {\r\n\t\t\t\treturn point.selected;\r\n\t\t\t}));\r\n\t\t});\r\n\t\treturn points;\r\n\t},\r\n\r\n\t/**\r\n\t * Get the currently selected series\r\n\t */\r\n\tgetSelectedSeries: function () {\r\n\t\treturn grep(this.series, function (serie) {\r\n\t\t\treturn serie.selected;\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Generate stacks for each series and calculate stacks total values\r\n\t */\r\n\tgetStacks: function () {\r\n\t\tvar chart = this;\r\n\r\n\t\t// reset stacks for each yAxis\r\n\t\teach(chart.yAxis, function (axis) {\r\n\t\t\tif (axis.stacks && axis.hasVisibleSeries) {\r\n\t\t\t\taxis.oldStacks = axis.stacks;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\teach(chart.series, function (series) {\r\n\t\t\tif (series.options.stacking && (series.visible === true || chart.options.chart.ignoreHiddenSeries === false)) {\r\n\t\t\t\tseries.stackKey = series.type + pick(series.options.stack, '');\r\n\t\t\t}\r\n\t\t});\r\n\t},\t\r\n\r\n\t/**\r\n\t * Show the title and subtitle of the chart\r\n\t *\r\n\t * @param titleOptions {Object} New title options\r\n\t * @param subtitleOptions {Object} New subtitle options\r\n\t *\r\n\t */\r\n\tsetTitle: function (titleOptions, subtitleOptions, redraw) {\r\n\t\tvar chart = this,\r\n\t\t\toptions = chart.options,\r\n\t\t\tchartTitleOptions,\r\n\t\t\tchartSubtitleOptions;\r\n\r\n\t\tchartTitleOptions = options.title = merge(options.title, titleOptions);\r\n\t\tchartSubtitleOptions = options.subtitle = merge(options.subtitle, subtitleOptions);\r\n\r\n\t\t// add title and subtitle\r\n\t\teach([\r\n\t\t\t['title', titleOptions, chartTitleOptions],\r\n\t\t\t['subtitle', subtitleOptions, chartSubtitleOptions]\r\n\t\t], function (arr) {\r\n\t\t\tvar name = arr[0],\r\n\t\t\t\ttitle = chart[name],\r\n\t\t\t\ttitleOptions = arr[1],\r\n\t\t\t\tchartTitleOptions = arr[2];\r\n\r\n\t\t\tif (title && titleOptions) {\r\n\t\t\t\tchart[name] = title = title.destroy(); // remove old\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (chartTitleOptions && chartTitleOptions.text && !title) {\r\n\t\t\t\tchart[name] = chart.renderer.text(\r\n\t\t\t\t\tchartTitleOptions.text,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tchartTitleOptions.useHTML\r\n\t\t\t\t)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\talign: chartTitleOptions.align,\r\n\t\t\t\t\t'class': PREFIX + name,\r\n\t\t\t\t\tzIndex: chartTitleOptions.zIndex || 4\r\n\t\t\t\t})\r\n\t\t\t\t.css(chartTitleOptions.style)\r\n\t\t\t\t.add();\r\n\t\t\t}\t\r\n\t\t});\r\n\t\tchart.layOutTitles(redraw);\r\n\t},\r\n\r\n\t/**\r\n\t * Lay out the chart titles and cache the full offset height for use in getMargins\r\n\t */\r\n\tlayOutTitles: function (redraw) {\r\n\t\tvar titleOffset = 0,\r\n\t\t\ttitle = this.title,\r\n\t\t\tsubtitle = this.subtitle,\r\n\t\t\toptions = this.options,\r\n\t\t\ttitleOptions = options.title,\r\n\t\t\tsubtitleOptions = options.subtitle,\r\n\t\t\trequiresDirtyBox,\r\n\t\t\trenderer = this.renderer,\r\n\t\t\tautoWidth = this.spacingBox.width - 44; // 44 makes room for default context button\r\n\r\n\t\tif (title) {\r\n\t\t\ttitle\r\n\t\t\t\t.css({ width: (titleOptions.width || autoWidth) + PX })\r\n\t\t\t\t.align(extend({ \r\n\t\t\t\t\ty: renderer.fontMetrics(titleOptions.style.fontSize, title).b - 3\r\n\t\t\t\t}, titleOptions), false, 'spacingBox');\r\n\t\t\t\r\n\t\t\tif (!titleOptions.floating && !titleOptions.verticalAlign) {\r\n\t\t\t\ttitleOffset = title.getBBox().height;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (subtitle) {\r\n\t\t\tsubtitle\r\n\t\t\t\t.css({ width: (subtitleOptions.width || autoWidth) + PX })\r\n\t\t\t\t.align(extend({ \r\n\t\t\t\t\ty: titleOffset + (titleOptions.margin - 13) + renderer.fontMetrics(titleOptions.style.fontSize, subtitle).b \r\n\t\t\t\t}, subtitleOptions), false, 'spacingBox');\r\n\t\t\t\r\n\t\t\tif (!subtitleOptions.floating && !subtitleOptions.verticalAlign) {\r\n\t\t\t\ttitleOffset = mathCeil(titleOffset + subtitle.getBBox().height);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trequiresDirtyBox = this.titleOffset !== titleOffset;\t\t\t\t\r\n\t\tthis.titleOffset = titleOffset; // used in getMargins\r\n\r\n\t\tif (!this.isDirtyBox && requiresDirtyBox) {\r\n\t\t\tthis.isDirtyBox = requiresDirtyBox;\r\n\t\t\t// Redraw if necessary (#2719, #2744)\t\t\r\n\t\t\tif (this.hasRendered && pick(redraw, true) && this.isDirtyBox) {\r\n\t\t\t\tthis.redraw();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Get chart width and height according to options and container size\r\n\t */\r\n\tgetChartSize: function () {\r\n\t\tvar chart = this,\r\n\t\t\toptionsChart = chart.options.chart,\r\n\t\t\twidthOption = optionsChart.width,\r\n\t\t\theightOption = optionsChart.height,\r\n\t\t\trenderTo = chart.renderToClone || chart.renderTo;\r\n\r\n\t\t// get inner width and height from jQuery (#824)\r\n\t\tif (!defined(widthOption)) {\r\n\t\t\tchart.containerWidth = adapterRun(renderTo, 'width');\r\n\t\t}\r\n\t\tif (!defined(heightOption)) {\r\n\t\t\tchart.containerHeight = adapterRun(renderTo, 'height');\r\n\t\t}\r\n\t\t\r\n\t\tchart.chartWidth = mathMax(0, widthOption || chart.containerWidth || 600); // #1393, 1460\r\n\t\tchart.chartHeight = mathMax(0, pick(heightOption,\r\n\t\t\t// the offsetHeight of an empty container is 0 in standard browsers, but 19 in IE7:\r\n\t\t\tchart.containerHeight > 19 ? chart.containerHeight : 400));\r\n\t},\r\n\r\n\t/**\r\n\t * Create a clone of the chart's renderTo div and place it outside the viewport to allow\r\n\t * size computation on chart.render and chart.redraw\r\n\t */\r\n\tcloneRenderTo: function (revert) {\r\n\t\tvar clone = this.renderToClone,\r\n\t\t\tcontainer = this.container;\r\n\t\t\r\n\t\t// Destroy the clone and bring the container back to the real renderTo div\r\n\t\tif (revert) {\r\n\t\t\tif (clone) {\r\n\t\t\t\tthis.renderTo.appendChild(container);\r\n\t\t\t\tdiscardElement(clone);\r\n\t\t\t\tdelete this.renderToClone;\r\n\t\t\t}\r\n\t\t\r\n\t\t// Set up the clone\r\n\t\t} else {\r\n\t\t\tif (container && container.parentNode === this.renderTo) {\r\n\t\t\t\tthis.renderTo.removeChild(container); // do not clone this\r\n\t\t\t}\r\n\t\t\tthis.renderToClone = clone = this.renderTo.cloneNode(0);\r\n\t\t\tcss(clone, {\r\n\t\t\t\tposition: ABSOLUTE,\r\n\t\t\t\ttop: '-9999px',\r\n\t\t\t\tdisplay: 'block' // #833\r\n\t\t\t});\r\n\t\t\tif (clone.style.setProperty) { // #2631\r\n\t\t\t\tclone.style.setProperty('display', 'block', 'important');\r\n\t\t\t}\r\n\t\t\tdoc.body.appendChild(clone);\r\n\t\t\tif (container) {\r\n\t\t\t\tclone.appendChild(container);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Get the containing element, determine the size and create the inner container\r\n\t * div to hold the chart\r\n\t */\r\n\tgetContainer: function () {\r\n\t\tvar chart = this,\r\n\t\t\tcontainer,\r\n\t\t\toptionsChart = chart.options.chart,\r\n\t\t\tchartWidth,\r\n\t\t\tchartHeight,\r\n\t\t\trenderTo,\r\n\t\t\tindexAttrName = 'data-highcharts-chart',\r\n\t\t\toldChartIndex,\r\n\t\t\tcontainerId;\r\n\r\n\t\tchart.renderTo = renderTo = optionsChart.renderTo;\r\n\t\tcontainerId = PREFIX + idCounter++;\r\n\r\n\t\tif (isString(renderTo)) {\r\n\t\t\tchart.renderTo = renderTo = doc.getElementById(renderTo);\r\n\t\t}\r\n\t\t\r\n\t\t// Display an error if the renderTo is wrong\r\n\t\tif (!renderTo) {\r\n\t\t\terror(13, true);\r\n\t\t}\r\n\t\t\r\n\t\t// If the container already holds a chart, destroy it. The check for hasRendered is there\r\n\t\t// because web pages that are saved to disk from the browser, will preserve the data-highcharts-chart\r\n\t\t// attribute and the SVG contents, but not an interactive chart. So in this case,\r\n\t\t// charts[oldChartIndex] will point to the wrong chart if any (#2609).\r\n\t\toldChartIndex = pInt(attr(renderTo, indexAttrName));\r\n\t\tif (!isNaN(oldChartIndex) && charts[oldChartIndex] && charts[oldChartIndex].hasRendered) {\r\n\t\t\tcharts[oldChartIndex].destroy();\r\n\t\t}\t\t\r\n\t\t\r\n\t\t// Make a reference to the chart from the div\r\n\t\tattr(renderTo, indexAttrName, chart.index);\r\n\r\n\t\t// remove previous chart\r\n\t\trenderTo.innerHTML = '';\r\n\r\n\t\t// If the container doesn't have an offsetWidth, it has or is a child of a node\r\n\t\t// that has display:none. We need to temporarily move it out to a visible\r\n\t\t// state to determine the size, else the legend and tooltips won't render\r\n\t\t// properly. The allowClone option is used in sparklines as a micro optimization,\r\n\t\t// saving about 1-2 ms each chart.\r\n\t\tif (!optionsChart.skipClone && !renderTo.offsetWidth) {\r\n\t\t\tchart.cloneRenderTo();\r\n\t\t}\r\n\r\n\t\t// get the width and height\r\n\t\tchart.getChartSize();\r\n\t\tchartWidth = chart.chartWidth;\r\n\t\tchartHeight = chart.chartHeight;\r\n\r\n\t\t// create the inner container\r\n\t\tchart.container = container = createElement(DIV, {\r\n\t\t\t\tclassName: PREFIX + 'container' +\r\n\t\t\t\t\t(optionsChart.className ? ' ' + optionsChart.className : ''),\r\n\t\t\t\tid: containerId\r\n\t\t\t}, extend({\r\n\t\t\t\tposition: RELATIVE,\r\n\t\t\t\toverflow: HIDDEN, // needed for context menu (avoid scrollbars) and\r\n\t\t\t\t\t// content overflow in IE\r\n\t\t\t\twidth: chartWidth + PX,\r\n\t\t\t\theight: chartHeight + PX,\r\n\t\t\t\ttextAlign: 'left',\r\n\t\t\t\tlineHeight: 'normal', // #427\r\n\t\t\t\tzIndex: 0, // #1072\r\n\t\t\t\t'-webkit-tap-highlight-color': 'rgba(0,0,0,0)'\r\n\t\t\t}, optionsChart.style),\r\n\t\t\tchart.renderToClone || renderTo\r\n\t\t);\r\n\r\n\t\t// cache the cursor (#1650)\r\n\t\tchart._cursor = container.style.cursor;\r\n\r\n\t\t// Initialize the renderer\r\n\t\tchart.renderer =\r\n\t\t\toptionsChart.forExport ? // force SVG, used for SVG export\r\n\t\t\t\tnew SVGRenderer(container, chartWidth, chartHeight, optionsChart.style, true) :\r\n\t\t\t\tnew Renderer(container, chartWidth, chartHeight, optionsChart.style);\r\n\r\n\t\tif (useCanVG) {\r\n\t\t\t// If we need canvg library, extend and configure the renderer\r\n\t\t\t// to get the tracker for translating mouse events\r\n\t\t\tchart.renderer.create(chart, container, chartWidth, chartHeight);\r\n\t\t}\r\n\t\t// Add a reference to the charts index\r\n\t\tchart.renderer.chartIndex = chart.index;\r\n\t},\r\n\r\n\t/**\r\n\t * Calculate margins by rendering axis labels in a preliminary position. Title,\r\n\t * subtitle and legend have already been rendered at this stage, but will be\r\n\t * moved into their final positions\r\n\t */\r\n\tgetMargins: function (skipAxes) {\r\n\t\tvar chart = this,\r\n\t\t\tspacing = chart.spacing,\r\n\t\t\tmargin = chart.margin,\r\n\t\t\ttitleOffset = chart.titleOffset;\r\n\r\n\t\tchart.resetMargins();\r\n\r\n\t\t// Adjust for title and subtitle\r\n\t\tif (titleOffset && !defined(margin[0])) {\r\n\t\t\tchart.plotTop = mathMax(chart.plotTop, titleOffset + chart.options.title.margin + spacing[0]);\r\n\t\t}\r\n\t\t\r\n\t\t// Adjust for legend\r\n\t\tchart.legend.adjustMargins(margin, spacing);\r\n\r\n\t\t// adjust for scroller\r\n\t\tif (chart.extraBottomMargin) {\r\n\t\t\tchart.marginBottom += chart.extraBottomMargin;\r\n\t\t}\r\n\t\tif (chart.extraTopMargin) {\r\n\t\t\tchart.plotTop += chart.extraTopMargin;\r\n\t\t}\r\n\t\tif (!skipAxes) {\r\n\t\t\tthis.getAxisMargins();\r\n\t\t}\r\n\t},\r\n\r\n\tgetAxisMargins: function () {\r\n\r\n\t\tvar chart = this,\r\n\t\t\taxisOffset = chart.axisOffset = [0, 0, 0, 0], // top, right, bottom, left\r\n\t\t\tmargin = chart.margin;\r\n\t\t\r\n\t\t// pre-render axes to get labels offset width\r\n\t\tif (chart.hasCartesianSeries) {\r\n\t\t\teach(chart.axes, function (axis) {\r\n\t\t\t\taxis.getOffset();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Add the axis offsets\r\n\t\teach(marginNames, function (m, side) {\r\n\t\t\tif (!defined(margin[side])) {\r\n\t\t\t\tchart[m] += axisOffset[side];\r\n\t\t\t}\t\t\r\n\t\t});\r\n\r\n\t\tchart.setChartSize();\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Resize the chart to its container if size is not explicitly set\r\n\t */\r\n\treflow: function (e) {\r\n\t\tvar chart = this,\r\n\t\t\toptionsChart = chart.options.chart,\r\n\t\t\trenderTo = chart.renderTo,\r\n\t\t\twidth = optionsChart.width || adapterRun(renderTo, 'width'),\r\n\t\t\theight = optionsChart.height || adapterRun(renderTo, 'height'),\r\n\t\t\ttarget = e ? e.target : win, // #805 - MooTools doesn't supply e\r\n\t\t\tdoReflow = function () {\r\n\t\t\t\tif (chart.container) { // It may have been destroyed in the meantime (#1257)\r\n\t\t\t\t\tchart.setSize(width, height, false);\r\n\t\t\t\t\tchart.hasUserSize = null;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t// Width and height checks for display:none. Target is doc in IE8 and Opera,\r\n\t\t// win in Firefox, Chrome and IE9.\r\n\t\tif (!chart.hasUserSize && width && height && (target === win || target === doc)) {\r\n\t\t\tif (width !== chart.containerWidth || height !== chart.containerHeight) {\r\n\t\t\t\tclearTimeout(chart.reflowTimeout);\r\n\t\t\t\tif (e) { // Called from window.resize\r\n\t\t\t\t\tchart.reflowTimeout = setTimeout(doReflow, 100);\r\n\t\t\t\t} else { // Called directly (#2224)\r\n\t\t\t\t\tdoReflow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tchart.containerWidth = width;\r\n\t\t\tchart.containerHeight = height;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Add the event handlers necessary for auto resizing\r\n\t */\r\n\tinitReflow: function () {\r\n\t\tvar chart = this,\r\n\t\t\treflow = function (e) {\r\n\t\t\t\tchart.reflow(e);\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\r\n\t\taddEvent(win, 'resize', reflow);\r\n\t\taddEvent(chart, 'destroy', function () {\r\n\t\t\tremoveEvent(win, 'resize', reflow);\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Resize the chart to a given width and height\r\n\t * @param {Number} width\r\n\t * @param {Number} height\r\n\t * @param {Object|Boolean} animation\r\n\t */\r\n\tsetSize: function (width, height, animation) {\r\n\t\tvar chart = this,\r\n\t\t\tchartWidth,\r\n\t\t\tchartHeight,\r\n\t\t\tfireEndResize;\r\n\r\n\t\t// Handle the isResizing counter\r\n\t\tchart.isResizing += 1;\r\n\t\tfireEndResize = function () {\r\n\t\t\tif (chart) {\r\n\t\t\t\tfireEvent(chart, 'endResize', null, function () {\r\n\t\t\t\t\tchart.isResizing -= 1;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// set the animation for the current process\r\n\t\tsetAnimation(animation, chart);\r\n\r\n\t\tchart.oldChartHeight = chart.chartHeight;\r\n\t\tchart.oldChartWidth = chart.chartWidth;\r\n\t\tif (defined(width)) {\r\n\t\t\tchart.chartWidth = chartWidth = mathMax(0, mathRound(width));\r\n\t\t\tchart.hasUserSize = !!chartWidth;\r\n\t\t}\r\n\t\tif (defined(height)) {\r\n\t\t\tchart.chartHeight = chartHeight = mathMax(0, mathRound(height));\r\n\t\t}\r\n\r\n\t\t// Resize the container with the global animation applied if enabled (#2503)\r\n\t\t(globalAnimation ? animate : css)(chart.container, {\r\n\t\t\twidth: chartWidth + PX,\r\n\t\t\theight: chartHeight + PX\r\n\t\t}, globalAnimation);\r\n\r\n\t\tchart.setChartSize(true);\r\n\t\tchart.renderer.setSize(chartWidth, chartHeight, animation);\r\n\r\n\t\t// handle axes\r\n\t\tchart.maxTicks = null;\r\n\t\teach(chart.axes, function (axis) {\r\n\t\t\taxis.isDirty = true;\r\n\t\t\taxis.setScale();\r\n\t\t});\r\n\r\n\t\t// make sure non-cartesian series are also handled\r\n\t\teach(chart.series, function (serie) {\r\n\t\t\tserie.isDirty = true;\r\n\t\t});\r\n\r\n\t\tchart.isDirtyLegend = true; // force legend redraw\r\n\t\tchart.isDirtyBox = true; // force redraw of plot and chart border\r\n\r\n\t\tchart.layOutTitles(); // #2857\r\n\t\tchart.getMargins();\r\n\r\n\t\tchart.redraw(animation);\r\n\r\n\r\n\t\tchart.oldChartHeight = null;\r\n\t\tfireEvent(chart, 'resize');\r\n\r\n\t\t// fire endResize and set isResizing back\r\n\t\t// If animation is disabled, fire without delay\r\n\t\tif (globalAnimation === false) {\r\n\t\t\tfireEndResize();\r\n\t\t} else { // else set a timeout with the animation duration\r\n\t\t\tsetTimeout(fireEndResize, (globalAnimation && globalAnimation.duration) || 500);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set the public chart properties. This is done before and after the pre-render\r\n\t * to determine margin sizes\r\n\t */\r\n\tsetChartSize: function (skipAxes) {\r\n\t\tvar chart = this,\r\n\t\t\tinverted = chart.inverted,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tchartWidth = chart.chartWidth,\r\n\t\t\tchartHeight = chart.chartHeight,\r\n\t\t\toptionsChart = chart.options.chart,\r\n\t\t\tspacing = chart.spacing,\r\n\t\t\tclipOffset = chart.clipOffset,\r\n\t\t\tclipX,\r\n\t\t\tclipY,\r\n\t\t\tplotLeft,\r\n\t\t\tplotTop,\r\n\t\t\tplotWidth,\r\n\t\t\tplotHeight,\r\n\t\t\tplotBorderWidth;\r\n\r\n\t\tchart.plotLeft = plotLeft = mathRound(chart.plotLeft);\r\n\t\tchart.plotTop = plotTop = mathRound(chart.plotTop);\r\n\t\tchart.plotWidth = plotWidth = mathMax(0, mathRound(chartWidth - plotLeft - chart.marginRight));\r\n\t\tchart.plotHeight = plotHeight = mathMax(0, mathRound(chartHeight - plotTop - chart.marginBottom));\r\n\r\n\t\tchart.plotSizeX = inverted ? plotHeight : plotWidth;\r\n\t\tchart.plotSizeY = inverted ? plotWidth : plotHeight;\r\n\t\t\r\n\t\tchart.plotBorderWidth = optionsChart.plotBorderWidth || 0;\r\n\r\n\t\t// Set boxes used for alignment\r\n\t\tchart.spacingBox = renderer.spacingBox = {\r\n\t\t\tx: spacing[3],\r\n\t\t\ty: spacing[0],\r\n\t\t\twidth: chartWidth - spacing[3] - spacing[1],\r\n\t\t\theight: chartHeight - spacing[0] - spacing[2]\r\n\t\t};\r\n\t\tchart.plotBox = renderer.plotBox = {\r\n\t\t\tx: plotLeft,\r\n\t\t\ty: plotTop,\r\n\t\t\twidth: plotWidth,\r\n\t\t\theight: plotHeight\r\n\t\t};\r\n\r\n\t\tplotBorderWidth = 2 * mathFloor(chart.plotBorderWidth / 2);\r\n\t\tclipX = mathCeil(mathMax(plotBorderWidth, clipOffset[3]) / 2);\r\n\t\tclipY = mathCeil(mathMax(plotBorderWidth, clipOffset[0]) / 2);\r\n\t\tchart.clipBox = {\r\n\t\t\tx: clipX, \r\n\t\t\ty: clipY, \r\n\t\t\twidth: mathFloor(chart.plotSizeX - mathMax(plotBorderWidth, clipOffset[1]) / 2 - clipX), \r\n\t\t\theight: mathMax(0, mathFloor(chart.plotSizeY - mathMax(plotBorderWidth, clipOffset[2]) / 2 - clipY))\r\n\t\t};\r\n\r\n\t\tif (!skipAxes) {\r\n\t\t\teach(chart.axes, function (axis) {\r\n\t\t\t\taxis.setAxisSize();\r\n\t\t\t\taxis.setAxisTranslation();\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Initial margins before auto size margins are applied\r\n\t */\r\n\tresetMargins: function () {\r\n\t\tvar chart = this;\r\n\r\n\t\teach(marginNames, function (m, side) {\r\n\t\t\tchart[m] = pick(chart.margin[side], chart.spacing[side]);\r\n\t\t});\r\n\t\tchart.axisOffset = [0, 0, 0, 0]; // top, right, bottom, left\r\n\t\tchart.clipOffset = [0, 0, 0, 0];\r\n\t},\r\n\r\n\t/**\r\n\t * Draw the borders and backgrounds for chart and plot area\r\n\t */\r\n\tdrawChartBox: function () {\r\n\t\tvar chart = this,\r\n\t\t\toptionsChart = chart.options.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tchartWidth = chart.chartWidth,\r\n\t\t\tchartHeight = chart.chartHeight,\r\n\t\t\tchartBackground = chart.chartBackground,\r\n\t\t\tplotBackground = chart.plotBackground,\r\n\t\t\tplotBorder = chart.plotBorder,\r\n\t\t\tplotBGImage = chart.plotBGImage,\r\n\t\t\tchartBorderWidth = optionsChart.borderWidth || 0,\r\n\t\t\tchartBackgroundColor = optionsChart.backgroundColor,\r\n\t\t\tplotBackgroundColor = optionsChart.plotBackgroundColor,\r\n\t\t\tplotBackgroundImage = optionsChart.plotBackgroundImage,\r\n\t\t\tplotBorderWidth = optionsChart.plotBorderWidth || 0,\r\n\t\t\tmgn,\r\n\t\t\tbgAttr,\r\n\t\t\tplotLeft = chart.plotLeft,\r\n\t\t\tplotTop = chart.plotTop,\r\n\t\t\tplotWidth = chart.plotWidth,\r\n\t\t\tplotHeight = chart.plotHeight,\r\n\t\t\tplotBox = chart.plotBox,\r\n\t\t\tclipRect = chart.clipRect,\r\n\t\t\tclipBox = chart.clipBox;\r\n\r\n\t\t// Chart area\r\n\t\tmgn = chartBorderWidth + (optionsChart.shadow ? 8 : 0);\r\n\r\n\t\tif (chartBorderWidth || chartBackgroundColor) {\r\n\t\t\tif (!chartBackground) {\r\n\t\t\t\t\r\n\t\t\t\tbgAttr = {\r\n\t\t\t\t\tfill: chartBackgroundColor || NONE\r\n\t\t\t\t};\r\n\t\t\t\tif (chartBorderWidth) { // #980\r\n\t\t\t\t\tbgAttr.stroke = optionsChart.borderColor;\r\n\t\t\t\t\tbgAttr['stroke-width'] = chartBorderWidth;\r\n\t\t\t\t}\r\n\t\t\t\tchart.chartBackground = renderer.rect(mgn / 2, mgn / 2, chartWidth - mgn, chartHeight - mgn,\r\n\t\t\t\t\t\toptionsChart.borderRadius, chartBorderWidth)\r\n\t\t\t\t\t.attr(bgAttr)\r\n\t\t\t\t\t.addClass(PREFIX + 'background')\r\n\t\t\t\t\t.add()\r\n\t\t\t\t\t.shadow(optionsChart.shadow);\r\n\r\n\t\t\t} else { // resize\r\n\t\t\t\tchartBackground.animate(\r\n\t\t\t\t\tchartBackground.crisp({ width: chartWidth - mgn, height: chartHeight - mgn })\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// Plot background\r\n\t\tif (plotBackgroundColor) {\r\n\t\t\tif (!plotBackground) {\r\n\t\t\t\tchart.plotBackground = renderer.rect(plotLeft, plotTop, plotWidth, plotHeight, 0)\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\tfill: plotBackgroundColor\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add()\r\n\t\t\t\t\t.shadow(optionsChart.plotShadow);\r\n\t\t\t} else {\r\n\t\t\t\tplotBackground.animate(plotBox);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (plotBackgroundImage) {\r\n\t\t\tif (!plotBGImage) {\r\n\t\t\t\tchart.plotBGImage = renderer.image(plotBackgroundImage, plotLeft, plotTop, plotWidth, plotHeight)\r\n\t\t\t\t\t.add();\r\n\t\t\t} else {\r\n\t\t\t\tplotBGImage.animate(plotBox);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// Plot clip\r\n\t\tif (!clipRect) {\r\n\t\t\tchart.clipRect = renderer.clipRect(clipBox);\r\n\t\t} else {\r\n\t\t\tclipRect.animate({\r\n\t\t\t\twidth: clipBox.width,\r\n\t\t\t\theight: clipBox.height\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Plot area border\r\n\t\tif (plotBorderWidth) {\r\n\t\t\tif (!plotBorder) {\r\n\t\t\t\tchart.plotBorder = renderer.rect(plotLeft, plotTop, plotWidth, plotHeight, 0, -plotBorderWidth)\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\tstroke: optionsChart.plotBorderColor,\r\n\t\t\t\t\t\t'stroke-width': plotBorderWidth,\r\n\t\t\t\t\t\tfill: NONE,\r\n\t\t\t\t\t\tzIndex: 1\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add();\r\n\t\t\t} else {\r\n\t\t\t\tplotBorder.animate(\r\n\t\t\t\t\tplotBorder.crisp({ x: plotLeft, y: plotTop, width: plotWidth, height: plotHeight, strokeWidth: -plotBorderWidth }) //#3282 plotBorder should be negative\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// reset\r\n\t\tchart.isDirtyBox = false;\r\n\t},\r\n\r\n\t/**\r\n\t * Detect whether a certain chart property is needed based on inspecting its options\r\n\t * and series. This mainly applies to the chart.invert property, and in extensions to \r\n\t * the chart.angular and chart.polar properties.\r\n\t */\r\n\tpropFromSeries: function () {\r\n\t\tvar chart = this,\r\n\t\t\toptionsChart = chart.options.chart,\r\n\t\t\tklass,\r\n\t\t\tseriesOptions = chart.options.series,\r\n\t\t\ti,\r\n\t\t\tvalue;\r\n\t\t\t\r\n\t\t\t\r\n\t\teach(['inverted', 'angular', 'polar'], function (key) {\r\n\t\t\t\r\n\t\t\t// The default series type's class\r\n\t\t\tklass = seriesTypes[optionsChart.type || optionsChart.defaultSeriesType];\r\n\t\t\t\r\n\t\t\t// Get the value from available chart-wide properties\r\n\t\t\tvalue = (\r\n\t\t\t\tchart[key] || // 1. it is set before\r\n\t\t\t\toptionsChart[key] || // 2. it is set in the options\r\n\t\t\t\t(klass && klass.prototype[key]) // 3. it's default series class requires it\r\n\t\t\t);\r\n\t\r\n\t\t\t// 4. Check if any the chart's series require it\r\n\t\t\ti = seriesOptions && seriesOptions.length;\r\n\t\t\twhile (!value && i--) {\r\n\t\t\t\tklass = seriesTypes[seriesOptions[i].type];\r\n\t\t\t\tif (klass && klass.prototype[key]) {\r\n\t\t\t\t\tvalue = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t// Set the chart property\r\n\t\t\tchart[key] = value;\t\r\n\t\t});\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * Link two or more series together. This is done initially from Chart.render,\r\n\t * and after Chart.addSeries and Series.remove.\r\n\t */\r\n\tlinkSeries: function () {\r\n\t\tvar chart = this,\r\n\t\t\tchartSeries = chart.series;\r\n\r\n\t\t// Reset links\r\n\t\teach(chartSeries, function (series) {\r\n\t\t\tseries.linkedSeries.length = 0;\r\n\t\t});\r\n\r\n\t\t// Apply new links\r\n\t\teach(chartSeries, function (series) {\r\n\t\t\tvar linkedTo = series.options.linkedTo;\r\n\t\t\tif (isString(linkedTo)) {\r\n\t\t\t\tif (linkedTo === ':previous') {\r\n\t\t\t\t\tlinkedTo = chart.series[series.index - 1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlinkedTo = chart.get(linkedTo);\r\n\t\t\t\t}\r\n\t\t\t\tif (linkedTo) {\r\n\t\t\t\t\tlinkedTo.linkedSeries.push(series);\r\n\t\t\t\t\tseries.linkedParent = linkedTo;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Render series for the chart\r\n\t */\r\n\trenderSeries: function () {\r\n\t\teach(this.series, function (serie) {\r\n\t\t\tserie.translate();\r\n\t\t\tserie.render();\r\n\t\t});\r\n\t},\r\n\t\t\r\n\t/**\r\n\t * Render labels for the chart\r\n\t */\r\n\trenderLabels: function () {\r\n\t\tvar chart = this,\r\n\t\t\tlabels = chart.options.labels;\r\n\t\tif (labels.items) {\r\n\t\t\teach(labels.items, function (label) {\r\n\t\t\t\tvar style = extend(labels.style, label.style),\r\n\t\t\t\t\tx = pInt(style.left) + chart.plotLeft,\r\n\t\t\t\t\ty = pInt(style.top) + chart.plotTop + 12;\r\n\r\n\t\t\t\t// delete to prevent rewriting in IE\r\n\t\t\t\tdelete style.left;\r\n\t\t\t\tdelete style.top;\r\n\r\n\t\t\t\tchart.renderer.text(\r\n\t\t\t\t\tlabel.html,\r\n\t\t\t\t\tx,\r\n\t\t\t\t\ty\r\n\t\t\t\t)\r\n\t\t\t\t.attr({ zIndex: 2 })\r\n\t\t\t\t.css(style)\r\n\t\t\t\t.add();\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Render all graphics for the chart\r\n\t */\r\n\trender: function () {\r\n\t\tvar chart = this,\r\n\t\t\taxes = chart.axes,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\toptions = chart.options,\r\n\t\t\ttempWidth,\r\n\t\t\ttempHeight,\r\n\t\t\tredoHorizontal,\r\n\t\t\tredoVertical;\r\n\r\n\t\t// Title\r\n\t\tchart.setTitle();\r\n\r\n\r\n\t\t// Legend\r\n\t\tchart.legend = new Legend(chart, options.legend);\r\n\r\n\t\tchart.getStacks(); // render stacks\r\n\r\n\t\t// Get chart margins\r\n\t\tchart.getMargins(true);\r\n\t\tchart.setChartSize();\r\n\r\n\t\t// Record preliminary dimensions for later comparison\r\n\t\ttempWidth = chart.plotWidth;\r\n\t\ttempHeight = chart.plotHeight = chart.plotHeight - 13; // 13 is the most common height of X axis labels\r\n\r\n\t\t// Get margins by pre-rendering axes\r\n\t\teach(axes, function (axis) {\r\n\t\t\taxis.setScale();\r\n\t\t});\r\n\t\tchart.getAxisMargins();\r\n\r\n\t\t// If the plot area size has changed significantly, calculate tick positions again\r\n\t\tredoHorizontal = tempWidth / chart.plotWidth > 1.2;\r\n\t\tredoVertical = tempHeight / chart.plotHeight > 1.1;\r\n\r\n\t\tif (redoHorizontal || redoVertical) {\r\n\r\n\t\t\tchart.maxTicks = null; // reset for second pass\r\n\t\t\teach(axes, function (axis) {\r\n\t\t\t\tif ((axis.horiz && redoHorizontal) || (!axis.horiz && redoVertical)) {\r\n\t\t\t\t\taxis.setTickInterval(true); // update to reflect the new margins\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tchart.getMargins(); // second pass to check for new labels\r\n\t\t}\r\n\r\n\t\t// Draw the borders and backgrounds\r\n\t\tchart.drawChartBox();\t\t\r\n\r\n\r\n\t\t// Axes\r\n\t\tif (chart.hasCartesianSeries) {\r\n\t\t\teach(axes, function (axis) {\r\n\t\t\t\taxis.render();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// The series\r\n\t\tif (!chart.seriesGroup) {\r\n\t\t\tchart.seriesGroup = renderer.g('series-group')\r\n\t\t\t\t.attr({ zIndex: 3 })\r\n\t\t\t\t.add();\r\n\t\t}\r\n\t\tchart.renderSeries();\r\n\r\n\t\t// Labels\r\n\t\tchart.renderLabels();\r\n\r\n\t\t// Credits\r\n\t\tchart.showCredits(options.credits);\r\n\r\n\t\t// Set flag\r\n\t\tchart.hasRendered = true;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Show chart credits based on config options\r\n\t */\r\n\tshowCredits: function (credits) {\r\n\t\tif (credits.enabled && !this.credits) {\r\n\t\t\tthis.credits = this.renderer.text(\r\n\t\t\t\tcredits.text,\r\n\t\t\t\t0,\r\n\t\t\t\t0\r\n\t\t\t)\r\n\t\t\t.on('click', function () {\r\n\t\t\t\tif (credits.href) {\r\n\t\t\t\t\tlocation.href = credits.href;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.attr({\r\n\t\t\t\talign: credits.position.align,\r\n\t\t\t\tzIndex: 8\r\n\t\t\t})\r\n\t\t\t.css(credits.style)\r\n\t\t\t.add()\r\n\t\t\t.align(credits.position);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Clean up memory usage\r\n\t */\r\n\tdestroy: function () {\r\n\t\tvar chart = this,\r\n\t\t\taxes = chart.axes,\r\n\t\t\tseries = chart.series,\r\n\t\t\tcontainer = chart.container,\r\n\t\t\ti,\r\n\t\t\tparentNode = container && container.parentNode;\r\n\t\t\t\r\n\t\t// fire the chart.destoy event\r\n\t\tfireEvent(chart, 'destroy');\r\n\t\t\r\n\t\t// Delete the chart from charts lookup array\r\n\t\tcharts[chart.index] = UNDEFINED;\r\n\t\tchartCount--;\r\n\t\tchart.renderTo.removeAttribute('data-highcharts-chart');\r\n\r\n\t\t// remove events\r\n\t\tremoveEvent(chart);\r\n\r\n\t\t// ==== Destroy collections:\r\n\t\t// Destroy axes\r\n\t\ti = axes.length;\r\n\t\twhile (i--) {\r\n\t\t\taxes[i] = axes[i].destroy();\r\n\t\t}\r\n\r\n\t\t// Destroy each series\r\n\t\ti = series.length;\r\n\t\twhile (i--) {\r\n\t\t\tseries[i] = series[i].destroy();\r\n\t\t}\r\n\r\n\t\t// ==== Destroy chart properties:\r\n\t\teach(['title', 'subtitle', 'chartBackground', 'plotBackground', 'plotBGImage', \r\n\t\t\t\t'plotBorder', 'seriesGroup', 'clipRect', 'credits', 'pointer', 'scroller', \r\n\t\t\t\t'rangeSelector', 'legend', 'resetZoomButton', 'tooltip', 'renderer'], function (name) {\r\n\t\t\tvar prop = chart[name];\r\n\r\n\t\t\tif (prop && prop.destroy) {\r\n\t\t\t\tchart[name] = prop.destroy();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// remove container and all SVG\r\n\t\tif (container) { // can break in IE when destroyed before finished loading\r\n\t\t\tcontainer.innerHTML = '';\r\n\t\t\tremoveEvent(container);\r\n\t\t\tif (parentNode) {\r\n\t\t\t\tdiscardElement(container);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// clean it all up\r\n\t\tfor (i in chart) {\r\n\t\t\tdelete chart[i];\r\n\t\t}\r\n\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * VML namespaces can't be added until after complete. Listening\r\n\t * for Perini's doScroll hack is not enough.\r\n\t */\r\n\tisReadyToRender: function () {\r\n\t\tvar chart = this;\r\n\r\n\t\t// Note: in spite of JSLint's complaints, win == win.top is required\r\n\t\t/*jslint eqeq: true*/\r\n\t\tif ((!hasSVG && (win == win.top && doc.readyState !== 'complete')) || (useCanVG && !win.canvg)) {\r\n\t\t/*jslint eqeq: false*/\r\n\t\t\tif (useCanVG) {\r\n\t\t\t\t// Delay rendering until canvg library is downloaded and ready\r\n\t\t\t\tCanVGController.push(function () { chart.firstRender(); }, chart.options.global.canvasToolsURL);\r\n\t\t\t} else {\r\n\t\t\t\tdoc.attachEvent('onreadystatechange', function () {\r\n\t\t\t\t\tdoc.detachEvent('onreadystatechange', chart.firstRender);\r\n\t\t\t\t\tif (doc.readyState === 'complete') {\r\n\t\t\t\t\t\tchart.firstRender();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t * Prepare for first rendering after all data are loaded\r\n\t */\r\n\tfirstRender: function () {\r\n\t\tvar chart = this,\r\n\t\t\toptions = chart.options,\r\n\t\t\tcallback = chart.callback;\r\n\r\n\t\t// Check whether the chart is ready to render\r\n\t\tif (!chart.isReadyToRender()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Create the container\r\n\t\tchart.getContainer();\r\n\r\n\t\t// Run an early event after the container and renderer are established\r\n\t\tfireEvent(chart, 'init');\r\n\r\n\t\t\r\n\t\tchart.resetMargins();\r\n\t\tchart.setChartSize();\r\n\r\n\t\t// Set the common chart properties (mainly invert) from the given series\r\n\t\tchart.propFromSeries();\r\n\r\n\t\t// get axes\r\n\t\tchart.getAxes();\r\n\r\n\t\t// Initialize the series\r\n\t\teach(options.series || [], function (serieOptions) {\r\n\t\t\tchart.initSeries(serieOptions);\r\n\t\t});\r\n\r\n\t\tchart.linkSeries();\r\n\r\n\t\t// Run an event after axes and series are initialized, but before render. At this stage,\r\n\t\t// the series data is indexed and cached in the xData and yData arrays, so we can access\r\n\t\t// those before rendering. Used in Highstock. \r\n\t\tfireEvent(chart, 'beforeRender'); \r\n\r\n\t\t// depends on inverted and on margins being set\r\n\t\tif (Highcharts.Pointer) {\r\n\t\t\tchart.pointer = new Pointer(chart, options);\r\n\t\t}\r\n\r\n\t\tchart.render();\r\n\r\n\t\t// add canvas\r\n\t\tchart.renderer.draw();\r\n\t\t// run callbacks\r\n\t\tif (callback) {\r\n\t\t\tcallback.apply(chart, [chart]);\r\n\t\t}\r\n\t\teach(chart.callbacks, function (fn) {\r\n\t\t\tif (chart.index !== UNDEFINED) { // Chart destroyed in its own callback (#3600)\r\n\t\t\t\tfn.apply(chart, [chart]);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// Fire the load event\r\n\t\tfireEvent(chart, 'load');\t\t\r\n\t\t\r\n\t\t// If the chart was rendered outside the top container, put it back in (#3679)\r\n\t\tchart.cloneRenderTo(true);\r\n\r\n\t},\r\n\r\n\t/**\r\n\t* Creates arrays for spacing and margin from given options.\r\n\t*/\r\n\tsplashArray: function (target, options) {\r\n\t\tvar oVar = options[target],\r\n\t\t\ttArray = isObject(oVar) ? oVar : [oVar, oVar, oVar, oVar];\r\n\r\n\t\treturn [pick(options[target + 'Top'], tArray[0]),\r\n\t\t\t\tpick(options[target + 'Right'], tArray[1]),\r\n\t\t\t\tpick(options[target + 'Bottom'], tArray[2]),\r\n\t\t\t\tpick(options[target + 'Left'], tArray[3])];\r\n\t}\r\n}; // end Chart\r\n\r\nvar CenteredSeriesMixin = Highcharts.CenteredSeriesMixin = {\r\n\t/**\r\n\t * Get the center of the pie based on the size and center options relative to the  \r\n\t * plot area. Borrowed by the polar and gauge series types.\r\n\t */\r\n\tgetCenter: function () {\r\n\t\t\r\n\t\tvar options = this.options,\r\n\t\t\tchart = this.chart,\r\n\t\t\tslicingRoom = 2 * (options.slicedOffset || 0),\r\n\t\t\thandleSlicingRoom,\r\n\t\t\tplotWidth = chart.plotWidth - 2 * slicingRoom,\r\n\t\t\tplotHeight = chart.plotHeight - 2 * slicingRoom,\r\n\t\t\tcenterOption = options.center,\r\n\t\t\tpositions = [pick(centerOption[0], '50%'), pick(centerOption[1], '50%'), options.size || '100%', options.innerSize || 0],\r\n\t\t\tsmallestSize = mathMin(plotWidth, plotHeight),\r\n\t\t\tisPercent,\r\n\t\t\ti,\r\n\t\t\tvalue;\r\n\r\n\t\tfor (i = 0; i < 4; ++i) {\r\n\t\t\tvalue = positions[i];\r\n\t\t\tisPercent = /%$/.test(value);\r\n\t\t\thandleSlicingRoom = i < 2 || (i === 2 && isPercent);\r\n\t\t\tpositions[i] = (isPercent ?\r\n\t\t\t\t// i == 0: centerX, relative to width\r\n\t\t\t\t// i == 1: centerY, relative to height\r\n\t\t\t\t// i == 2: size, relative to smallestSize\r\n\t\t\t\t// i == 3: innerSize, relative to size\r\n\t\t\t\t[plotWidth, plotHeight, smallestSize, positions[2]][i] *\r\n\t\t\t\t\tpInt(value) / 100 :\r\n\t\t\t\tpInt(value)) + (handleSlicingRoom ? slicingRoom : 0);\r\n\t\t}\r\n\t\treturn positions;\r\n\t}\r\n};\r\n\r\n/**\r\n * The Point object and prototype. Inheritable and used as base for PiePoint\r\n */\r\nvar Point = function () {};\r\nPoint.prototype = {\r\n\r\n\t/**\r\n\t * Initialize the point\r\n\t * @param {Object} series The series object containing this point\r\n\t * @param {Object} options The data in either number, array or object format\r\n\t */\r\n\tinit: function (series, options, x) {\r\n\r\n\t\tvar point = this,\r\n\t\t\tcolors;\r\n\t\tpoint.series = series;\r\n\t\tpoint.color = series.color; // #3445\r\n\t\tpoint.applyOptions(options, x);\r\n\t\tpoint.pointAttr = {};\r\n\r\n\t\tif (series.options.colorByPoint) {\r\n\t\t\tcolors = series.options.colors || series.chart.options.colors;\r\n\t\t\tpoint.color = point.color || colors[series.colorCounter++];\r\n\t\t\t// loop back to zero\r\n\t\t\tif (series.colorCounter === colors.length) {\r\n\t\t\t\tseries.colorCounter = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tseries.chart.pointCount++;\r\n\t\treturn point;\r\n\t},\r\n\t/**\r\n\t * Apply the options containing the x and y data and possible some extra properties.\r\n\t * This is called on point init or from point.update.\r\n\t *\r\n\t * @param {Object} options\r\n\t */\r\n\tapplyOptions: function (options, x) {\r\n\t\tvar point = this,\r\n\t\t\tseries = point.series,\r\n\t\t\tpointValKey = series.options.pointValKey || series.pointValKey;\r\n\r\n\t\toptions = Point.prototype.optionsToObject.call(this, options);\r\n\r\n\t\t// copy options directly to point\r\n\t\textend(point, options);\r\n\t\tpoint.options = point.options ? extend(point.options, options) : options;\r\n\r\n\t\t// For higher dimension series types. For instance, for ranges, point.y is mapped to point.low.\r\n\t\tif (pointValKey) {\r\n\t\t\tpoint.y = point[pointValKey];\r\n\t\t}\r\n\r\n\t\t// If no x is set by now, get auto incremented value. All points must have an\r\n\t\t// x value, however the y value can be null to create a gap in the series\r\n\t\tif (point.x === UNDEFINED && series) {\r\n\t\t\tpoint.x = x === UNDEFINED ? series.autoIncrement() : x;\r\n\t\t}\r\n\r\n\t\treturn point;\r\n\t},\r\n\r\n\t/**\r\n\t * Transform number or array configs into objects\r\n\t */\r\n\toptionsToObject: function (options) {\r\n\t\tvar ret = {},\r\n\t\t\tseries = this.series,\r\n\t\t\tpointArrayMap = series.pointArrayMap || ['y'],\r\n\t\t\tvalueCount = pointArrayMap.length,\r\n\t\t\tfirstItemType,\r\n\t\t\ti = 0,\r\n\t\t\tj = 0;\r\n\r\n\t\tif (typeof options === 'number' || options === null) {\r\n\t\t\tret[pointArrayMap[0]] = options;\r\n\r\n\t\t} else if (isArray(options)) {\r\n\t\t\t// with leading x value\r\n\t\t\tif (options.length > valueCount) {\r\n\t\t\t\tfirstItemType = typeof options[0];\r\n\t\t\t\tif (firstItemType === 'string') {\r\n\t\t\t\t\tret.name = options[0];\r\n\t\t\t\t} else if (firstItemType === 'number') {\r\n\t\t\t\t\tret.x = options[0];\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\twhile (j < valueCount) {\r\n\t\t\t\tret[pointArrayMap[j++]] = options[i++];\r\n\t\t\t}\r\n\t\t} else if (typeof options === 'object') {\r\n\t\t\tret = options;\r\n\r\n\t\t\t// This is the fastest way to detect if there are individual point dataLabels that need\r\n\t\t\t// to be considered in drawDataLabels. These can only occur in object configs.\r\n\t\t\tif (options.dataLabels) {\r\n\t\t\t\tseries._hasPointLabels = true;\r\n\t\t\t}\r\n\r\n\t\t\t// Same approach as above for markers\r\n\t\t\tif (options.marker) {\r\n\t\t\t\tseries._hasPointMarkers = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t/**\r\n\t * Destroy a point to clear memory. Its reference still stays in series.data.\r\n\t */\r\n\tdestroy: function () {\r\n\t\tvar point = this,\r\n\t\t\tseries = point.series,\r\n\t\t\tchart = series.chart,\r\n\t\t\thoverPoints = chart.hoverPoints,\r\n\t\t\tprop;\r\n\r\n\t\tchart.pointCount--;\r\n\r\n\t\tif (hoverPoints) {\r\n\t\t\tpoint.setState();\r\n\t\t\terase(hoverPoints, point);\r\n\t\t\tif (!hoverPoints.length) {\r\n\t\t\t\tchart.hoverPoints = null;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tif (point === chart.hoverPoint) {\r\n\t\t\tpoint.onMouseOut();\r\n\t\t}\r\n\r\n\t\t// remove all events\r\n\t\tif (point.graphic || point.dataLabel) { // removeEvent and destroyElements are performance expensive\r\n\t\t\tremoveEvent(point);\r\n\t\t\tpoint.destroyElements();\r\n\t\t}\r\n\r\n\t\tif (point.legendItem) { // pies have legend items\r\n\t\t\tchart.legend.destroyItem(point);\r\n\t\t}\r\n\r\n\t\tfor (prop in point) {\r\n\t\t\tpoint[prop] = null;\r\n\t\t}\r\n\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Destroy SVG elements associated with the point\r\n\t */\r\n\tdestroyElements: function () {\r\n\t\tvar point = this,\r\n\t\t\tprops = ['graphic', 'dataLabel', 'dataLabelUpper', 'group', 'connector', 'shadowGroup'],\r\n\t\t\tprop,\r\n\t\t\ti = 6;\r\n\t\twhile (i--) {\r\n\t\t\tprop = props[i];\r\n\t\t\tif (point[prop]) {\r\n\t\t\t\tpoint[prop] = point[prop].destroy();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Return the configuration hash needed for the data label and tooltip formatters\r\n\t */\r\n\tgetLabelConfig: function () {\r\n\t\tvar point = this;\r\n\t\treturn {\r\n\t\t\tx: point.category,\r\n\t\t\ty: point.y,\r\n\t\t\tkey: point.name || point.category,\r\n\t\t\tseries: point.series,\r\n\t\t\tpoint: point,\r\n\t\t\tpercentage: point.percentage,\r\n\t\t\ttotal: point.total || point.stackTotal\r\n\t\t};\r\n\t},\t\r\n\r\n\t/**\r\n\t * Extendable method for formatting each point's tooltip line\r\n\t *\r\n\t * @return {String} A string to be concatenated in to the common tooltip text\r\n\t */\r\n\ttooltipFormatter: function (pointFormat) {\r\n\r\n\t\t// Insert options for valueDecimals, valuePrefix, and valueSuffix\r\n\t\tvar series = this.series,\r\n\t\t\tseriesTooltipOptions = series.tooltipOptions,\r\n\t\t\tvalueDecimals = pick(seriesTooltipOptions.valueDecimals, ''),\r\n\t\t\tvaluePrefix = seriesTooltipOptions.valuePrefix || '',\r\n\t\t\tvalueSuffix = seriesTooltipOptions.valueSuffix || '';\r\n\r\n\t\t// Loop over the point array map and replace unformatted values with sprintf formatting markup\r\n\t\teach(series.pointArrayMap || ['y'], function (key) {\r\n\t\t\tkey = '{point.' + key; // without the closing bracket\r\n\t\t\tif (valuePrefix || valueSuffix) {\r\n\t\t\t\tpointFormat = pointFormat.replace(key + '}', valuePrefix + key + '}' + valueSuffix);\r\n\t\t\t}\r\n\t\t\tpointFormat = pointFormat.replace(key + '}', key + ':,.' + valueDecimals + 'f}');\r\n\t\t});\r\n\r\n\t\treturn format(pointFormat, {\r\n\t\t\tpoint: this,\r\n\t\t\tseries: this.series\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Fire an event on the Point object. Must not be renamed to fireEvent, as this\r\n\t * causes a name clash in MooTools\r\n\t * @param {String} eventType\r\n\t * @param {Object} eventArgs Additional event arguments\r\n\t * @param {Function} defaultFunction Default event handler\r\n\t */\r\n\tfirePointEvent: function (eventType, eventArgs, defaultFunction) {\r\n\t\tvar point = this,\r\n\t\t\tseries = this.series,\r\n\t\t\tseriesOptions = series.options;\r\n\r\n\t\t// load event handlers on demand to save time on mouseover/out\r\n\t\tif (seriesOptions.point.events[eventType] || (point.options && point.options.events && point.options.events[eventType])) {\r\n\t\t\tthis.importEvents();\r\n\t\t}\r\n\r\n\t\t// add default handler if in selection mode\r\n\t\tif (eventType === 'click' && seriesOptions.allowPointSelect) {\r\n\t\t\tdefaultFunction = function (event) {\r\n\t\t\t\t// Control key is for Windows, meta (= Cmd key) for Mac, Shift for Opera\r\n\t\t\t\tpoint.select(null, event.ctrlKey || event.metaKey || event.shiftKey);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tfireEvent(this, eventType, eventArgs, defaultFunction);\r\n\t}\r\n};/**\r\n * @classDescription The base function which all other series types inherit from. The data in the series is stored\r\n * in various arrays.\r\n *\r\n * - First, series.options.data contains all the original config options for\r\n * each point whether added by options or methods like series.addPoint.\r\n * - Next, series.data contains those values converted to points, but in case the series data length\r\n * exceeds the cropThreshold, or if the data is grouped, series.data doesn't contain all the points. It\r\n * only contains the points that have been created on demand.\r\n * - Then there's series.points that contains all currently visible point objects. In case of cropping,\r\n * the cropped-away points are not part of this array. The series.points array starts at series.cropStart\r\n * compared to series.data and series.options.data. If however the series data is grouped, these can't\r\n * be correlated one to one.\r\n * - series.xData and series.processedXData contain clean x values, equivalent to series.data and series.points.\r\n * - series.yData and series.processedYData contain clean x values, equivalent to series.data and series.points.\r\n *\r\n * @param {Object} chart\r\n * @param {Object} options\r\n */\r\nvar Series = Highcharts.Series = function () {};\r\n\r\nSeries.prototype = {\r\n\r\n\tisCartesian: true,\r\n\ttype: 'line',\r\n\tpointClass: Point,\r\n\tsorted: true, // requires the data to be sorted\r\n\trequireSorting: true,\r\n\tpointAttrToOptions: { // mapping between SVG attributes and the corresponding options\r\n\t\tstroke: 'lineColor',\r\n\t\t'stroke-width': 'lineWidth',\r\n\t\tfill: 'fillColor',\r\n\t\tr: 'radius'\r\n\t},\r\n\taxisTypes: ['xAxis', 'yAxis'],\r\n\tcolorCounter: 0,\r\n\tparallelArrays: ['x', 'y'], // each point's x and y values are stored in this.xData and this.yData\r\n\tinit: function (chart, options) {\r\n\t\tvar series = this,\r\n\t\t\teventType,\r\n\t\t\tevents,\r\n\t\t\tchartSeries = chart.series,\r\n\t\t\tsortByIndex = function (a, b) {\r\n\t\t\t\treturn pick(a.options.index, a._i) - pick(b.options.index, b._i);\r\n\t\t\t};\r\n\r\n\t\tseries.chart = chart;\r\n\t\tseries.options = options = series.setOptions(options); // merge with plotOptions\r\n\t\tseries.linkedSeries = [];\r\n\r\n\t\t// bind the axes\r\n\t\tseries.bindAxes();\r\n\r\n\t\t// set some variables\r\n\t\textend(series, {\r\n\t\t\tname: options.name,\r\n\t\t\tstate: NORMAL_STATE,\r\n\t\t\tpointAttr: {},\r\n\t\t\tvisible: options.visible !== false, // true by default\r\n\t\t\tselected: options.selected === true // false by default\r\n\t\t});\r\n\r\n\t\t// special\r\n\t\tif (useCanVG) {\r\n\t\t\toptions.animation = false;\r\n\t\t}\r\n\r\n\t\t// register event listeners\r\n\t\tevents = options.events;\r\n\t\tfor (eventType in events) {\r\n\t\t\taddEvent(series, eventType, events[eventType]);\r\n\t\t}\r\n\t\tif (\r\n\t\t\t(events && events.click) ||\r\n\t\t\t(options.point && options.point.events && options.point.events.click) ||\r\n\t\t\toptions.allowPointSelect\r\n\t\t) {\r\n\t\t\tchart.runTrackerClick = true;\r\n\t\t}\r\n\r\n\t\tseries.getColor();\r\n\t\tseries.getSymbol();\r\n\r\n\t\t// Set the data\r\n\t\teach(series.parallelArrays, function (key) {\r\n\t\t\tseries[key + 'Data'] = [];\r\n\t\t});\r\n\t\tseries.setData(options.data, false);\r\n\r\n\t\t// Mark cartesian\r\n\t\tif (series.isCartesian) {\r\n\t\t\tchart.hasCartesianSeries = true;\r\n\t\t}\r\n\r\n\t\t// Register it in the chart\r\n\t\tchartSeries.push(series);\r\n\t\tseries._i = chartSeries.length - 1;\r\n\r\n\t\t// Sort series according to index option (#248, #1123, #2456)\r\n\t\tstableSort(chartSeries, sortByIndex);\r\n\t\tif (this.yAxis) {\r\n\t\t\tstableSort(this.yAxis.series, sortByIndex);\r\n\t\t}\r\n\r\n\t\teach(chartSeries, function (series, i) {\r\n\t\t\tseries.index = i;\r\n\t\t\tseries.name = series.name || 'Series ' + (i + 1);\r\n\t\t});\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set the xAxis and yAxis properties of cartesian series, and register the series\r\n\t * in the axis.series array\r\n\t */\r\n\tbindAxes: function () {\r\n\t\tvar series = this,\r\n\t\t\tseriesOptions = series.options,\r\n\t\t\tchart = series.chart,\r\n\t\t\taxisOptions;\r\n\r\n\t\teach(series.axisTypes || [], function (AXIS) { // repeat for xAxis and yAxis\r\n\r\n\t\t\teach(chart[AXIS], function (axis) { // loop through the chart's axis objects\r\n\t\t\t\taxisOptions = axis.options;\r\n\r\n\t\t\t\t// apply if the series xAxis or yAxis option mathches the number of the\r\n\t\t\t\t// axis, or if undefined, use the first axis\r\n\t\t\t\tif ((seriesOptions[AXIS] === axisOptions.index) ||\r\n\t\t\t\t\t\t(seriesOptions[AXIS] !== UNDEFINED && seriesOptions[AXIS] === axisOptions.id) ||\r\n\t\t\t\t\t\t(seriesOptions[AXIS] === UNDEFINED && axisOptions.index === 0)) {\r\n\r\n\t\t\t\t\t// register this series in the axis.series lookup\r\n\t\t\t\t\taxis.series.push(series);\r\n\r\n\t\t\t\t\t// set this series.xAxis or series.yAxis reference\r\n\t\t\t\t\tseries[AXIS] = axis;\r\n\r\n\t\t\t\t\t// mark dirty for redraw\r\n\t\t\t\t\taxis.isDirty = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// The series needs an X and an Y axis\r\n\t\t\tif (!series[AXIS] && series.optionalAxis !== AXIS) {\r\n\t\t\t\terror(18, true);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * For simple series types like line and column, the data values are held in arrays like\r\n\t * xData and yData for quick lookup to find extremes and more. For multidimensional series\r\n\t * like bubble and map, this can be extended with arrays like zData and valueData by\r\n\t * adding to the series.parallelArrays array.\r\n\t */\r\n\tupdateParallelArrays: function (point, i) {\r\n\t\tvar series = point.series,\r\n\t\t\targs = arguments,\r\n\t\t\tfn = typeof i === 'number' ?\r\n\t\t\t\t // Insert the value in the given position\r\n\t\t\t\tfunction (key) {\r\n\t\t\t\t\tvar val = key === 'y' && series.toYData ? series.toYData(point) : point[key];\r\n\t\t\t\t\tseries[key + 'Data'][i] = val;\r\n\t\t\t\t} :\r\n\t\t\t\t// Apply the method specified in i with the following arguments as arguments\r\n\t\t\t\tfunction (key) {\r\n\t\t\t\t\tArray.prototype[i].apply(series[key + 'Data'], Array.prototype.slice.call(args, 2));\r\n\t\t\t\t};\r\n\r\n\t\teach(series.parallelArrays, fn);\r\n\t},\r\n\r\n\t/**\r\n\t * Return an auto incremented x value based on the pointStart and pointInterval options.\r\n\t * This is only used if an x value is not given for the point that calls autoIncrement.\r\n\t */\r\n\tautoIncrement: function () {\r\n\r\n\t\tvar options = this.options,\r\n\t\t\txIncrement = this.xIncrement,\r\n\t\t\tdate,\r\n\t\t\tpointInterval,\r\n\t\t\tpointIntervalUnit = options.pointIntervalUnit;\r\n\t\t\r\n\t\txIncrement = pick(xIncrement, options.pointStart, 0);\r\n\t\t\r\n\t\tthis.pointInterval = pointInterval = pick(this.pointInterval, options.pointInterval, 1);\r\n\t\t\r\n\t\t// Added code for pointInterval strings\r\n\t\tif (pointIntervalUnit === 'month' || pointIntervalUnit === 'year') {\r\n\t\t\tdate = new Date(xIncrement);\r\n\t\t\tdate = (pointIntervalUnit === 'month') ?\r\n\t\t\t\t+date[setMonth](date[getMonth]() + pointInterval) :\r\n\t\t\t\t+date[setFullYear](date[getFullYear]() + pointInterval);\r\n\t\t\tpointInterval = date - xIncrement;\r\n\t\t}\r\n\t\t\r\n\t\tthis.xIncrement = xIncrement + pointInterval;\r\n\t\treturn xIncrement;\r\n\t},\r\n\r\n\t/**\r\n\t * Divide the series data into segments divided by null values.\r\n\t */\r\n\tgetSegments: function () {\r\n\t\tvar series = this,\r\n\t\t\tlastNull = -1,\r\n\t\t\tsegments = [],\r\n\t\t\ti,\r\n\t\t\tpoints = series.points,\r\n\t\t\tpointsLength = points.length;\r\n\r\n\t\tif (pointsLength) { // no action required for []\r\n\r\n\t\t\t// if connect nulls, just remove null points\r\n\t\t\tif (series.options.connectNulls) {\r\n\t\t\t\ti = pointsLength;\r\n\t\t\t\twhile (i--) {\r\n\t\t\t\t\tif (points[i].y === null) {\r\n\t\t\t\t\t\tpoints.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (points.length) {\r\n\t\t\t\t\tsegments = [points];\r\n\t\t\t\t}\r\n\r\n\t\t\t// else, split on null points\r\n\t\t\t} else {\r\n\t\t\t\teach(points, function (point, i) {\r\n\t\t\t\t\tif (point.y === null) {\r\n\t\t\t\t\t\tif (i > lastNull + 1) {\r\n\t\t\t\t\t\t\tsegments.push(points.slice(lastNull + 1, i));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastNull = i;\r\n\t\t\t\t\t} else if (i === pointsLength - 1) { // last value\r\n\t\t\t\t\t\tsegments.push(points.slice(lastNull + 1, i + 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// register it\r\n\t\tseries.segments = segments;\r\n\t},\r\n\r\n\t/**\r\n\t * Set the series options by merging from the options tree\r\n\t * @param {Object} itemOptions\r\n\t */\r\n\tsetOptions: function (itemOptions) {\r\n\t\tvar chart = this.chart,\r\n\t\t\tchartOptions = chart.options,\r\n\t\t\tplotOptions = chartOptions.plotOptions,\r\n\t\t\tuserOptions = chart.userOptions || {},\r\n\t\t\tuserPlotOptions = userOptions.plotOptions || {},\r\n\t\t\ttypeOptions = plotOptions[this.type],\r\n\t\t\toptions,\r\n\t\t\tzones;\r\n\r\n\t\tthis.userOptions = itemOptions;\r\n\r\n\t\t// General series options take precedence over type options because otherwise, default\r\n\t\t// type options like column.animation would be overwritten by the general option.\r\n\t\t// But issues have been raised here (#3881), and the solution may be to distinguish \r\n\t\t// between default option and userOptions like in the tooltip below.\r\n\t\toptions = merge(\r\n\t\t\ttypeOptions,\r\n\t\t\tplotOptions.series,\r\n\t\t\titemOptions\r\n\t\t);\r\n\r\n\t\t// The tooltip options are merged between global and series specific options\r\n\t\tthis.tooltipOptions = merge(\r\n\t\t\tdefaultOptions.tooltip,\r\n\t\t\tdefaultOptions.plotOptions[this.type].tooltip,\r\n\t\t\tuserOptions.tooltip,\r\n\t\t\tuserPlotOptions.series && userPlotOptions.series.tooltip,\r\n\t\t\tuserPlotOptions[this.type] && userPlotOptions[this.type].tooltip,\r\n\t\t\titemOptions.tooltip\r\n\t\t);\r\n\r\n\t\t// Delete marker object if not allowed (#1125)\r\n\t\tif (typeOptions.marker === null) {\r\n\t\t\tdelete options.marker;\r\n\t\t}\r\n\r\n\t\t// Handle color zones\r\n\t\tthis.zoneAxis = options.zoneAxis;\r\n\t\tzones = this.zones = (options.zones || []).slice();\r\n\t\tif ((options.negativeColor || options.negativeFillColor) && !options.zones) {\r\n\t\t\tzones.push({\r\n\t\t\t\tvalue: options[this.zoneAxis + 'Threshold'] || options.threshold || 0,\r\n\t\t\t\tcolor: options.negativeColor,\r\n\t\t\t\tfillColor: options.negativeFillColor\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (zones.length) { // Push one extra zone for the rest\r\n\t\t\tif (defined(zones[zones.length - 1].value)) {\r\n\t\t\t\tzones.push({\r\n\t\t\t\t\tcolor: this.color,\r\n\t\t\t\t\tfillColor: this.fillColor\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn options;\r\n\t},\r\n\r\n\tgetCyclic: function (prop, value, defaults) {\r\n\t\tvar i,\r\n\t\t\tuserOptions = this.userOptions,\r\n\t\t\tindexName = '_' + prop + 'Index',\r\n\t\t\tcounterName = prop + 'Counter';\r\n\r\n\t\tif (!value) {\r\n\t\t\tif (defined(userOptions[indexName])) { // after Series.update()\r\n\t\t\t\ti = userOptions[indexName];\r\n\t\t\t} else {\r\n\t\t\t\tuserOptions[indexName] = i = this.chart[counterName] % defaults.length;\r\n\t\t\t\tthis.chart[counterName] += 1;\r\n\t\t\t}\r\n\t\t\tvalue = defaults[i];\r\n\t\t}\r\n\t\tthis[prop] = value;\r\n\t},\r\n\r\n\t/**\r\n\t * Get the series' color\r\n\t */\r\n\tgetColor: function () {\r\n\t\tif (!this.options.colorByPoint) {\r\n\t\t\tthis.getCyclic('color', this.options.color || defaultPlotOptions[this.type].color, this.chart.options.colors);\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * Get the series' symbol\r\n\t */\r\n\tgetSymbol: function () {\r\n\t\tvar seriesMarkerOption = this.options.marker;\r\n\r\n\t\tthis.getCyclic('symbol', seriesMarkerOption.symbol, this.chart.options.symbols);\r\n\r\n\t\t// don't substract radius in image symbols (#604)\r\n\t\tif (/^url/.test(this.symbol)) {\r\n\t\t\tseriesMarkerOption.radius = 0;\r\n\t\t}\r\n\t},\r\n\r\n\tdrawLegendSymbol: LegendSymbolMixin.drawLineMarker,\r\n\r\n\t/**\r\n\t * Replace the series data with a new set of data\r\n\t * @param {Object} data\r\n\t * @param {Object} redraw\r\n\t */\r\n\tsetData: function (data, redraw, animation, updatePoints) {\r\n\t\tvar series = this,\r\n\t\t\toldData = series.points,\r\n\t\t\toldDataLength = (oldData && oldData.length) || 0,\r\n\t\t\tdataLength,\r\n\t\t\toptions = series.options,\r\n\t\t\tchart = series.chart,\r\n\t\t\tfirstPoint = null,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\thasCategories = xAxis && !!xAxis.categories,\r\n\t\t\ti,\r\n\t\t\tturboThreshold = options.turboThreshold,\r\n\t\t\tpt,\r\n\t\t\txData = this.xData,\r\n\t\t\tyData = this.yData,\r\n\t\t\tpointArrayMap = series.pointArrayMap,\r\n\t\t\tvalueCount = pointArrayMap && pointArrayMap.length;\r\n\r\n\t\tdata = data || [];\r\n\t\tdataLength = data.length;\r\n\t\tredraw = pick(redraw, true);\r\n\r\n\t\t// If the point count is the same as is was, just run Point.update which is\r\n\t\t// cheaper, allows animation, and keeps references to points.\r\n\t\tif (updatePoints !== false && dataLength && oldDataLength === dataLength && !series.cropped && !series.hasGroupedData && series.visible) {\r\n\t\t\teach(data, function (point, i) {\r\n\t\t\t\toldData[i].update(point, false, null, false);\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Reset properties\r\n\t\t\tseries.xIncrement = null;\r\n\t\t\tseries.pointRange = hasCategories ? 1 : options.pointRange;\r\n\r\n\t\t\tseries.colorCounter = 0; // for series with colorByPoint (#1547)\r\n\t\t\t\r\n\t\t\t// Update parallel arrays\r\n\t\t\teach(this.parallelArrays, function (key) {\r\n\t\t\t\tseries[key + 'Data'].length = 0;\r\n\t\t\t});\r\n\r\n\t\t\t// In turbo mode, only one- or twodimensional arrays of numbers are allowed. The\r\n\t\t\t// first value is tested, and we assume that all the rest are defined the same\r\n\t\t\t// way. Although the 'for' loops are similar, they are repeated inside each\r\n\t\t\t// if-else conditional for max performance.\r\n\t\t\tif (turboThreshold && dataLength > turboThreshold) {\r\n\r\n\t\t\t\t// find the first non-null point\r\n\t\t\t\ti = 0;\r\n\t\t\t\twhile (firstPoint === null && i < dataLength) {\r\n\t\t\t\t\tfirstPoint = data[i];\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (isNumber(firstPoint)) { // assume all points are numbers\r\n\t\t\t\t\tvar x = pick(options.pointStart, 0),\r\n\t\t\t\t\t\tpointInterval = pick(options.pointInterval, 1);\r\n\r\n\t\t\t\t\tfor (i = 0; i < dataLength; i++) {\r\n\t\t\t\t\t\txData[i] = x;\r\n\t\t\t\t\t\tyData[i] = data[i];\r\n\t\t\t\t\t\tx += pointInterval;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tseries.xIncrement = x;\r\n\t\t\t\t} else if (isArray(firstPoint)) { // assume all points are arrays\r\n\t\t\t\t\tif (valueCount) { // [x, low, high] or [x, o, h, l, c]\r\n\t\t\t\t\t\tfor (i = 0; i < dataLength; i++) {\r\n\t\t\t\t\t\t\tpt = data[i];\r\n\t\t\t\t\t\t\txData[i] = pt[0];\r\n\t\t\t\t\t\t\tyData[i] = pt.slice(1, valueCount + 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else { // [x, y]\r\n\t\t\t\t\t\tfor (i = 0; i < dataLength; i++) {\r\n\t\t\t\t\t\t\tpt = data[i];\r\n\t\t\t\t\t\t\txData[i] = pt[0];\r\n\t\t\t\t\t\t\tyData[i] = pt[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\terror(12); // Highcharts expects configs to be numbers or arrays in turbo mode\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (i = 0; i < dataLength; i++) {\r\n\t\t\t\t\tif (data[i] !== UNDEFINED) { // stray commas in oldIE\r\n\t\t\t\t\t\tpt = { series: series };\r\n\t\t\t\t\t\tseries.pointClass.prototype.applyOptions.apply(pt, [data[i]]);\r\n\t\t\t\t\t\tseries.updateParallelArrays(pt, i);\r\n\t\t\t\t\t\tif (hasCategories && pt.name) {\r\n\t\t\t\t\t\t\txAxis.names[pt.x] = pt.name; // #2046\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Forgetting to cast strings to numbers is a common caveat when handling CSV or JSON\r\n\t\t\tif (isString(yData[0])) {\r\n\t\t\t\terror(14, true);\r\n\t\t\t}\r\n\r\n\t\t\tseries.data = [];\r\n\t\t\tseries.options.data = data;\r\n\t\t\t//series.zData = zData;\r\n\r\n\t\t\t// destroy old points\r\n\t\t\ti = oldDataLength;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (oldData[i] && oldData[i].destroy) {\r\n\t\t\t\t\toldData[i].destroy();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// reset minRange (#878)\r\n\t\t\tif (xAxis) {\r\n\t\t\t\txAxis.minRange = xAxis.userMinRange;\r\n\t\t\t}\r\n\r\n\t\t\t// redraw\r\n\t\t\tseries.isDirty = series.isDirtyData = chart.isDirtyBox = true;\r\n\t\t\tanimation = false;\r\n\t\t}\r\n\r\n\t\tif (redraw) {\r\n\t\t\tchart.redraw(animation);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Process the data by cropping away unused data points if the series is longer\r\n\t * than the crop threshold. This saves computing time for lage series.\r\n\t */\r\n\tprocessData: function (force) {\r\n\t\tvar series = this,\r\n\t\t\tprocessedXData = series.xData, // copied during slice operation below\r\n\t\t\tprocessedYData = series.yData,\r\n\t\t\tdataLength = processedXData.length,\r\n\t\t\tcroppedData,\r\n\t\t\tcropStart = 0,\r\n\t\t\tcropped,\r\n\t\t\tdistance,\r\n\t\t\tclosestPointRange,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\ti, // loop variable\r\n\t\t\toptions = series.options,\r\n\t\t\tcropThreshold = options.cropThreshold,\r\n\t\t\tisCartesian = series.isCartesian,\r\n\t\t\txExtremes,\r\n\t\t\tmin,\r\n\t\t\tmax;\r\n\r\n\t\t// If the series data or axes haven't changed, don't go through this. Return false to pass\r\n\t\t// the message on to override methods like in data grouping.\r\n\t\tif (isCartesian && !series.isDirty && !xAxis.isDirty && !series.yAxis.isDirty && !force) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (xAxis) {\r\n\t\t\txExtremes = xAxis.getExtremes(); // corrected for log axis (#3053)\r\n\t\t\tmin = xExtremes.min;\r\n\t\t\tmax = xExtremes.max;\r\n\t\t}\r\n\r\n\t\t// optionally filter out points outside the plot area\r\n\t\tif (isCartesian && series.sorted && (!cropThreshold || dataLength > cropThreshold || series.forceCrop)) {\r\n\t\t\t\r\n\t\t\t// it's outside current extremes\r\n\t\t\tif (processedXData[dataLength - 1] < min || processedXData[0] > max) {\r\n\t\t\t\tprocessedXData = [];\r\n\t\t\t\tprocessedYData = [];\r\n\r\n\t\t\t// only crop if it's actually spilling out\r\n\t\t\t} else if (processedXData[0] < min || processedXData[dataLength - 1] > max) {\r\n\t\t\t\tcroppedData = this.cropData(series.xData, series.yData, min, max);\r\n\t\t\t\tprocessedXData = croppedData.xData;\r\n\t\t\t\tprocessedYData = croppedData.yData;\r\n\t\t\t\tcropStart = croppedData.start;\r\n\t\t\t\tcropped = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// Find the closest distance between processed points\r\n\t\tfor (i = processedXData.length - 1; i >= 0; i--) {\r\n\t\t\tdistance = processedXData[i] - processedXData[i - 1];\r\n\t\t\t\r\n\t\t\tif (distance > 0 && (closestPointRange === UNDEFINED || distance < closestPointRange)) {\r\n\t\t\t\tclosestPointRange = distance;\r\n\r\n\t\t\t// Unsorted data is not supported by the line tooltip, as well as data grouping and\r\n\t\t\t// navigation in Stock charts (#725) and width calculation of columns (#1900)\r\n\t\t\t} else if (distance < 0 && series.requireSorting) {\r\n\t\t\t\terror(15);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Record the properties\r\n\t\tseries.cropped = cropped; // undefined or true\r\n\t\tseries.cropStart = cropStart;\r\n\t\tseries.processedXData = processedXData;\r\n\t\tseries.processedYData = processedYData;\r\n\r\n\t\tif (options.pointRange === null) { // null means auto, as for columns, candlesticks and OHLC\r\n\t\t\tseries.pointRange = closestPointRange || 1;\r\n\t\t}\r\n\t\tseries.closestPointRange = closestPointRange;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Iterate over xData and crop values between min and max. Returns object containing crop start/end\r\n\t * cropped xData with corresponding part of yData, dataMin and dataMax within the cropped range\r\n\t */\r\n\tcropData: function (xData, yData, min, max) {\r\n\t\tvar dataLength = xData.length,\r\n\t\t\tcropStart = 0,\r\n\t\t\tcropEnd = dataLength,\r\n\t\t\tcropShoulder = pick(this.cropShoulder, 1), // line-type series need one point outside\r\n\t\t\ti;\r\n\r\n\t\t// iterate up to find slice start\r\n\t\tfor (i = 0; i < dataLength; i++) {\r\n\t\t\tif (xData[i] >= min) {\r\n\t\t\t\tcropStart = mathMax(0, i - cropShoulder);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// proceed to find slice end\r\n\t\tfor (; i < dataLength; i++) {\r\n\t\t\tif (xData[i] > max) {\r\n\t\t\t\tcropEnd = i + cropShoulder;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\txData: xData.slice(cropStart, cropEnd),\r\n\t\t\tyData: yData.slice(cropStart, cropEnd),\r\n\t\t\tstart: cropStart,\r\n\t\t\tend: cropEnd\r\n\t\t};\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Generate the data point after the data has been processed by cropping away\r\n\t * unused points and optionally grouped in Highcharts Stock.\r\n\t */\r\n\tgeneratePoints: function () {\r\n\t\tvar series = this,\r\n\t\t\toptions = series.options,\r\n\t\t\tdataOptions = options.data,\r\n\t\t\tdata = series.data,\r\n\t\t\tdataLength,\r\n\t\t\tprocessedXData = series.processedXData,\r\n\t\t\tprocessedYData = series.processedYData,\r\n\t\t\tpointClass = series.pointClass,\r\n\t\t\tprocessedDataLength = processedXData.length,\r\n\t\t\tcropStart = series.cropStart || 0,\r\n\t\t\tcursor,\r\n\t\t\thasGroupedData = series.hasGroupedData,\r\n\t\t\tpoint,\r\n\t\t\tpoints = [],\r\n\t\t\ti;\r\n\r\n\t\tif (!data && !hasGroupedData) {\r\n\t\t\tvar arr = [];\r\n\t\t\tarr.length = dataOptions.length;\r\n\t\t\tdata = series.data = arr;\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < processedDataLength; i++) {\r\n\t\t\tcursor = cropStart + i;\r\n\t\t\tif (!hasGroupedData) {\r\n\t\t\t\tif (data[cursor]) {\r\n\t\t\t\t\tpoint = data[cursor];\r\n\t\t\t\t} else if (dataOptions[cursor] !== UNDEFINED) { // #970\r\n\t\t\t\t\tdata[cursor] = point = (new pointClass()).init(series, dataOptions[cursor], processedXData[i]);\r\n\t\t\t\t}\r\n\t\t\t\tpoints[i] = point;\r\n\t\t\t} else {\r\n\t\t\t\t// splat the y data in case of ohlc data array\r\n\t\t\t\tpoints[i] = (new pointClass()).init(series, [processedXData[i]].concat(splat(processedYData[i])));\r\n\t\t\t}\r\n\t\t\tpoints[i].index = cursor; // For faster access in Point.update\r\n\t\t}\r\n\r\n\t\t// Hide cropped-away points - this only runs when the number of points is above cropThreshold, or when\r\n\t\t// swithching view from non-grouped data to grouped data (#637)\r\n\t\tif (data && (processedDataLength !== (dataLength = data.length) || hasGroupedData)) {\r\n\t\t\tfor (i = 0; i < dataLength; i++) {\r\n\t\t\t\tif (i === cropStart && !hasGroupedData) { // when has grouped data, clear all points\r\n\t\t\t\t\ti += processedDataLength;\r\n\t\t\t\t}\r\n\t\t\t\tif (data[i]) {\r\n\t\t\t\t\tdata[i].destroyElements();\r\n\t\t\t\t\tdata[i].plotX = UNDEFINED; // #1003\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tseries.data = data;\r\n\t\tseries.points = points;\r\n\t},\r\n\r\n\t/**\r\n\t * Calculate Y extremes for visible data\r\n\t */\r\n\tgetExtremes: function (yData) {\r\n\t\tvar xAxis = this.xAxis,\r\n\t\t\tyAxis = this.yAxis,\r\n\t\t\txData = this.processedXData,\r\n\t\t\tyDataLength,\r\n\t\t\tactiveYData = [],\r\n\t\t\tactiveCounter = 0,\r\n\t\t\txExtremes = xAxis.getExtremes(), // #2117, need to compensate for log X axis\r\n\t\t\txMin = xExtremes.min,\r\n\t\t\txMax = xExtremes.max,\r\n\t\t\tvalidValue,\r\n\t\t\twithinRange,\r\n\t\t\tdataMin,\r\n\t\t\tdataMax,\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\ti,\r\n\t\t\tj;\r\n\r\n\t\tyData = yData || this.stackedYData || this.processedYData;\r\n\t\tyDataLength = yData.length;\r\n\r\n\t\tfor (i = 0; i < yDataLength; i++) {\r\n\r\n\t\t\tx = xData[i];\r\n\t\t\ty = yData[i];\r\n\r\n\t\t\t// For points within the visible range, including the first point outside the\r\n\t\t\t// visible range, consider y extremes\r\n\t\t\tvalidValue = y !== null && y !== UNDEFINED && (!yAxis.isLog || (y.length || y > 0));\r\n\t\t\twithinRange = this.getExtremesFromAll || this.cropped || ((xData[i + 1] || x) >= xMin &&\r\n\t\t\t\t(xData[i - 1] || x) <= xMax);\r\n\r\n\t\t\tif (validValue && withinRange) {\r\n\r\n\t\t\t\tj = y.length;\r\n\t\t\t\tif (j) { // array, like ohlc or range data\r\n\t\t\t\t\twhile (j--) {\r\n\t\t\t\t\t\tif (y[j] !== null) {\r\n\t\t\t\t\t\t\tactiveYData[activeCounter++] = y[j];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tactiveYData[activeCounter++] = y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.dataMin = pick(dataMin, arrayMin(activeYData));\r\n\t\tthis.dataMax = pick(dataMax, arrayMax(activeYData));\r\n\t},\r\n\r\n\t/**\r\n\t * Translate data points from raw data values to chart specific positioning data\r\n\t * needed later in drawPoints, drawGraph and drawTracker.\r\n\t */\r\n\ttranslate: function () {\r\n\t\tif (!this.processedXData) { // hidden series\r\n\t\t\tthis.processData();\r\n\t\t}\r\n\t\tthis.generatePoints();\r\n\t\tvar series = this,\r\n\t\t\toptions = series.options,\r\n\t\t\tstacking = options.stacking,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\tcategories = xAxis.categories,\r\n\t\t\tyAxis = series.yAxis,\r\n\t\t\tpoints = series.points,\r\n\t\t\tdataLength = points.length,\r\n\t\t\thasModifyValue = !!series.modifyValue,\r\n\t\t\ti,\r\n\t\t\tpointPlacement = options.pointPlacement,\r\n\t\t\tdynamicallyPlaced = pointPlacement === 'between' || isNumber(pointPlacement),\r\n\t\t\tthreshold = options.threshold,\r\n\t\t\tplotX,\r\n\t\t\tplotY,\r\n\t\t\tlastPlotX,\r\n\t\t\tclosestPointRangePx = Number.MAX_VALUE;\r\n\r\n\t\t// Translate each point\r\n\t\tfor (i = 0; i < dataLength; i++) {\r\n\t\t\tvar point = points[i],\r\n\t\t\t\txValue = point.x,\r\n\t\t\t\tyValue = point.y,\r\n\t\t\t\tyBottom = point.low,\r\n\t\t\t\tstack = stacking && yAxis.stacks[(series.negStacks && yValue < threshold ? '-' : '') + series.stackKey],\r\n\t\t\t\tpointStack,\r\n\t\t\t\tstackValues;\r\n\r\n\t\t\t// Discard disallowed y values for log axes (#3434)\r\n\t\t\tif (yAxis.isLog && yValue !== null && yValue <= 0) {\r\n\t\t\t\tpoint.y = yValue = null;\r\n\t\t\t\terror(10);\r\n\t\t\t}\r\n\r\n\t\t\t// Get the plotX translation\r\n\t\t\tpoint.plotX = plotX = xAxis.translate(xValue, 0, 0, 0, 1, pointPlacement, this.type === 'flags'); // Math.round fixes #591\r\n\r\n\r\n\t\t\t// Calculate the bottom y value for stacked series\r\n\t\t\tif (stacking && series.visible && stack && stack[xValue]) {\r\n\r\n\t\t\t\tpointStack = stack[xValue];\r\n\t\t\t\tstackValues = pointStack.points[series.index + ',' + i];\r\n\t\t\t\tyBottom = stackValues[0];\r\n\t\t\t\tyValue = stackValues[1];\r\n\r\n\t\t\t\tif (yBottom === 0) {\r\n\t\t\t\t\tyBottom = pick(threshold, yAxis.min);\r\n\t\t\t\t}\r\n\t\t\t\tif (yAxis.isLog && yBottom <= 0) { // #1200, #1232\r\n\t\t\t\t\tyBottom = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpoint.total = point.stackTotal = pointStack.total;\r\n\t\t\t\tpoint.percentage = pointStack.total && (point.y / pointStack.total * 100);\r\n\t\t\t\tpoint.stackY = yValue;\r\n\r\n\t\t\t\t// Place the stack label\r\n\t\t\t\tpointStack.setOffset(series.pointXOffset || 0, series.barW || 0);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Set translated yBottom or remove it\r\n\t\t\tpoint.yBottom = defined(yBottom) ?\r\n\t\t\t\tyAxis.translate(yBottom, 0, 1, 0, 1) :\r\n\t\t\t\tnull;\r\n\r\n\t\t\t// general hook, used for Highstock compare mode\r\n\t\t\tif (hasModifyValue) {\r\n\t\t\t\tyValue = series.modifyValue(yValue, point);\r\n\t\t\t}\r\n\r\n\t\t\t// Set the the plotY value, reset it for redraws\r\n\t\t\tpoint.plotY = plotY = (typeof yValue === 'number' && yValue !== Infinity) ?\r\n\t\t\t\tmathMin(mathMax(-1e5, yAxis.translate(yValue, 0, 1, 0, 1)), 1e5) : // #3201\r\n\t\t\t\tUNDEFINED;\r\n\t\t\tpoint.isInside = plotY !== UNDEFINED && plotY >= 0 && plotY <= yAxis.len && // #3519\r\n\t\t\t\tplotX >= 0 && plotX <= xAxis.len;\r\n\r\n\r\n\t\t\t// Set client related positions for mouse tracking\r\n\t\t\tpoint.clientX = dynamicallyPlaced ? xAxis.translate(xValue, 0, 0, 0, 1) : plotX; // #1514\r\n\r\n\t\t\tpoint.negative = point.y < (threshold || 0);\r\n\r\n\t\t\t// some API data\r\n\t\t\tpoint.category = categories && categories[point.x] !== UNDEFINED ?\r\n\t\t\t\tcategories[point.x] : point.x;\r\n\r\n\t\t\t// Determine auto enabling of markers (#3635)\r\n\t\t\tif (i) {\r\n\t\t\t\tclosestPointRangePx = mathMin(closestPointRangePx, mathAbs(plotX - lastPlotX));\r\n\t\t\t}\r\n\t\t\tlastPlotX = plotX;\r\n\r\n\t\t}\r\n\r\n\t\tseries.closestPointRangePx = closestPointRangePx;\r\n\r\n\t\t// now that we have the cropped data, build the segments\r\n\t\tseries.getSegments();\r\n\t},\r\n\r\n\t/**\r\n\t * Set the clipping for the series. For animated series it is called twice, first to initiate\r\n\t * animating the clip then the second time without the animation to set the final clip.\r\n\t */\r\n\tsetClip: function (animation) {\r\n\t\tvar chart = this.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tinverted = chart.inverted,\r\n\t\t\tseriesClipBox = this.clipBox,\r\n\t\t\tclipBox = seriesClipBox || chart.clipBox,\r\n\t\t\tsharedClipKey = this.sharedClipKey || ['_sharedClip', animation && animation.duration, animation && animation.easing, clipBox.height].join(','),\r\n\t\t\tclipRect = chart[sharedClipKey],\r\n\t\t\tmarkerClipRect = chart[sharedClipKey + 'm'];\r\n\r\n\t\t// If a clipping rectangle with the same properties is currently present in the chart, use that.\r\n\t\tif (!clipRect) {\r\n\r\n\t\t\t// When animation is set, prepare the initial positions\r\n\t\t\tif (animation) { \r\n\t\t\t\tclipBox.width = 0;\r\n\r\n\t\t\t\tchart[sharedClipKey + 'm'] = markerClipRect = renderer.clipRect(\r\n\t\t\t\t\t-99, // include the width of the first marker\r\n\t\t\t\t\tinverted ? -chart.plotLeft : -chart.plotTop,\r\n\t\t\t\t\t99,\r\n\t\t\t\t\tinverted ? chart.chartWidth : chart.chartHeight\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tchart[sharedClipKey] = clipRect = renderer.clipRect(clipBox);\r\n\t\t\t\r\n\t\t}\r\n\t\tif (animation) {\r\n\t\t\tclipRect.count += 1;\r\n\t\t}\r\n\r\n\t\tif (this.options.clip !== false) {\r\n\t\t\tthis.group.clip(animation || seriesClipBox ? clipRect : chart.clipRect);\r\n\t\t\tthis.markerGroup.clip(markerClipRect);\r\n\t\t\tthis.sharedClipKey = sharedClipKey;\r\n\t\t}\r\n\r\n\t\t// Remove the shared clipping rectancgle when all series are shown\r\n\t\tif (!animation) {\r\n\t\t\tclipRect.count -= 1;\r\n\t\t\tif (clipRect.count <= 0 && sharedClipKey && chart[sharedClipKey]) {\r\n\t\t\t\tif (!seriesClipBox) {\r\n\t\t\t\t\tchart[sharedClipKey] = chart[sharedClipKey].destroy();\r\n\t\t\t\t}\r\n\t\t\t\tif (chart[sharedClipKey + 'm']) {\r\n\t\t\t\t\tchart[sharedClipKey + 'm'] = chart[sharedClipKey + 'm'].destroy();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Animate in the series\r\n\t */\r\n\tanimate: function (init) {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart,\r\n\t\t\tclipRect,\r\n\t\t\tanimation = series.options.animation,\r\n\t\t\tsharedClipKey;\r\n\r\n\t\t// Animation option is set to true\r\n\t\tif (animation && !isObject(animation)) {\r\n\t\t\tanimation = defaultPlotOptions[series.type].animation;\r\n\t\t}\r\n\r\n\t\t// Initialize the animation. Set up the clipping rectangle.\r\n\t\tif (init) {\r\n\r\n\t\t\tseries.setClip(animation);\r\n\r\n\t\t// Run the animation\r\n\t\t} else {\r\n\t\t\tsharedClipKey = this.sharedClipKey;\r\n\t\t\tclipRect = chart[sharedClipKey];\r\n\t\t\tif (clipRect) {\r\n\t\t\t\tclipRect.animate({\r\n\t\t\t\t\twidth: chart.plotSizeX\r\n\t\t\t\t}, animation);\r\n\t\t\t}\r\n\t\t\tif (chart[sharedClipKey + 'm']) {\r\n\t\t\t\tchart[sharedClipKey + 'm'].animate({\r\n\t\t\t\t\twidth: chart.plotSizeX + 99\r\n\t\t\t\t}, animation);\r\n\t\t\t}\r\n\r\n\t\t\t// Delete this function to allow it only once\r\n\t\t\tseries.animate = null;\r\n \r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * This runs after animation to land on the final plot clipping\r\n\t */\r\n\tafterAnimate: function () {\r\n\t\tthis.setClip();\r\n\t\tfireEvent(this, 'afterAnimate');\r\n\t},\r\n\r\n\t/**\r\n\t * Draw the markers\r\n\t */\r\n\tdrawPoints: function () {\r\n\t\tvar series = this,\r\n\t\t\tpointAttr,\r\n\t\t\tpoints = series.points,\r\n\t\t\tchart = series.chart,\r\n\t\t\tplotX,\r\n\t\t\tplotY,\r\n\t\t\ti,\r\n\t\t\tpoint,\r\n\t\t\tradius,\r\n\t\t\tsymbol,\r\n\t\t\tisImage,\r\n\t\t\tgraphic,\r\n\t\t\toptions = series.options,\r\n\t\t\tseriesMarkerOptions = options.marker,\r\n\t\t\tseriesPointAttr = series.pointAttr[''],\r\n\t\t\tpointMarkerOptions,\r\n\t\t\thasPointMarker,\r\n\t\t\tenabled,\r\n\t\t\tisInside,\r\n\t\t\tmarkerGroup = series.markerGroup,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\tgloballyEnabled = pick(\r\n\t\t\t\tseriesMarkerOptions.enabled, \r\n\t\t\t\txAxis.isRadial,\r\n\t\t\t\tseries.closestPointRangePx > 2 * seriesMarkerOptions.radius\r\n\t\t\t);\r\n\r\n\t\tif (seriesMarkerOptions.enabled !== false || series._hasPointMarkers) {\r\n\r\n\t\t\ti = points.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tpoint = points[i];\r\n\t\t\t\tplotX = mathFloor(point.plotX); // #1843\r\n\t\t\t\tplotY = point.plotY;\r\n\t\t\t\tgraphic = point.graphic;\r\n\t\t\t\tpointMarkerOptions = point.marker || {};\r\n\t\t\t\thasPointMarker = !!point.marker;\r\n\t\t\t\tenabled = (globallyEnabled && pointMarkerOptions.enabled === UNDEFINED) || pointMarkerOptions.enabled;\r\n\t\t\t\tisInside = point.isInside;\r\n\r\n\t\t\t\t// only draw the point if y is defined\r\n\t\t\t\tif (enabled && plotY !== UNDEFINED && !isNaN(plotY) && point.y !== null) {\r\n\r\n\t\t\t\t\t// shortcuts\r\n\t\t\t\t\tpointAttr = point.pointAttr[point.selected ? SELECT_STATE : NORMAL_STATE] || seriesPointAttr;\r\n\t\t\t\t\tradius = pointAttr.r;\r\n\t\t\t\t\tsymbol = pick(pointMarkerOptions.symbol, series.symbol);\r\n\t\t\t\t\tisImage = symbol.indexOf('url') === 0;\r\n\r\n\t\t\t\t\tif (graphic) { // update\r\n\t\t\t\t\t\tgraphic[isInside ? 'show' : 'hide'](true) // Since the marker group isn't clipped, each individual marker must be toggled\r\n\t\t\t\t\t\t\t.animate(extend({\r\n\t\t\t\t\t\t\t\tx: plotX - radius,\r\n\t\t\t\t\t\t\t\ty: plotY - radius\r\n\t\t\t\t\t\t\t}, graphic.symbolName ? { // don't apply to image symbols #507\r\n\t\t\t\t\t\t\t\twidth: 2 * radius,\r\n\t\t\t\t\t\t\t\theight: 2 * radius\r\n\t\t\t\t\t\t\t} : {}));\r\n\t\t\t\t\t} else if (isInside && (radius > 0 || isImage)) {\r\n\t\t\t\t\t\tpoint.graphic = graphic = chart.renderer.symbol(\r\n\t\t\t\t\t\t\tsymbol,\r\n\t\t\t\t\t\t\tplotX - radius,\r\n\t\t\t\t\t\t\tplotY - radius,\r\n\t\t\t\t\t\t\t2 * radius,\r\n\t\t\t\t\t\t\t2 * radius,\r\n\t\t\t\t\t\t\thasPointMarker ? pointMarkerOptions : seriesMarkerOptions\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.attr(pointAttr)\r\n\t\t\t\t\t\t.add(markerGroup);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if (graphic) {\r\n\t\t\t\t\tpoint.graphic = graphic.destroy(); // #1269\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Convert state properties from API naming conventions to SVG attributes\r\n\t *\r\n\t * @param {Object} options API options object\r\n\t * @param {Object} base1 SVG attribute object to inherit from\r\n\t * @param {Object} base2 Second level SVG attribute object to inherit from\r\n\t */\r\n\tconvertAttribs: function (options, base1, base2, base3) {\r\n\t\tvar conversion = this.pointAttrToOptions,\r\n\t\t\tattr,\r\n\t\t\toption,\r\n\t\t\tobj = {};\r\n\r\n\t\toptions = options || {};\r\n\t\tbase1 = base1 || {};\r\n\t\tbase2 = base2 || {};\r\n\t\tbase3 = base3 || {};\r\n\r\n\t\tfor (attr in conversion) {\r\n\t\t\toption = conversion[attr];\r\n\t\t\tobj[attr] = pick(options[option], base1[attr], base2[attr], base3[attr]);\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\r\n\t/**\r\n\t * Get the state attributes. Each series type has its own set of attributes\r\n\t * that are allowed to change on a point's state change. Series wide attributes are stored for\r\n\t * all series, and additionally point specific attributes are stored for all\r\n\t * points with individual marker options. If such options are not defined for the point,\r\n\t * a reference to the series wide attributes is stored in point.pointAttr.\r\n\t */\r\n\tgetAttribs: function () {\r\n\t\tvar series = this,\r\n\t\t\tseriesOptions = series.options,\r\n\t\t\tnormalOptions = defaultPlotOptions[series.type].marker ? seriesOptions.marker : seriesOptions,\r\n\t\t\tstateOptions = normalOptions.states,\r\n\t\t\tstateOptionsHover = stateOptions[HOVER_STATE],\r\n\t\t\tpointStateOptionsHover,\r\n\t\t\tseriesColor = series.color,\r\n\t\t\tseriesNegativeColor = series.options.negativeColor,\r\n\t\t\tnormalDefaults = {\r\n\t\t\t\tstroke: seriesColor,\r\n\t\t\t\tfill: seriesColor\r\n\t\t\t},\r\n\t\t\tpoints = series.points || [], // #927\r\n\t\t\ti,\r\n\t\t\tpoint,\r\n\t\t\tseriesPointAttr = [],\r\n\t\t\tpointAttr,\r\n\t\t\tpointAttrToOptions = series.pointAttrToOptions,\r\n\t\t\thasPointSpecificOptions = series.hasPointSpecificOptions,\r\n\t\t\tdefaultLineColor = normalOptions.lineColor,\r\n\t\t\tdefaultFillColor = normalOptions.fillColor,\r\n\t\t\tturboThreshold = seriesOptions.turboThreshold,\r\n\t\t\tzones = series.zones,\r\n\t\t\tzoneAxis = series.zoneAxis || 'y',\r\n\t\t\tattr,\r\n\t\t\tkey;\r\n\r\n\t\t// series type specific modifications\r\n\t\tif (seriesOptions.marker) { // line, spline, area, areaspline, scatter\r\n\r\n\t\t\t// if no hover radius is given, default to normal radius + 2\r\n\t\t\tstateOptionsHover.radius = stateOptionsHover.radius || normalOptions.radius + stateOptionsHover.radiusPlus;\r\n\t\t\tstateOptionsHover.lineWidth = stateOptionsHover.lineWidth || normalOptions.lineWidth + stateOptionsHover.lineWidthPlus;\r\n\r\n\t\t} else { // column, bar, pie\r\n\r\n\t\t\t// if no hover color is given, brighten the normal color\r\n\t\t\tstateOptionsHover.color = stateOptionsHover.color ||\r\n\t\t\t\tColor(stateOptionsHover.color || seriesColor)\r\n\t\t\t\t\t.brighten(stateOptionsHover.brightness).get();\r\n\r\n\t\t\t// if no hover negativeColor is given, brighten the normal negativeColor\r\n\t\t\tstateOptionsHover.negativeColor = stateOptionsHover.negativeColor ||\r\n\t\t\t\tColor(stateOptionsHover.negativeColor || seriesNegativeColor)\r\n\t\t\t\t\t.brighten(stateOptionsHover.brightness).get();\r\n\t\t}\r\n\r\n\t\t// general point attributes for the series normal state\r\n\t\tseriesPointAttr[NORMAL_STATE] = series.convertAttribs(normalOptions, normalDefaults);\r\n\r\n\t\t// HOVER_STATE and SELECT_STATE states inherit from normal state except the default radius\r\n\t\teach([HOVER_STATE, SELECT_STATE], function (state) {\r\n\t\t\tseriesPointAttr[state] =\r\n\t\t\t\t\tseries.convertAttribs(stateOptions[state], seriesPointAttr[NORMAL_STATE]);\r\n\t\t});\r\n\r\n\t\t// set it\r\n\t\tseries.pointAttr = seriesPointAttr;\r\n\r\n\r\n\t\t// Generate the point-specific attribute collections if specific point\r\n\t\t// options are given. If not, create a referance to the series wide point\r\n\t\t// attributes\r\n\t\ti = points.length;\r\n\t\tif (!turboThreshold || i < turboThreshold || hasPointSpecificOptions) {\r\n\t\t\twhile (i--) {\r\n\t\t\t\tpoint = points[i];\r\n\t\t\t\tnormalOptions = (point.options && point.options.marker) || point.options;\r\n\t\t\t\tif (normalOptions && normalOptions.enabled === false) {\r\n\t\t\t\t\tnormalOptions.radius = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (zones.length) {\r\n\t\t\t\t\tvar j = 0,\r\n\t\t\t\t\t\tthreshold = zones[j];\r\n\t\t\t\t\twhile (point[zoneAxis] >= threshold.value) {\t\t\t\t\r\n\t\t\t\t\t\tthreshold = zones[++j];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tpoint.color = point.fillColor = threshold.color;\r\n\t\t\t\t}\r\n\r\n\t\t\t\thasPointSpecificOptions = seriesOptions.colorByPoint || point.color; // #868\r\n\r\n\t\t\t\t// check if the point has specific visual options\r\n\t\t\t\tif (point.options) {\r\n\t\t\t\t\tfor (key in pointAttrToOptions) {\r\n\t\t\t\t\t\tif (defined(normalOptions[pointAttrToOptions[key]])) {\r\n\t\t\t\t\t\t\thasPointSpecificOptions = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// a specific marker config object is defined for the individual point:\r\n\t\t\t\t// create it's own attribute collection\r\n\t\t\t\tif (hasPointSpecificOptions) {\r\n\t\t\t\t\tnormalOptions = normalOptions || {};\r\n\t\t\t\t\tpointAttr = [];\r\n\t\t\t\t\tstateOptions = normalOptions.states || {}; // reassign for individual point\r\n\t\t\t\t\tpointStateOptionsHover = stateOptions[HOVER_STATE] = stateOptions[HOVER_STATE] || {};\r\n\r\n\t\t\t\t\t// Handle colors for column and pies\r\n\t\t\t\t\tif (!seriesOptions.marker) { // column, bar, point\r\n\t\t\t\t\t\t// If no hover color is given, brighten the normal color. #1619, #2579\r\n\t\t\t\t\t\tpointStateOptionsHover.color = pointStateOptionsHover.color || (!point.options.color && stateOptionsHover[(point.negative && seriesNegativeColor ? 'negativeColor' : 'color')]) ||\r\n\t\t\t\t\t\t\tColor(point.color)\r\n\t\t\t\t\t\t\t\t.brighten(pointStateOptionsHover.brightness || stateOptionsHover.brightness)\r\n\t\t\t\t\t\t\t\t.get();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// normal point state inherits series wide normal state\r\n\t\t\t\t\tattr = { color: point.color }; // #868\r\n\t\t\t\t\tif (!defaultFillColor) { // Individual point color or negative color markers (#2219)\r\n\t\t\t\t\t\tattr.fillColor = point.color;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!defaultLineColor) {\r\n\t\t\t\t\t\tattr.lineColor = point.color; // Bubbles take point color, line markers use white\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpointAttr[NORMAL_STATE] = series.convertAttribs(extend(attr, normalOptions), seriesPointAttr[NORMAL_STATE]);\r\n\r\n\t\t\t\t\t// inherit from point normal and series hover\r\n\t\t\t\t\tpointAttr[HOVER_STATE] = series.convertAttribs(\r\n\t\t\t\t\t\tstateOptions[HOVER_STATE],\r\n\t\t\t\t\t\tseriesPointAttr[HOVER_STATE],\r\n\t\t\t\t\t\tpointAttr[NORMAL_STATE]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// inherit from point normal and series hover\r\n\t\t\t\t\tpointAttr[SELECT_STATE] = series.convertAttribs(\r\n\t\t\t\t\t\tstateOptions[SELECT_STATE],\r\n\t\t\t\t\t\tseriesPointAttr[SELECT_STATE],\r\n\t\t\t\t\t\tpointAttr[NORMAL_STATE]\r\n\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t// no marker config object is created: copy a reference to the series-wide\r\n\t\t\t\t// attribute collection\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpointAttr = seriesPointAttr;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpoint.pointAttr = pointAttr;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Clear DOM objects and free up memory\r\n\t */\r\n\tdestroy: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart,\r\n\t\t\tissue134 = /AppleWebKit\\/533/.test(userAgent),\r\n\t\t\tdestroy,\r\n\t\t\ti,\r\n\t\t\tdata = series.data || [],\r\n\t\t\tpoint,\r\n\t\t\tprop,\r\n\t\t\taxis;\r\n\r\n\t\t// add event hook\r\n\t\tfireEvent(series, 'destroy');\r\n\r\n\t\t// remove all events\r\n\t\tremoveEvent(series);\r\n\r\n\t\t// erase from axes\r\n\t\teach(series.axisTypes || [], function (AXIS) {\r\n\t\t\taxis = series[AXIS];\r\n\t\t\tif (axis) {\r\n\t\t\t\terase(axis.series, series);\r\n\t\t\t\taxis.isDirty = axis.forceRedraw = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// remove legend items\r\n\t\tif (series.legendItem) {\r\n\t\t\tseries.chart.legend.destroyItem(series);\r\n\t\t}\r\n\r\n\t\t// destroy all points with their elements\r\n\t\ti = data.length;\r\n\t\twhile (i--) {\r\n\t\t\tpoint = data[i];\r\n\t\t\tif (point && point.destroy) {\r\n\t\t\t\tpoint.destroy();\r\n\t\t\t}\r\n\t\t}\r\n\t\tseries.points = null;\r\n\r\n\t\t// Clear the animation timeout if we are destroying the series during initial animation\r\n\t\tclearTimeout(series.animationTimeout);\r\n\r\n\t\t// destroy all SVGElements associated to the series\r\n\t\teach(['area', 'graph', 'dataLabelsGroup', 'group', 'markerGroup', 'tracker',\r\n\t\t\t\t'graphNeg', 'areaNeg', 'posClip', 'negClip'], function (prop) {\r\n\t\t\tif (series[prop]) {\r\n\r\n\t\t\t\t// issue 134 workaround\r\n\t\t\t\tdestroy = issue134 && prop === 'group' ?\r\n\t\t\t\t\t'hide' :\r\n\t\t\t\t\t'destroy';\r\n\r\n\t\t\t\tseries[prop][destroy]();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// remove from hoverSeries\r\n\t\tif (chart.hoverSeries === series) {\r\n\t\t\tchart.hoverSeries = null;\r\n\t\t}\r\n\t\terase(chart.series, series);\r\n\r\n\t\t// clear all members\r\n\t\tfor (prop in series) {\r\n\t\t\tdelete series[prop];\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Return the graph path of a segment\r\n\t */\r\n\tgetSegmentPath: function (segment) {\r\n\t\tvar series = this,\r\n\t\t\tsegmentPath = [],\r\n\t\t\tstep = series.options.step;\r\n\r\n\t\t// build the segment line\r\n\t\teach(segment, function (point, i) {\r\n\r\n\t\t\tvar plotX = point.plotX,\r\n\t\t\t\tplotY = point.plotY,\r\n\t\t\t\tlastPoint;\r\n\r\n\t\t\tif (series.getPointSpline) { // generate the spline as defined in the SplineSeries object\r\n\t\t\t\tsegmentPath.push.apply(segmentPath, series.getPointSpline(segment, point, i));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// moveTo or lineTo\r\n\t\t\t\tsegmentPath.push(i ? L : M);\r\n\r\n\t\t\t\t// step line?\r\n\t\t\t\tif (step && i) {\r\n\t\t\t\t\tlastPoint = segment[i - 1];\r\n\t\t\t\t\tif (step === 'right') {\r\n\t\t\t\t\t\tsegmentPath.push(\r\n\t\t\t\t\t\t\tlastPoint.plotX,\r\n\t\t\t\t\t\t\tplotY\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t} else if (step === 'center') {\r\n\t\t\t\t\t\tsegmentPath.push(\r\n\t\t\t\t\t\t\t(lastPoint.plotX + plotX) / 2,\r\n\t\t\t\t\t\t\tlastPoint.plotY,\r\n\t\t\t\t\t\t\t(lastPoint.plotX + plotX) / 2,\r\n\t\t\t\t\t\t\tplotY\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsegmentPath.push(\r\n\t\t\t\t\t\t\tplotX,\r\n\t\t\t\t\t\t\tlastPoint.plotY\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// normal line to next point\r\n\t\t\t\tsegmentPath.push(\r\n\t\t\t\t\tpoint.plotX,\r\n\t\t\t\t\tpoint.plotY\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn segmentPath;\r\n\t},\r\n\r\n\t/**\r\n\t * Get the graph path\r\n\t */\r\n\tgetGraphPath: function () {\r\n\t\tvar series = this,\r\n\t\t\tgraphPath = [],\r\n\t\t\tsegmentPath,\r\n\t\t\tsinglePoints = []; // used in drawTracker\r\n\r\n\t\t// Divide into segments and build graph and area paths\r\n\t\teach(series.segments, function (segment) {\r\n\r\n\t\t\tsegmentPath = series.getSegmentPath(segment);\r\n\r\n\t\t\t// add the segment to the graph, or a single point for tracking\r\n\t\t\tif (segment.length > 1) {\r\n\t\t\t\tgraphPath = graphPath.concat(segmentPath);\r\n\t\t\t} else {\r\n\t\t\t\tsinglePoints.push(segment[0]);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Record it for use in drawGraph and drawTracker, and return graphPath\r\n\t\tseries.singlePoints = singlePoints;\r\n\t\tseries.graphPath = graphPath;\r\n\r\n\t\treturn graphPath;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Draw the actual graph\r\n\t */\r\n\tdrawGraph: function () {\r\n\t\tvar series = this,\r\n\t\t\toptions = this.options,\r\n\t\t\tprops = [['graph', options.lineColor || this.color, options.dashStyle]],\r\n\t\t\tlineWidth = options.lineWidth,\r\n\t\t\troundCap = options.linecap !== 'square',\r\n\t\t\tgraphPath = this.getGraphPath(),\r\n\t\t\tfillColor = (this.fillGraph && this.color) || NONE, // polygon series use filled graph\r\n\t\t\tzones = this.zones;\r\n\r\n\t\teach(zones, function (threshold, i) {\r\n\t\t\tprops.push(['colorGraph' + i, threshold.color || series.color, threshold.dashStyle || options.dashStyle]);\r\n\t\t});\r\n\t\t\r\n\t\t// Draw the graph\r\n\t\teach(props, function (prop, i) {\r\n\t\t\tvar graphKey = prop[0],\r\n\t\t\t\tgraph = series[graphKey],\r\n\t\t\t\tattribs;\r\n\r\n\t\t\tif (graph) {\r\n\t\t\t\tstop(graph); // cancel running animations, #459\r\n\t\t\t\tgraph.animate({ d: graphPath });\r\n\r\n\t\t\t} else if ((lineWidth || fillColor) && graphPath.length) { // #1487\r\n\t\t\t\tattribs = {\r\n\t\t\t\t\tstroke: prop[1],\r\n\t\t\t\t\t'stroke-width': lineWidth,\r\n\t\t\t\t\tfill: fillColor,\r\n\t\t\t\t\tzIndex: 1 // #1069\r\n\t\t\t\t};\r\n\t\t\t\tif (prop[2]) {\r\n\t\t\t\t\tattribs.dashstyle = prop[2];\r\n\t\t\t\t} else if (roundCap) {\r\n\t\t\t\t\tattribs['stroke-linecap'] = attribs['stroke-linejoin'] = 'round';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tseries[graphKey] = series.chart.renderer.path(graphPath)\r\n\t\t\t\t\t.attr(attribs)\r\n\t\t\t\t\t.add(series.group)\r\n\t\t\t\t\t.shadow(!i && options.shadow);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Clip the graphs into the positive and negative coloured graphs\r\n\t */\r\n\tapplyZones: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = this.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tzones = this.zones,\r\n\t\t\ttranslatedFrom,\r\n\t\t\ttranslatedTo,\r\n\t\t\tclips = this.clips || [],\r\n\t\t\tclipAttr,\r\n\t\t\tgraph = this.graph,\r\n\t\t\tarea = this.area,\r\n\t\t\tchartSizeMax = mathMax(chart.chartWidth, chart.chartHeight),\r\n\t\t\tzoneAxis = this.zoneAxis || 'y',\r\n\t\t\taxis = this[zoneAxis + 'Axis'],\r\n\t\t\treversed = axis.reversed,\r\n\t\t\thoriz = axis.horiz,\r\n\t\t\tignoreZones = false;\r\n\r\n\t\tif (zones.length && (graph || area)) {\r\n\t\t\t// The use of the Color Threshold assumes there are no gaps\r\n\t\t\t// so it is safe to hide the original graph and area\r\n\t\t\tgraph.hide();\r\n\t\t\tif (area) { area.hide(); }\r\n\r\n\t\t\t// Create the clips\r\n\t\t\teach(zones, function (threshold, i) {\r\n\t\t\t\ttranslatedFrom = pick(translatedTo, (reversed ? (horiz ? chart.plotWidth : 0) : (horiz ? 0 : axis.toPixels(axis.min))));\r\n\t\t\t\ttranslatedTo = mathRound(axis.toPixels(pick(threshold.value, axis.max), true));\r\n\r\n\t\t\t\tif (ignoreZones) {\r\n\t\t\t\t\ttranslatedFrom = translatedTo = axis.toPixels(axis.max);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (axis.isXAxis) {\r\n\t\t\t\t\tclipAttr = {\r\n\t\t\t\t\t\tx: reversed ? translatedTo : translatedFrom,\r\n\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\twidth: Math.abs(translatedFrom - translatedTo), \r\n\t\t\t\t\t\theight: chartSizeMax\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (!horiz) {\r\n\t\t\t\t\t\tclipAttr.x = chart.plotHeight - clipAttr.x;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclipAttr = {\r\n\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\ty: reversed ? translatedFrom : translatedTo,\r\n\t\t\t\t\t\twidth: chartSizeMax, \r\n\t\t\t\t\t\theight: Math.abs(translatedFrom - translatedTo)\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (horiz) {\r\n\t\t\t\t\t\tclipAttr.y = chart.plotWidth - clipAttr.y;\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\r\n\t\t\t\t/// VML SUPPPORT\r\n\t\t\t\tif (chart.inverted && renderer.isVML) {\r\n\t\t\t\t\tif (axis.isXAxis) {\t\t\t\r\n\t\t\t\t\t\tclipAttr = {\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: reversed ? translatedFrom : translatedTo,\r\n\t\t\t\t\t\t\theight: clipAttr.width,\r\n\t\t\t\t\t\t\twidth: chart.chartWidth\r\n\t\t\t\t\t\t};\t\t\r\n\t\t\t\t\t} else {\t\t\t\t\r\n\t\t\t\t\t\tclipAttr = {\r\n\t\t\t\t\t\t\tx: clipAttr.y - chart.plotLeft - chart.spacingBox.x,\r\n\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t\twidth: clipAttr.height,\r\n\t\t\t\t\t\t\theight: chart.chartHeight\r\n\t\t\t\t\t\t};\t\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t/// END OF VML SUPPORT\r\n\r\n\t\t\t\tif (clips[i]) {\r\n\t\t\t\t\tclips[i].animate(clipAttr);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclips[i] = renderer.clipRect(clipAttr);\r\n\r\n\t\t\t\t\tseries['colorGraph' + i].clip(clips[i]);\r\n\r\n\t\t\t\t\tif (area) {\r\n\t\t\t\t\t\tseries['colorArea' + i].clip(clips[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// if this zone extends out of the axis, ignore the others\r\n\t\t\t\tignoreZones = threshold.value > axis.max;\r\n\t\t\t});\r\n\t\t\tthis.clips = clips;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Initialize and perform group inversion on series.group and series.markerGroup\r\n\t */\r\n\tinvertGroups: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart;\r\n\r\n\t\t// Pie, go away (#1736)\r\n\t\tif (!series.xAxis) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// A fixed size is needed for inversion to work\r\n\t\tfunction setInvert() {\r\n\t\t\tvar size = {\r\n\t\t\t\twidth: series.yAxis.len,\r\n\t\t\t\theight: series.xAxis.len\r\n\t\t\t};\r\n\r\n\t\t\teach(['group', 'markerGroup'], function (groupName) {\r\n\t\t\t\tif (series[groupName]) {\r\n\t\t\t\t\tseries[groupName].attr(size).invert();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\taddEvent(chart, 'resize', setInvert); // do it on resize\r\n\t\taddEvent(series, 'destroy', function () {\r\n\t\t\tremoveEvent(chart, 'resize', setInvert);\r\n\t\t});\r\n\r\n\t\t// Do it now\r\n\t\tsetInvert(); // do it now\r\n\r\n\t\t// On subsequent render and redraw, just do setInvert without setting up events again\r\n\t\tseries.invertGroups = setInvert;\r\n\t},\r\n\r\n\t/**\r\n\t * General abstraction for creating plot groups like series.group, series.dataLabelsGroup and\r\n\t * series.markerGroup. On subsequent calls, the group will only be adjusted to the updated plot size.\r\n\t */\r\n\tplotGroup: function (prop, name, visibility, zIndex, parent) {\r\n\t\tvar group = this[prop],\r\n\t\t\tisNew = !group;\r\n\r\n\t\t// Generate it on first call\r\n\t\tif (isNew) {\r\n\t\t\tthis[prop] = group = this.chart.renderer.g(name)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tvisibility: visibility,\r\n\t\t\t\t\tzIndex: zIndex || 0.1 // IE8 needs this\r\n\t\t\t\t})\r\n\t\t\t\t.add(parent);\r\n\t\t}\r\n\t\t// Place it on first and subsequent (redraw) calls\r\n\t\tgroup[isNew ? 'attr' : 'animate'](this.getPlotBox());\r\n\t\treturn group;\r\n\t},\r\n\r\n\t/**\r\n\t * Get the translation and scale for the plot area of this series\r\n\t */\r\n\tgetPlotBox: function () {\r\n\t\tvar chart = this.chart,\r\n\t\t\txAxis = this.xAxis,\r\n\t\t\tyAxis = this.yAxis;\r\n\r\n\t\t// Swap axes for inverted (#2339)\r\n\t\tif (chart.inverted) {\r\n\t\t\txAxis = yAxis;\r\n\t\t\tyAxis = this.xAxis;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttranslateX: xAxis ? xAxis.left : chart.plotLeft,\r\n\t\t\ttranslateY: yAxis ? yAxis.top : chart.plotTop,\r\n\t\t\tscaleX: 1, // #1623\r\n\t\t\tscaleY: 1\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Render the graph and markers\r\n\t */\r\n\trender: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart,\r\n\t\t\tgroup,\r\n\t\t\toptions = series.options,\r\n\t\t\tanimation = options.animation,\r\n\t\t\t// Animation doesn't work in IE8 quirks when the group div is hidden,\r\n\t\t\t// and looks bad in other oldIE\r\n\t\t\tanimDuration = (animation && !!series.animate && chart.renderer.isSVG && pick(animation.duration, 500)) || 0,\r\n\t\t\tvisibility = series.visible ? VISIBLE : HIDDEN,\r\n\t\t\tzIndex = options.zIndex,\r\n\t\t\thasRendered = series.hasRendered,\r\n\t\t\tchartSeriesGroup = chart.seriesGroup;\r\n\r\n\t\t// the group\r\n\t\tgroup = series.plotGroup(\r\n\t\t\t'group',\r\n\t\t\t'series',\r\n\t\t\tvisibility,\r\n\t\t\tzIndex,\r\n\t\t\tchartSeriesGroup\r\n\t\t);\r\n\r\n\t\tseries.markerGroup = series.plotGroup(\r\n\t\t\t'markerGroup',\r\n\t\t\t'markers',\r\n\t\t\tvisibility,\r\n\t\t\tzIndex,\r\n\t\t\tchartSeriesGroup\r\n\t\t);\r\n\r\n\t\t// initiate the animation\r\n\t\tif (animDuration) {\r\n\t\t\tseries.animate(true);\r\n\t\t}\r\n\r\n\t\t// cache attributes for shapes\r\n\t\tseries.getAttribs();\r\n\r\n\t\t// SVGRenderer needs to know this before drawing elements (#1089, #1795)\r\n\t\tgroup.inverted = series.isCartesian ? chart.inverted : false;\r\n\r\n\t\t// draw the graph if any\r\n\t\tif (series.drawGraph) {\r\n\t\t\tseries.drawGraph();\r\n\t\t\tseries.applyZones();\r\n\t\t}\r\n\r\n\t\teach(series.points, function (point) {\r\n\t\t\tif (point.redraw) {\r\n\t\t\t\tpoint.redraw();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// draw the data labels (inn pies they go before the points)\r\n\t\tif (series.drawDataLabels) {\r\n\t\t\tseries.drawDataLabels();\r\n\t\t}\r\n\r\n\t\t// draw the points\r\n\t\tif (series.visible) {\r\n\t\t\tseries.drawPoints();\r\n\t\t}\r\n\r\n\r\n\t\t// draw the mouse tracking area\r\n\t\tif (series.drawTracker && series.options.enableMouseTracking !== false) {\r\n\t\t\tseries.drawTracker();\r\n\t\t}\r\n\r\n\t\t// Handle inverted series and tracker groups\r\n\t\tif (chart.inverted) {\r\n\t\t\tseries.invertGroups();\r\n\t\t}\r\n\r\n\t\t// Initial clipping, must be defined after inverting groups for VML. Applies to columns etc. (#3839).\r\n\t\tif (options.clip !== false && !series.sharedClipKey && !hasRendered) {\r\n\t\t\tgroup.clip(chart.clipRect);\r\n\t\t}\r\n\r\n\t\t// Run the animation\r\n\t\tif (animDuration) {\r\n\t\t\tseries.animate();\r\n\t\t} \r\n\r\n\t\t// Call the afterAnimate function on animation complete (but don't overwrite the animation.complete option\r\n\t\t// which should be available to the user).\r\n\t\tif (!hasRendered) {\r\n\t\t\tif (animDuration) {\r\n\t\t\t\tseries.animationTimeout = setTimeout(function () {\r\n\t\t\t\t\tseries.afterAnimate();\r\n\t\t\t\t}, animDuration);\r\n\t\t\t} else {\r\n\t\t\t\tseries.afterAnimate();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tseries.isDirty = series.isDirtyData = false; // means data is in accordance with what you see\r\n\t\t// (See #322) series.isDirty = series.isDirtyData = false; // means data is in accordance with what you see\r\n\t\tseries.hasRendered = true;\r\n\t},\r\n\r\n\t/**\r\n\t * Redraw the series after an update in the axes.\r\n\t */\r\n\tredraw: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart,\r\n\t\t\twasDirtyData = series.isDirtyData, // cache it here as it is set to false in render, but used after\r\n\t\t\tgroup = series.group,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\tyAxis = series.yAxis;\r\n\r\n\t\t// reposition on resize\r\n\t\tif (group) {\r\n\t\t\tif (chart.inverted) {\r\n\t\t\t\tgroup.attr({\r\n\t\t\t\t\twidth: chart.plotWidth,\r\n\t\t\t\t\theight: chart.plotHeight\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tgroup.animate({\r\n\t\t\t\ttranslateX: pick(xAxis && xAxis.left, chart.plotLeft),\r\n\t\t\t\ttranslateY: pick(yAxis && yAxis.top, chart.plotTop)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tseries.translate();\r\n\t\tseries.render();\r\n\r\n\t\tif (wasDirtyData) {\r\n\t\t\tdelete this.kdTree; // #3868 recalculate the kdtree with dirty data\r\n\t\t\tfireEvent(series, 'updatedData');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * KD Tree && PointSearching Implementation\r\n\t */\r\n\r\n\tkdDimensions: 1,\r\n\tkdTree: null,\r\n\tkdAxisArray: ['plotX', 'plotY'],\r\n\tkdComparer: 'distX',\r\n\r\n\tsearchPoint: function (e) {\r\n\t\tvar series = this,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\tyAxis = series.yAxis,\r\n\t\t\tinverted = series.chart.inverted;\r\n\t\t\r\n\t\te.plotX = inverted ? xAxis.len - e.chartY + xAxis.pos : e.chartX - xAxis.pos;\r\n\t\te.plotY = inverted ? yAxis.len - e.chartX + yAxis.pos : e.chartY - yAxis.pos;\r\n\r\n\t\treturn this.searchKDTree(e);\r\n\t},\r\n\r\n\tbuildKDTree: function () {\r\n\t\tvar series = this,\r\n\t\t\tdimensions = series.kdDimensions;\r\n\r\n\t\t// Internal function\r\n\t\tfunction _kdtree(points, depth, dimensions) {\r\n\t\t\tvar axis, median, length = points && points.length;\r\n\r\n\t\t\tif (length) {\r\n\r\n\t\t\t\t// alternate between the axis\r\n\t\t\t\taxis = series.kdAxisArray[depth % dimensions];\r\n\r\n\t\t\t\t// sort point array\r\n\t\t\t\tpoints.sort(function(a, b) {\r\n\t\t\t\t\treturn a[axis] - b[axis];\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\t\tmedian = Math.floor(length / 2);\r\n\t\t\t\t\r\n\t\t\t\t// build and return node\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpoint: points[median],\r\n\t\t\t\t\tleft: _kdtree(points.slice(0, median), depth + 1, dimensions),\r\n\t\t\t\t\tright: _kdtree(points.slice(median + 1), depth + 1, dimensions)\r\n\t\t\t\t};\r\n\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Start the recursive build process with a clone of the points array (#3873)\r\n\t\tfunction startRecursive() {\r\n\t\t\tseries.kdTree = _kdtree(series.points.slice(), dimensions, dimensions);\t\t\r\n\t\t}\r\n\r\n\t\tdelete series.kdTree;\r\n\t\t\r\n\t\tif (series.options.kdSync) {  // For testing tooltips, don't build async\r\n\t\t\tstartRecursive();\r\n\t\t} else {\r\n\t\t\tsetTimeout(startRecursive);\r\n\t\t}\r\n\t},\r\n\r\n\tsearchKDTree: function (point) {\r\n\t\tvar series = this,\r\n\t\t\tkdComparer = this.kdComparer,\r\n\t\t\tkdX = this.kdAxisArray[0],\r\n\t\t\tkdY = this.kdAxisArray[1];\r\n\r\n\t\t// Internal function\r\n\t\tfunction _distance(p1, p2) {\r\n\t\t\tvar x = (defined(p1[kdX]) && defined(p2[kdX])) ? Math.pow(p1[kdX] - p2[kdX], 2) : null,\r\n\t\t\t\ty = (defined(p1[kdY]) && defined(p2[kdY])) ? Math.pow(p1[kdY] - p2[kdY], 2) : null,\r\n\t\t\t\tr = (x || 0) + (y || 0);\r\n\t\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tdistX: defined(x) ? Math.sqrt(x) : Number.MAX_VALUE,\r\n\t\t\t\tdistY: defined(y) ? Math.sqrt(y) : Number.MAX_VALUE,\r\n\t\t\t\tdistR: defined(r) ? Math.sqrt(r) : Number.MAX_VALUE\r\n\t\t\t};\r\n\t\t}\r\n\t\tfunction _search(search, tree, depth, dimensions) {\r\n\t\t\tvar point = tree.point,\r\n\t\t\t\taxis = series.kdAxisArray[depth % dimensions],\r\n\t\t\t\ttdist,\r\n\t\t\t\tsideA,\r\n\t\t\t\tsideB,\r\n\t\t\t\tret = point,\r\n\t\t\t\tnPoint1,\r\n\t\t\t\tnPoint2;\r\n\t\t\tpoint.dist = _distance(search, point);\r\n\r\n\t\t\t// Pick side based on distance to splitting point\r\n\t\t\ttdist = search[axis] - point[axis];\r\n\t\t\tsideA = tdist < 0 ? 'left' : 'right';\r\n\r\n\t\t\t// End of tree\r\n\t\t\tif (tree[sideA]) {\r\n\t\t\t\tnPoint1 =_search(search, tree[sideA], depth + 1, dimensions);\r\n\r\n\t\t\t\tret = (nPoint1.dist[kdComparer] < ret.dist[kdComparer] ? nPoint1 : point);\r\n\r\n\t\t\t\tsideB = tdist < 0 ? 'right' : 'left';\r\n\t\t\t\tif (tree[sideB]) {\r\n\t\t\t\t\t// compare distance to current best to splitting point to decide wether to check side B or not\r\n\t\t\t\t\tif (Math.sqrt(tdist*tdist) < ret.dist[kdComparer]) {\r\n\t\t\t\t\t\tnPoint2 = _search(search, tree[sideB], depth + 1, dimensions);\r\n\t\t\t\t\t\tret = (nPoint2.dist[kdComparer] < ret.dist[kdComparer] ? nPoint2 : ret);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t}\r\n\r\n\t\tif (!this.kdTree) {\r\n\t\t\tthis.buildKDTree();\r\n\t\t}\r\n\r\n\t\tif (this.kdTree) {\r\n\t\t\treturn _search(point, \r\n\t\t\t\tthis.kdTree, this.kdDimensions, this.kdDimensions);\r\n\t\t}\r\n\t}\r\n\r\n}; // end Series prototype\r\n\r\n/**\r\n * The class for stack items\r\n */\r\nfunction StackItem(axis, options, isNegative, x, stackOption) {\r\n\t\r\n\tvar inverted = axis.chart.inverted;\r\n\r\n\tthis.axis = axis;\r\n\r\n\t// Tells if the stack is negative\r\n\tthis.isNegative = isNegative;\r\n\r\n\t// Save the options to be able to style the label\r\n\tthis.options = options;\r\n\r\n\t// Save the x value to be able to position the label later\r\n\tthis.x = x;\r\n\r\n\t// Initialize total value\r\n\tthis.total = null;\r\n\r\n\t// This will keep each points' extremes stored by series.index and point index\r\n\tthis.points = {};\r\n\r\n\t// Save the stack option on the series configuration object, and whether to treat it as percent\r\n\tthis.stack = stackOption;\r\n\r\n\t// The align options and text align varies on whether the stack is negative and\r\n\t// if the chart is inverted or not.\r\n\t// First test the user supplied value, then use the dynamic.\r\n\tthis.alignOptions = {\r\n\t\talign: options.align || (inverted ? (isNegative ? 'left' : 'right') : 'center'),\r\n\t\tverticalAlign: options.verticalAlign || (inverted ? 'middle' : (isNegative ? 'bottom' : 'top')),\r\n\t\ty: pick(options.y, inverted ? 4 : (isNegative ? 14 : -6)),\r\n\t\tx: pick(options.x, inverted ? (isNegative ? -6 : 6) : 0)\r\n\t};\r\n\r\n\tthis.textAlign = options.textAlign || (inverted ? (isNegative ? 'right' : 'left') : 'center');\r\n}\r\n\r\nStackItem.prototype = {\r\n\tdestroy: function () {\r\n\t\tdestroyObjectProperties(this, this.axis);\r\n\t},\r\n\r\n\t/**\r\n\t * Renders the stack total label and adds it to the stack label group.\r\n\t */\r\n\trender: function (group) {\r\n\t\tvar options = this.options,\r\n\t\t\tformatOption = options.format,\r\n\t\t\tstr = formatOption ?\r\n\t\t\t\tformat(formatOption, this) : \r\n\t\t\t\toptions.formatter.call(this);  // format the text in the label\r\n\r\n\t\t// Change the text to reflect the new total and set visibility to hidden in case the serie is hidden\r\n\t\tif (this.label) {\r\n\t\t\tthis.label.attr({text: str, visibility: HIDDEN});\r\n\t\t// Create new label\r\n\t\t} else {\r\n\t\t\tthis.label =\r\n\t\t\t\tthis.axis.chart.renderer.text(str, null, null, options.useHTML)\t\t// dummy positions, actual position updated with setOffset method in columnseries\r\n\t\t\t\t\t.css(options.style)\t\t\t\t// apply style\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\talign: this.textAlign,\t\t\t\t// fix the text-anchor\r\n\t\t\t\t\t\trotation: options.rotation,\t// rotation\r\n\t\t\t\t\t\tvisibility: HIDDEN\t\t\t\t\t// hidden until setOffset is called\r\n\t\t\t\t\t})\t\t\t\t\r\n\t\t\t\t\t.add(group);\t\t\t\t\t\t\t// add to the labels-group\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Sets the offset that the stack has from the x value and repositions the label.\r\n\t */\r\n\tsetOffset: function (xOffset, xWidth) {\r\n\t\tvar stackItem = this,\r\n\t\t\taxis = stackItem.axis,\r\n\t\t\tchart = axis.chart,\r\n\t\t\tinverted = chart.inverted,\r\n\t\t\tneg = this.isNegative,\t\t\t\t\t\t\t// special treatment is needed for negative stacks\r\n\t\t\ty = axis.translate(axis.usePercentage ? 100 : this.total, 0, 0, 0, 1), // stack value translated mapped to chart coordinates\r\n\t\t\tyZero = axis.translate(0),\t\t\t\t\t\t// stack origin\r\n\t\t\th = mathAbs(y - yZero),\t\t\t\t\t\t\t// stack height\r\n\t\t\tx = chart.xAxis[0].translate(this.x) + xOffset,\t// stack x position\r\n\t\t\tplotHeight = chart.plotHeight,\r\n\t\t\tstackBox = {\t// this is the box for the complete stack\r\n\t\t\t\tx: inverted ? (neg ? y : y - h) : x,\r\n\t\t\t\ty: inverted ? plotHeight - x - xWidth : (neg ? (plotHeight - y - h) : plotHeight - y),\r\n\t\t\t\twidth: inverted ? h : xWidth,\r\n\t\t\t\theight: inverted ? xWidth : h\r\n\t\t\t},\r\n\t\t\tlabel = this.label,\r\n\t\t\talignAttr;\r\n\t\t\r\n\t\tif (label) {\r\n\t\t\tlabel.align(this.alignOptions, null, stackBox);\t// align the label to the box\r\n\t\t\t\t\r\n\t\t\t// Set visibility (#678)\r\n\t\t\talignAttr = label.alignAttr;\r\n\t\t\tlabel[this.options.crop === false || chart.isInsidePlot(alignAttr.x, alignAttr.y) ? 'show' : 'hide'](true);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n// Stacking methods defined on the Axis prototype\r\n\r\n/**\r\n * Build the stacks from top down\r\n */\r\nAxis.prototype.buildStacks = function () {\r\n\tvar series = this.series,\r\n\t\treversedStacks = pick(this.options.reversedStacks, true),\r\n\t\ti = series.length;\r\n\tif (!this.isXAxis) {\r\n\t\tthis.usePercentage = false;\r\n\t\twhile (i--) {\r\n\t\t\tseries[reversedStacks ? i : series.length - i - 1].setStackedPoints();\r\n\t\t}\r\n\t\t// Loop up again to compute percent stack\r\n\t\tif (this.usePercentage) {\r\n\t\t\tfor (i = 0; i < series.length; i++) {\r\n\t\t\t\tseries[i].setPercentStacks();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nAxis.prototype.renderStackTotals = function () {\r\n\tvar axis = this,\r\n\t\tchart = axis.chart,\r\n\t\trenderer = chart.renderer,\r\n\t\tstacks = axis.stacks,\r\n\t\tstackKey, \r\n\t\toneStack, \r\n\t\tstackCategory,\r\n\t\tstackTotalGroup = axis.stackTotalGroup;\r\n\r\n\t// Create a separate group for the stack total labels\r\n\tif (!stackTotalGroup) {\r\n\t\taxis.stackTotalGroup = stackTotalGroup =\r\n\t\t\trenderer.g('stack-labels')\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tvisibility: VISIBLE,\r\n\t\t\t\t\tzIndex: 6\r\n\t\t\t\t})\r\n\t\t\t\t.add();\r\n\t}\r\n\r\n\t// plotLeft/Top will change when y axis gets wider so we need to translate the\r\n\t// stackTotalGroup at every render call. See bug #506 and #516\r\n\tstackTotalGroup.translate(chart.plotLeft, chart.plotTop);\r\n\r\n\t// Render each stack total\r\n\tfor (stackKey in stacks) {\r\n\t\toneStack = stacks[stackKey];\r\n\t\tfor (stackCategory in oneStack) {\r\n\t\t\toneStack[stackCategory].render(stackTotalGroup);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n// Stacking methods defnied for Series prototype\r\n\r\n/**\r\n * Adds series' points value to corresponding stack\r\n */\r\nSeries.prototype.setStackedPoints = function () {\r\n\tif (!this.options.stacking || (this.visible !== true && this.chart.options.chart.ignoreHiddenSeries !== false)) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar series = this,\r\n\t\txData = series.processedXData,\r\n\t\tyData = series.processedYData,\r\n\t\tstackedYData = [],\r\n\t\tyDataLength = yData.length,\r\n\t\tseriesOptions = series.options,\r\n\t\tthreshold = seriesOptions.threshold,\r\n\t\tstackOption = seriesOptions.stack,\r\n\t\tstacking = seriesOptions.stacking,\r\n\t\tstackKey = series.stackKey,\r\n\t\tnegKey = '-' + stackKey,\r\n\t\tnegStacks = series.negStacks,\r\n\t\tyAxis = series.yAxis,\r\n\t\tstacks = yAxis.stacks,\r\n\t\toldStacks = yAxis.oldStacks,\r\n\t\tisNegative,\r\n\t\tstack,\r\n\t\tother,\r\n\t\tkey,\r\n\t\tpointKey,\r\n\t\ti,\r\n\t\tx,\r\n\t\ty;\r\n\r\n\t// loop over the non-null y values and read them into a local array\r\n\tfor (i = 0; i < yDataLength; i++) {\r\n\t\tx = xData[i];\r\n\t\ty = yData[i];\r\n\t\tpointKey = series.index + ',' + i;\r\n\r\n\t\t// Read stacked values into a stack based on the x value,\r\n\t\t// the sign of y and the stack key. Stacking is also handled for null values (#739)\r\n\t\tisNegative = negStacks && y < threshold;\r\n\t\tkey = isNegative ? negKey : stackKey;\r\n\r\n\t\t// Create empty object for this stack if it doesn't exist yet\r\n\t\tif (!stacks[key]) {\r\n\t\t\tstacks[key] = {};\r\n\t\t}\r\n\r\n\t\t// Initialize StackItem for this x\r\n\t\tif (!stacks[key][x]) {\r\n\t\t\tif (oldStacks[key] && oldStacks[key][x]) {\r\n\t\t\t\tstacks[key][x] = oldStacks[key][x];\r\n\t\t\t\tstacks[key][x].total = null;\r\n\t\t\t} else {\r\n\t\t\t\tstacks[key][x] = new StackItem(yAxis, yAxis.options.stackLabels, isNegative, x, stackOption);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If the StackItem doesn't exist, create it first\r\n\t\tstack = stacks[key][x];\r\n\t\tstack.points[pointKey] = [stack.cum || 0];\r\n\r\n\t\t// Add value to the stack total\r\n\t\tif (stacking === 'percent') {\r\n\r\n\t\t\t// Percent stacked column, totals are the same for the positive and negative stacks\r\n\t\t\tother = isNegative ? stackKey : negKey;\r\n\t\t\tif (negStacks && stacks[other] && stacks[other][x]) {\r\n\t\t\t\tother = stacks[other][x];\r\n\t\t\t\tstack.total = other.total = mathMax(other.total, stack.total) + mathAbs(y) || 0;\r\n\r\n\t\t\t// Percent stacked areas\r\n\t\t\t} else {\r\n\t\t\t\tstack.total = correctFloat(stack.total + (mathAbs(y) || 0));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstack.total = correctFloat(stack.total + (y || 0));\r\n\t\t}\r\n\r\n\t\tstack.cum = (stack.cum || 0) + (y || 0);\r\n\r\n\t\tstack.points[pointKey].push(stack.cum);\r\n\t\tstackedYData[i] = stack.cum;\r\n\r\n\t}\r\n\r\n\tif (stacking === 'percent') {\r\n\t\tyAxis.usePercentage = true;\r\n\t}\r\n\r\n\tthis.stackedYData = stackedYData; // To be used in getExtremes\r\n\r\n\t// Reset old stacks\r\n\tyAxis.oldStacks = {};\r\n};\r\n\r\n/**\r\n * Iterate over all stacks and compute the absolute values to percent\r\n */\r\nSeries.prototype.setPercentStacks = function () {\r\n\tvar series = this,\r\n\t\tstackKey = series.stackKey,\r\n\t\tstacks = series.yAxis.stacks,\r\n\t\tprocessedXData = series.processedXData;\r\n\r\n\teach([stackKey, '-' + stackKey], function (key) {\r\n\t\tvar i = processedXData.length,\r\n\t\t\tx,\r\n\t\t\tstack,\r\n\t\t\tpointExtremes,\r\n\t\t\ttotalFactor;\r\n\r\n\t\twhile (i--) {\r\n\t\t\tx = processedXData[i];\r\n\t\t\tstack = stacks[key] && stacks[key][x];\r\n\t\t\tpointExtremes = stack && stack.points[series.index + ',' + i];\r\n\t\t\tif (pointExtremes) {\r\n\t\t\t\ttotalFactor = stack.total ? 100 / stack.total : 0;\r\n\t\t\t\tpointExtremes[0] = correctFloat(pointExtremes[0] * totalFactor); // Y bottom value\r\n\t\t\t\tpointExtremes[1] = correctFloat(pointExtremes[1] * totalFactor); // Y value\r\n\t\t\t\tseries.stackedYData[i] = pointExtremes[1];\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\n// Extend the Chart prototype for dynamic methods\r\nextend(Chart.prototype, {\r\n\r\n\t/**\r\n\t * Add a series dynamically after  time\r\n\t *\r\n\t * @param {Object} options The config options\r\n\t * @param {Boolean} redraw Whether to redraw the chart after adding. Defaults to true.\r\n\t * @param {Boolean|Object} animation Whether to apply animation, and optionally animation\r\n\t *    configuration\r\n\t *\r\n\t * @return {Object} series The newly created series object\r\n\t */\r\n\taddSeries: function (options, redraw, animation) {\r\n\t\tvar series,\r\n\t\t\tchart = this;\r\n\r\n\t\tif (options) {\r\n\t\t\tredraw = pick(redraw, true); // defaults to true\r\n\r\n\t\t\tfireEvent(chart, 'addSeries', { options: options }, function () {\r\n\t\t\t\tseries = chart.initSeries(options);\r\n\r\n\t\t\t\tchart.isDirtyLegend = true; // the series array is out of sync with the display\r\n\t\t\t\tchart.linkSeries();\r\n\t\t\t\tif (redraw) {\r\n\t\t\t\t\tchart.redraw(animation);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn series;\r\n\t},\r\n\r\n\t/**\r\n     * Add an axis to the chart\r\n     * @param {Object} options The axis option\r\n     * @param {Boolean} isX Whether it is an X axis or a value axis\r\n     */\r\n\taddAxis: function (options, isX, redraw, animation) {\r\n\t\tvar key = isX ? 'xAxis' : 'yAxis',\r\n\t\t\tchartOptions = this.options,\r\n\t\t\taxis;\r\n\r\n\t\t/*jslint unused: false*/\r\n\t\taxis = new Axis(this, merge(options, {\r\n\t\t\tindex: this[key].length,\r\n\t\t\tisX: isX\r\n\t\t}));\r\n\t\t/*jslint unused: true*/\r\n\r\n\t\t// Push the new axis options to the chart options\r\n\t\tchartOptions[key] = splat(chartOptions[key] || {});\r\n\t\tchartOptions[key].push(options);\r\n\r\n\t\tif (pick(redraw, true)) {\r\n\t\t\tthis.redraw(animation);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Dim the chart and show a loading text or symbol\r\n\t * @param {String} str An optional text to show in the loading label instead of the default one\r\n\t */\r\n\tshowLoading: function (str) {\r\n\t\tvar chart = this,\r\n\t\t\toptions = chart.options,\r\n\t\t\tloadingDiv = chart.loadingDiv,\r\n\t\t\tloadingOptions = options.loading,\r\n\t\t\tsetLoadingSize = function () {\r\n\t\t\t\tif (loadingDiv) {\r\n\t\t\t\t\tcss(loadingDiv, {\r\n\t\t\t\t\t\tleft: chart.plotLeft + PX,\r\n\t\t\t\t\t\ttop: chart.plotTop + PX,\r\n\t\t\t\t\t\twidth: chart.plotWidth + PX,\r\n\t\t\t\t\t\theight: chart.plotHeight + PX\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t// create the layer at the first call\r\n\t\tif (!loadingDiv) {\r\n\t\t\tchart.loadingDiv = loadingDiv = createElement(DIV, {\r\n\t\t\t\tclassName: PREFIX + 'loading'\r\n\t\t\t}, extend(loadingOptions.style, {\r\n\t\t\t\tzIndex: 10,\r\n\t\t\t\tdisplay: NONE\r\n\t\t\t}), chart.container);\r\n\r\n\t\t\tchart.loadingSpan = createElement(\r\n\t\t\t\t'span',\r\n\t\t\t\tnull,\r\n\t\t\t\tloadingOptions.labelStyle,\r\n\t\t\t\tloadingDiv\r\n\t\t\t);\r\n\t\t\taddEvent(chart, 'redraw', setLoadingSize); // #1080\r\n\t\t}\r\n\r\n\t\t// update text\r\n\t\tchart.loadingSpan.innerHTML = str || options.lang.loading;\r\n\r\n\t\t// show it\r\n\t\tif (!chart.loadingShown) {\r\n\t\t\tcss(loadingDiv, {\r\n\t\t\t\topacity: 0,\r\n\t\t\t\tdisplay: ''\t\t\t\t\r\n\t\t\t});\r\n\t\t\tanimate(loadingDiv, {\r\n\t\t\t\topacity: loadingOptions.style.opacity\r\n\t\t\t}, {\r\n\t\t\t\tduration: loadingOptions.showDuration || 0\r\n\t\t\t});\r\n\t\t\tchart.loadingShown = true;\r\n\t\t}\r\n\t\tsetLoadingSize();\r\n\t},\r\n\r\n\t/**\r\n\t * Hide the loading layer\r\n\t */\r\n\thideLoading: function () {\r\n\t\tvar options = this.options,\r\n\t\t\tloadingDiv = this.loadingDiv;\r\n\r\n\t\tif (loadingDiv) {\r\n\t\t\tanimate(loadingDiv, {\r\n\t\t\t\topacity: 0\r\n\t\t\t}, {\r\n\t\t\t\tduration: options.loading.hideDuration || 100,\r\n\t\t\t\tcomplete: function () {\r\n\t\t\t\t\tcss(loadingDiv, { display: NONE });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.loadingShown = false;\r\n\t}\r\n});\r\n\r\n// extend the Point prototype for dynamic methods\r\nextend(Point.prototype, {\r\n\t/**\r\n\t * Update the point with new options (typically x/y data) and optionally redraw the series.\r\n\t *\r\n\t * @param {Object} options Point options as defined in the series.data array\r\n\t * @param {Boolean} redraw Whether to redraw the chart or wait for an explicit call\r\n\t * @param {Boolean|Object} animation Whether to apply animation, and optionally animation\r\n\t *    configuration\r\n\t *\r\n\t */\r\n\tupdate: function (options, redraw, animation, runEvent) {\r\n\t\tvar point = this,\r\n\t\t\tseries = point.series,\r\n\t\t\tgraphic = point.graphic,\r\n\t\t\ti,\r\n\t\t\tchart = series.chart,\r\n\t\t\tseriesOptions = series.options,\r\n\t\t\tnames = series.xAxis && series.xAxis.names;\r\n\r\n\t\tredraw = pick(redraw, true);\r\n\r\n\t\tfunction update() {\r\n\r\n\t\t\tpoint.applyOptions(options);\r\n\r\n\t\t\t// Update visuals\r\n\t\t\tif (isObject(options) && !isArray(options)) {\r\n\t\t\t\t// Defer the actual redraw until getAttribs has been called (#3260)\r\n\t\t\t\tpoint.redraw = function () {\r\n\t\t\t\t\tif (graphic) {\r\n\t\t\t\t\t\tif (options && options.marker && options.marker.symbol) {\r\n\t\t\t\t\t\t\tpoint.graphic = graphic.destroy();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tgraphic.attr(point.pointAttr[point.state || '']);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (options && options.dataLabels && point.dataLabel) { // #2468\r\n\t\t\t\t\t\tpoint.dataLabel = point.dataLabel.destroy();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpoint.redraw = null;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// record changes in the parallel arrays\r\n\t\t\ti = point.index;\r\n\t\t\tseries.updateParallelArrays(point, i);\r\n\t\t\tif (names && point.name) {\r\n\t\t\t\tnames[point.x] = point.name;\r\n\t\t\t}\r\n\r\n\t\t\tseriesOptions.data[i] = point.options;\r\n\r\n\t\t\t// redraw\r\n\t\t\tseries.isDirty = series.isDirtyData = true;\r\n\t\t\tif (!series.fixedBox && series.hasCartesianSeries) { // #1906, #2320\r\n\t\t\t\tchart.isDirtyBox = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (seriesOptions.legendType === 'point') { // #1831, #1885\r\n\t\t\t\tseries.updateTotals();\r\n\t\t\t\tchart.legend.clearItems();\r\n\t\t\t}\r\n\t\t\tif (redraw) {\r\n\t\t\t\tchart.redraw(animation);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Fire the event with a default handler of doing the update\r\n\t\tif (runEvent === false) { // When called from setData\r\n\t\t\tupdate();\r\n\t\t} else {\r\n\t\t\tpoint.firePointEvent('update', { options: options }, update);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Remove a point and optionally redraw the series and if necessary the axes\r\n\t * @param {Boolean} redraw Whether to redraw the chart or wait for an explicit call\r\n\t * @param {Boolean|Object} animation Whether to apply animation, and optionally animation\r\n\t *    configuration\r\n\t */\r\n\tremove: function (redraw, animation) {\r\n\t\tthis.series.removePoint(inArray(this, this.series.data), redraw, animation);\r\n\t}\r\n});\r\n\r\n// Extend the series prototype for dynamic methods\r\nextend(Series.prototype, {\r\n\t/**\r\n\t * Add a point dynamically after chart load time\r\n\t * @param {Object} options Point options as given in series.data\r\n\t * @param {Boolean} redraw Whether to redraw the chart or wait for an explicit call\r\n\t * @param {Boolean} shift If shift is true, a point is shifted off the start\r\n\t *    of the series as one is appended to the end.\r\n\t * @param {Boolean|Object} animation Whether to apply animation, and optionally animation\r\n\t *    configuration\r\n\t */\r\n\taddPoint: function (options, redraw, shift, animation) {\r\n\t\tvar series = this,\r\n\t\t\tseriesOptions = series.options,\r\n\t\t\tdata = series.data,\r\n\t\t\tgraph = series.graph,\r\n\t\t\tarea = series.area,\r\n\t\t\tchart = series.chart,\r\n\t\t\tnames = series.xAxis && series.xAxis.names,\r\n\t\t\tcurrentShift = (graph && graph.shift) || 0,\r\n\t\t\tdataOptions = seriesOptions.data,\r\n\t\t\tpoint,\r\n\t\t\tisInTheMiddle,\r\n\t\t\txData = series.xData,\r\n\t\t\tx,\r\n\t\t\ti;\r\n\r\n\t\tsetAnimation(animation, chart);\r\n\r\n\t\t// Make graph animate sideways\r\n\t\tif (shift) {\r\n\t\t\teach([graph, area, series.graphNeg, series.areaNeg], function (shape) {\r\n\t\t\t\tif (shape) {\r\n\t\t\t\t\tshape.shift = currentShift + 1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (area) {\r\n\t\t\tarea.isArea = true; // needed in animation, both with and without shift\r\n\t\t}\r\n\r\n\t\t// Optional redraw, defaults to true\r\n\t\tredraw = pick(redraw, true);\r\n\r\n\t\t// Get options and push the point to xData, yData and series.options. In series.generatePoints\r\n\t\t// the Point instance will be created on demand and pushed to the series.data array.\r\n\t\tpoint = { series: series };\r\n\t\tseries.pointClass.prototype.applyOptions.apply(point, [options]);\r\n\t\tx = point.x;\r\n\r\n\t\t// Get the insertion point\r\n\t\ti = xData.length;\r\n\t\tif (series.requireSorting && x < xData[i - 1]) {\r\n\t\t\tisInTheMiddle = true;\r\n\t\t\twhile (i && xData[i - 1] > x) {\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tseries.updateParallelArrays(point, 'splice', i, 0, 0); // insert undefined item\r\n\t\tseries.updateParallelArrays(point, i); // update it\r\n\r\n\t\tif (names && point.name) {\r\n\t\t\tnames[x] = point.name;\r\n\t\t}\r\n\t\tdataOptions.splice(i, 0, options);\r\n\r\n\t\tif (isInTheMiddle) {\r\n\t\t\tseries.data.splice(i, 0, null);\r\n\t\t\tseries.processData();\r\n\t\t}\r\n\r\n\t\t// Generate points to be added to the legend (#1329)\r\n\t\tif (seriesOptions.legendType === 'point') {\r\n\t\t\tseries.generatePoints();\r\n\t\t}\r\n\r\n\t\t// Shift the first point off the parallel arrays\r\n\t\t// todo: consider series.removePoint(i) method\r\n\t\tif (shift) {\r\n\t\t\tif (data[0] && data[0].remove) {\r\n\t\t\t\tdata[0].remove(false);\r\n\t\t\t} else {\r\n\t\t\t\tdata.shift();\r\n\t\t\t\tseries.updateParallelArrays(point, 'shift');\r\n\r\n\t\t\t\tdataOptions.shift();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// redraw\r\n\t\tseries.isDirty = true;\r\n\t\tseries.isDirtyData = true;\r\n\t\tif (redraw) {\r\n\t\t\tseries.getAttribs(); // #1937\r\n\t\t\tchart.redraw();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Remove a point (rendered or not), by index\r\n\t */\r\n\tremovePoint: function (i, redraw, animation) {\r\n\r\n\t\tvar series = this,\r\n\t\t\tdata = series.data,\r\n\t\t\tpoint = data[i],\r\n\t\t\tpoints = series.points,\r\n\t\t\tchart = series.chart,\r\n\t\t\tremove = function () {\r\n\r\n\t\t\t\tif (data.length === points.length) {\r\n\t\t\t\t\tpoints.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t\tdata.splice(i, 1);\r\n\t\t\t\tseries.options.data.splice(i, 1);\r\n\t\t\t\tseries.updateParallelArrays(point || { series: series }, 'splice', i, 1);\r\n\r\n\t\t\t\tif (point) {\r\n\t\t\t\t\tpoint.destroy();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// redraw\r\n\t\t\t\tseries.isDirty = true;\r\n\t\t\t\tseries.isDirtyData = true;\r\n\t\t\t\tif (redraw) {\r\n\t\t\t\t\tchart.redraw();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\tsetAnimation(animation, chart);\r\n\t\tredraw = pick(redraw, true);\r\n\r\n\t\t// Fire the event with a default handler of removing the point\r\n\t\tif (point) {\r\n\t\t\tpoint.firePointEvent('remove', null, remove);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Remove a series and optionally redraw the chart\r\n\t *\r\n\t * @param {Boolean} redraw Whether to redraw the chart or wait for an explicit call\r\n\t * @param {Boolean|Object} animation Whether to apply animation, and optionally animation\r\n\t *    configuration\r\n\t */\r\n\r\n\tremove: function (redraw, animation) {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart;\r\n\t\tredraw = pick(redraw, true);\r\n\r\n\t\tif (!series.isRemoving) {  /* prevent triggering native event in jQuery\r\n\t\t\t\t(calling the remove function from the remove event) */\r\n\t\t\tseries.isRemoving = true;\r\n\r\n\t\t\t// fire the event with a default handler of removing the point\r\n\t\t\tfireEvent(series, 'remove', null, function () {\r\n\r\n\r\n\t\t\t\t// destroy elements\r\n\t\t\t\tseries.destroy();\r\n\r\n\r\n\t\t\t\t// redraw\r\n\t\t\t\tchart.isDirtyLegend = chart.isDirtyBox = true;\r\n\t\t\t\tchart.linkSeries();\r\n\r\n\t\t\t\tif (redraw) {\r\n\t\t\t\t\tchart.redraw(animation);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\tseries.isRemoving = false;\r\n\t},\r\n\r\n\t/**\r\n\t * Update the series with a new set of options\r\n\t */\r\n\tupdate: function (newOptions, redraw) {\r\n\t\tvar series = this,\r\n\t\t\tchart = this.chart,\r\n\t\t\t// must use user options when changing type because this.options is merged\r\n\t\t\t// in with type specific plotOptions\r\n\t\t\toldOptions = this.userOptions,\r\n\t\t\toldType = this.type,\r\n\t\t\tproto = seriesTypes[oldType].prototype,\r\n\t\t\tpreserve = ['group', 'markerGroup', 'dataLabelsGroup'],\r\n\t\t\tn;\r\n\r\n\t\t// If we're changing type or zIndex, create new groups (#3380, #3404)\r\n\t\tif ((newOptions.type && newOptions.type !== oldType) || newOptions.zIndex !== undefined) {\r\n\t\t\tpreserve.length = 0;\r\n\t\t}\r\n\r\n\t\t// Make sure groups are not destroyed (#3094)\r\n\t\teach(preserve, function (prop) {\r\n\t\t\tpreserve[prop] = series[prop];\r\n\t\t\tdelete series[prop];\r\n\t\t});\r\n\r\n\t\t// Do the merge, with some forced options\r\n\t\tnewOptions = merge(oldOptions, {\r\n\t\t\tanimation: false,\r\n\t\t\tindex: this.index,\r\n\t\t\tpointStart: this.xData[0] // when updating after addPoint\r\n\t\t}, { data: this.options.data }, newOptions);\r\n\r\n\t\t// Destroy the series and delete all properties. Reinsert all methods \r\n\t\t// and properties from the new type prototype (#2270, #3719)\r\n\t\tthis.remove(false);\r\n\t\tfor (n in proto) {\r\n\t\t\tthis[n] = UNDEFINED;\r\n\t\t}\r\n\t\textend(this, seriesTypes[newOptions.type || oldType].prototype);\r\n\r\n\t\t// Re-register groups (#3094)\r\n\t\teach(preserve, function (prop) {\r\n\t\t\tseries[prop] = preserve[prop];\r\n\t\t});\r\n\r\n\t\tthis.init(chart, newOptions);\r\n\t\tchart.linkSeries(); // Links are lost in this.remove (#3028)\r\n\t\tif (pick(redraw, true)) {\r\n\t\t\tchart.redraw(false);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Extend the Axis.prototype for dynamic methods\r\nextend(Axis.prototype, {\r\n\r\n\t/**\r\n\t * Update the axis with a new options structure\r\n\t */\r\n\tupdate: function (newOptions, redraw) {\r\n\t\tvar chart = this.chart;\r\n\r\n\t\tnewOptions = chart.options[this.coll][this.options.index] = merge(this.userOptions, newOptions);\r\n\r\n\t\tthis.destroy(true);\r\n\t\tthis._addedPlotLB = UNDEFINED; // #1611, #2887\r\n\r\n\t\tthis.init(chart, extend(newOptions, { events: UNDEFINED }));\r\n\r\n\t\tchart.isDirtyBox = true;\r\n\t\tif (pick(redraw, true)) {\r\n\t\t\tchart.redraw();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n     * Remove the axis from the chart\r\n     */\r\n\tremove: function (redraw) {\r\n\t\tvar chart = this.chart,\r\n\t\t\tkey = this.coll, // xAxis or yAxis\r\n\t\t\taxisSeries = this.series,\r\n\t\t\ti = axisSeries.length;\r\n\r\n\t\t// Remove associated series (#2687)\r\n\t\twhile (i--) {\r\n\t\t\tif (axisSeries[i]) {\r\n\t\t\t\taxisSeries[i].remove(false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remove the axis\r\n\t\terase(chart.axes, this);\r\n\t\terase(chart[key], this);\r\n\t\tchart.options[key].splice(this.options.index, 1);\r\n\t\teach(chart[key], function (axis, i) { // Re-index, #1706\r\n\t\t\taxis.options.index = i;\r\n\t\t});\r\n\t\tthis.destroy();\r\n\t\tchart.isDirtyBox = true;\r\n\r\n\t\tif (pick(redraw, true)) {\r\n\t\t\tchart.redraw();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Update the axis title by options\r\n\t */\r\n\tsetTitle: function (newTitleOptions, redraw) {\r\n\t\tthis.update({ title: newTitleOptions }, redraw);\r\n\t},\r\n\r\n\t/**\r\n\t * Set new axis categories and optionally redraw\r\n\t * @param {Array} categories\r\n\t * @param {Boolean} redraw\r\n\t */\r\n\tsetCategories: function (categories, redraw) {\r\n\t\tthis.update({ categories: categories }, redraw);\r\n\t}\r\n\r\n});\r\n\r\n\r\n/**\r\n * LineSeries object\r\n */\r\nvar LineSeries = extendClass(Series);\r\nseriesTypes.line = LineSeries;\r\n\r\n/**\r\n * Set the default options for area\r\n */\r\ndefaultPlotOptions.area = merge(defaultSeriesOptions, {\r\n\tthreshold: 0\r\n\t// trackByArea: false,\r\n\t// lineColor: null, // overrides color, but lets fillColor be unaltered\r\n\t// fillOpacity: 0.75,\r\n\t// fillColor: null\r\n});\r\n\r\n/**\r\n * AreaSeries object\r\n */\r\nvar AreaSeries = extendClass(Series, {\r\n\ttype: 'area',\r\n\t/**\r\n\t * For stacks, don't split segments on null values. Instead, draw null values with \r\n\t * no marker. Also insert dummy points for any X position that exists in other series\r\n\t * in the stack.\r\n\t */ \r\n\tgetSegments: function () {\r\n\t\tvar series = this,\r\n\t\t\tsegments = [],\r\n\t\t\tsegment = [],\r\n\t\t\tkeys = [],\r\n\t\t\txAxis = this.xAxis,\r\n\t\t\tyAxis = this.yAxis,\r\n\t\t\tstack = yAxis.stacks[this.stackKey],\r\n\t\t\tpointMap = {},\r\n\t\t\tplotX,\r\n\t\t\tplotY,\r\n\t\t\tpoints = this.points,\r\n\t\t\tconnectNulls = this.options.connectNulls,\r\n\t\t\ti,\r\n\t\t\tx;\r\n\r\n\t\tif (this.options.stacking && !this.cropped) { // cropped causes artefacts in Stock, and perf issue\r\n\t\t\t// Create a map where we can quickly look up the points by their X value.\r\n\t\t\tfor (i = 0; i < points.length; i++) {\r\n\t\t\t\tpointMap[points[i].x] = points[i];\r\n\t\t\t}\r\n\r\n\t\t\t// Sort the keys (#1651)\r\n\t\t\tfor (x in stack) {\r\n\t\t\t\tif (stack[x].total !== null) { // nulled after switching between grouping and not (#1651, #2336)\r\n\t\t\t\t\tkeys.push(+x);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tkeys.sort(function (a, b) {\r\n\t\t\t\treturn a - b;\r\n\t\t\t});\r\n\r\n\t\t\teach(keys, function (x) {\r\n\t\t\t\tvar y = 0,\r\n\t\t\t\t\tstackPoint;\r\n\r\n\t\t\t\tif (connectNulls && (!pointMap[x] || pointMap[x].y === null)) { // #1836\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// The point exists, push it to the segment\r\n\t\t\t\t} else if (pointMap[x]) {\r\n\t\t\t\t\tsegment.push(pointMap[x]);\r\n\r\n\t\t\t\t// There is no point for this X value in this series, so we \r\n\t\t\t\t// insert a dummy point in order for the areas to be drawn\r\n\t\t\t\t// correctly.\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Loop down the stack to find the series below this one that has\r\n\t\t\t\t\t// a value (#1991)\r\n\t\t\t\t\tfor (i = series.index; i <= yAxis.series.length; i++) {\r\n\t\t\t\t\t\tstackPoint = stack[x].points[i + ',' + x];\r\n\t\t\t\t\t\tif (stackPoint) {\r\n\t\t\t\t\t\t\ty = stackPoint[1];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tplotX = xAxis.translate(x);\r\n\t\t\t\t\tplotY = yAxis.toPixels(y, true);\r\n\t\t\t\t\tsegment.push({ \r\n\t\t\t\t\t\ty: null, \r\n\t\t\t\t\t\tplotX: plotX,\r\n\t\t\t\t\t\tclientX: plotX, \r\n\t\t\t\t\t\tplotY: plotY, \r\n\t\t\t\t\t\tyBottom: plotY,\r\n\t\t\t\t\t\tonMouseOver: noop\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (segment.length) {\r\n\t\t\t\tsegments.push(segment);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tSeries.prototype.getSegments.call(this);\r\n\t\t\tsegments = this.segments;\r\n\t\t}\r\n\r\n\t\tthis.segments = segments;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Extend the base Series getSegmentPath method by adding the path for the area.\r\n\t * This path is pushed to the series.areaPath property.\r\n\t */\r\n\tgetSegmentPath: function (segment) {\r\n\t\t\r\n\t\tvar segmentPath = Series.prototype.getSegmentPath.call(this, segment), // call base method\r\n\t\t\tareaSegmentPath = [].concat(segmentPath), // work on a copy for the area path\r\n\t\t\ti,\r\n\t\t\toptions = this.options,\r\n\t\t\tsegLength = segmentPath.length,\r\n\t\t\ttranslatedThreshold = this.yAxis.getThreshold(options.threshold), // #2181\r\n\t\t\tyBottom;\r\n\t\t\r\n\t\tif (segLength === 3) { // for animation from 1 to two points\r\n\t\t\tareaSegmentPath.push(L, segmentPath[1], segmentPath[2]);\r\n\t\t}\r\n\t\tif (options.stacking && !this.closedStacks) {\r\n\t\t\t\r\n\t\t\t// Follow stack back. Todo: implement areaspline. A general solution could be to \r\n\t\t\t// reverse the entire graphPath of the previous series, though may be hard with\r\n\t\t\t// splines and with series with different extremes\r\n\t\t\tfor (i = segment.length - 1; i >= 0; i--) {\r\n\r\n\t\t\t\tyBottom = pick(segment[i].yBottom, translatedThreshold);\r\n\t\t\t\r\n\t\t\t\t// step line?\r\n\t\t\t\tif (i < segment.length - 1 && options.step) {\r\n\t\t\t\t\tareaSegmentPath.push(segment[i + 1].plotX, yBottom);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tareaSegmentPath.push(segment[i].plotX, yBottom);\r\n\t\t\t}\r\n\r\n\t\t} else { // follow zero line back\r\n\t\t\tthis.closeSegment(areaSegmentPath, segment, translatedThreshold);\r\n\t\t}\r\n\t\tthis.areaPath = this.areaPath.concat(areaSegmentPath);\r\n\t\treturn segmentPath;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Extendable method to close the segment path of an area. This is overridden in polar \r\n\t * charts.\r\n\t */\r\n\tcloseSegment: function (path, segment, translatedThreshold) {\r\n\t\tpath.push(\r\n\t\t\tL,\r\n\t\t\tsegment[segment.length - 1].plotX,\r\n\t\t\ttranslatedThreshold,\r\n\t\t\tL,\r\n\t\t\tsegment[0].plotX,\r\n\t\t\ttranslatedThreshold\r\n\t\t);\r\n\t},\r\n\t\r\n\t/**\r\n\t * Draw the graph and the underlying area. This method calls the Series base\r\n\t * function and adds the area. The areaPath is calculated in the getSegmentPath\r\n\t * method called from Series.prototype.drawGraph.\r\n\t */\r\n\tdrawGraph: function () {\r\n\t\t\r\n\t\t// Define or reset areaPath\r\n\t\tthis.areaPath = [];\r\n\t\t\r\n\t\t// Call the base method\r\n\t\tSeries.prototype.drawGraph.apply(this);\r\n\t\t\r\n\t\t// Define local variables\r\n\t\tvar series = this,\r\n\t\t\tareaPath = this.areaPath,\r\n\t\t\toptions = this.options,\r\n\t\t\tzones = this.zones,\r\n\t\t\tprops = [['area', this.color, options.fillColor]]; // area name, main color, fill color\r\n\t\t\r\n\t\teach(zones, function (threshold, i) {\r\n\t\t\tprops.push(['colorArea' + i, threshold.color || series.color, threshold.fillColor || options.fillColor]);\r\n\t\t});\r\n\t\teach(props, function (prop) {\r\n\t\t\tvar areaKey = prop[0],\r\n\t\t\t\tarea = series[areaKey];\r\n\t\t\t\t\r\n\t\t\t// Create or update the area\r\n\t\t\tif (area) { // update\r\n\t\t\t\tarea.animate({ d: areaPath });\r\n\t\r\n\t\t\t} else { // create\r\n\t\t\t\tseries[areaKey] = series.chart.renderer.path(areaPath)\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\tfill: pick(\r\n\t\t\t\t\t\t\tprop[2],\r\n\t\t\t\t\t\t\tColor(prop[1]).setOpacity(pick(options.fillOpacity, 0.75)).get()\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tzIndex: 0 // #1069\r\n\t\t\t\t\t}).add(series.group);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tdrawLegendSymbol: LegendSymbolMixin.drawRectangle\r\n});\r\n\r\nseriesTypes.area = AreaSeries;\r\n/**\r\n * Set the default options for spline\r\n */\r\ndefaultPlotOptions.spline = merge(defaultSeriesOptions);\r\n\r\n/**\r\n * SplineSeries object\r\n */\r\nvar SplineSeries = extendClass(Series, {\r\n\ttype: 'spline',\r\n\r\n\t/**\r\n\t * Get the spline segment from a given point's previous neighbour to the given point\r\n\t */\r\n\tgetPointSpline: function (segment, point, i) {\r\n\t\tvar smoothing = 1.5, // 1 means control points midway between points, 2 means 1/3 from the point, 3 is 1/4 etc\r\n\t\t\tdenom = smoothing + 1,\r\n\t\t\tplotX = point.plotX,\r\n\t\t\tplotY = point.plotY,\r\n\t\t\tlastPoint = segment[i - 1],\r\n\t\t\tnextPoint = segment[i + 1],\r\n\t\t\tleftContX,\r\n\t\t\tleftContY,\r\n\t\t\trightContX,\r\n\t\t\trightContY,\r\n\t\t\tret;\r\n\r\n\t\t// find control points\r\n\t\tif (lastPoint && nextPoint) {\r\n\t\t\r\n\t\t\tvar lastX = lastPoint.plotX,\r\n\t\t\t\tlastY = lastPoint.plotY,\r\n\t\t\t\tnextX = nextPoint.plotX,\r\n\t\t\t\tnextY = nextPoint.plotY,\r\n\t\t\t\tcorrection;\r\n\r\n\t\t\tleftContX = (smoothing * plotX + lastX) / denom;\r\n\t\t\tleftContY = (smoothing * plotY + lastY) / denom;\r\n\t\t\trightContX = (smoothing * plotX + nextX) / denom;\r\n\t\t\trightContY = (smoothing * plotY + nextY) / denom;\r\n\r\n\t\t\t// have the two control points make a straight line through main point\r\n\t\t\tcorrection = ((rightContY - leftContY) * (rightContX - plotX)) /\r\n\t\t\t\t(rightContX - leftContX) + plotY - rightContY;\r\n\r\n\t\t\tleftContY += correction;\r\n\t\t\trightContY += correction;\r\n\r\n\t\t\t// to prevent false extremes, check that control points are between\r\n\t\t\t// neighbouring points' y values\r\n\t\t\tif (leftContY > lastY && leftContY > plotY) {\r\n\t\t\t\tleftContY = mathMax(lastY, plotY);\r\n\t\t\t\trightContY = 2 * plotY - leftContY; // mirror of left control point\r\n\t\t\t} else if (leftContY < lastY && leftContY < plotY) {\r\n\t\t\t\tleftContY = mathMin(lastY, plotY);\r\n\t\t\t\trightContY = 2 * plotY - leftContY;\r\n\t\t\t}\r\n\t\t\tif (rightContY > nextY && rightContY > plotY) {\r\n\t\t\t\trightContY = mathMax(nextY, plotY);\r\n\t\t\t\tleftContY = 2 * plotY - rightContY;\r\n\t\t\t} else if (rightContY < nextY && rightContY < plotY) {\r\n\t\t\t\trightContY = mathMin(nextY, plotY);\r\n\t\t\t\tleftContY = 2 * plotY - rightContY;\r\n\t\t\t}\r\n\r\n\t\t\t// record for drawing in next point\r\n\t\t\tpoint.rightContX = rightContX;\r\n\t\t\tpoint.rightContY = rightContY;\r\n\r\n\t\t}\r\n\t\t\r\n\t\t// Visualize control points for debugging\r\n\t\t/*\r\n\t\tif (leftContX) {\r\n\t\t\tthis.chart.renderer.circle(leftContX + this.chart.plotLeft, leftContY + this.chart.plotTop, 2)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tstroke: 'red',\r\n\t\t\t\t\t'stroke-width': 1,\r\n\t\t\t\t\tfill: 'none'\r\n\t\t\t\t})\r\n\t\t\t\t.add();\r\n\t\t\tthis.chart.renderer.path(['M', leftContX + this.chart.plotLeft, leftContY + this.chart.plotTop,\r\n\t\t\t\t'L', plotX + this.chart.plotLeft, plotY + this.chart.plotTop])\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tstroke: 'red',\r\n\t\t\t\t\t'stroke-width': 1\r\n\t\t\t\t})\r\n\t\t\t\t.add();\r\n\t\t\tthis.chart.renderer.circle(rightContX + this.chart.plotLeft, rightContY + this.chart.plotTop, 2)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tstroke: 'green',\r\n\t\t\t\t\t'stroke-width': 1,\r\n\t\t\t\t\tfill: 'none'\r\n\t\t\t\t})\r\n\t\t\t\t.add();\r\n\t\t\tthis.chart.renderer.path(['M', rightContX + this.chart.plotLeft, rightContY + this.chart.plotTop,\r\n\t\t\t\t'L', plotX + this.chart.plotLeft, plotY + this.chart.plotTop])\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tstroke: 'green',\r\n\t\t\t\t\t'stroke-width': 1\r\n\t\t\t\t})\r\n\t\t\t\t.add();\r\n\t\t}\r\n\t\t*/\r\n\r\n\t\t// moveTo or lineTo\r\n\t\tif (!i) {\r\n\t\t\tret = [M, plotX, plotY];\r\n\t\t} else { // curve from last point to this\r\n\t\t\tret = [\r\n\t\t\t\t'C',\r\n\t\t\t\tlastPoint.rightContX || lastPoint.plotX,\r\n\t\t\t\tlastPoint.rightContY || lastPoint.plotY,\r\n\t\t\t\tleftContX || plotX,\r\n\t\t\t\tleftContY || plotY,\r\n\t\t\t\tplotX,\r\n\t\t\t\tplotY\r\n\t\t\t];\r\n\t\t\tlastPoint.rightContX = lastPoint.rightContY = null; // reset for updating series later\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n});\r\nseriesTypes.spline = SplineSeries;\r\n\r\n/**\r\n * Set the default options for areaspline\r\n */\r\ndefaultPlotOptions.areaspline = merge(defaultPlotOptions.area);\r\n\r\n/**\r\n * AreaSplineSeries object\r\n */\r\nvar areaProto = AreaSeries.prototype,\r\n\tAreaSplineSeries = extendClass(SplineSeries, {\r\n\t\ttype: 'areaspline',\r\n\t\tclosedStacks: true, // instead of following the previous graph back, follow the threshold back\r\n\t\t\r\n\t\t// Mix in methods from the area series\r\n\t\tgetSegmentPath: areaProto.getSegmentPath,\r\n\t\tcloseSegment: areaProto.closeSegment,\r\n\t\tdrawGraph: areaProto.drawGraph,\r\n\t\tdrawLegendSymbol: LegendSymbolMixin.drawRectangle\r\n\t});\r\n\r\nseriesTypes.areaspline = AreaSplineSeries;\r\n\r\n/**\r\n * Set the default options for column\r\n */\r\ndefaultPlotOptions.column = merge(defaultSeriesOptions, {\r\n\tborderColor: '#FFFFFF',\r\n\t//borderWidth: 1,\r\n\tborderRadius: 0,\r\n\t//colorByPoint: undefined,\r\n\tgroupPadding: 0.2,\r\n\t//grouping: true,\r\n\tmarker: null, // point options are specified in the base options\r\n\tpointPadding: 0.1,\r\n\t//pointWidth: null,\r\n\tminPointLength: 0,\r\n\tcropThreshold: 50, // when there are more points, they will not animate out of the chart on xAxis.setExtremes\r\n\tpointRange: null, // null means auto, meaning 1 in a categorized axis and least distance between points if not categories\r\n\tstates: {\r\n\t\thover: {\r\n\t\t\tbrightness: 0.1,\r\n\t\t\tshadow: false,\r\n\t\t\thalo: false\r\n\t\t},\r\n\t\tselect: {\r\n\t\t\tcolor: '#C0C0C0',\r\n\t\t\tborderColor: '#000000',\r\n\t\t\tshadow: false\r\n\t\t}\r\n\t},\r\n\tdataLabels: {\r\n\t\talign: null, // auto\r\n\t\tverticalAlign: null, // auto\r\n\t\ty: null\r\n\t},\r\n\tstickyTracking: false,\r\n\ttooltip: {\r\n\t\tdistance: 6\r\n\t},\r\n\tthreshold: 0\r\n});\r\n\r\n/**\r\n * ColumnSeries object\r\n */\r\nvar ColumnSeries = extendClass(Series, {\r\n\ttype: 'column',\r\n\tpointAttrToOptions: { // mapping between SVG attributes and the corresponding options\r\n\t\tstroke: 'borderColor',\r\n\t\tfill: 'color',\r\n\t\tr: 'borderRadius'\r\n\t},\r\n\tcropShoulder: 0,\r\n\tdirectTouch: true, // When tooltip is not shared, this series (and derivatives) requires direct touch/hover. KD-tree does not apply.\r\n\ttrackerGroups: ['group', 'dataLabelsGroup'],\r\n\tnegStacks: true, // use separate negative stacks, unlike area stacks where a negative \r\n\t\t// point is substracted from previous (#1910)\r\n\t\r\n\t/**\r\n\t * Initialize the series\r\n\t */\r\n\tinit: function () {\r\n\t\tSeries.prototype.init.apply(this, arguments);\r\n\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart;\r\n\r\n\t\t// if the series is added dynamically, force redraw of other\r\n\t\t// series affected by a new column\r\n\t\tif (chart.hasRendered) {\r\n\t\t\teach(chart.series, function (otherSeries) {\r\n\t\t\t\tif (otherSeries.type === series.type) {\r\n\t\t\t\t\totherSeries.isDirty = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Return the width and x offset of the columns adjusted for grouping, groupPadding, pointPadding,\r\n\t * pointWidth etc. \r\n\t */\r\n\tgetColumnMetrics: function () {\r\n\r\n\t\tvar series = this,\r\n\t\t\toptions = series.options,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\tyAxis = series.yAxis,\r\n\t\t\treversedXAxis = xAxis.reversed,\r\n\t\t\tstackKey,\r\n\t\t\tstackGroups = {},\r\n\t\t\tcolumnIndex,\r\n\t\t\tcolumnCount = 0;\r\n\r\n\t\t// Get the total number of column type series.\r\n\t\t// This is called on every series. Consider moving this logic to a\r\n\t\t// chart.orderStacks() function and call it on init, addSeries and removeSeries\r\n\t\tif (options.grouping === false) {\r\n\t\t\tcolumnCount = 1;\r\n\t\t} else {\r\n\t\t\teach(series.chart.series, function (otherSeries) {\r\n\t\t\t\tvar otherOptions = otherSeries.options,\r\n\t\t\t\t\totherYAxis = otherSeries.yAxis;\r\n\t\t\t\tif (otherSeries.type === series.type && otherSeries.visible &&\r\n\t\t\t\t\t\tyAxis.len === otherYAxis.len && yAxis.pos === otherYAxis.pos) {  // #642, #2086\r\n\t\t\t\t\tif (otherOptions.stacking) {\r\n\t\t\t\t\t\tstackKey = otherSeries.stackKey;\r\n\t\t\t\t\t\tif (stackGroups[stackKey] === UNDEFINED) {\r\n\t\t\t\t\t\t\tstackGroups[stackKey] = columnCount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcolumnIndex = stackGroups[stackKey];\r\n\t\t\t\t\t} else if (otherOptions.grouping !== false) { // #1162\r\n\t\t\t\t\t\tcolumnIndex = columnCount++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\totherSeries.columnIndex = columnIndex;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar categoryWidth = mathMin(\r\n\t\t\t\tmathAbs(xAxis.transA) * (xAxis.ordinalSlope || options.pointRange || xAxis.closestPointRange || xAxis.tickInterval || 1), // #2610\r\n\t\t\t\txAxis.len // #1535\r\n\t\t\t),\r\n\t\t\tgroupPadding = categoryWidth * options.groupPadding,\r\n\t\t\tgroupWidth = categoryWidth - 2 * groupPadding,\r\n\t\t\tpointOffsetWidth = groupWidth / columnCount,\r\n\t\t\toptionPointWidth = options.pointWidth,\r\n\t\t\tpointPadding = defined(optionPointWidth) ? (pointOffsetWidth - optionPointWidth) / 2 :\r\n\t\t\t\tpointOffsetWidth * options.pointPadding,\r\n\t\t\tpointWidth = pick(optionPointWidth, pointOffsetWidth - 2 * pointPadding), // exact point width, used in polar charts\r\n\t\t\tcolIndex = (reversedXAxis ? \r\n\t\t\t\tcolumnCount - (series.columnIndex || 0) : // #1251\r\n\t\t\t\tseries.columnIndex) || 0,\r\n\t\t\tpointXOffset = pointPadding + (groupPadding + colIndex *\r\n\t\t\t\tpointOffsetWidth - (categoryWidth / 2)) *\r\n\t\t\t\t(reversedXAxis ? -1 : 1);\r\n\r\n\t\t// Save it for reading in linked series (Error bars particularly)\r\n\t\treturn (series.columnMetrics = { \r\n\t\t\twidth: pointWidth, \r\n\t\t\toffset: pointXOffset \r\n\t\t});\r\n\t\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * Translate each point to the plot area coordinate system and find shape positions\r\n\t */\r\n\ttranslate: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart,\r\n\t\t\toptions = series.options,\r\n\t\t\tborderWidth = series.borderWidth = pick(\r\n\t\t\t\toptions.borderWidth, \r\n\t\t\t\tseries.closestPointRange * series.xAxis.transA < 2 ? 0 : 1 // #3635\r\n\t\t\t),\r\n\t\t\tyAxis = series.yAxis,\r\n\t\t\tthreshold = options.threshold,\r\n\t\t\ttranslatedThreshold = series.translatedThreshold = yAxis.getThreshold(threshold),\r\n\t\t\tminPointLength = pick(options.minPointLength, 5),\r\n\t\t\tmetrics = series.getColumnMetrics(),\r\n\t\t\tpointWidth = metrics.width,\r\n\t\t\tseriesBarW = series.barW = mathMax(pointWidth, 1 + 2 * borderWidth), // postprocessed for border width\r\n\t\t\tpointXOffset = series.pointXOffset = metrics.offset,\r\n\t\t\txCrisp = -(borderWidth % 2 ? 0.5 : 0),\r\n\t\t\tyCrisp = borderWidth % 2 ? 0.5 : 1;\r\n\r\n\t\tif (chart.renderer.isVML && chart.inverted) {\r\n\t\t\tyCrisp += 1;\r\n\t\t}\r\n\r\n\t\t// When the pointPadding is 0, we want the columns to be packed tightly, so we allow individual\r\n\t\t// columns to have individual sizes. When pointPadding is greater, we strive for equal-width\r\n\t\t// columns (#2694).\r\n\t\tif (options.pointPadding) {\r\n\t\t\tseriesBarW = mathCeil(seriesBarW);\r\n\t\t}\r\n\r\n\t\tSeries.prototype.translate.apply(series);\r\n\r\n\t\t// Record the new values\r\n\t\teach(series.points, function (point) {\r\n\t\t\tvar yBottom = pick(point.yBottom, translatedThreshold),\r\n\t\t\t\tplotY = mathMin(mathMax(-999 - yBottom, point.plotY), yAxis.len + 999 + yBottom), // Don't draw too far outside plot area (#1303, #2241)\r\n\t\t\t\tbarX = point.plotX + pointXOffset,\r\n\t\t\t\tbarW = seriesBarW,\r\n\t\t\t\tbarY = mathMin(plotY, yBottom),\r\n\t\t\t\tright,\r\n\t\t\t\tbottom,\r\n\t\t\t\tfromTop,\r\n\t\t\t\tbarH = mathMax(plotY, yBottom) - barY;\r\n\r\n\t\t\t// Handle options.minPointLength\r\n\t\t\tif (mathAbs(barH) < minPointLength) {\r\n\t\t\t\tif (minPointLength) {\r\n\t\t\t\t\tbarH = minPointLength;\r\n\t\t\t\t\tbarY =\r\n\t\t\t\t\t\tmathRound(mathAbs(barY - translatedThreshold) > minPointLength ? // stacked\r\n\t\t\t\t\t\t\tyBottom - minPointLength : // keep position\r\n\t\t\t\t\t\t\ttranslatedThreshold - (yAxis.translate(point.y, 0, 1, 0, 1) <= translatedThreshold ? minPointLength : 0)); // use exact yAxis.translation (#1485)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Cache for access in polar\r\n\t\t\tpoint.barX = barX;\r\n\t\t\tpoint.pointWidth = pointWidth;\r\n\r\n\t\t\t// Fix the tooltip on center of grouped columns (#1216, #424, #3648)\r\n\t\t\tpoint.tooltipPos = chart.inverted ? \r\n\t\t\t\t[yAxis.len + yAxis.pos - chart.plotLeft - plotY, series.xAxis.len - barX - barW / 2] : \r\n\t\t\t\t[barX + barW / 2, plotY + yAxis.pos - chart.plotTop];\r\n\r\n\t\t\t// Round off to obtain crisp edges and avoid overlapping with neighbours (#2694)\r\n\t\t\tright = mathRound(barX + barW) + xCrisp;\r\n\t\t\tbarX = mathRound(barX) + xCrisp;\r\n\t\t\tbarW = right - barX;\r\n\r\n\t\t\tfromTop = mathAbs(barY) < 0.5;\r\n\t\t\tbottom = mathMin(mathRound(barY + barH) + yCrisp, 9e4); // #3575\r\n\t\t\tbarY = mathRound(barY) + yCrisp;\r\n\t\t\tbarH = bottom - barY;\r\n\r\n\t\t\t// Top edges are exceptions\r\n\t\t\tif (fromTop) {\r\n\t\t\t\tbarY -= 1;\r\n\t\t\t\tbarH += 1;\r\n\t\t\t}\r\n\r\n\t\t\t// Register shape type and arguments to be used in drawPoints\r\n\t\t\tpoint.shapeType = 'rect';\r\n\t\t\tpoint.shapeArgs = {\r\n\t\t\t\tx: barX,\r\n\t\t\t\ty: barY,\r\n\t\t\t\twidth: barW,\r\n\t\t\t\theight: barH\r\n\t\t\t};\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tgetSymbol: noop,\r\n\t\r\n\t/**\r\n\t * Use a solid rectangle like the area series types\r\n\t */\r\n\tdrawLegendSymbol: LegendSymbolMixin.drawRectangle,\r\n\t\r\n\t\r\n\t/**\r\n\t * Columns have no graph\r\n\t */\r\n\tdrawGraph: noop,\r\n\r\n\t/**\r\n\t * Draw the columns. For bars, the series.group is rotated, so the same coordinates\r\n\t * apply for columns and bars. This method is inherited by scatter series.\r\n\t *\r\n\t */\r\n\tdrawPoints: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = this.chart,\r\n\t\t\toptions = series.options,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tanimationLimit = options.animationLimit || 250,\r\n\t\t\tshapeArgs,\r\n\t\t\tpointAttr;\r\n\r\n\t\t// draw the columns\r\n\t\teach(series.points, function (point) {\r\n\t\t\tvar plotY = point.plotY,\r\n\t\t\t\tgraphic = point.graphic,\r\n\t\t\t\tborderAttr;\r\n\r\n\t\t\tif (plotY !== UNDEFINED && !isNaN(plotY) && point.y !== null) {\r\n\t\t\t\tshapeArgs = point.shapeArgs;\r\n\r\n\t\t\t\tborderAttr = defined(series.borderWidth) ? {\r\n\t\t\t\t\t'stroke-width': series.borderWidth\r\n\t\t\t\t} : {};\r\n\r\n\t\t\t\tpointAttr = point.pointAttr[point.selected ? SELECT_STATE : NORMAL_STATE] || series.pointAttr[NORMAL_STATE];\r\n\t\t\t\t\r\n\t\t\t\tif (graphic) { // update\r\n\t\t\t\t\tstop(graphic);\r\n\t\t\t\t\tgraphic.attr(borderAttr)[chart.pointCount < animationLimit ? 'animate' : 'attr'](merge(shapeArgs));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpoint.graphic = graphic = renderer[point.shapeType](shapeArgs)\r\n\t\t\t\t\t\t.attr(borderAttr)\r\n\t\t\t\t\t\t.attr(pointAttr)\r\n\t\t\t\t\t\t.add(series.group)\r\n\t\t\t\t\t\t.shadow(options.shadow, null, options.stacking && !options.borderRadius);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (graphic) {\r\n\t\t\t\tpoint.graphic = graphic.destroy(); // #1269\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Animate the column heights one by one from zero\r\n\t * @param {Boolean} init Whether to initialize the animation or run it\r\n\t */\r\n\tanimate: function (init) {\r\n\t\tvar series = this,\r\n\t\t\tyAxis = this.yAxis,\r\n\t\t\toptions = series.options,\r\n\t\t\tinverted = this.chart.inverted,\r\n\t\t\tattr = {},\r\n\t\t\ttranslatedThreshold;\r\n\r\n\t\tif (hasSVG) { // VML is too slow anyway\r\n\t\t\tif (init) {\r\n\t\t\t\tattr.scaleY = 0.001;\r\n\t\t\t\ttranslatedThreshold = mathMin(yAxis.pos + yAxis.len, mathMax(yAxis.pos, yAxis.toPixels(options.threshold)));\r\n\t\t\t\tif (inverted) {\r\n\t\t\t\t\tattr.translateX = translatedThreshold - yAxis.len;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tattr.translateY = translatedThreshold;\r\n\t\t\t\t}\r\n\t\t\t\tseries.group.attr(attr);\r\n\r\n\t\t\t} else { // run the animation\r\n\t\t\t\t\r\n\t\t\t\tattr.scaleY = 1;\r\n\t\t\t\tattr[inverted ? 'translateX' : 'translateY'] = yAxis.pos;\r\n\t\t\t\tseries.group.animate(attr, series.options.animation);\r\n\r\n\t\t\t\t// delete this function to allow it only once\r\n\t\t\t\tseries.animate = null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Remove this series from the chart\r\n\t */\r\n\tremove: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart;\r\n\r\n\t\t// column and bar series affects other series of the same type\r\n\t\t// as they are either stacked or grouped\r\n\t\tif (chart.hasRendered) {\r\n\t\t\teach(chart.series, function (otherSeries) {\r\n\t\t\t\tif (otherSeries.type === series.type) {\r\n\t\t\t\t\totherSeries.isDirty = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tSeries.prototype.remove.apply(series, arguments);\r\n\t}\r\n});\r\nseriesTypes.column = ColumnSeries;\r\n/**\r\n * Set the default options for bar\r\n */\r\ndefaultPlotOptions.bar = merge(defaultPlotOptions.column);\r\n/**\r\n * The Bar series class\r\n */\r\nvar BarSeries = extendClass(ColumnSeries, {\r\n\ttype: 'bar',\r\n\tinverted: true\r\n});\r\nseriesTypes.bar = BarSeries;\r\n\r\n/**\r\n * Set the default options for scatter\r\n */\r\ndefaultPlotOptions.scatter = merge(defaultSeriesOptions, {\r\n\tlineWidth: 0,\r\n\tmarker: {\r\n\t\tenabled: true // Overrides auto-enabling in line series (#3647)\r\n\t},\r\n\ttooltip: {\r\n\t\theaderFormat: '<span style=\"color:{series.color}\">\\u25CF</span> <span style=\"font-size: 10px;\"> {series.name}</span><br/>',\r\n\t\tpointFormat: 'x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>'\r\n\t}\r\n});\r\n\r\n/**\r\n * The scatter series class\r\n */\r\nvar ScatterSeries = extendClass(Series, {\r\n\ttype: 'scatter',\r\n\tsorted: false,\r\n\trequireSorting: false,\r\n\tnoSharedTooltip: true,\r\n\ttrackerGroups: ['group', 'markerGroup', 'dataLabelsGroup'],\r\n\ttakeOrdinalPosition: false, // #2342\r\n\tkdDimensions: 2,\r\n\tkdComparer: 'distR',\r\n\tdrawGraph: function () {\r\n\t\tif (this.options.lineWidth) {\r\n\t\t\tSeries.prototype.drawGraph.call(this);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nseriesTypes.scatter = ScatterSeries;\r\n\r\n/**\r\n * Set the default options for pie\r\n */\r\ndefaultPlotOptions.pie = merge(defaultSeriesOptions, {\r\n\tborderColor: '#FFFFFF',\r\n\tborderWidth: 1,\r\n\tcenter: [null, null],\r\n\tclip: false,\r\n\tcolorByPoint: true, // always true for pies\r\n\tdataLabels: {\r\n\t\t// align: null,\r\n\t\t// connectorWidth: 1,\r\n\t\t// connectorColor: point.color,\r\n\t\t// connectorPadding: 5,\r\n\t\tdistance: 30,\r\n\t\tenabled: true,\r\n\t\tformatter: function () { // #2945\r\n\t\t\treturn this.point.name;\r\n\t\t},\r\n\t\t// softConnector: true,\r\n\t\tx: 0\r\n\t\t// y: 0\r\n\t},\r\n\tignoreHiddenPoint: true,\r\n\t//innerSize: 0,\r\n\tlegendType: 'point',\r\n\tmarker: null, // point options are specified in the base options\r\n\tsize: null,\r\n\tshowInLegend: false,\r\n\tslicedOffset: 10,\r\n\tstates: {\r\n\t\thover: {\r\n\t\t\tbrightness: 0.1,\r\n\t\t\tshadow: false\r\n\t\t}\r\n\t},\r\n\tstickyTracking: false,\r\n\ttooltip: {\r\n\t\tfollowPointer: true\r\n\t}\r\n});\r\n\r\n/**\r\n * Extended point object for pies\r\n */\r\nvar PiePoint = extendClass(Point, {\r\n\t/**\r\n\t * Initiate the pie slice\r\n\t */\r\n\tinit: function () {\r\n\r\n\t\tPoint.prototype.init.apply(this, arguments);\r\n\r\n\t\tvar point = this,\r\n\t\t\ttoggleSlice;\r\n\r\n\t\textend(point, {\r\n\t\t\tvisible: point.visible !== false,\r\n\t\t\tname: pick(point.name, 'Slice')\r\n\t\t});\r\n\r\n\t\t// add event listener for select\r\n\t\ttoggleSlice = function (e) {\r\n\t\t\tpoint.slice(e.type === 'select');\r\n\t\t};\r\n\t\taddEvent(point, 'select', toggleSlice);\r\n\t\taddEvent(point, 'unselect', toggleSlice);\r\n\r\n\t\treturn point;\r\n\t},\r\n\r\n\t/**\r\n\t * Toggle the visibility of the pie slice\r\n\t * @param {Boolean} vis Whether to show the slice or not. If undefined, the\r\n\t *    visibility is toggled\r\n\t */\r\n\tsetVisible: function (vis) {\r\n\t\tvar point = this,\r\n\t\t\tseries = point.series,\r\n\t\t\tchart = series.chart,\r\n\t\t\tdoRedraw = !series.isDirty && series.options.ignoreHiddenPoint;\r\n\r\n\t\t// if called without an argument, toggle visibility\r\n\t\tpoint.visible = point.options.visible = vis = vis === UNDEFINED ? !point.visible : vis;\r\n\t\tseries.options.data[inArray(point, series.data)] = point.options; // update userOptions.data\r\n\r\n\t\t// Show and hide associated elements\r\n\t\teach(['graphic', 'dataLabel', 'connector', 'shadowGroup'], function (key) {\r\n\t\t\tif (point[key]) {\r\n\t\t\t\tpoint[key][vis ? 'show' : 'hide'](true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (point.legendItem) {\r\n\t\t\tif (chart.hasRendered) {\r\n\t\t\t\tseries.updateTotals();\r\n\t\t\t\tchart.legend.clearItems();\r\n\t\t\t\tif (!doRedraw) {\r\n\t\t\t\t\tchart.legend.render();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tchart.legend.colorizeItem(point, vis);\r\n\t\t}\r\n\r\n\t\t// Handle ignore hidden slices\r\n\t\tif (doRedraw) {\r\n\t\t\tseries.isDirty = true;\r\n\t\t\tchart.redraw();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set or toggle whether the slice is cut out from the pie\r\n\t * @param {Boolean} sliced When undefined, the slice state is toggled\r\n\t * @param {Boolean} redraw Whether to redraw the chart. True by default.\r\n\t */\r\n\tslice: function (sliced, redraw, animation) {\r\n\t\tvar point = this,\r\n\t\t\tseries = point.series,\r\n\t\t\tchart = series.chart,\r\n\t\t\ttranslation;\r\n\r\n\t\tsetAnimation(animation, chart);\r\n\r\n\t\t// redraw is true by default\r\n\t\tredraw = pick(redraw, true);\r\n\r\n\t\t// if called without an argument, toggle\r\n\t\tpoint.sliced = point.options.sliced = sliced = defined(sliced) ? sliced : !point.sliced;\r\n\t\tseries.options.data[inArray(point, series.data)] = point.options; // update userOptions.data\r\n\r\n\t\ttranslation = sliced ? point.slicedTranslation : {\r\n\t\t\ttranslateX: 0,\r\n\t\t\ttranslateY: 0\r\n\t\t};\r\n\r\n\t\tpoint.graphic.animate(translation);\r\n\t\t\r\n\t\tif (point.shadowGroup) {\r\n\t\t\tpoint.shadowGroup.animate(translation);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thaloPath: function (size) {\r\n\t\tvar shapeArgs = this.shapeArgs,\r\n\t\t\tchart = this.series.chart;\r\n\r\n\t\treturn this.sliced || !this.visible ? [] : this.series.chart.renderer.symbols.arc(chart.plotLeft + shapeArgs.x, chart.plotTop + shapeArgs.y, shapeArgs.r + size, shapeArgs.r + size, {\r\n\t\t\tinnerR: this.shapeArgs.r,\r\n\t\t\tstart: shapeArgs.start,\r\n\t\t\tend: shapeArgs.end\r\n\t\t});\r\n\t}\r\n});\r\n\r\n/**\r\n * The Pie series class\r\n */\r\nvar PieSeries = {\r\n\ttype: 'pie',\r\n\tisCartesian: false,\r\n\tpointClass: PiePoint,\r\n\trequireSorting: false,\r\n\tnoSharedTooltip: true,\r\n\ttrackerGroups: ['group', 'dataLabelsGroup'],\r\n\taxisTypes: [],\r\n\tpointAttrToOptions: { // mapping between SVG attributes and the corresponding options\r\n\t\tstroke: 'borderColor',\r\n\t\t'stroke-width': 'borderWidth',\r\n\t\tfill: 'color'\r\n\t},\r\n\r\n\t/**\r\n\t * Pies have one color each point\r\n\t */\r\n\tgetColor: noop,\r\n\r\n\t/**\r\n\t * Animate the pies in\r\n\t */\r\n\tanimate: function (init) {\r\n\t\tvar series = this,\r\n\t\t\tpoints = series.points,\r\n\t\t\tstartAngleRad = series.startAngleRad;\r\n\r\n\t\tif (!init) {\r\n\t\t\teach(points, function (point) {\r\n\t\t\t\tvar graphic = point.graphic,\r\n\t\t\t\t\targs = point.shapeArgs;\r\n\r\n\t\t\t\tif (graphic) {\r\n\t\t\t\t\t// start values\r\n\t\t\t\t\tgraphic.attr({\r\n\t\t\t\t\t\tr: series.center[3] / 2, // animate from inner radius (#779)\r\n\t\t\t\t\t\tstart: startAngleRad,\r\n\t\t\t\t\t\tend: startAngleRad\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// animate\r\n\t\t\t\t\tgraphic.animate({\r\n\t\t\t\t\t\tr: args.r,\r\n\t\t\t\t\t\tstart: args.start,\r\n\t\t\t\t\t\tend: args.end\r\n\t\t\t\t\t}, series.options.animation);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// delete this function to allow it only once\r\n\t\t\tseries.animate = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Extend the basic setData method by running processData and generatePoints immediately,\r\n\t * in order to access the points from the legend.\r\n\t */\r\n\tsetData: function (data, redraw, animation, updatePoints) {\r\n\t\tSeries.prototype.setData.call(this, data, false, animation, updatePoints);\r\n\t\tthis.processData();\r\n\t\tthis.generatePoints();\r\n\t\tif (pick(redraw, true)) {\r\n\t\t\tthis.chart.redraw(animation);\r\n\t\t} \r\n\t},\r\n\r\n\t/**\r\n\t * Recompute total chart sum and update percentages of points.\r\n\t */\r\n\tupdateTotals: function () {\r\n\t\tvar i,\r\n\t\t\ttotal = 0,\r\n\t\t\tpoints,\r\n\t\t\tlen,\r\n\t\t\tpoint,\r\n\t\t\tignoreHiddenPoint = this.options.ignoreHiddenPoint;\r\n\r\n\t\t// Populate local vars\r\n\t\tpoints = this.points;\r\n\t\tlen = points.length;\r\n\t\t\r\n\t\t// Get the total sum\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\tpoint = points[i];\r\n\r\n\t\t\t// Disallow negative values (#1530, #3623)\r\n\t\t\tif (point.y < 0) {\r\n\t\t\t\tpoint.y = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttotal += (ignoreHiddenPoint && !point.visible) ? 0 : point.y;\r\n\t\t}\r\n\t\tthis.total = total;\r\n\r\n\t\t// Set each point's properties\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\tpoint = points[i];\r\n\t\t\t//point.percentage = (total <= 0 || ignoreHiddenPoint && !point.visible) ? 0 : point.y / total * 100;\r\n\t\t\tpoint.percentage = (total > 0 && (point.visible || !ignoreHiddenPoint)) ? point.y / total * 100 : 0;\r\n\t\t\tpoint.total = total;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Extend the generatePoints method by adding total and percentage properties to each point\r\n\t */\r\n\tgeneratePoints: function () {\r\n\t\tSeries.prototype.generatePoints.call(this);\r\n\t\tthis.updateTotals();\r\n\t},\r\n\t\r\n\t/**\r\n\t * Do translation for pie slices\r\n\t */\r\n\ttranslate: function (positions) {\r\n\t\tthis.generatePoints();\r\n\t\t\r\n\t\tvar series = this,\r\n\t\t\tcumulative = 0,\r\n\t\t\tprecision = 1000, // issue #172\r\n\t\t\toptions = series.options,\r\n\t\t\tslicedOffset = options.slicedOffset,\r\n\t\t\tconnectorOffset = slicedOffset + options.borderWidth,\r\n\t\t\tstart,\r\n\t\t\tend,\r\n\t\t\tangle,\r\n\t\t\tstartAngle = options.startAngle || 0,\r\n\t\t\tstartAngleRad = series.startAngleRad = mathPI / 180 * (startAngle - 90),\r\n\t\t\tendAngleRad = series.endAngleRad = mathPI / 180 * ((pick(options.endAngle, startAngle + 360)) - 90),\r\n\t\t\tcirc = endAngleRad - startAngleRad, //2 * mathPI,\r\n\t\t\tpoints = series.points,\r\n\t\t\tradiusX, // the x component of the radius vector for a given point\r\n\t\t\tradiusY,\r\n\t\t\tlabelDistance = options.dataLabels.distance,\r\n\t\t\tignoreHiddenPoint = options.ignoreHiddenPoint,\r\n\t\t\ti,\r\n\t\t\tlen = points.length,\r\n\t\t\tpoint;\r\n\r\n\t\t// Get positions - either an integer or a percentage string must be given.\r\n\t\t// If positions are passed as a parameter, we're in a recursive loop for adjusting\r\n\t\t// space for data labels.\r\n\t\tif (!positions) {\r\n\t\t\tseries.center = positions = series.getCenter();\r\n\t\t}\r\n\r\n\t\t// utility for getting the x value from a given y, used for anticollision logic in data labels\r\n\t\tseries.getX = function (y, left) {\r\n\r\n\t\t\tangle = math.asin(mathMin((y - positions[1]) / (positions[2] / 2 + labelDistance), 1));\r\n\r\n\t\t\treturn positions[0] +\r\n\t\t\t\t(left ? -1 : 1) *\r\n\t\t\t\t(mathCos(angle) * (positions[2] / 2 + labelDistance));\r\n\t\t};\r\n\r\n\t\t// Calculate the geometry for each point\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\r\n\t\t\tpoint = points[i];\r\n\t\t\t\r\n\t\t\t// set start and end angle\r\n\t\t\tstart = startAngleRad + (cumulative * circ);\r\n\t\t\tif (!ignoreHiddenPoint || point.visible) {\r\n\t\t\t\tcumulative += point.percentage / 100;\r\n\t\t\t}\r\n\t\t\tend = startAngleRad + (cumulative * circ);\r\n\r\n\t\t\t// set the shape\r\n\t\t\tpoint.shapeType = 'arc';\r\n\t\t\tpoint.shapeArgs = {\r\n\t\t\t\tx: positions[0],\r\n\t\t\t\ty: positions[1],\r\n\t\t\t\tr: positions[2] / 2,\r\n\t\t\t\tinnerR: positions[3] / 2,\r\n\t\t\t\tstart: mathRound(start * precision) / precision,\r\n\t\t\t\tend: mathRound(end * precision) / precision\r\n\t\t\t};\r\n\r\n\t\t\t// The angle must stay within -90 and 270 (#2645)\r\n\t\t\tangle = (end + start) / 2;\r\n\t\t\tif (angle > 1.5 * mathPI) {\r\n\t\t\t\tangle -= 2 * mathPI;\r\n\t\t\t} else if (angle < -mathPI / 2) {\r\n\t\t\t\tangle += 2 * mathPI;\r\n\t\t\t}\r\n\r\n\t\t\t// Center for the sliced out slice\r\n\t\t\tpoint.slicedTranslation = {\r\n\t\t\t\ttranslateX: mathRound(mathCos(angle) * slicedOffset),\r\n\t\t\t\ttranslateY: mathRound(mathSin(angle) * slicedOffset)\r\n\t\t\t};\r\n\r\n\t\t\t// set the anchor point for tooltips\r\n\t\t\tradiusX = mathCos(angle) * positions[2] / 2;\r\n\t\t\tradiusY = mathSin(angle) * positions[2] / 2;\r\n\t\t\tpoint.tooltipPos = [\r\n\t\t\t\tpositions[0] + radiusX * 0.7,\r\n\t\t\t\tpositions[1] + radiusY * 0.7\r\n\t\t\t];\r\n\t\t\t\r\n\t\t\tpoint.half = angle < -mathPI / 2 || angle > mathPI / 2 ? 1 : 0;\r\n\t\t\tpoint.angle = angle;\r\n\r\n\t\t\t// set the anchor point for data labels\r\n\t\t\tconnectorOffset = mathMin(connectorOffset, labelDistance / 2); // #1678\r\n\t\t\tpoint.labelPos = [\r\n\t\t\t\tpositions[0] + radiusX + mathCos(angle) * labelDistance, // first break of connector\r\n\t\t\t\tpositions[1] + radiusY + mathSin(angle) * labelDistance, // a/a\r\n\t\t\t\tpositions[0] + radiusX + mathCos(angle) * connectorOffset, // second break, right outside pie\r\n\t\t\t\tpositions[1] + radiusY + mathSin(angle) * connectorOffset, // a/a\r\n\t\t\t\tpositions[0] + radiusX, // landing point for connector\r\n\t\t\t\tpositions[1] + radiusY, // a/a\r\n\t\t\t\tlabelDistance < 0 ? // alignment\r\n\t\t\t\t\t'center' :\r\n\t\t\t\t\tpoint.half ? 'right' : 'left', // alignment\r\n\t\t\t\tangle // center angle\r\n\t\t\t];\r\n\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawGraph: null,\r\n\r\n\t/**\r\n\t * Draw the data points\r\n\t */\r\n\tdrawPoints: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tgroupTranslation,\r\n\t\t\t//center,\r\n\t\t\tgraphic,\r\n\t\t\t//group,\r\n\t\t\tshadow = series.options.shadow,\r\n\t\t\tshadowGroup,\r\n\t\t\tshapeArgs;\r\n\r\n\t\tif (shadow && !series.shadowGroup) {\r\n\t\t\tseries.shadowGroup = renderer.g('shadow')\r\n\t\t\t\t.add(series.group);\r\n\t\t}\r\n\r\n\t\t// draw the slices\r\n\t\teach(series.points, function (point) {\r\n\t\t\tgraphic = point.graphic;\r\n\t\t\tshapeArgs = point.shapeArgs;\r\n\t\t\tshadowGroup = point.shadowGroup;\r\n\r\n\t\t\t// put the shadow behind all points\r\n\t\t\tif (shadow && !shadowGroup) {\r\n\t\t\t\tshadowGroup = point.shadowGroup = renderer.g('shadow')\r\n\t\t\t\t\t.add(series.shadowGroup);\r\n\t\t\t}\r\n\r\n\t\t\t// if the point is sliced, use special translation, else use plot area traslation\r\n\t\t\tgroupTranslation = point.sliced ? point.slicedTranslation : {\r\n\t\t\t\ttranslateX: 0,\r\n\t\t\t\ttranslateY: 0\r\n\t\t\t};\r\n\r\n\t\t\t//group.translate(groupTranslation[0], groupTranslation[1]);\r\n\t\t\tif (shadowGroup) {\r\n\t\t\t\tshadowGroup.attr(groupTranslation);\r\n\t\t\t}\r\n\r\n\t\t\t// draw the slice\r\n\t\t\tif (graphic) {\r\n\t\t\t\tgraphic.animate(extend(shapeArgs, groupTranslation));\r\n\t\t\t} else {\r\n\t\t\t\tpoint.graphic = graphic = renderer[point.shapeType](shapeArgs)\r\n\t\t\t\t\t.setRadialReference(series.center)\r\n\t\t\t\t\t.attr(\r\n\t\t\t\t\t\tpoint.pointAttr[point.selected ? SELECT_STATE : NORMAL_STATE]\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.attr({ \r\n\t\t\t\t\t\t'stroke-linejoin': 'round'\r\n\t\t\t\t\t\t//zIndex: 1 // #2722 (reversed)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.attr(groupTranslation)\r\n\t\t\t\t\t.add(series.group)\r\n\t\t\t\t\t.shadow(shadow, shadowGroup);\t\r\n\t\t\t}\r\n\r\n\t\t\t// detect point specific visibility (#2430)\r\n\t\t\tif (point.visible !== undefined) {\r\n\t\t\t\tpoint.setVisible(point.visible);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\r\n\tsearchPoint: noop,\r\n\r\n\t/**\r\n\t * Utility for sorting data labels\r\n\t */\r\n\tsortByAngle: function (points, sign) {\r\n\t\tpoints.sort(function (a, b) {\r\n\t\t\treturn a.angle !== undefined && (b.angle - a.angle) * sign;\r\n\t\t});\r\n\t},\t\t\r\n\r\n\t/**\r\n\t * Use a simple symbol from LegendSymbolMixin\r\n\t */\r\n\tdrawLegendSymbol: LegendSymbolMixin.drawRectangle,\r\n\r\n\t/**\r\n\t * Use the getCenter method from drawLegendSymbol\r\n\t */\r\n\tgetCenter: CenteredSeriesMixin.getCenter,\r\n\r\n\t/**\r\n\t * Pies don't have point marker symbols\r\n\t */\r\n\tgetSymbol: noop\r\n\r\n};\r\nPieSeries = extendClass(Series, PieSeries);\r\nseriesTypes.pie = PieSeries;\r\n\r\n/**\r\n * Draw the data labels\r\n */\r\nSeries.prototype.drawDataLabels = function () {\r\n\r\n\tvar series = this,\r\n\t\tseriesOptions = series.options,\r\n\t\tcursor = seriesOptions.cursor,\r\n\t\toptions = seriesOptions.dataLabels,\r\n\t\tpoints = series.points,\r\n\t\tpointOptions,\r\n\t\tgeneralOptions,\r\n\t\thasRendered = series.hasRendered || 0,\r\n\t\tstr,\r\n\t\tdataLabelsGroup,\r\n\t\trenderer = series.chart.renderer;\r\n\r\n\tif (options.enabled || series._hasPointLabels) {\r\n\r\n\t\t// Process default alignment of data labels for columns\r\n\t\tif (series.dlProcessOptions) {\r\n\t\t\tseries.dlProcessOptions(options);\r\n\t\t}\r\n\r\n\t\t// Create a separate group for the data labels to avoid rotation\r\n\t\tdataLabelsGroup = series.plotGroup(\r\n\t\t\t'dataLabelsGroup',\r\n\t\t\t'data-labels',\r\n\t\t\toptions.defer ? HIDDEN : VISIBLE,\r\n\t\t\toptions.zIndex || 6\r\n\t\t);\r\n\r\n\t\tif (pick(options.defer, true)) {\r\n\t\t\tdataLabelsGroup.attr({ opacity: +hasRendered }); // #3300\r\n\t\t\tif (!hasRendered) {\r\n\t\t\t\taddEvent(series, 'afterAnimate', function () {\r\n\t\t\t\t\tif (series.visible) { // #3023, #3024\r\n\t\t\t\t\t\tdataLabelsGroup.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdataLabelsGroup[seriesOptions.animation ? 'animate' : 'attr']({ opacity: 1 }, { duration: 200 });\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Make the labels for each point\r\n\t\tgeneralOptions = options;\r\n\t\teach(points, function (point) {\r\n\r\n\t\t\tvar enabled,\r\n\t\t\t\tdataLabel = point.dataLabel,\r\n\t\t\t\tlabelConfig,\r\n\t\t\t\tattr,\r\n\t\t\t\tname,\r\n\t\t\t\trotation,\r\n\t\t\t\tconnector = point.connector,\r\n\t\t\t\tisNew = true,\r\n\t\t\t\tstyle,\r\n\t\t\t\tmoreStyle = {};\r\n\r\n\t\t\t// Determine if each data label is enabled\r\n\t\t\tpointOptions = point.dlOptions || (point.options && point.options.dataLabels); // dlOptions is used in treemaps\r\n\t\t\tenabled = pick(pointOptions && pointOptions.enabled, generalOptions.enabled); // #2282\r\n\r\n\r\n\t\t\t// If the point is outside the plot area, destroy it. #678, #820\r\n\t\t\tif (dataLabel && !enabled) {\r\n\t\t\t\tpoint.dataLabel = dataLabel.destroy();\r\n\r\n\t\t\t// Individual labels are disabled if the are explicitly disabled\r\n\t\t\t// in the point options, or if they fall outside the plot area.\r\n\t\t\t} else if (enabled) {\r\n\r\n\t\t\t\t// Create individual options structure that can be extended without\r\n\t\t\t\t// affecting others\r\n\t\t\t\toptions = merge(generalOptions, pointOptions);\r\n\t\t\t\tstyle = options.style;\r\n\r\n\t\t\t\trotation = options.rotation;\r\n\r\n\t\t\t\t// Get the string\r\n\t\t\t\tlabelConfig = point.getLabelConfig();\r\n\t\t\t\tstr = options.format ?\r\n\t\t\t\t\tformat(options.format, labelConfig) :\r\n\t\t\t\t\toptions.formatter.call(labelConfig, options);\r\n\r\n\t\t\t\t// Determine the color\r\n\t\t\t\tstyle.color = pick(options.color, style.color, series.color, 'black');\r\n\r\n\r\n\t\t\t\t// update existing label\r\n\t\t\t\tif (dataLabel) {\r\n\r\n\t\t\t\t\tif (defined(str)) {\r\n\t\t\t\t\t\tdataLabel\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\ttext: str\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tisNew = false;\r\n\r\n\t\t\t\t\t} else { // #1437 - the label is shown conditionally\r\n\t\t\t\t\t\tpoint.dataLabel = dataLabel = dataLabel.destroy();\r\n\t\t\t\t\t\tif (connector) {\r\n\t\t\t\t\t\t\tpoint.connector = connector.destroy();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t// create new label\r\n\t\t\t\t} else if (defined(str)) {\r\n\t\t\t\t\tattr = {\r\n\t\t\t\t\t\t//align: align,\r\n\t\t\t\t\t\tfill: options.backgroundColor,\r\n\t\t\t\t\t\tstroke: options.borderColor,\r\n\t\t\t\t\t\t'stroke-width': options.borderWidth,\r\n\t\t\t\t\t\tr: options.borderRadius || 0,\r\n\t\t\t\t\t\trotation: rotation,\r\n\t\t\t\t\t\tpadding: options.padding,\r\n\t\t\t\t\t\tzIndex: 1\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Get automated contrast color\r\n\t\t\t\t\tif (style.color === 'contrast') {\r\n\t\t\t\t\t\tmoreStyle.color = options.inside || options.distance < 0 || !!seriesOptions.stacking ? \r\n\t\t\t\t\t\t\trenderer.getContrast(point.color || series.color) : \r\n\t\t\t\t\t\t\t'#000000';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cursor) {\r\n\t\t\t\t\t\tmoreStyle.cursor = cursor;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t// Remove unused attributes (#947)\r\n\t\t\t\t\tfor (name in attr) {\r\n\t\t\t\t\t\tif (attr[name] === UNDEFINED) {\r\n\t\t\t\t\t\t\tdelete attr[name];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataLabel = point.dataLabel = renderer[rotation ? 'text' : 'label']( // labels don't support rotation\r\n\t\t\t\t\t\tstr,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t-999,\r\n\t\t\t\t\t\toptions.shape,\r\n\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\toptions.useHTML\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.attr(attr)\r\n\t\t\t\t\t.css(extend(style, moreStyle))\r\n\t\t\t\t\t.add(dataLabelsGroup)\r\n\t\t\t\t\t.shadow(options.shadow);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (dataLabel) {\r\n\t\t\t\t\t// Now the data label is created and placed at 0,0, so we need to align it\r\n\t\t\t\t\tseries.alignDataLabel(point, dataLabel, options, null, isNew);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n\r\n/**\r\n * Align each individual data label\r\n */\r\nSeries.prototype.alignDataLabel = function (point, dataLabel, options, alignTo, isNew) {\r\n\tvar chart = this.chart,\r\n\t\tinverted = chart.inverted,\r\n\t\tplotX = pick(point.plotX, -999),\r\n\t\tplotY = pick(point.plotY, -999),\r\n\t\tbBox = dataLabel.getBBox(),\r\n\t\tbaseline = chart.renderer.fontMetrics(options.style.fontSize).b,\r\n\t\trotCorr, // rotation correction\r\n\t\t// Math.round for rounding errors (#2683), alignTo to allow column labels (#2700)\r\n\t\tvisible = this.visible && (point.series.forceDL || chart.isInsidePlot(plotX, mathRound(plotY), inverted) ||\r\n\t\t\t(alignTo && chart.isInsidePlot(plotX, inverted ? alignTo.x + 1 : alignTo.y + alignTo.height - 1, inverted))),\r\n\t\talignAttr; // the final position;\r\n\r\n\tif (visible) {\r\n\r\n\t\t// The alignment box is a singular point\r\n\t\talignTo = extend({\r\n\t\t\tx: inverted ? chart.plotWidth - plotY : plotX,\r\n\t\t\ty: mathRound(inverted ? chart.plotHeight - plotX : plotY),\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0\r\n\t\t}, alignTo);\r\n\r\n\t\t// Add the text size for alignment calculation\r\n\t\textend(options, {\r\n\t\t\twidth: bBox.width,\r\n\t\t\theight: bBox.height\r\n\t\t});\r\n\r\n\t\t// Allow a hook for changing alignment in the last moment, then do the alignment\r\n\t\tif (options.rotation) { // Fancy box alignment isn't supported for rotated text\r\n\t\t\trotCorr = chart.renderer.rotCorr(baseline, options.rotation); // #3723\r\n\t\t\tdataLabel[isNew ? 'attr' : 'animate']({\r\n\t\t\t\t\tx: alignTo.x + options.x + alignTo.width / 2 + rotCorr.x,\r\n\t\t\t\t\ty: alignTo.y + options.y + alignTo.height / 2\r\n\t\t\t\t})\r\n\t\t\t\t.attr({ // #3003\r\n\t\t\t\t\talign: options.align\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tdataLabel.align(options, null, alignTo);\r\n\t\t\talignAttr = dataLabel.alignAttr;\r\n\r\n\t\t\t// Handle justify or crop\r\n\t\t\tif (pick(options.overflow, 'justify') === 'justify') {\r\n\t\t\t\tthis.justifyDataLabel(dataLabel, options, alignAttr, bBox, alignTo, isNew);\r\n\r\n\t\t\t} else if (pick(options.crop, true)) {\r\n\t\t\t\t// Now check that the data label is within the plot area\r\n\t\t\t\tvisible = chart.isInsidePlot(alignAttr.x, alignAttr.y) && chart.isInsidePlot(alignAttr.x + bBox.width, alignAttr.y + bBox.height);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// When we're using a shape, make it possible with a connector or an arrow pointing to thie point\r\n\t\t\tif (options.shape) {\r\n\t\t\t\tdataLabel.attr({\r\n\t\t\t\t\tanchorX: point.plotX,\r\n\t\t\t\t\tanchorY: point.plotY\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// Show or hide based on the final aligned position\r\n\tif (!visible) {\r\n\t\tdataLabel.attr({ y: -999 });\r\n\t\tdataLabel.placed = false; // don't animate back in\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * If data labels fall partly outside the plot area, align them back in, in a way that\r\n * doesn't hide the point.\r\n */\r\nSeries.prototype.justifyDataLabel = function (dataLabel, options, alignAttr, bBox, alignTo, isNew) {\r\n\tvar chart = this.chart,\r\n\t\talign = options.align,\r\n\t\tverticalAlign = options.verticalAlign,\r\n\t\toff,\r\n\t\tjustified,\r\n\t\tpadding = dataLabel.box ? 0 : (dataLabel.padding || 0);\r\n\r\n\t// Off left\r\n\toff = alignAttr.x + padding;\r\n\tif (off < 0) {\r\n\t\tif (align === 'right') {\r\n\t\t\toptions.align = 'left';\r\n\t\t} else {\r\n\t\t\toptions.x = -off;\r\n\t\t}\r\n\t\tjustified = true;\r\n\t}\r\n\r\n\t// Off right\r\n\toff = alignAttr.x + bBox.width - padding;\r\n\tif (off > chart.plotWidth) {\r\n\t\tif (align === 'left') {\r\n\t\t\toptions.align = 'right';\r\n\t\t} else {\r\n\t\t\toptions.x = chart.plotWidth - off;\r\n\t\t}\r\n\t\tjustified = true;\r\n\t}\r\n\r\n\t// Off top\r\n\toff = alignAttr.y + padding;\r\n\tif (off < 0) {\r\n\t\tif (verticalAlign === 'bottom') {\r\n\t\t\toptions.verticalAlign = 'top';\r\n\t\t} else {\r\n\t\t\toptions.y = -off;\r\n\t\t}\r\n\t\tjustified = true;\r\n\t}\r\n\r\n\t// Off bottom\r\n\toff = alignAttr.y + bBox.height - padding;\r\n\tif (off > chart.plotHeight) {\r\n\t\tif (verticalAlign === 'top') {\r\n\t\t\toptions.verticalAlign = 'bottom';\r\n\t\t} else {\r\n\t\t\toptions.y = chart.plotHeight - off;\r\n\t\t}\r\n\t\tjustified = true;\r\n\t}\r\n\r\n\tif (justified) {\r\n\t\tdataLabel.placed = !isNew;\r\n\t\tdataLabel.align(options, null, alignTo);\r\n\t}\r\n};\r\n\r\n/**\r\n * Override the base drawDataLabels method by pie specific functionality\r\n */\r\nif (seriesTypes.pie) {\r\n\tseriesTypes.pie.prototype.drawDataLabels = function () {\r\n\t\tvar series = this,\r\n\t\t\tdata = series.data,\r\n\t\t\tpoint,\r\n\t\t\tchart = series.chart,\r\n\t\t\toptions = series.options.dataLabels,\r\n\t\t\tconnectorPadding = pick(options.connectorPadding, 10),\r\n\t\t\tconnectorWidth = pick(options.connectorWidth, 1),\r\n\t\t\tplotWidth = chart.plotWidth,\r\n\t\t\tplotHeight = chart.plotHeight,\r\n\t\t\tconnector,\r\n\t\t\tconnectorPath,\r\n\t\t\tsoftConnector = pick(options.softConnector, true),\r\n\t\t\tdistanceOption = options.distance,\r\n\t\t\tseriesCenter = series.center,\r\n\t\t\tradius = seriesCenter[2] / 2,\r\n\t\t\tcenterY = seriesCenter[1],\r\n\t\t\toutside = distanceOption > 0,\r\n\t\t\tdataLabel,\r\n\t\t\tdataLabelWidth,\r\n\t\t\tlabelPos,\r\n\t\t\tlabelHeight,\r\n\t\t\thalves = [// divide the points into right and left halves for anti collision\r\n\t\t\t\t[], // right\r\n\t\t\t\t[]  // left\r\n\t\t\t],\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\tvisibility,\r\n\t\t\trankArr,\r\n\t\t\ti,\r\n\t\t\tj,\r\n\t\t\toverflow = [0, 0, 0, 0], // top, right, bottom, left\r\n\t\t\tsort = function (a, b) {\r\n\t\t\t\treturn b.y - a.y;\r\n\t\t\t};\r\n\r\n\t\t// get out if not enabled\r\n\t\tif (!series.visible || (!options.enabled && !series._hasPointLabels)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// run parent method\r\n\t\tSeries.prototype.drawDataLabels.apply(series);\r\n\r\n\t\t// arrange points for detection collision\r\n\t\teach(data, function (point) {\r\n\t\t\tif (point.dataLabel && point.visible) { // #407, #2510\r\n\t\t\t\thalves[point.half].push(point);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/* Loop over the points in each half, starting from the top and bottom\r\n\t\t * of the pie to detect overlapping labels.\r\n\t\t */\r\n\t\ti = 2;\r\n\t\twhile (i--) {\r\n\r\n\t\t\tvar slots = [],\r\n\t\t\t\tslotsLength,\r\n\t\t\t\tusedSlots = [],\r\n\t\t\t\tpoints = halves[i],\r\n\t\t\t\tpos,\r\n\t\t\t\tbottom,\r\n\t\t\t\tlength = points.length,\r\n\t\t\t\tslotIndex;\r\n\r\n\t\t\tif (!length) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Sort by angle\r\n\t\t\tseries.sortByAngle(points, i - 0.5);\r\n\r\n\t\t\t// Assume equal label heights on either hemisphere (#2630)\r\n\t\t\tj = labelHeight = 0;\r\n\t\t\twhile (!labelHeight && points[j]) { // #1569\r\n\t\t\t\tlabelHeight = points[j] && points[j].dataLabel && (points[j].dataLabel.getBBox().height || 21); // 21 is for #968\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\r\n\t\t\t// Only do anti-collision when we are outside the pie and have connectors (#856)\r\n\t\t\tif (distanceOption > 0) {\r\n\r\n\t\t\t\t// Build the slots\r\n\t\t\t\tbottom = mathMin(centerY + radius + distanceOption, chart.plotHeight);\r\n\t\t\t\tfor (pos = mathMax(0, centerY - radius - distanceOption); pos <= bottom; pos += labelHeight) {\r\n\t\t\t\t\tslots.push(pos);\r\n\t\t\t\t}\r\n\t\t\t\tslotsLength = slots.length;\r\n\r\n\r\n\t\t\t\t/* Visualize the slots\r\n\t\t\t\tif (!series.slotElements) {\r\n\t\t\t\t\tseries.slotElements = [];\r\n\t\t\t\t}\r\n\t\t\t\tif (i === 1) {\r\n\t\t\t\t\tseries.slotElements.forEach(function (elem) {\r\n\t\t\t\t\t\telem.destroy();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tseries.slotElements.length = 0;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\tslots.forEach(function (pos, no) {\r\n\t\t\t\t\tvar slotX = series.getX(pos, i) + chart.plotLeft - (i ? 100 : 0),\r\n\t\t\t\t\t\tslotY = pos + chart.plotTop;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!isNaN(slotX)) {\r\n\t\t\t\t\t\tseries.slotElements.push(chart.renderer.rect(slotX, slotY - 7, 100, labelHeight, 1)\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\t'stroke-width': 1,\r\n\t\t\t\t\t\t\t\tstroke: 'silver',\r\n\t\t\t\t\t\t\t\tfill: 'rgba(0,0,255,0.1)'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.add());\r\n\t\t\t\t\t\tseries.slotElements.push(chart.renderer.text('Slot '+ no, slotX, slotY + 4)\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tfill: 'silver'\r\n\t\t\t\t\t\t\t}).add());\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// */\r\n\r\n\t\t\t\t// if there are more values than available slots, remove lowest values\r\n\t\t\t\tif (length > slotsLength) {\r\n\t\t\t\t\t// create an array for sorting and ranking the points within each quarter\r\n\t\t\t\t\trankArr = [].concat(points);\r\n\t\t\t\t\trankArr.sort(sort);\r\n\t\t\t\t\tj = length;\r\n\t\t\t\t\twhile (j--) {\r\n\t\t\t\t\t\trankArr[j].rank = j;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tj = length;\r\n\t\t\t\t\twhile (j--) {\r\n\t\t\t\t\t\tif (points[j].rank >= slotsLength) {\r\n\t\t\t\t\t\t\tpoints.splice(j, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlength = points.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// The label goes to the nearest open slot, but not closer to the edge than\r\n\t\t\t\t// the label's index.\r\n\t\t\t\tfor (j = 0; j < length; j++) {\r\n\r\n\t\t\t\t\tpoint = points[j];\r\n\t\t\t\t\tlabelPos = point.labelPos;\r\n\r\n\t\t\t\t\tvar closest = 9999,\r\n\t\t\t\t\t\tdistance,\r\n\t\t\t\t\t\tslotI;\r\n\r\n\t\t\t\t\t// find the closest slot index\r\n\t\t\t\t\tfor (slotI = 0; slotI < slotsLength; slotI++) {\r\n\t\t\t\t\t\tdistance = mathAbs(slots[slotI] - labelPos[1]);\r\n\t\t\t\t\t\tif (distance < closest) {\r\n\t\t\t\t\t\t\tclosest = distance;\r\n\t\t\t\t\t\t\tslotIndex = slotI;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// if that slot index is closer to the edges of the slots, move it\r\n\t\t\t\t\t// to the closest appropriate slot\r\n\t\t\t\t\tif (slotIndex < j && slots[j] !== null) { // cluster at the top\r\n\t\t\t\t\t\tslotIndex = j;\r\n\t\t\t\t\t} else if (slotsLength  < length - j + slotIndex && slots[j] !== null) { // cluster at the bottom\r\n\t\t\t\t\t\tslotIndex = slotsLength - length + j;\r\n\t\t\t\t\t\twhile (slots[slotIndex] === null) { // make sure it is not taken\r\n\t\t\t\t\t\t\tslotIndex++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Slot is taken, find next free slot below. In the next run, the next slice will find the\r\n\t\t\t\t\t\t// slot above these, because it is the closest one\r\n\t\t\t\t\t\twhile (slots[slotIndex] === null) { // make sure it is not taken\r\n\t\t\t\t\t\t\tslotIndex++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tusedSlots.push({ i: slotIndex, y: slots[slotIndex] });\r\n\t\t\t\t\tslots[slotIndex] = null; // mark as taken\r\n\t\t\t\t}\r\n\t\t\t\t// sort them in order to fill in from the top\r\n\t\t\t\tusedSlots.sort(sort);\r\n\t\t\t}\r\n\r\n\t\t\t// now the used slots are sorted, fill them up sequentially\r\n\t\t\tfor (j = 0; j < length; j++) {\r\n\r\n\t\t\t\tvar slot, naturalY;\r\n\r\n\t\t\t\tpoint = points[j];\r\n\t\t\t\tlabelPos = point.labelPos;\r\n\t\t\t\tdataLabel = point.dataLabel;\r\n\t\t\t\tvisibility = point.visible === false ? HIDDEN : VISIBLE;\r\n\t\t\t\tnaturalY = labelPos[1];\r\n\r\n\t\t\t\tif (distanceOption > 0) {\r\n\t\t\t\t\tslot = usedSlots.pop();\r\n\t\t\t\t\tslotIndex = slot.i;\r\n\r\n\t\t\t\t\t// if the slot next to currrent slot is free, the y value is allowed\r\n\t\t\t\t\t// to fall back to the natural position\r\n\t\t\t\t\ty = slot.y;\r\n\t\t\t\t\tif ((naturalY > y && slots[slotIndex + 1] !== null) ||\r\n\t\t\t\t\t\t\t(naturalY < y &&  slots[slotIndex - 1] !== null)) {\r\n\t\t\t\t\t\ty = mathMin(mathMax(0, naturalY), chart.plotHeight);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\ty = naturalY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// get the x - use the natural x position for first and last slot, to prevent the top\r\n\t\t\t\t// and botton slice connectors from touching each other on either side\r\n\t\t\t\tx = options.justify ?\r\n\t\t\t\t\tseriesCenter[0] + (i ? -1 : 1) * (radius + distanceOption) :\r\n\t\t\t\t\tseries.getX(y === centerY - radius - distanceOption || y === centerY + radius + distanceOption ? naturalY : y, i);\r\n\r\n\r\n\t\t\t\t// Record the placement and visibility\r\n\t\t\t\tdataLabel._attr = {\r\n\t\t\t\t\tvisibility: visibility,\r\n\t\t\t\t\talign: labelPos[6]\r\n\t\t\t\t};\r\n\t\t\t\tdataLabel._pos = {\r\n\t\t\t\t\tx: x + options.x +\r\n\t\t\t\t\t\t({ left: connectorPadding, right: -connectorPadding }[labelPos[6]] || 0),\r\n\t\t\t\t\ty: y + options.y - 10 // 10 is for the baseline (label vs text)\r\n\t\t\t\t};\r\n\t\t\t\tdataLabel.connX = x;\r\n\t\t\t\tdataLabel.connY = y;\r\n\r\n\r\n\t\t\t\t// Detect overflowing data labels\r\n\t\t\t\tif (this.options.size === null) {\r\n\t\t\t\t\tdataLabelWidth = dataLabel.width;\r\n\t\t\t\t\t// Overflow left\r\n\t\t\t\t\tif (x - dataLabelWidth < connectorPadding) {\r\n\t\t\t\t\t\toverflow[3] = mathMax(mathRound(dataLabelWidth - x + connectorPadding), overflow[3]);\r\n\r\n\t\t\t\t\t// Overflow right\r\n\t\t\t\t\t} else if (x + dataLabelWidth > plotWidth - connectorPadding) {\r\n\t\t\t\t\t\toverflow[1] = mathMax(mathRound(x + dataLabelWidth - plotWidth + connectorPadding), overflow[1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Overflow top\r\n\t\t\t\t\tif (y - labelHeight / 2 < 0) {\r\n\t\t\t\t\t\toverflow[0] = mathMax(mathRound(-y + labelHeight / 2), overflow[0]);\r\n\r\n\t\t\t\t\t// Overflow left\r\n\t\t\t\t\t} else if (y + labelHeight / 2 > plotHeight) {\r\n\t\t\t\t\t\toverflow[2] = mathMax(mathRound(y + labelHeight / 2 - plotHeight), overflow[2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} // for each point\r\n\t\t} // for each half\r\n\r\n\t\t// Do not apply the final placement and draw the connectors until we have verified\r\n\t\t// that labels are not spilling over.\r\n\t\tif (arrayMax(overflow) === 0 || this.verifyDataLabelOverflow(overflow)) {\r\n\r\n\t\t\t// Place the labels in the final position\r\n\t\t\tthis.placeDataLabels();\r\n\r\n\t\t\t// Draw the connectors\r\n\t\t\tif (outside && connectorWidth) {\r\n\t\t\t\teach(this.points, function (point) {\r\n\t\t\t\t\tconnector = point.connector;\r\n\t\t\t\t\tlabelPos = point.labelPos;\r\n\t\t\t\t\tdataLabel = point.dataLabel;\r\n\r\n\t\t\t\t\tif (dataLabel && dataLabel._pos) {\r\n\t\t\t\t\t\tvisibility = dataLabel._attr.visibility;\r\n\t\t\t\t\t\tx = dataLabel.connX;\r\n\t\t\t\t\t\ty = dataLabel.connY;\r\n\t\t\t\t\t\tconnectorPath = softConnector ? [\r\n\t\t\t\t\t\t\tM,\r\n\t\t\t\t\t\t\tx + (labelPos[6] === 'left' ? 5 : -5), y, // end of the string at the label\r\n\t\t\t\t\t\t\t'C',\r\n\t\t\t\t\t\t\tx, y, // first break, next to the label\r\n\t\t\t\t\t\t\t2 * labelPos[2] - labelPos[4], 2 * labelPos[3] - labelPos[5],\r\n\t\t\t\t\t\t\tlabelPos[2], labelPos[3], // second break\r\n\t\t\t\t\t\t\tL,\r\n\t\t\t\t\t\t\tlabelPos[4], labelPos[5] // base\r\n\t\t\t\t\t\t] : [\r\n\t\t\t\t\t\t\tM,\r\n\t\t\t\t\t\t\tx + (labelPos[6] === 'left' ? 5 : -5), y, // end of the string at the label\r\n\t\t\t\t\t\t\tL,\r\n\t\t\t\t\t\t\tlabelPos[2], labelPos[3], // second break\r\n\t\t\t\t\t\t\tL,\r\n\t\t\t\t\t\t\tlabelPos[4], labelPos[5] // base\r\n\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\tif (connector) {\r\n\t\t\t\t\t\t\tconnector.animate({ d: connectorPath });\r\n\t\t\t\t\t\t\tconnector.attr('visibility', visibility);\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpoint.connector = connector = series.chart.renderer.path(connectorPath).attr({\r\n\t\t\t\t\t\t\t\t'stroke-width': connectorWidth,\r\n\t\t\t\t\t\t\t\tstroke: options.connectorColor || point.color || '#606060',\r\n\t\t\t\t\t\t\t\tvisibility: visibility\r\n\t\t\t\t\t\t\t\t//zIndex: 0 // #2722 (reversed)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.add(series.dataLabelsGroup);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (connector) {\r\n\t\t\t\t\t\tpoint.connector = connector.destroy();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * Perform the final placement of the data labels after we have verified that they\r\n\t * fall within the plot area.\r\n\t */\r\n\tseriesTypes.pie.prototype.placeDataLabels = function () {\r\n\t\teach(this.points, function (point) {\r\n\t\t\tvar dataLabel = point.dataLabel,\r\n\t\t\t\t_pos;\r\n\r\n\t\t\tif (dataLabel) {\r\n\t\t\t\t_pos = dataLabel._pos;\r\n\t\t\t\tif (_pos) {\r\n\t\t\t\t\tdataLabel.attr(dataLabel._attr);\r\n\t\t\t\t\tdataLabel[dataLabel.moved ? 'animate' : 'attr'](_pos);\r\n\t\t\t\t\tdataLabel.moved = true;\r\n\t\t\t\t} else if (dataLabel) {\r\n\t\t\t\t\tdataLabel.attr({ y: -999 });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tseriesTypes.pie.prototype.alignDataLabel =  noop;\r\n\r\n\t/**\r\n\t * Verify whether the data labels are allowed to draw, or we should run more translation and data\r\n\t * label positioning to keep them inside the plot area. Returns true when data labels are ready\r\n\t * to draw.\r\n\t */\r\n\tseriesTypes.pie.prototype.verifyDataLabelOverflow = function (overflow) {\r\n\r\n\t\tvar center = this.center,\r\n\t\t\toptions = this.options,\r\n\t\t\tcenterOption = options.center,\r\n\t\t\tminSize = options.minSize || 80,\r\n\t\t\tnewSize = minSize,\r\n\t\t\tret;\r\n\r\n\t\t// Handle horizontal size and center\r\n\t\tif (centerOption[0] !== null) { // Fixed center\r\n\t\t\tnewSize = mathMax(center[2] - mathMax(overflow[1], overflow[3]), minSize);\r\n\r\n\t\t} else { // Auto center\r\n\t\t\tnewSize = mathMax(\r\n\t\t\t\tcenter[2] - overflow[1] - overflow[3], // horizontal overflow\r\n\t\t\t\tminSize\r\n\t\t\t);\r\n\t\t\tcenter[0] += (overflow[3] - overflow[1]) / 2; // horizontal center\r\n\t\t}\r\n\r\n\t\t// Handle vertical size and center\r\n\t\tif (centerOption[1] !== null) { // Fixed center\r\n\t\t\tnewSize = mathMax(mathMin(newSize, center[2] - mathMax(overflow[0], overflow[2])), minSize);\r\n\r\n\t\t} else { // Auto center\r\n\t\t\tnewSize = mathMax(\r\n\t\t\t\tmathMin(\r\n\t\t\t\t\tnewSize,\r\n\t\t\t\t\tcenter[2] - overflow[0] - overflow[2] // vertical overflow\r\n\t\t\t\t),\r\n\t\t\t\tminSize\r\n\t\t\t);\r\n\t\t\tcenter[1] += (overflow[0] - overflow[2]) / 2; // vertical center\r\n\t\t}\r\n\r\n\t\t// If the size must be decreased, we need to run translate and drawDataLabels again\r\n\t\tif (newSize < center[2]) {\r\n\t\t\tcenter[2] = newSize;\r\n\t\t\tthis.translate(center);\r\n\t\t\teach(this.points, function (point) {\r\n\t\t\t\tif (point.dataLabel) {\r\n\t\t\t\t\tpoint.dataLabel._pos = null; // reset\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.drawDataLabels) {\r\n\t\t\t\tthis.drawDataLabels();\r\n\t\t\t}\r\n\t\t// Else, return true to indicate that the pie and its labels is within the plot area\r\n\t\t} else {\r\n\t\t\tret = true;\r\n\t\t}\r\n\t\treturn ret;\r\n\t};\r\n}\r\n\r\nif (seriesTypes.column) {\r\n\r\n\t/**\r\n\t * Override the basic data label alignment by adjusting for the position of the column\r\n\t */\r\n\tseriesTypes.column.prototype.alignDataLabel = function (point, dataLabel, options,  alignTo, isNew) {\r\n\t\tvar inverted = this.chart.inverted,\r\n\t\t\tseries = point.series,\r\n\t\t\tdlBox = point.dlBox || point.shapeArgs, // data label box for alignment\r\n\t\t\tbelow = point.below || (point.plotY > pick(this.translatedThreshold, series.yAxis.len)),\r\n\t\t\tinside = pick(options.inside, !!this.options.stacking); // draw it inside the box?\r\n\r\n\t\t// Align to the column itself, or the top of it\r\n\t\tif (dlBox) { // Area range uses this method but not alignTo\r\n\t\t\talignTo = merge(dlBox);\r\n\r\n\t\t\tif (inverted) {\r\n\t\t\t\talignTo = {\r\n\t\t\t\t\tx: series.yAxis.len - alignTo.y - alignTo.height,\r\n\t\t\t\t\ty: series.xAxis.len - alignTo.x - alignTo.width,\r\n\t\t\t\t\twidth: alignTo.height,\r\n\t\t\t\t\theight: alignTo.width\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// Compute the alignment box\r\n\t\t\tif (!inside) {\r\n\t\t\t\tif (inverted) {\r\n\t\t\t\t\talignTo.x += below ? 0 : alignTo.width;\r\n\t\t\t\t\talignTo.width = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\talignTo.y += below ? alignTo.height : 0;\r\n\t\t\t\t\talignTo.height = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// When alignment is undefined (typically columns and bars), display the individual\r\n\t\t// point below or above the point depending on the threshold\r\n\t\toptions.align = pick(\r\n\t\t\toptions.align,\r\n\t\t\t!inverted || inside ? 'center' : below ? 'right' : 'left'\r\n\t\t);\r\n\t\toptions.verticalAlign = pick(\r\n\t\t\toptions.verticalAlign,\r\n\t\t\tinverted || inside ? 'middle' : below ? 'top' : 'bottom'\r\n\t\t);\r\n\r\n\t\t// Call the parent method\r\n\t\tSeries.prototype.alignDataLabel.call(this, point, dataLabel, options, alignTo, isNew);\r\n\t};\r\n}\r\n\r\n\r\n\r\n/**\r\n * Highstock JS v2.1.3 (2015-02-27)\r\n * Highcharts module to hide overlapping data labels. This module is included by default in Highmaps.\r\n *\r\n * (c) 2010-2014 Torstein Honsi\r\n *\r\n * License: www.highcharts.com/license\r\n */\r\n\r\n/*global Highcharts, HighchartsAdapter */\r\n(function (H) {\r\n\tvar Chart = H.Chart,\r\n\t\teach = H.each,\r\n\t\taddEvent = HighchartsAdapter.addEvent;\r\n\r\n\t// Collect potensial overlapping data labels. Stack labels probably don't need to be \r\n\t// considered because they are usually accompanied by data labels that lie inside the columns.\r\n\tChart.prototype.callbacks.push(function (chart) {\r\n\t\tfunction collectAndHide() {\r\n\t\t\tvar labels = [];\r\n\r\n\t\t\teach(chart.series, function (series) {\r\n\t\t\t\tvar dlOptions = series.options.dataLabels;\r\n\t\t\t\tif ((dlOptions.enabled || series._hasPointLabels) && !dlOptions.allowOverlap && series.visible) { // #3866\r\n\t\t\t\t\teach(series.points, function (point) { \r\n\t\t\t\t\t\tif (point.dataLabel) {\r\n\t\t\t\t\t\t\tpoint.dataLabel.labelrank = point.labelrank;\r\n\t\t\t\t\t\t\tlabels.push(point.dataLabel);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tchart.hideOverlappingLabels(labels);\r\n\t\t}\r\n\r\n\t\t// Do it now ...\r\n\t\tcollectAndHide();\r\n\r\n\t\t// ... and after each chart redraw\r\n\t\taddEvent(chart, 'redraw', collectAndHide);\r\n\r\n\t});\r\n\r\n\t/**\r\n\t * Hide overlapping labels. Labels are moved and faded in and out on zoom to provide a smooth \r\n\t * visual imression.\r\n\t */\t\t\r\n\tChart.prototype.hideOverlappingLabels = function (labels) {\r\n\r\n\t\tvar len = labels.length,\r\n\t\t\tlabel,\r\n\t\t\ti,\r\n\t\t\tj,\r\n\t\t\tlabel1,\r\n\t\t\tlabel2,\r\n\t\t\tintersectRect = function (pos1, pos2, size1, size2) {\r\n\t\t\t\treturn !(\r\n\t\t\t\t\tpos2.x > pos1.x + size1.width ||\r\n\t\t\t\t\tpos2.x + size2.width < pos1.x ||\r\n\t\t\t\t\tpos2.y > pos1.y + size1.height ||\r\n\t\t\t\t\tpos2.y + size2.height < pos1.y\r\n\t\t\t\t);\r\n\t\t\t};\r\n\t\r\n\t\t// Mark with initial opacity\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\tlabel = labels[i];\r\n\t\t\tif (label) {\r\n\t\t\t\tlabel.oldOpacity = label.opacity;\r\n\t\t\t\tlabel.newOpacity = 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Detect overlapping labels\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\tlabel1 = labels[i];\r\n\r\n\t\t\tfor (j = i + 1; j < len; ++j) {\r\n\t\t\t\tlabel2 = labels[j];\r\n\t\t\t\tif (label1 && label2 && label1.placed && label2.placed && label1.newOpacity !== 0 && label2.newOpacity !== 0 && \r\n\t\t\t\t\t\tintersectRect(label1.alignAttr, label2.alignAttr, label1, label2)) {\r\n\t\t\t\t\t(label1.labelrank < label2.labelrank ? label1 : label2).newOpacity = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Hide or show\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\tlabel = labels[i];\r\n\t\t\tif (label) {\r\n\t\t\t\tif (label.oldOpacity !== label.newOpacity && label.placed) {\r\n\t\t\t\t\tlabel.alignAttr.opacity = label.newOpacity;\r\n\t\t\t\t\tlabel[label.isOld && label.newOpacity ? 'animate' : 'attr'](label.alignAttr);\r\n\t\t\t\t}\r\n\t\t\t\tlabel.isOld = true;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n}(Highcharts));/**\r\n * TrackerMixin for points and graphs\r\n */\r\n\r\nvar TrackerMixin = Highcharts.TrackerMixin = {\r\n\r\n\tdrawTrackerPoint: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart,\r\n\t\t\tpointer = chart.pointer,\r\n\t\t\tcursor = series.options.cursor,\r\n\t\t\tcss = cursor && { cursor: cursor },\r\n\t\t\tonMouseOver = function (e) {\r\n\t\t\t\tvar target = e.target,\r\n\t\t\t\tpoint;\r\n\r\n\t\t\t\tif (chart.hoverSeries !== series) {\r\n\t\t\t\t\tseries.onMouseOver();\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhile (target && !point) {\r\n\t\t\t\t\tpoint = target.point;\r\n\t\t\t\t\ttarget = target.parentNode;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (point !== UNDEFINED && point !== chart.hoverPoint) { // undefined on graph in scatterchart\r\n\t\t\t\t\tpoint.onMouseOver(e);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t// Add reference to the point\r\n\t\teach(series.points, function (point) {\r\n\t\t\tif (point.graphic) {\r\n\t\t\t\tpoint.graphic.element.point = point;\r\n\t\t\t}\r\n\t\t\tif (point.dataLabel) {\r\n\t\t\t\tpoint.dataLabel.element.point = point;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Add the event listeners, we need to do this only once\r\n\t\tif (!series._hasTracking) {\r\n\t\t\teach(series.trackerGroups, function (key) {\r\n\t\t\t\tif (series[key]) { // we don't always have dataLabelsGroup\r\n\t\t\t\t\tseries[key]\r\n\t\t\t\t\t\t.addClass(PREFIX + 'tracker')\r\n\t\t\t\t\t\t.on('mouseover', onMouseOver)\r\n\t\t\t\t\t\t.on('mouseout', function (e) { pointer.onTrackerMouseOut(e); })\r\n\t\t\t\t\t\t.css(css);\r\n\t\t\t\t\tif (hasTouch) {\r\n\t\t\t\t\t\tseries[key].on('touchstart', onMouseOver);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tseries._hasTracking = true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Draw the tracker object that sits above all data labels and markers to\r\n\t * track mouse events on the graph or points. For the line type charts\r\n\t * the tracker uses the same graphPath, but with a greater stroke width\r\n\t * for better control.\r\n\t */\r\n\tdrawTrackerGraph: function () {\r\n\t\tvar series = this,\r\n\t\t\toptions = series.options,\r\n\t\t\ttrackByArea = options.trackByArea,\r\n\t\t\ttrackerPath = [].concat(trackByArea ? series.areaPath : series.graphPath),\r\n\t\t\ttrackerPathLength = trackerPath.length,\r\n\t\t\tchart = series.chart,\r\n\t\t\tpointer = chart.pointer,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tsnap = chart.options.tooltip.snap,\r\n\t\t\ttracker = series.tracker,\r\n\t\t\tcursor = options.cursor,\r\n\t\t\tcss = cursor && { cursor: cursor },\r\n\t\t\tsinglePoints = series.singlePoints,\r\n\t\t\tsinglePoint,\r\n\t\t\ti,\r\n\t\t\tonMouseOver = function () {\r\n\t\t\t\tif (chart.hoverSeries !== series) {\r\n\t\t\t\t\tseries.onMouseOver();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*\r\n\t\t\t * Empirical lowest possible opacities for TRACKER_FILL for an element to stay invisible but clickable\r\n\t\t\t * IE6: 0.002\r\n\t\t\t * IE7: 0.002\r\n\t\t\t * IE8: 0.002\r\n\t\t\t * IE9: 0.00000000001 (unlimited)\r\n\t\t\t * IE10: 0.0001 (exporting only)\r\n\t\t\t * FF: 0.00000000001 (unlimited)\r\n\t\t\t * Chrome: 0.000001\r\n\t\t\t * Safari: 0.000001\r\n\t\t\t * Opera: 0.00000000001 (unlimited)\r\n\t\t\t */\r\n\t\t\tTRACKER_FILL = 'rgba(192,192,192,' + (hasSVG ? 0.0001 : 0.002) + ')';\r\n\r\n\t\t// Extend end points. A better way would be to use round linecaps,\r\n\t\t// but those are not clickable in VML.\r\n\t\tif (trackerPathLength && !trackByArea) {\r\n\t\t\ti = trackerPathLength + 1;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (trackerPath[i] === M) { // extend left side\r\n\t\t\t\t\ttrackerPath.splice(i + 1, 0, trackerPath[i + 1] - snap, trackerPath[i + 2], L);\r\n\t\t\t\t}\r\n\t\t\t\tif ((i && trackerPath[i] === M) || i === trackerPathLength) { // extend right side\r\n\t\t\t\t\ttrackerPath.splice(i, 0, L, trackerPath[i - 2] + snap, trackerPath[i - 1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// handle single points\r\n\t\tfor (i = 0; i < singlePoints.length; i++) {\r\n\t\t\tsinglePoint = singlePoints[i];\r\n\t\t\ttrackerPath.push(M, singlePoint.plotX - snap, singlePoint.plotY,\r\n\t\t\tL, singlePoint.plotX + snap, singlePoint.plotY);\r\n\t\t}\r\n\r\n\t\t// draw the tracker\r\n\t\tif (tracker) {\r\n\t\t\ttracker.attr({ d: trackerPath });\r\n\t\t} else { // create\r\n\r\n\t\t\tseries.tracker = renderer.path(trackerPath)\r\n\t\t\t.attr({\r\n\t\t\t\t'stroke-linejoin': 'round', // #1225\r\n\t\t\t\tvisibility: series.visible ? VISIBLE : HIDDEN,\r\n\t\t\t\tstroke: TRACKER_FILL,\r\n\t\t\t\tfill: trackByArea ? TRACKER_FILL : NONE,\r\n\t\t\t\t'stroke-width' : options.lineWidth + (trackByArea ? 0 : 2 * snap),\r\n\t\t\t\tzIndex: 2\r\n\t\t\t})\r\n\t\t\t.add(series.group);\r\n\r\n\t\t\t// The tracker is added to the series group, which is clipped, but is covered\r\n\t\t\t// by the marker group. So the marker group also needs to capture events.\r\n\t\t\teach([series.tracker, series.markerGroup], function (tracker) {\r\n\t\t\t\ttracker.addClass(PREFIX + 'tracker')\r\n\t\t\t\t\t.on('mouseover', onMouseOver)\r\n\t\t\t\t\t.on('mouseout', function (e) { pointer.onTrackerMouseOut(e); })\r\n\t\t\t\t\t.css(css);\r\n\r\n\t\t\t\tif (hasTouch) {\r\n\t\t\t\t\ttracker.on('touchstart', onMouseOver);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n/* End TrackerMixin */\r\n\r\n\r\n/**\r\n * Add tracking event listener to the series group, so the point graphics\r\n * themselves act as trackers\r\n */ \r\n\r\nif (seriesTypes.column) {\r\n\tColumnSeries.prototype.drawTracker = TrackerMixin.drawTrackerPoint;\t\r\n}\r\n\r\nif (seriesTypes.pie) {\r\n\tseriesTypes.pie.prototype.drawTracker = TrackerMixin.drawTrackerPoint;\r\n}\r\n\r\nif (seriesTypes.scatter) {\r\n\tScatterSeries.prototype.drawTracker = TrackerMixin.drawTrackerPoint;\r\n}\r\n\r\n/* \r\n * Extend Legend for item events \r\n */ \r\nextend(Legend.prototype, {\r\n\r\n\tsetItemEvents: function (item, legendItem, useHTML, itemStyle, itemHiddenStyle) {\r\n\tvar legend = this;\r\n\t// Set the events on the item group, or in case of useHTML, the item itself (#1249)\r\n\t(useHTML ? legendItem : item.legendGroup).on('mouseover', function () {\r\n\t\t\titem.setState(HOVER_STATE);\r\n\t\t\tlegendItem.css(legend.options.itemHoverStyle);\r\n\t\t})\r\n\t\t.on('mouseout', function () {\r\n\t\t\tlegendItem.css(item.visible ? itemStyle : itemHiddenStyle);\r\n\t\t\titem.setState();\r\n\t\t})\r\n\t\t.on('click', function (event) {\r\n\t\t\tvar strLegendItemClick = 'legendItemClick',\r\n\t\t\t\tfnLegendItemClick = function () {\r\n\t\t\t\t\titem.setVisible();\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t// Pass over the click/touch event. #4.\r\n\t\t\tevent = {\r\n\t\t\t\tbrowserEvent: event\r\n\t\t\t};\r\n\r\n\t\t\t// click the name or symbol\r\n\t\t\tif (item.firePointEvent) { // point\r\n\t\t\t\titem.firePointEvent(strLegendItemClick, event, fnLegendItemClick);\r\n\t\t\t} else {\r\n\t\t\t\tfireEvent(item, strLegendItemClick, event, fnLegendItemClick);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tcreateCheckboxForItem: function (item) {\r\n\t\tvar legend = this;\r\n\r\n\t\titem.checkbox = createElement('input', {\r\n\t\t\ttype: 'checkbox',\r\n\t\t\tchecked: item.selected,\r\n\t\t\tdefaultChecked: item.selected // required by IE7\r\n\t\t}, legend.options.itemCheckboxStyle, legend.chart.container);\r\n\r\n\t\taddEvent(item.checkbox, 'click', function (event) {\r\n\t\t\tvar target = event.target;\r\n\t\t\tfireEvent(item.series || item, 'checkboxClick', { // #3712\r\n\t\t\t\t\tchecked: target.checked,\r\n\t\t\t\t\titem: item\r\n\t\t\t\t},\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\titem.select();\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t});\r\n\t}\t\r\n});\r\n\r\n/* \r\n * Add pointer cursor to legend itemstyle in defaultOptions\r\n */\r\ndefaultOptions.legend.itemStyle.cursor = 'pointer';\r\n\r\n\r\n/* \r\n * Extend the Chart object with interaction\r\n */\r\n\r\nextend(Chart.prototype, {\r\n\t/**\r\n\t * Display the zoom button\r\n\t */\r\n\tshowResetZoom: function () {\r\n\t\tvar chart = this,\r\n\t\t\tlang = defaultOptions.lang,\r\n\t\t\tbtnOptions = chart.options.chart.resetZoomButton,\r\n\t\t\ttheme = btnOptions.theme,\r\n\t\t\tstates = theme.states,\r\n\t\t\talignTo = btnOptions.relativeTo === 'chart' ? null : 'plotBox';\r\n\t\t\t\r\n\t\tthis.resetZoomButton = chart.renderer.button(lang.resetZoom, null, null, function () { chart.zoomOut(); }, theme, states && states.hover)\r\n\t\t\t.attr({\r\n\t\t\t\talign: btnOptions.position.align,\r\n\t\t\t\ttitle: lang.resetZoomTitle\r\n\t\t\t})\r\n\t\t\t.add()\r\n\t\t\t.align(btnOptions.position, false, alignTo);\r\n\t\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * Zoom out to 1:1\r\n\t */\r\n\tzoomOut: function () {\r\n\t\tvar chart = this;\r\n\t\tfireEvent(chart, 'selection', { resetSelection: true }, function () { \r\n\t\t\tchart.zoom();\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Zoom into a given portion of the chart given by axis coordinates\r\n\t * @param {Object} event\r\n\t */\r\n\tzoom: function (event) {\r\n\t\tvar chart = this,\r\n\t\t\thasZoomed,\r\n\t\t\tpointer = chart.pointer,\r\n\t\t\tdisplayButton = false,\r\n\t\t\tresetZoomButton;\r\n\r\n\t\t// If zoom is called with no arguments, reset the axes\r\n\t\tif (!event || event.resetSelection) {\r\n\t\t\teach(chart.axes, function (axis) {\r\n\t\t\t\thasZoomed = axis.zoom();\r\n\t\t\t});\r\n\t\t} else { // else, zoom in on all axes\r\n\t\t\teach(event.xAxis.concat(event.yAxis), function (axisData) {\r\n\t\t\t\tvar axis = axisData.axis,\r\n\t\t\t\t\tisXAxis = axis.isXAxis;\r\n\r\n\t\t\t\t// don't zoom more than minRange\r\n\t\t\t\tif (pointer[isXAxis ? 'zoomX' : 'zoomY'] || pointer[isXAxis ? 'pinchX' : 'pinchY']) {\r\n\t\t\t\t\thasZoomed = axis.zoom(axisData.min, axisData.max);\r\n\t\t\t\t\tif (axis.displayBtn) {\r\n\t\t\t\t\t\tdisplayButton = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// Show or hide the Reset zoom button\r\n\t\tresetZoomButton = chart.resetZoomButton;\r\n\t\tif (displayButton && !resetZoomButton) {\r\n\t\t\tchart.showResetZoom();\r\n\t\t} else if (!displayButton && isObject(resetZoomButton)) {\r\n\t\t\tchart.resetZoomButton = resetZoomButton.destroy();\r\n\t\t}\r\n\t\t\r\n\r\n\t\t// Redraw\r\n\t\tif (hasZoomed) {\r\n\t\t\tchart.redraw(\r\n\t\t\t\tpick(chart.options.chart.animation, event && event.animation, chart.pointCount < 100) // animation\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Pan the chart by dragging the mouse across the pane. This function is called\r\n\t * on mouse move, and the distance to pan is computed from chartX compared to\r\n\t * the first chartX position in the dragging operation.\r\n\t */\r\n\tpan: function (e, panning) {\r\n\r\n\t\tvar chart = this,\r\n\t\t\thoverPoints = chart.hoverPoints,\r\n\t\t\tdoRedraw;\r\n\r\n\t\t// remove active points for shared tooltip\r\n\t\tif (hoverPoints) {\r\n\t\t\teach(hoverPoints, function (point) {\r\n\t\t\t\tpoint.setState();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\teach(panning === 'xy' ? [1, 0] : [1], function (isX) { // xy is used in maps\r\n\t\t\tvar mousePos = e[isX ? 'chartX' : 'chartY'],\r\n\t\t\t\taxis = chart[isX ? 'xAxis' : 'yAxis'][0],\r\n\t\t\t\tstartPos = chart[isX ? 'mouseDownX' : 'mouseDownY'],\r\n\t\t\t\thalfPointRange = (axis.pointRange || 0) / 2,\r\n\t\t\t\textremes = axis.getExtremes(),\r\n\t\t\t\tnewMin = axis.toValue(startPos - mousePos, true) + halfPointRange,\r\n\t\t\t\tnewMax = axis.toValue(startPos + chart[isX ? 'plotWidth' : 'plotHeight'] - mousePos, true) - halfPointRange,\r\n\t\t\t\tgoingLeft = startPos > mousePos; // #3613\r\n\r\n\t\t\tif (axis.series.length && \r\n\t\t\t\t\t(goingLeft || newMin > mathMin(extremes.dataMin, extremes.min)) && \r\n\t\t\t\t\t(!goingLeft || newMax < mathMax(extremes.dataMax, extremes.max))) {\r\n\t\t\t\taxis.setExtremes(newMin, newMax, false, false, { trigger: 'pan' });\r\n\t\t\t\tdoRedraw = true;\r\n\t\t\t}\r\n\r\n\t\t\tchart[isX ? 'mouseDownX' : 'mouseDownY'] = mousePos; // set new reference for next run\r\n\t\t});\r\n\r\n\t\tif (doRedraw) {\r\n\t\t\tchart.redraw(false);\r\n\t\t}\r\n\t\tcss(chart.container, { cursor: 'move' });\r\n\t}\r\n});\r\n\r\n/*\r\n * Extend the Point object with interaction\r\n */\r\nextend(Point.prototype, {\r\n\t/**\r\n\t * Toggle the selection status of a point\r\n\t * @param {Boolean} selected Whether to select or unselect the point.\r\n\t * @param {Boolean} accumulate Whether to add to the previous selection. By default,\r\n\t *\t\t this happens if the control key (Cmd on Mac) was pressed during clicking.\r\n\t */\r\n\tselect: function (selected, accumulate) {\r\n\t\tvar point = this,\r\n\t\t\tseries = point.series,\r\n\t\t\tchart = series.chart;\r\n\r\n\t\tselected = pick(selected, !point.selected);\r\n\r\n\t\t// fire the event with the defalut handler\r\n\t\tpoint.firePointEvent(selected ? 'select' : 'unselect', { accumulate: accumulate }, function () {\r\n\t\t\tpoint.selected = point.options.selected = selected;\r\n\t\t\tseries.options.data[inArray(point, series.data)] = point.options;\r\n\r\n\t\t\tpoint.setState(selected && SELECT_STATE);\r\n\r\n\t\t\t// unselect all other points unless Ctrl or Cmd + click\r\n\t\t\tif (!accumulate) {\r\n\t\t\t\teach(chart.getSelectedPoints(), function (loopPoint) {\r\n\t\t\t\t\tif (loopPoint.selected && loopPoint !== point) {\r\n\t\t\t\t\t\tloopPoint.selected = loopPoint.options.selected = false;\r\n\t\t\t\t\t\tseries.options.data[inArray(loopPoint, series.data)] = loopPoint.options;\r\n\t\t\t\t\t\tloopPoint.setState(NORMAL_STATE);\r\n\t\t\t\t\t\t\tloopPoint.firePointEvent('unselect');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Runs on mouse over the point\r\n\t */\r\n\tonMouseOver: function (e) {\r\n\t\tvar point = this,\r\n\t\t\tseries = point.series,\r\n\t\t\tchart = series.chart,\r\n\t\t\ttooltip = chart.tooltip,\r\n\t\t\thoverPoint = chart.hoverPoint;\r\n\r\n\t\t// set normal state to previous series\r\n\t\tif (hoverPoint && hoverPoint !== point) {\r\n\t\t\thoverPoint.onMouseOut();\r\n\t\t}\r\n\r\n\t\t// trigger the event\r\n\t\tpoint.firePointEvent('mouseOver');\r\n\r\n\t\t// update the tooltip\r\n\t\tif (tooltip && (!tooltip.shared || series.noSharedTooltip)) {\r\n\t\t\ttooltip.refresh(point, e);\r\n\t\t}\r\n\r\n\t\t// hover this\r\n\t\tpoint.setState(HOVER_STATE);\r\n\t\tchart.hoverPoint = point;\r\n\t},\r\n\r\n\t/**\r\n\t * Runs on mouse out from the point\r\n\t */\r\n\tonMouseOut: function () {\r\n\t\tvar chart = this.series.chart,\r\n\t\t\thoverPoints = chart.hoverPoints;\r\n\r\n\t\tthis.firePointEvent('mouseOut');\r\n\r\n\t\tif (!hoverPoints || inArray(this, hoverPoints) === -1) { // #887, #2240\r\n\t\t\tthis.setState();\r\n\t\t\tchart.hoverPoint = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Import events from the series' and point's options. Only do it on\r\n\t * demand, to save processing time on hovering.\r\n\t */\r\n\timportEvents: function () {\r\n\t\tif (!this.hasImportedEvents) {\r\n\t\t\tvar point = this,\r\n\t\t\t\toptions = merge(point.series.options.point, point.options),\r\n\t\t\t\tevents = options.events,\r\n\t\t\t\teventType;\r\n\r\n\t\t\tpoint.events = events;\r\n\r\n\t\t\tfor (eventType in events) {\r\n\t\t\t\taddEvent(point, eventType, events[eventType]);\r\n\t\t\t}\r\n\t\t\tthis.hasImportedEvents = true;\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set the point's state\r\n\t * @param {String} state\r\n\t */\r\n\tsetState: function (state, move) {\r\n\t\tvar point = this,\r\n\t\t\tplotX = point.plotX,\r\n\t\t\tplotY = point.plotY,\r\n\t\t\tseries = point.series,\r\n\t\t\tstateOptions = series.options.states,\r\n\t\t\tmarkerOptions = defaultPlotOptions[series.type].marker && series.options.marker,\r\n\t\t\tnormalDisabled = markerOptions && !markerOptions.enabled,\r\n\t\t\tmarkerStateOptions = markerOptions && markerOptions.states[state],\r\n\t\t\tstateDisabled = markerStateOptions && markerStateOptions.enabled === false,\r\n\t\t\tstateMarkerGraphic = series.stateMarkerGraphic,\r\n\t\t\tpointMarker = point.marker || {},\r\n\t\t\tchart = series.chart,\r\n\t\t\tradius,\r\n\t\t\thalo = series.halo,\r\n\t\t\thaloOptions,\r\n\t\t\tnewSymbol,\r\n\t\t\tpointAttr;\r\n\r\n\t\tstate = state || NORMAL_STATE; // empty string\r\n\t\tpointAttr = point.pointAttr[state] || series.pointAttr[state];\r\n\r\n\t\tif (\r\n\t\t\t\t// already has this state\r\n\t\t\t\t(state === point.state && !move) ||\r\n\t\t\t\t// selected points don't respond to hover\r\n\t\t\t\t(point.selected && state !== SELECT_STATE) ||\r\n\t\t\t\t// series' state options is disabled\r\n\t\t\t\t(stateOptions[state] && stateOptions[state].enabled === false) ||\r\n\t\t\t\t// general point marker's state options is disabled\r\n\t\t\t\t(state && (stateDisabled || (normalDisabled && markerStateOptions.enabled === false))) ||\r\n\t\t\t\t// individual point marker's state options is disabled\r\n\t\t\t\t(state && pointMarker.states && pointMarker.states[state] && pointMarker.states[state].enabled === false) // #1610\r\n\r\n\t\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// apply hover styles to the existing point\r\n\t\tif (point.graphic) {\r\n\t\t\tradius = markerOptions && point.graphic.symbolName && pointAttr.r;\r\n\t\t\tpoint.graphic.attr(merge(\r\n\t\t\t\tpointAttr,\r\n\t\t\t\tradius ? { // new symbol attributes (#507, #612)\r\n\t\t\t\t\tx: plotX - radius,\r\n\t\t\t\t\ty: plotY - radius,\r\n\t\t\t\t\twidth: 2 * radius,\r\n\t\t\t\t\theight: 2 * radius\r\n\t\t\t\t} : {}\r\n\t\t\t));\r\n\r\n\t\t\t// Zooming in from a range with no markers to a range with markers\r\n\t\t\tif (stateMarkerGraphic) {\r\n\t\t\t\tstateMarkerGraphic.hide();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// if a graphic is not applied to each point in the normal state, create a shared\r\n\t\t\t// graphic for the hover state\r\n\t\t\tif (state && markerStateOptions) {\r\n\t\t\t\tradius = markerStateOptions.radius;\r\n\t\t\t\tnewSymbol = pointMarker.symbol || series.symbol;\r\n\r\n\t\t\t\t// If the point has another symbol than the previous one, throw away the\r\n\t\t\t\t// state marker graphic and force a new one (#1459)\r\n\t\t\t\tif (stateMarkerGraphic && stateMarkerGraphic.currentSymbol !== newSymbol) {\r\n\t\t\t\t\tstateMarkerGraphic = stateMarkerGraphic.destroy();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add a new state marker graphic\r\n\t\t\t\tif (!stateMarkerGraphic) {\r\n\t\t\t\t\tif (newSymbol) {\r\n\t\t\t\t\t\tseries.stateMarkerGraphic = stateMarkerGraphic = chart.renderer.symbol(\r\n\t\t\t\t\t\t\tnewSymbol,\r\n\t\t\t\t\t\t\tplotX - radius,\r\n\t\t\t\t\t\t\tplotY - radius,\r\n\t\t\t\t\t\t\t2 * radius,\r\n\t\t\t\t\t\t\t2 * radius\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.attr(pointAttr)\r\n\t\t\t\t\t\t.add(series.markerGroup);\r\n\t\t\t\t\t\tstateMarkerGraphic.currentSymbol = newSymbol;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t// Move the existing graphic\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstateMarkerGraphic[move ? 'animate' : 'attr']({ // #1054\r\n\t\t\t\t\t\tx: plotX - radius,\r\n\t\t\t\t\t\ty: plotY - radius\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (stateMarkerGraphic) {\r\n\t\t\t\tstateMarkerGraphic[state && chart.isInsidePlot(plotX, plotY, chart.inverted) ? 'show' : 'hide'](); // #2450\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Show me your halo\r\n\t\thaloOptions = stateOptions[state] && stateOptions[state].halo;\r\n\t\tif (haloOptions && haloOptions.size) {\r\n\t\t\tif (!halo) {\r\n\t\t\t\tseries.halo = halo = chart.renderer.path()\r\n\t\t\t\t\t.add(chart.seriesGroup);\r\n\t\t\t}\r\n\t\t\thalo.attr(extend({\r\n\t\t\t\tfill: Color(point.color || series.color).setOpacity(haloOptions.opacity).get()\r\n\t\t\t}, haloOptions.attributes))[move ? 'animate' : 'attr']({\r\n\t\t\t\td: point.haloPath(haloOptions.size)\r\n\t\t\t});\r\n\t\t} else if (halo) {\r\n\t\t\thalo.attr({ d: [] });\r\n\t\t}\r\n\r\n\t\tpoint.state = state;\r\n\t},\r\n\r\n\thaloPath: function (size) {\r\n\t\tvar series = this.series,\r\n\t\t\tchart = series.chart,\r\n\t\t\tplotBox = series.getPlotBox(),\r\n\t\t\tinverted = chart.inverted;\r\n\r\n\t\treturn chart.renderer.symbols.circle(\r\n\t\t\tplotBox.translateX + (inverted ? series.yAxis.len - this.plotY : this.plotX) - size, \r\n\t\t\tplotBox.translateY + (inverted ? series.xAxis.len - this.plotX : this.plotY) - size, \r\n\t\t\tsize * 2, \r\n\t\t\tsize * 2\r\n\t\t);\r\n\t}\r\n});\r\n\r\n/*\r\n * Extend the Series object with interaction\r\n */\r\n\r\nextend(Series.prototype, {\r\n\t/**\r\n\t * Series mouse over handler\r\n\t */\r\n\tonMouseOver: function () {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart,\r\n\t\t\thoverSeries = chart.hoverSeries;\r\n\r\n\t\t// set normal state to previous series\r\n\t\tif (hoverSeries && hoverSeries !== series) {\r\n\t\t\thoverSeries.onMouseOut();\r\n\t\t}\r\n\r\n\t\t// trigger the event, but to save processing time,\r\n\t\t// only if defined\r\n\t\tif (series.options.events.mouseOver) {\r\n\t\t\tfireEvent(series, 'mouseOver');\r\n\t\t}\r\n\r\n\t\t// hover this\r\n\t\tseries.setState(HOVER_STATE);\r\n\t\tchart.hoverSeries = series;\r\n\t},\r\n\r\n\t/**\r\n\t * Series mouse out handler\r\n\t */\r\n\tonMouseOut: function () {\r\n\t\t// trigger the event only if listeners exist\r\n\t\tvar series = this,\r\n\t\t\toptions = series.options,\r\n\t\t\tchart = series.chart,\r\n\t\t\ttooltip = chart.tooltip,\r\n\t\t\thoverPoint = chart.hoverPoint;\r\n\r\n\t\t// trigger mouse out on the point, which must be in this series\r\n\t\tif (hoverPoint) {\r\n\t\t\thoverPoint.onMouseOut();\r\n\t\t}\r\n\r\n\t\t// fire the mouse out event\r\n\t\tif (series && options.events.mouseOut) {\r\n\t\t\tfireEvent(series, 'mouseOut');\r\n\t\t}\r\n\r\n\r\n\t\t// hide the tooltip\r\n\t\tif (tooltip && !options.stickyTracking && (!tooltip.shared || series.noSharedTooltip)) {\r\n\t\t\ttooltip.hide();\r\n\t\t}\r\n\r\n\t\t// set normal state\r\n\t\tseries.setState();\r\n\t\tchart.hoverSeries = null;\r\n\t},\r\n\r\n\t/**\r\n\t * Set the state of the graph\r\n\t */\r\n\tsetState: function (state) {\r\n\t\tvar series = this,\r\n\t\t\toptions = series.options,\r\n\t\t\tgraph = series.graph,\r\n\t\t\tgraphNeg = series.graphNeg,\r\n\t\t\tstateOptions = options.states,\r\n\t\t\tlineWidth = options.lineWidth,\r\n\t\t\tattribs;\r\n\r\n\t\tstate = state || NORMAL_STATE;\r\n\r\n\t\tif (series.state !== state) {\r\n\t\t\tseries.state = state;\r\n\r\n\t\t\tif (stateOptions[state] && stateOptions[state].enabled === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (state) {\r\n\t\t\t\tlineWidth = (stateOptions[state].lineWidth || lineWidth) + (stateOptions[state].lineWidthPlus || 0);\r\n\t\t\t}\r\n\r\n\t\t\tif (graph && !graph.dashstyle) { // hover is turned off for dashed lines in VML\r\n\t\t\t\tattribs = {\r\n\t\t\t\t\t'stroke-width': lineWidth\r\n\t\t\t\t};\r\n\t\t\t\t// use attr because animate will cause any other animation on the graph to stop\r\n\t\t\t\tgraph.attr(attribs);\r\n\t\t\t\tif (graphNeg) {\r\n\t\t\t\t\tgraphNeg.attr(attribs);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set the visibility of the graph\r\n\t *\r\n\t * @param vis {Boolean} True to show the series, false to hide. If UNDEFINED,\r\n\t *\t\t\t\tthe visibility is toggled.\r\n\t */\r\n\tsetVisible: function (vis, redraw) {\r\n\t\tvar series = this,\r\n\t\t\tchart = series.chart,\r\n\t\t\tlegendItem = series.legendItem,\r\n\t\t\tshowOrHide,\r\n\t\t\tignoreHiddenSeries = chart.options.chart.ignoreHiddenSeries,\r\n\t\t\toldVisibility = series.visible;\r\n\r\n\t\t// if called without an argument, toggle visibility\r\n\t\tseries.visible = vis = series.userOptions.visible = vis === UNDEFINED ? !oldVisibility : vis;\r\n\t\tshowOrHide = vis ? 'show' : 'hide';\r\n\r\n\t\t// show or hide elements\r\n\t\teach(['group', 'dataLabelsGroup', 'markerGroup', 'tracker'], function (key) {\r\n\t\t\tif (series[key]) {\r\n\t\t\t\tseries[key][showOrHide]();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t// hide tooltip (#1361)\r\n\t\tif (chart.hoverSeries === series || (chart.hoverPoint && chart.hoverPoint.series) === series) {\r\n\t\t\tseries.onMouseOut();\r\n\t\t}\r\n\r\n\r\n\t\tif (legendItem) {\r\n\t\t\tchart.legend.colorizeItem(series, vis);\r\n\t\t}\r\n\r\n\r\n\t\t// rescale or adapt to resized chart\r\n\t\tseries.isDirty = true;\r\n\t\t// in a stack, all other series are affected\r\n\t\tif (series.options.stacking) {\r\n\t\t\teach(chart.series, function (otherSeries) {\r\n\t\t\t\tif (otherSeries.options.stacking && otherSeries.visible) {\r\n\t\t\t\t\totherSeries.isDirty = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// show or hide linked series\r\n\t\teach(series.linkedSeries, function (otherSeries) {\r\n\t\t\totherSeries.setVisible(vis, false);\r\n\t\t});\r\n\r\n\t\tif (ignoreHiddenSeries) {\r\n\t\t\tchart.isDirtyBox = true;\r\n\t\t}\r\n\t\tif (redraw !== false) {\r\n\t\t\tchart.redraw();\r\n\t\t}\r\n\r\n\t\tfireEvent(series, showOrHide);\r\n\t},\r\n\r\n\t/**\r\n\t * Show the graph\r\n\t */\r\n\tshow: function () {\r\n\t\tthis.setVisible(true);\r\n\t},\r\n\r\n\t/**\r\n\t * Hide the graph\r\n\t */\r\n\thide: function () {\r\n\t\tthis.setVisible(false);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Set the selected state of the graph\r\n\t *\r\n\t * @param selected {Boolean} True to select the series, false to unselect. If\r\n\t *\t\t\t\tUNDEFINED, the selection state is toggled.\r\n\t */\r\n\tselect: function (selected) {\r\n\t\tvar series = this;\r\n\t\t// if called without an argument, toggle\r\n\t\tseries.selected = selected = (selected === UNDEFINED) ? !series.selected : selected;\r\n\r\n\t\tif (series.checkbox) {\r\n\t\t\tseries.checkbox.checked = selected;\r\n\t\t}\r\n\r\n\t\tfireEvent(series, selected ? 'select' : 'unselect');\r\n\t},\r\n\r\n\tdrawTracker: TrackerMixin.drawTrackerGraph\r\n});/* ****************************************************************************\r\n * Start ordinal axis logic                                                   *\r\n *****************************************************************************/\r\n\r\n\r\nwrap(Series.prototype, 'init', function (proceed) {\r\n\tvar series = this,\r\n\t\txAxis;\r\n\r\n\t// call the original function\r\n\tproceed.apply(this, Array.prototype.slice.call(arguments, 1));\r\n\r\n\txAxis = series.xAxis;\r\n\r\n\t// Destroy the extended ordinal index on updated data\r\n\tif (xAxis && xAxis.options.ordinal) {\r\n\t\taddEvent(series, 'updatedData', function () {\r\n\t\t\tdelete xAxis.ordinalIndex;\r\n\t\t});\r\n\t}\r\n});\r\n\r\n/**\r\n * In an ordinal axis, there might be areas with dense consentrations of points, then large\r\n * gaps between some. Creating equally distributed ticks over this entire range\r\n * may lead to a huge number of ticks that will later be removed. So instead, break the\r\n * positions up in segments, find the tick positions for each segment then concatenize them.\r\n * This method is used from both data grouping logic and X axis tick position logic.\r\n */\r\nwrap(Axis.prototype, 'getTimeTicks', function (proceed, normalizedInterval, min, max, startOfWeek, positions, closestDistance, findHigherRanks) {\r\n\r\n\tvar start = 0,\r\n\t\tend = 0,\r\n\t\tsegmentPositions,\r\n\t\thigherRanks = {},\r\n\t\thasCrossedHigherRank,\r\n\t\tinfo,\r\n\t\tposLength,\r\n\t\toutsideMax,\r\n\t\tgroupPositions = [],\r\n\t\tlastGroupPosition = -Number.MAX_VALUE,\r\n\t\ttickPixelIntervalOption = this.options.tickPixelInterval;\r\n\r\n\t// The positions are not always defined, for example for ordinal positions when data\r\n\t// has regular interval (#1557, #2090)\r\n\tif ((!this.options.ordinal && !this.options.breaks) || !positions || positions.length < 3 || min === UNDEFINED) {\r\n\t\treturn proceed.call(this, normalizedInterval, min, max, startOfWeek);\r\n\t}\r\n\r\n\t// Analyze the positions array to split it into segments on gaps larger than 5 times\r\n\t// the closest distance. The closest distance is already found at this point, so\r\n\t// we reuse that instead of computing it again.\r\n\tposLength = positions.length;\r\n\r\n\tfor (; end < posLength; end++) {\r\n\r\n\t\toutsideMax = end && positions[end - 1] > max;\r\n\r\n\t\tif (positions[end] < min) { // Set the last position before min\r\n\t\t\tstart = end;\r\n\t\t}\r\n\r\n\t\tif (end === posLength - 1 || positions[end + 1] - positions[end] > closestDistance * 5 || outsideMax) {\r\n\r\n\t\t\t// For each segment, calculate the tick positions from the getTimeTicks utility\r\n\t\t\t// function. The interval will be the same regardless of how long the segment is.\r\n\t\t\tif (positions[end] > lastGroupPosition) { // #1475\r\n\r\n\t\t\t\tsegmentPositions = proceed.call(this, normalizedInterval, positions[start], positions[end], startOfWeek);\r\n\r\n\t\t\t\t// Prevent duplicate groups, for example for multiple segments within one larger time frame (#1475)\r\n\t\t\t\twhile (segmentPositions.length && segmentPositions[0] <= lastGroupPosition) {\r\n\t\t\t\t\tsegmentPositions.shift();\r\n\t\t\t\t}\r\n\t\t\t\tif (segmentPositions.length) {\r\n\t\t\t\t\tlastGroupPosition = segmentPositions[segmentPositions.length - 1];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroupPositions = groupPositions.concat(segmentPositions);\r\n\t\t\t}\r\n\t\t\t// Set start of next segment\r\n\t\t\tstart = end + 1;\r\n\t\t}\r\n\r\n\t\tif (outsideMax) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// Get the grouping info from the last of the segments. The info is the same for\r\n\t// all segments.\r\n\tinfo = segmentPositions.info;\r\n\r\n\t// Optionally identify ticks with higher rank, for example when the ticks\r\n\t// have crossed midnight.\r\n\tif (findHigherRanks && info.unitRange <= timeUnits.hour) {\r\n\t\tend = groupPositions.length - 1;\r\n\r\n\t\t// Compare points two by two\r\n\t\tfor (start = 1; start < end; start++) {\r\n\t\t\tif (dateFormat('%d', groupPositions[start]) !== dateFormat('%d', groupPositions[start - 1])) {\r\n\t\t\t\thigherRanks[groupPositions[start]] = 'day';\r\n\t\t\t\thasCrossedHigherRank = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If the complete array has crossed midnight, we want to mark the first\r\n\t\t// positions also as higher rank\r\n\t\tif (hasCrossedHigherRank) {\r\n\t\t\thigherRanks[groupPositions[0]] = 'day';\r\n\t\t}\r\n\t\tinfo.higherRanks = higherRanks;\r\n\t}\r\n\r\n\t// Save the info\r\n\tgroupPositions.info = info;\r\n\r\n\r\n\r\n\t// Don't show ticks within a gap in the ordinal axis, where the space between\r\n\t// two points is greater than a portion of the tick pixel interval\r\n\tif (findHigherRanks && defined(tickPixelIntervalOption)) { // check for squashed ticks\r\n\r\n\t\tvar length = groupPositions.length,\r\n\t\t\ti = length,\r\n\t\t\titemToRemove,\r\n\t\t\ttranslated,\r\n\t\t\ttranslatedArr = [],\r\n\t\t\tlastTranslated,\r\n\t\t\tmedianDistance,\r\n\t\t\tdistance,\r\n\t\t\tdistances = [];\r\n\r\n\t\t// Find median pixel distance in order to keep a reasonably even distance between\r\n\t\t// ticks (#748)\r\n\t\twhile (i--) {\r\n\t\t\ttranslated = this.translate(groupPositions[i]);\r\n\t\t\tif (lastTranslated) {\r\n\t\t\t\tdistances[i] = lastTranslated - translated;\r\n\t\t\t}\r\n\t\t\ttranslatedArr[i] = lastTranslated = translated;\r\n\t\t}\r\n\t\tdistances.sort();\r\n\t\tmedianDistance = distances[mathFloor(distances.length / 2)];\r\n\t\tif (medianDistance < tickPixelIntervalOption * 0.6) {\r\n\t\t\tmedianDistance = null;\r\n\t\t}\r\n\r\n\t\t// Now loop over again and remove ticks where needed\r\n\t\ti = groupPositions[length - 1] > max ? length - 1 : length; // #817\r\n\t\tlastTranslated = undefined;\r\n\t\twhile (i--) {\r\n\t\t\ttranslated = translatedArr[i];\r\n\t\t\tdistance = lastTranslated - translated;\r\n\r\n\t\t\t// Remove ticks that are closer than 0.6 times the pixel interval from the one to the right,\r\n\t\t\t// but not if it is close to the median distance (#748).\r\n\t\t\tif (lastTranslated && distance < tickPixelIntervalOption * 0.8 &&\r\n\t\t\t\t\t(medianDistance === null || distance < medianDistance * 0.8)) {\r\n\r\n\t\t\t\t// Is this a higher ranked position with a normal position to the right?\r\n\t\t\t\tif (higherRanks[groupPositions[i]] && !higherRanks[groupPositions[i + 1]]) {\r\n\r\n\t\t\t\t\t// Yes: remove the lower ranked neighbour to the right\r\n\t\t\t\t\titemToRemove = i + 1;\r\n\t\t\t\t\tlastTranslated = translated; // #709\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// No: remove this one\r\n\t\t\t\t\titemToRemove = i;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroupPositions.splice(itemToRemove, 1);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tlastTranslated = translated;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn groupPositions;\r\n});\r\n\r\n// Extend the Axis prototype\r\nextend(Axis.prototype, {\r\n\r\n\t/**\r\n\t * Calculate the ordinal positions before tick positions are calculated.\r\n\t */\r\n\tbeforeSetTickPositions: function () {\r\n\t\tvar axis = this,\r\n\t\t\tlen,\r\n\t\t\tordinalPositions = [],\r\n\t\t\tuseOrdinal = false,\r\n\t\t\tdist,\r\n\t\t\textremes = axis.getExtremes(),\r\n\t\t\tmin = extremes.min,\r\n\t\t\tmax = extremes.max,\r\n\t\t\tminIndex,\r\n\t\t\tmaxIndex,\r\n\t\t\tslope,\r\n\t\t\ti;\r\n\r\n\t\t// apply the ordinal logic\r\n\t\tif (axis.options.ordinal || axis.options.breaks) {\r\n\r\n\t\t\teach(axis.series, function (series, i) {\r\n\r\n\t\t\t\tif (series.visible !== false && (series.takeOrdinalPosition !== false || axis.options.breaks)) {\r\n\r\n\t\t\t\t\t// concatenate the processed X data into the existing positions, or the empty array\r\n\t\t\t\t\tordinalPositions = ordinalPositions.concat(series.processedXData);\r\n\t\t\t\t\tlen = ordinalPositions.length;\r\n\r\n\t\t\t\t\t// remove duplicates (#1588)\r\n\t\t\t\t\tordinalPositions.sort(function (a, b) {\r\n\t\t\t\t\t\treturn a - b; // without a custom function it is sorted as strings\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (len) {\r\n\t\t\t\t\t\ti = len - 1;\r\n\t\t\t\t\t\twhile (i--) {\r\n\t\t\t\t\t\t\tif (ordinalPositions[i] === ordinalPositions[i + 1]) {\r\n\t\t\t\t\t\t\t\tordinalPositions.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t// cache the length\r\n\t\t\tlen = ordinalPositions.length;\r\n\r\n\t\t\t// Check if we really need the overhead of mapping axis data against the ordinal positions.\r\n\t\t\t// If the series consist of evenly spaced data any way, we don't need any ordinal logic.\r\n\t\t\tif (len > 2) { // two points have equal distance by default\r\n\t\t\t\tdist = ordinalPositions[1] - ordinalPositions[0];\r\n\t\t\t\ti = len - 1;\r\n\t\t\t\twhile (i-- && !useOrdinal) {\r\n\t\t\t\t\tif (ordinalPositions[i + 1] - ordinalPositions[i] !== dist) {\r\n\t\t\t\t\t\tuseOrdinal = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// When zooming in on a week, prevent axis padding for weekends even though the data within\r\n\t\t\t\t// the week is evenly spaced.\r\n\t\t\t\tif (!axis.options.keepOrdinalPadding && (ordinalPositions[0] - min > dist || max - ordinalPositions[ordinalPositions.length - 1] > dist)) {\r\n\t\t\t\t\tuseOrdinal = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Record the slope and offset to compute the linear values from the array index.\r\n\t\t\t// Since the ordinal positions may exceed the current range, get the start and\r\n\t\t\t// end positions within it (#719, #665b)\r\n\t\t\tif (useOrdinal) {\r\n\r\n\t\t\t\t// Register\r\n\t\t\t\taxis.ordinalPositions = ordinalPositions;\r\n\r\n\t\t\t\t// This relies on the ordinalPositions being set. Use mathMax and mathMin to prevent\r\n\t\t\t\t// padding on either sides of the data.\r\n\t\t\t\tminIndex = axis.val2lin(mathMax(min, ordinalPositions[0]), true);\r\n\t\t\t\tmaxIndex = mathMax(axis.val2lin(mathMin(max, ordinalPositions[ordinalPositions.length - 1]), true), 1); // #3339\r\n\r\n\t\t\t\t// Set the slope and offset of the values compared to the indices in the ordinal positions\r\n\t\t\t\taxis.ordinalSlope = slope = (max - min) / (maxIndex - minIndex);\r\n\t\t\t\taxis.ordinalOffset = min - (minIndex * slope);\r\n\r\n\t\t\t} else {\r\n\t\t\t\taxis.ordinalPositions = axis.ordinalSlope = axis.ordinalOffset = UNDEFINED;\r\n\t\t\t}\r\n\t\t\tif (axis.options.ordinal) {\r\n\t\t\t\taxis.doPostTranslate = useOrdinal; // #3818\r\n\t\t\t}\r\n\t\t}\r\n\t\taxis.groupIntervalFactor = null; // reset for next run\r\n\t},\r\n\t/**\r\n\t * Translate from a linear axis value to the corresponding ordinal axis position. If there\r\n\t * are no gaps in the ordinal axis this will be the same. The translated value is the value\r\n\t * that the point would have if the axis were linear, using the same min and max.\r\n\t *\r\n\t * @param Number val The axis value\r\n\t * @param Boolean toIndex Whether to return the index in the ordinalPositions or the new value\r\n\t */\r\n\tval2lin: function (val, toIndex) {\r\n\t\tvar axis = this,\r\n\t\t\tordinalPositions = axis.ordinalPositions;\r\n\r\n\t\tif (!ordinalPositions) {\r\n\t\t\treturn val;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar ordinalLength = ordinalPositions.length,\r\n\t\t\t\ti,\r\n\t\t\t\tdistance,\r\n\t\t\t\tordinalIndex;\r\n\r\n\t\t\t// first look for an exact match in the ordinalpositions array\r\n\t\t\ti = ordinalLength;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (ordinalPositions[i] === val) {\r\n\t\t\t\t\tordinalIndex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// if that failed, find the intermediate position between the two nearest values\r\n\t\t\ti = ordinalLength - 1;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (val > ordinalPositions[i] || i === 0) { // interpolate\r\n\t\t\t\t\tdistance = (val - ordinalPositions[i]) / (ordinalPositions[i + 1] - ordinalPositions[i]); // something between 0 and 1\r\n\t\t\t\t\tordinalIndex = i + distance;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn toIndex ?\r\n\t\t\t\tordinalIndex :\r\n\t\t\t\taxis.ordinalSlope * (ordinalIndex || 0) + axis.ordinalOffset;\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * Translate from linear (internal) to axis value\r\n\t *\r\n\t * @param Number val The linear abstracted value\r\n\t * @param Boolean fromIndex Translate from an index in the ordinal positions rather than a value\r\n\t */\r\n\tlin2val: function (val, fromIndex) {\r\n\t\tvar axis = this,\r\n\t\t\tordinalPositions = axis.ordinalPositions;\r\n\r\n\t\tif (!ordinalPositions) { // the visible range contains only equally spaced values\r\n\t\t\treturn val;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar ordinalSlope = axis.ordinalSlope,\r\n\t\t\t\tordinalOffset = axis.ordinalOffset,\r\n\t\t\t\ti = ordinalPositions.length - 1,\r\n\t\t\t\tlinearEquivalentLeft,\r\n\t\t\t\tlinearEquivalentRight,\r\n\t\t\t\tdistance;\r\n\r\n\r\n\t\t\t// Handle the case where we translate from the index directly, used only\r\n\t\t\t// when panning an ordinal axis\r\n\t\t\tif (fromIndex) {\r\n\r\n\t\t\t\tif (val < 0) { // out of range, in effect panning to the left\r\n\t\t\t\t\tval = ordinalPositions[0];\r\n\t\t\t\t} else if (val > i) { // out of range, panning to the right\r\n\t\t\t\t\tval = ordinalPositions[i];\r\n\t\t\t\t} else { // split it up\r\n\t\t\t\t\ti = mathFloor(val);\r\n\t\t\t\t\tdistance = val - i; // the decimal\r\n\t\t\t\t}\r\n\r\n\t\t\t// Loop down along the ordinal positions. When the linear equivalent of i matches\r\n\t\t\t// an ordinal position, interpolate between the left and right values.\r\n\t\t\t} else {\r\n\t\t\t\twhile (i--) {\r\n\t\t\t\t\tlinearEquivalentLeft = (ordinalSlope * i) + ordinalOffset;\r\n\t\t\t\t\tif (val >= linearEquivalentLeft) {\r\n\t\t\t\t\t\tlinearEquivalentRight = (ordinalSlope * (i + 1)) + ordinalOffset;\r\n\t\t\t\t\t\tdistance = (val - linearEquivalentLeft) / (linearEquivalentRight - linearEquivalentLeft); // something between 0 and 1\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// If the index is within the range of the ordinal positions, return the associated\r\n\t\t\t// or interpolated value. If not, just return the value\r\n\t\t\treturn distance !== UNDEFINED && ordinalPositions[i] !== UNDEFINED ?\r\n\t\t\t\tordinalPositions[i] + (distance ? distance * (ordinalPositions[i + 1] - ordinalPositions[i]) : 0) :\r\n\t\t\t\tval;\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * Get the ordinal positions for the entire data set. This is necessary in chart panning\r\n\t * because we need to find out what points or data groups are available outside the\r\n\t * visible range. When a panning operation starts, if an index for the given grouping\r\n\t * does not exists, it is created and cached. This index is deleted on updated data, so\r\n\t * it will be regenerated the next time a panning operation starts.\r\n\t */\r\n\tgetExtendedPositions: function () {\r\n\t\tvar axis = this,\r\n\t\t\tchart = axis.chart,\r\n\t\t\tgrouping = axis.series[0].currentDataGrouping,\r\n\t\t\tordinalIndex = axis.ordinalIndex,\r\n\t\t\tkey = grouping ? grouping.count + grouping.unitName : 'raw',\r\n\t\t\textremes = axis.getExtremes(),\r\n\t\t\tfakeAxis,\r\n\t\t\tfakeSeries;\r\n\r\n\t\t// If this is the first time, or the ordinal index is deleted by updatedData,\r\n\t\t// create it.\r\n\t\tif (!ordinalIndex) {\r\n\t\t\tordinalIndex = axis.ordinalIndex = {};\r\n\t\t}\r\n\r\n\r\n\t\tif (!ordinalIndex[key]) {\r\n\r\n\t\t\t// Create a fake axis object where the extended ordinal positions are emulated\r\n\t\t\tfakeAxis = {\r\n\t\t\t\tseries: [],\r\n\t\t\t\tgetExtremes: function () {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tmin: extremes.dataMin,\r\n\t\t\t\t\t\tmax: extremes.dataMax\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tordinal: true\r\n\t\t\t\t},\r\n\t\t\t\tval2lin: Axis.prototype.val2lin // #2590\r\n\t\t\t};\r\n\r\n\t\t\t// Add the fake series to hold the full data, then apply processData to it\r\n\t\t\teach(axis.series, function (series) {\r\n\t\t\t\tfakeSeries = {\r\n\t\t\t\t\txAxis: fakeAxis,\r\n\t\t\t\t\txData: series.xData,\r\n\t\t\t\t\tchart: chart,\r\n\t\t\t\t\tdestroyGroupedData: noop\r\n\t\t\t\t};\r\n\t\t\t\tfakeSeries.options = {\r\n\t\t\t\t\tdataGrouping : grouping ? {\r\n\t\t\t\t\t\tenabled: true,\r\n\t\t\t\t\t\tforced: true,\r\n\t\t\t\t\t\tapproximation: 'open', // doesn't matter which, use the fastest\r\n\t\t\t\t\t\tunits: [[grouping.unitName, [grouping.count]]]\r\n\t\t\t\t\t} : {\r\n\t\t\t\t\t\tenabled: false\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tseries.processData.apply(fakeSeries);\r\n\r\n\t\t\t\tfakeAxis.series.push(fakeSeries);\r\n\t\t\t});\r\n\r\n\t\t\t// Run beforeSetTickPositions to compute the ordinalPositions\r\n\t\t\taxis.beforeSetTickPositions.apply(fakeAxis);\r\n\r\n\t\t\t// Cache it\r\n\t\t\tordinalIndex[key] = fakeAxis.ordinalPositions;\r\n\t\t}\r\n\t\treturn ordinalIndex[key];\r\n\t},\r\n\r\n\t/**\r\n\t * Find the factor to estimate how wide the plot area would have been if ordinal\r\n\t * gaps were included. This value is used to compute an imagined plot width in order\r\n\t * to establish the data grouping interval.\r\n\t *\r\n\t * A real world case is the intraday-candlestick\r\n\t * example. Without this logic, it would show the correct data grouping when viewing\r\n\t * a range within each day, but once moving the range to include the gap between two\r\n\t * days, the interval would include the cut-away night hours and the data grouping\r\n\t * would be wrong. So the below method tries to compensate by identifying the most\r\n\t * common point interval, in this case days.\r\n\t *\r\n\t * An opposite case is presented in issue #718. We have a long array of daily data,\r\n\t * then one point is appended one hour after the last point. We expect the data grouping\r\n\t * not to change.\r\n\t *\r\n\t * In the future, if we find cases where this estimation doesn't work optimally, we\r\n\t * might need to add a second pass to the data grouping logic, where we do another run\r\n\t * with a greater interval if the number of data groups is more than a certain fraction\r\n\t * of the desired group count.\r\n\t */\r\n\tgetGroupIntervalFactor: function (xMin, xMax, series) {\r\n\t\tvar i = 0,\r\n\t\t\tprocessedXData = series.processedXData,\r\n\t\t\tlen = processedXData.length,\r\n\t\t\tdistances = [],\r\n\t\t\tmedian,\r\n\t\t\tgroupIntervalFactor = this.groupIntervalFactor;\r\n\r\n\t\t// Only do this computation for the first series, let the other inherit it (#2416)\r\n\t\tif (!groupIntervalFactor) {\r\n\r\n\t\t\t// Register all the distances in an array\r\n\t\t\tfor (; i < len - 1; i++) {\r\n\t\t\t\tdistances[i] = processedXData[i + 1] - processedXData[i];\r\n\t\t\t}\r\n\r\n\t\t\t// Sort them and find the median\r\n\t\t\tdistances.sort(function (a, b) {\r\n\t\t\t\t\treturn a - b;\r\n\t\t\t});\r\n\t\t\tmedian = distances[mathFloor(len / 2)];\r\n\r\n\t\t\t// Compensate for series that don't extend through the entire axis extent. #1675.\r\n\t\t\txMin = mathMax(xMin, processedXData[0]);\r\n\t\t\txMax = mathMin(xMax, processedXData[len - 1]);\r\n\r\n\t\t\tthis.groupIntervalFactor = groupIntervalFactor = (len * median) / (xMax - xMin);\r\n\t\t}\r\n\r\n\t\t// Return the factor needed for data grouping\r\n\t\treturn groupIntervalFactor;\r\n\t},\r\n\r\n\t/**\r\n\t * Make the tick intervals closer because the ordinal gaps make the ticks spread out or cluster\r\n\t */\r\n\tpostProcessTickInterval: function (tickInterval) {\r\n\t\t// TODO: http://jsfiddle.net/highcharts/FQm4E/1/\r\n\t\t// This is a case where this algorithm doesn't work optimally. In this case, the\r\n\t\t// tick labels are spread out per week, but all the gaps reside within weeks. So\r\n\t\t// we have a situation where the labels are courser than the ordinal gaps, and\r\n\t\t// thus the tick interval should not be altered\r\n\t\tvar ordinalSlope = this.ordinalSlope;\r\n\r\n\r\n\t\tif (ordinalSlope) {\r\n\t\t\tif (!this.options.breaks) {\r\n\t\t\t\treturn tickInterval / (ordinalSlope / this.closestPointRange); \r\n\t\t\t} else {\r\n\t\t\t\treturn this.closestPointRange;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn tickInterval;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Extending the Chart.pan method for ordinal axes\r\nwrap(Chart.prototype, 'pan', function (proceed, e) {\r\n\tvar chart = this,\r\n\t\txAxis = chart.xAxis[0],\r\n\t\tchartX = e.chartX,\r\n\t\trunBase = false;\r\n\r\n\tif (xAxis.options.ordinal && xAxis.series.length) {\r\n\r\n\t\tvar mouseDownX = chart.mouseDownX,\r\n\t\t\textremes = xAxis.getExtremes(),\r\n\t\t\tdataMax = extremes.dataMax,\r\n\t\t\tmin = extremes.min,\r\n\t\t\tmax = extremes.max,\r\n\t\t\ttrimmedRange,\r\n\t\t\thoverPoints = chart.hoverPoints,\r\n\t\t\tclosestPointRange = xAxis.closestPointRange,\r\n\t\t\tpointPixelWidth = xAxis.translationSlope * (xAxis.ordinalSlope || closestPointRange),\r\n\t\t\tmovedUnits = (mouseDownX - chartX) / pointPixelWidth, // how many ordinal units did we move?\r\n\t\t\textendedAxis = { ordinalPositions: xAxis.getExtendedPositions() }, // get index of all the chart's points\r\n\t\t\tordinalPositions,\r\n\t\t\tsearchAxisLeft,\r\n\t\t\tlin2val = xAxis.lin2val,\r\n\t\t\tval2lin = xAxis.val2lin,\r\n\t\t\tsearchAxisRight;\r\n\r\n\t\tif (!extendedAxis.ordinalPositions) { // we have an ordinal axis, but the data is equally spaced\r\n\t\t\trunBase = true;\r\n\r\n\t\t} else if (mathAbs(movedUnits) > 1) {\r\n\r\n\t\t\t// Remove active points for shared tooltip\r\n\t\t\tif (hoverPoints) {\r\n\t\t\t\teach(hoverPoints, function (point) {\r\n\t\t\t\t\tpoint.setState();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (movedUnits < 0) {\r\n\t\t\t\tsearchAxisLeft = extendedAxis;\r\n\t\t\t\tsearchAxisRight = xAxis.ordinalPositions ? xAxis : extendedAxis;\r\n\t\t\t} else {\r\n\t\t\t\tsearchAxisLeft = xAxis.ordinalPositions ? xAxis : extendedAxis;\r\n\t\t\t\tsearchAxisRight = extendedAxis;\r\n\t\t\t}\r\n\r\n\t\t\t// In grouped data series, the last ordinal position represents the grouped data, which is\r\n\t\t\t// to the left of the real data max. If we don't compensate for this, we will be allowed\r\n\t\t\t// to pan grouped data series passed the right of the plot area.\r\n\t\t\tordinalPositions = searchAxisRight.ordinalPositions;\r\n\t\t\tif (dataMax > ordinalPositions[ordinalPositions.length - 1]) {\r\n\t\t\t\tordinalPositions.push(dataMax);\r\n\t\t\t}\r\n\r\n\t\t\t// Get the new min and max values by getting the ordinal index for the current extreme,\r\n\t\t\t// then add the moved units and translate back to values. This happens on the\r\n\t\t\t// extended ordinal positions if the new position is out of range, else it happens\r\n\t\t\t// on the current x axis which is smaller and faster.\r\n\t\t\tchart.fixedRange = max - min;\r\n\t\t\ttrimmedRange = xAxis.toFixedRange(null, null,\r\n\t\t\t\tlin2val.apply(searchAxisLeft, [\r\n\t\t\t\t\tval2lin.apply(searchAxisLeft, [min, true]) + movedUnits, // the new index\r\n\t\t\t\t\ttrue // translate from index\r\n\t\t\t\t]),\r\n\t\t\t\tlin2val.apply(searchAxisRight, [\r\n\t\t\t\t\tval2lin.apply(searchAxisRight, [max, true]) + movedUnits, // the new index\r\n\t\t\t\t\ttrue // translate from index\r\n\t\t\t\t])\r\n\t\t\t);\r\n\r\n\t\t\t// Apply it if it is within the available data range\r\n\t\t\tif (trimmedRange.min >= mathMin(extremes.dataMin, min) && trimmedRange.max <= mathMax(dataMax, max)) {\r\n\t\t\t\txAxis.setExtremes(trimmedRange.min, trimmedRange.max, true, false, { trigger: 'pan' });\r\n\t\t\t}\r\n\r\n\t\t\tchart.mouseDownX = chartX; // set new reference for next run\r\n\t\t\tcss(chart.container, { cursor: 'move' });\r\n\t\t}\r\n\r\n\t} else {\r\n\t\trunBase = true;\r\n\t}\r\n\r\n\t// revert to the linear chart.pan version\r\n\tif (runBase) {\r\n\t\t// call the original function\r\n\t\tproceed.apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t}\r\n});\r\n\r\n\r\n\r\n/**\r\n * Extend getSegments by identifying gaps in the ordinal data so that we can draw a gap in the\r\n * line or area\r\n */\r\nwrap(Series.prototype, 'getSegments', function (proceed) {\r\n\r\n\tvar series = this,\r\n\t\tsegments,\r\n\t\tgapSize = series.options.gapSize,\r\n\t\txAxis = series.xAxis;\r\n\r\n\t// call base method\r\n\tproceed.apply(this, Array.prototype.slice.call(arguments, 1));\r\n\r\n\tif (gapSize) {\r\n\r\n\t\t// properties\r\n\t\tsegments = series.segments;\r\n\r\n\t\t// extension for ordinal breaks\r\n\t\teach(segments, function (segment, no) {\r\n\t\t\tvar i = segment.length - 1;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (segment[i + 1].x - segment[i].x > xAxis.closestPointRange * gapSize) {\r\n\t\t\t\t\tsegments.splice( // insert after this one\r\n\t\t\t\t\t\tno + 1,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\tsegment.splice(i + 1, segment.length - i)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\n/* ****************************************************************************\r\n * End ordinal axis logic                                                   *\r\n *****************************************************************************/\r\n/**\r\n * Highstock JS v2.1.3 (2015-02-27)\r\n * Highcharts Broken Axis module\r\n * \r\n * Author: Stephane Vanraes, Torstein Honsi\r\n * License: www.highcharts.com/license\r\n */\r\n\r\n/*global HighchartsAdapter*/\r\n(function (H) {\t\r\n\r\n\t\"use strict\";\r\n\r\n\tvar pick = H.pick,\r\n\t\twrap = H.wrap,\r\n\t\textend = H.extend,\r\n\t\tfireEvent = HighchartsAdapter.fireEvent,\r\n\t\tAxis = H.Axis,\r\n\t\tSeries = H.Series;\r\n\r\n\tfunction stripArguments() {\r\n\t\treturn Array.prototype.slice.call(arguments, 1);\r\n\t}\r\n\r\n\textend(Axis.prototype, {\r\n\t\tisInBreak: function (brk, val) {\r\n\t\t\tvar repeat = brk.repeat || Infinity,\r\n\t\t\t\tfrom = brk.from,\r\n\t\t\t\tlength = brk.to - brk.from,\r\n\t\t\t\ttest = (val >= from ? (val - from) % repeat :  repeat - ((from - val) % repeat));\r\n\r\n\t\t\tif (!brk.inclusive) {\r\n\t\t\t\treturn (test < length && test !== 0);\r\n\t\t\t} else {\r\n\t\t\t\treturn (test <= length);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tisInAnyBreak: function (val, testKeep) {\r\n\t\t\t// Sanity Check\t\t\t\r\n\t\t\tif (!this.options.breaks) { return false; }\r\n\r\n\t\t\tvar breaks = this.options.breaks,\r\n\t\t\t\ti = breaks.length,\r\n\t\t\t\tinbrk = false,\r\n\t\t\t\tkeep = false;\r\n\r\n\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (this.isInBreak(breaks[i], val)) {\r\n\t\t\t\t\tinbrk = true;\r\n\t\t\t\t\tif (!keep) {\r\n\t\t\t\t\t\tkeep = pick(breaks[i].showPoints, this.isXAxis ? false : true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (inbrk && testKeep) {\r\n\t\t\t\treturn inbrk && !keep;\r\n\t\t\t} else {\r\n\t\t\t\treturn inbrk;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\twrap(Axis.prototype, 'setTickPositions', function (proceed) {\r\n\t\tproceed.apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t\r\n\t\tif (this.options.breaks) {\r\n\t\t\tvar axis = this,\r\n\t\t\t\ttickPositions = this.tickPositions,\r\n\t\t\t\tinfo = this.tickPositions.info,\r\n\t\t\t\tnewPositions = [],\r\n\t\t\t\ti;\r\n\r\n\t\t\tif (info && info.totalRange >= axis.closestPointRange) { \r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < tickPositions.length; i++) {\r\n\t\t\t\tif (!axis.isInAnyBreak(tickPositions[i])) {\r\n\t\t\t\t\tnewPositions.push(tickPositions[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.tickPositions = newPositions;\r\n\t\t\tthis.tickPositions.info = info;\r\n\t\t}\r\n\t});\r\n\t\r\n\twrap(Axis.prototype, 'init', function (proceed, chart, userOptions) {\r\n\t\t// Force Axis to be not-ordinal when breaks are defined\r\n\t\tif (userOptions.breaks && userOptions.breaks.length) {\r\n\t\t\tuserOptions.ordinal = false;\r\n\t\t}\r\n\r\n\t\tproceed.call(this, chart, userOptions);\r\n\r\n\t\tif (this.options.breaks) {\r\n\r\n\t\t\tvar axis = this;\r\n\t\t\t\r\n\t\t\taxis.doPostTranslate = true;\r\n\r\n\t\t\tthis.val2lin = function (val) {\r\n\t\t\t\tvar nval = val,\r\n\t\t\t\t\tbrk,\r\n\t\t\t\t\ti;\r\n\r\n\t\t\t\tfor (i = 0; i < axis.breakArray.length; i++) {\r\n\t\t\t\t\tbrk = axis.breakArray[i];\r\n\t\t\t\t\tif (brk.to <= val) {\r\n\t\t\t\t\t\tnval -= (brk.len);\r\n\t\t\t\t\t} else if (brk.from >= val) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (axis.isInBreak(brk, val)) {\r\n\t\t\t\t\t\tnval -= (val - brk.from);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn nval;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tthis.lin2val = function (val) {\r\n\t\t\t\tvar nval = val,\r\n\t\t\t\t\tbrk,\r\n\t\t\t\t\ti;\r\n\r\n\t\t\t\tfor (i = 0; i < axis.breakArray.length; i++) {\r\n\t\t\t\t\tbrk = axis.breakArray[i];\r\n\t\t\t\t\tif (brk.from >= nval) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (brk.to < nval) {\r\n\t\t\t\t\t\tnval += (brk.to - brk.from);\r\n\t\t\t\t\t} else if (axis.isInBreak(brk, nval)) {\r\n\t\t\t\t\t\tnval += (brk.to - brk.from);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn nval;\r\n\t\t\t};\r\n\r\n\t\t\tthis.setExtremes = function (newMin, newMax, redraw, animation, eventArguments) {\r\n\t\t\t\t// If trying to set extremes inside a break, extend it to before and after the break ( #3857 )\r\n\t\t\t\twhile (this.isInAnyBreak(newMin)) {\r\n\t\t\t\t\tnewMin -= this.closestPointRange;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\twhile (this.isInAnyBreak(newMax)) {\r\n\t\t\t\t\tnewMax -= this.closestPointRange;\r\n\t\t\t\t}\r\n\t\t\t\tAxis.prototype.setExtremes.call(this, newMin, newMax, redraw, animation, eventArguments);\r\n\t\t\t};\r\n\r\n\t\t\tthis.setAxisTranslation = function (saveOld) {\r\n\t\t\t\tAxis.prototype.setAxisTranslation.call(this, saveOld);\r\n\r\n\t\t\t\tvar breaks = axis.options.breaks,\r\n\t\t\t\t\tbreakArrayT = [],\t// Temporary one\r\n\t\t\t\t\tbreakArray = [],\r\n\t\t\t\t\tlength = 0, \r\n\t\t\t\t\tinBrk,\r\n\t\t\t\t\trepeat,\r\n\t\t\t\t\tbrk,\r\n\t\t\t\t\tmin = axis.userMin || axis.min,\r\n\t\t\t\t\tmax = axis.userMax || axis.max,\r\n\t\t\t\t\tstart,\r\n\t\t\t\t\ti,\r\n\t\t\t\t\tj;\r\n\r\n\t\t\t\t// Min & Max Check\r\n\t\t\t\tfor (i in breaks) {\r\n\t\t\t\t\tbrk = breaks[i];\r\n\t\t\t\t\tif (axis.isInBreak(brk, min)) {\r\n\t\t\t\t\t\tmin += (brk.to % brk.repeat) - (min % brk.repeat);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (axis.isInBreak(brk, max)) {\r\n\t\t\t\t\t\tmax -= (max % brk.repeat) - (brk.from % brk.repeat);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Construct an array holding all breaks in the axis\r\n\t\t\t\tfor (i in breaks) {\r\n\t\t\t\t\tbrk = breaks[i];\r\n\t\t\t\t\tstart = brk.from;\r\n\t\t\t\t\trepeat = brk.repeat || Infinity;\r\n\r\n\t\t\t\t\twhile (start - repeat > min) {\r\n\t\t\t\t\t\tstart -= repeat;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (start < min) {\r\n\t\t\t\t\t\tstart += repeat;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (j = start; j < max; j += repeat) {\r\n\t\t\t\t\t\tbreakArrayT.push({\r\n\t\t\t\t\t\t\tvalue: j,\r\n\t\t\t\t\t\t\tmove: 'in'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreakArrayT.push({\r\n\t\t\t\t\t\t\tvalue: j + (brk.to - brk.from),\r\n\t\t\t\t\t\t\tmove: 'out',\r\n\t\t\t\t\t\t\tsize: brk.breakSize\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreakArrayT.sort(function (a, b) {\r\n\t\t\t\t\tif (a.value === b.value) {\r\n\t\t\t\t\t\treturn (a.move === 'in' ? 0 : 1) - (b.move === 'in' ? 0 : 1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn a.value - b.value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// Simplify the breaks\r\n\t\t\t\tinBrk = 0;\r\n\t\t\t\tstart = min;\r\n\r\n\t\t\t\tfor (i in breakArrayT) {\r\n\t\t\t\t\tbrk = breakArrayT[i];\r\n\t\t\t\t\tinBrk += (brk.move === 'in' ? 1 : -1);\r\n\r\n\t\t\t\t\tif (inBrk === 1 && brk.move === 'in') {\r\n\t\t\t\t\t\tstart = brk.value;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (inBrk === 0) {\r\n\t\t\t\t\t\tbreakArray.push({\r\n\t\t\t\t\t\t\tfrom: start,\r\n\t\t\t\t\t\t\tto: brk.value,\r\n\t\t\t\t\t\t\tlen: brk.value - start - (brk.size || 0)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlength += brk.value - start - (brk.size || 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\taxis.breakArray = breakArray;\r\n\r\n\t\t\t\tfireEvent(axis, 'afterBreaks');\r\n\t\t\t\t\r\n\t\t\t\taxis.transA *= ((max - axis.min) / (max - min - length));\r\n\r\n\t\t\t\taxis.min = min;\r\n\t\t\t\taxis.max = max;\r\n\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\twrap(Series.prototype, 'generatePoints', function (proceed) {\r\n\r\n\t\tproceed.apply(this, stripArguments(arguments));\r\n\r\n\t\tvar series = this,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\tyAxis = series.yAxis,\r\n\t\t\tpoints = series.points,\r\n\t\t\tpoint,\r\n\t\t\ti = points.length;\r\n\r\n\r\n\t\tif (xAxis && yAxis && (xAxis.options.breaks || yAxis.options.breaks)) {\r\n\t\t\twhile (i--) {\r\n\t\t\t\tpoint = points[i];\r\n\r\n\t\t\t\tif (xAxis.isInAnyBreak(point.x, true) || yAxis.isInAnyBreak(point.y, true)) {\r\n\t\t\t\t\tpoints.splice(i, 1);\r\n\t\t\t\t\tthis.data[i].destroyElements(); // removes the graphics for this point if they exist\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\twrap(H.seriesTypes.column.prototype, 'drawPoints', function (proceed) {\r\n\t\tproceed.apply(this);\r\n\r\n\t\tvar series = this,\r\n\t\t\tpoints = series.points,\r\n\t\t\tyAxis = series.yAxis,\r\n\t\t\tbreaks = yAxis.breakArray || [],\r\n\t\t\tpoint,\r\n\t\t\tbrk,\r\n\t\t\ti,\r\n\t\t\tj,\r\n\t\t\ty;\r\n\r\n\t\tfor (i = 0; i < points.length; i++) {\r\n\t\t\tpoint = points[i];\r\n\t\t\ty = point.stackY || point.y;\r\n\t\t\tfor (j = 0; j < breaks.length; j++) {\r\n\t\t\t\tbrk = breaks[j];\r\n\t\t\t\tif (y < brk.from) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else if (y > brk.to) {\r\n\t\t\t\t\tfireEvent(yAxis, 'pointBreak', {point: point, brk: brk});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfireEvent(yAxis, 'pointInBreak', {point: point, brk: brk});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n}(Highcharts));\r\n/* ****************************************************************************\r\n * Start data grouping module\t\t\t\t\t\t\t\t\t\t\t\t *\r\n ******************************************************************************/\r\n/*jslint white:true */\r\nvar DATA_GROUPING = 'dataGrouping',\r\n\tseriesProto = Series.prototype,\r\n\ttooltipProto = Tooltip.prototype,\r\n\tbaseProcessData = seriesProto.processData,\r\n\tbaseGeneratePoints = seriesProto.generatePoints,\r\n\tbaseDestroy = seriesProto.destroy,\r\n\tbaseTooltipFooterHeaderFormatter = tooltipProto.tooltipFooterHeaderFormatter,\r\n\tNUMBER = 'number',\r\n\r\n\tcommonOptions = {\r\n\t\tapproximation: 'average', // average, open, high, low, close, sum\r\n\t\t//enabled: null, // (true for stock charts, false for basic),\r\n\t\t//forced: undefined,\r\n\t\tgroupPixelWidth: 2,\r\n\t\t// the first one is the point or start value, the second is the start value if we're dealing with range,\r\n\t\t// the third one is the end value if dealing with a range\r\n\t\tdateTimeLabelFormats: {\r\n\t\t\tmillisecond: ['%A, %b %e, %H:%M:%S.%L', '%A, %b %e, %H:%M:%S.%L', '-%H:%M:%S.%L'],\r\n\t\t\tsecond: ['%A, %b %e, %H:%M:%S', '%A, %b %e, %H:%M:%S', '-%H:%M:%S'],\r\n\t\t\tminute: ['%A, %b %e, %H:%M', '%A, %b %e, %H:%M', '-%H:%M'],\r\n\t\t\thour: ['%A, %b %e, %H:%M', '%A, %b %e, %H:%M', '-%H:%M'],\r\n\t\t\tday: ['%A, %b %e, %Y', '%A, %b %e', '-%A, %b %e, %Y'],\r\n\t\t\tweek: ['Week from %A, %b %e, %Y', '%A, %b %e', '-%A, %b %e, %Y'],\r\n\t\t\tmonth: ['%B %Y', '%B', '-%B %Y'],\r\n\t\t\tyear: ['%Y', '%Y', '-%Y']\r\n\t\t}\r\n\t\t// smoothed = false, // enable this for navigator series only\r\n\t},\r\n\r\n\tspecificOptions = { // extends common options\r\n\t\tline: {},\r\n\t\tspline: {},\r\n\t\tarea: {},\r\n\t\tareaspline: {},\r\n\t\tcolumn: {\r\n\t\t\tapproximation: 'sum',\r\n\t\t\tgroupPixelWidth: 10\r\n\t\t},\r\n\t\tarearange: {\r\n\t\t\tapproximation: 'range'\r\n\t\t},\r\n\t\tareasplinerange: {\r\n\t\t\tapproximation: 'range'\r\n\t\t},\r\n\t\tcolumnrange: {\r\n\t\t\tapproximation: 'range',\r\n\t\t\tgroupPixelWidth: 10\r\n\t\t},\r\n\t\tcandlestick: {\r\n\t\t\tapproximation: 'ohlc',\r\n\t\t\tgroupPixelWidth: 10\r\n\t\t},\r\n\t\tohlc: {\r\n\t\t\tapproximation: 'ohlc',\r\n\t\t\tgroupPixelWidth: 5\r\n\t\t}\r\n\t},\r\n\r\n\t// units are defined in a separate array to allow complete overriding in case of a user option\r\n\tdefaultDataGroupingUnits = [[\r\n\t\t\t'millisecond', // unit name\r\n\t\t\t[1, 2, 5, 10, 20, 25, 50, 100, 200, 500] // allowed multiples\r\n\t\t], [\r\n\t\t\t'second',\r\n\t\t\t[1, 2, 5, 10, 15, 30]\r\n\t\t], [\r\n\t\t\t'minute',\r\n\t\t\t[1, 2, 5, 10, 15, 30]\r\n\t\t], [\r\n\t\t\t'hour',\r\n\t\t\t[1, 2, 3, 4, 6, 8, 12]\r\n\t\t], [\r\n\t\t\t'day',\r\n\t\t\t[1]\r\n\t\t], [\r\n\t\t\t'week',\r\n\t\t\t[1]\r\n\t\t], [\r\n\t\t\t'month',\r\n\t\t\t[1, 3, 6]\r\n\t\t], [\r\n\t\t\t'year',\r\n\t\t\tnull\r\n\t\t]\r\n\t],\r\n\r\n\r\n\t/**\r\n\t * Define the available approximation types. The data grouping approximations takes an array\r\n\t * or numbers as the first parameter. In case of ohlc, four arrays are sent in as four parameters.\r\n\t * Each array consists only of numbers. In case null values belong to the group, the property\r\n\t * .hasNulls will be set to true on the array.\r\n\t */\r\n\tapproximations = {\r\n\t\tsum: function (arr) {\r\n\t\t\tvar len = arr.length,\r\n\t\t\t\tret;\r\n\r\n\t\t\t// 1. it consists of nulls exclusively\r\n\t\t\tif (!len && arr.hasNulls) {\r\n\t\t\t\tret = null;\r\n\t\t\t// 2. it has a length and real values\r\n\t\t\t} else if (len) {\r\n\t\t\t\tret = 0;\r\n\t\t\t\twhile (len--) {\r\n\t\t\t\t\tret += arr[len];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 3. it has zero length, so just return undefined\r\n\t\t\t// => doNothing()\r\n\r\n\t\t\treturn ret;\r\n\t\t},\r\n\t\taverage: function (arr) {\r\n\t\t\tvar len = arr.length,\r\n\t\t\t\tret = approximations.sum(arr);\r\n\r\n\t\t\t// If we have a number, return it divided by the length. If not, return\r\n\t\t\t// null or undefined based on what the sum method finds.\r\n\t\t\tif (typeof ret === NUMBER && len) {\r\n\t\t\t\tret = ret / len;\r\n\t\t\t}\r\n\r\n\t\t\treturn ret;\r\n\t\t},\r\n\t\topen: function (arr) {\r\n\t\t\treturn arr.length ? arr[0] : (arr.hasNulls ? null : UNDEFINED);\r\n\t\t},\r\n\t\thigh: function (arr) {\r\n\t\t\treturn arr.length ? arrayMax(arr) : (arr.hasNulls ? null : UNDEFINED);\r\n\t\t},\r\n\t\tlow: function (arr) {\r\n\t\t\treturn arr.length ? arrayMin(arr) : (arr.hasNulls ? null : UNDEFINED);\r\n\t\t},\r\n\t\tclose: function (arr) {\r\n\t\t\treturn arr.length ? arr[arr.length - 1] : (arr.hasNulls ? null : UNDEFINED);\r\n\t\t},\r\n\t\t// ohlc and range are special cases where a multidimensional array is input and an array is output\r\n\t\tohlc: function (open, high, low, close) {\r\n\t\t\topen = approximations.open(open);\r\n\t\t\thigh = approximations.high(high);\r\n\t\t\tlow = approximations.low(low);\r\n\t\t\tclose = approximations.close(close);\r\n\r\n\t\t\tif (typeof open === NUMBER || typeof high === NUMBER || typeof low === NUMBER || typeof close === NUMBER) {\r\n\t\t\t\treturn [open, high, low, close];\r\n\t\t\t}\r\n\t\t\t// else, return is undefined\r\n\t\t},\r\n\t\trange: function (low, high) {\r\n\t\t\tlow = approximations.low(low);\r\n\t\t\thigh = approximations.high(high);\r\n\r\n\t\t\tif (typeof low === NUMBER || typeof high === NUMBER) {\r\n\t\t\t\treturn [low, high];\r\n\t\t\t}\r\n\t\t\t// else, return is undefined\r\n\t\t}\r\n\t};\r\n\r\n/*jslint white:false */\r\n\r\n/**\r\n * Takes parallel arrays of x and y data and groups the data into intervals defined by groupPositions, a collection\r\n * of starting x values for each group.\r\n */\r\nseriesProto.groupData = function (xData, yData, groupPositions, approximation) {\r\n\tvar series = this,\r\n\t\tdata = series.data,\r\n\t\tdataOptions = series.options.data,\r\n\t\tgroupedXData = [],\r\n\t\tgroupedYData = [],\r\n\t\tdataLength = xData.length,\r\n\t\tpointX,\r\n\t\tpointY,\r\n\t\tgroupedY,\r\n\t\thandleYData = !!yData, // when grouping the fake extended axis for panning, we don't need to consider y\r\n\t\tvalues = [[], [], [], []],\r\n\t\tapproximationFn = typeof approximation === 'function' ? approximation : approximations[approximation],\r\n\t\tpointArrayMap = series.pointArrayMap,\r\n\t\tpointArrayMapLength = pointArrayMap && pointArrayMap.length,\r\n\t\ti;\r\n\r\n\t// Start with the first point within the X axis range (#2696)\r\n\tfor (i = 0; i <= dataLength; i++) {\r\n\t\tif (xData[i] >= groupPositions[0]) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tfor (; i <= dataLength; i++) {\r\n\r\n\t\t// when a new group is entered, summarize and initiate the previous group\r\n\t\twhile ((groupPositions[1] !== UNDEFINED && xData[i] >= groupPositions[1]) ||\r\n\t\t\t\ti === dataLength) { // get the last group\r\n\r\n\t\t\t// get group x and y\r\n\t\t\tpointX = groupPositions.shift();\r\n\t\t\tgroupedY = approximationFn.apply(0, values);\r\n\r\n\t\t\t// push the grouped data\r\n\t\t\tif (groupedY !== UNDEFINED) {\r\n\t\t\t\tgroupedXData.push(pointX);\r\n\t\t\t\tgroupedYData.push(groupedY);\r\n\t\t\t}\r\n\r\n\t\t\t// reset the aggregate arrays\r\n\t\t\tvalues[0] = [];\r\n\t\t\tvalues[1] = [];\r\n\t\t\tvalues[2] = [];\r\n\t\t\tvalues[3] = [];\r\n\r\n\t\t\t// don't loop beyond the last group\r\n\t\t\tif (i === dataLength) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// break out\r\n\t\tif (i === dataLength) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// for each raw data point, push it to an array that contains all values for this specific group\r\n\t\tif (pointArrayMap) {\r\n\r\n\t\t\tvar index = series.cropStart + i,\r\n\t\t\t\tpoint = (data && data[index]) || series.pointClass.prototype.applyOptions.apply({ series: series }, [dataOptions[index]]),\r\n\t\t\t\tj,\r\n\t\t\t\tval;\r\n\r\n\t\t\tfor (j = 0; j < pointArrayMapLength; j++) {\r\n\t\t\t\tval = point[pointArrayMap[j]];\r\n\t\t\t\tif (typeof val === NUMBER) {\r\n\t\t\t\t\tvalues[j].push(val);\r\n\t\t\t\t} else if (val === null) {\r\n\t\t\t\t\tvalues[j].hasNulls = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tpointY = handleYData ? yData[i] : null;\r\n\r\n\t\t\tif (typeof pointY === NUMBER) {\r\n\t\t\t\tvalues[0].push(pointY);\r\n\t\t\t} else if (pointY === null) {\r\n\t\t\t\tvalues[0].hasNulls = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\t\r\n\treturn [groupedXData, groupedYData];\r\n};\r\n\r\n/**\r\n * Extend the basic processData method, that crops the data to the current zoom\r\n * range, with data grouping logic.\r\n */\r\nseriesProto.processData = function () {\r\n\tvar series = this,\r\n\t\tchart = series.chart,\r\n\t\toptions = series.options,\r\n\t\tdataGroupingOptions = options[DATA_GROUPING],\r\n\t\tgroupingEnabled = series.allowDG !== false && dataGroupingOptions && pick(dataGroupingOptions.enabled, chart.options._stock),\r\n\t\thasGroupedData;\r\n\r\n\t// run base method\r\n\tseries.forceCrop = groupingEnabled; // #334\r\n\tseries.groupPixelWidth = null; // #2110\r\n\tseries.hasProcessed = true; // #2692\r\n\r\n\t// skip if processData returns false or if grouping is disabled (in that order)\r\n\tif (baseProcessData.apply(series, arguments) === false || !groupingEnabled) {\r\n\t\treturn;\r\n\r\n\t} else {\r\n\t\tseries.destroyGroupedData();\r\n\r\n\t}\r\n\tvar i,\r\n\t\tprocessedXData = series.processedXData,\r\n\t\tprocessedYData = series.processedYData,\r\n\t\tplotSizeX = chart.plotSizeX,\r\n\t\txAxis = series.xAxis,\r\n\t\tordinal = xAxis.options.ordinal,\r\n\t\tgroupPixelWidth = series.groupPixelWidth = xAxis.getGroupPixelWidth && xAxis.getGroupPixelWidth(),\r\n\t\tnonGroupedPointRange = series.pointRange;\r\n\r\n\t// Execute grouping if the amount of points is greater than the limit defined in groupPixelWidth\r\n\tif (groupPixelWidth) {\r\n\t\thasGroupedData = true;\r\n\r\n\t\tseries.points = null; // force recreation of point instances in series.translate\r\n\r\n\t\tvar extremes = xAxis.getExtremes(),\r\n\t\t\txMin = extremes.min,\r\n\t\t\txMax = extremes.max,\r\n\t\t\tgroupIntervalFactor = (ordinal && xAxis.getGroupIntervalFactor(xMin, xMax, series)) || 1,\r\n\t\t\tinterval = (groupPixelWidth * (xMax - xMin) / plotSizeX) * groupIntervalFactor,\r\n\t\t\tgroupPositions = xAxis.getTimeTicks(\r\n\t\t\t\txAxis.normalizeTimeTickInterval(interval, dataGroupingOptions.units || defaultDataGroupingUnits),\r\n\t\t\t\txMin,\r\n\t\t\t\txMax,\r\n\t\t\t\txAxis.options.startOfWeek,\r\n\t\t\t\tprocessedXData,\r\n\t\t\t\tseries.closestPointRange\r\n\t\t\t),\r\n\t\t\tgroupedXandY = seriesProto.groupData.apply(series, [processedXData, processedYData, groupPositions, dataGroupingOptions.approximation]),\r\n\t\t\tgroupedXData = groupedXandY[0],\r\n\t\t\tgroupedYData = groupedXandY[1];\r\n\r\n\t\t// prevent the smoothed data to spill out left and right, and make\r\n\t\t// sure data is not shifted to the left\r\n\t\tif (dataGroupingOptions.smoothed) {\r\n\t\t\ti = groupedXData.length - 1;\r\n\t\t\tgroupedXData[i] = xMax;\r\n\t\t\twhile (i-- && i > 0) {\r\n\t\t\t\tgroupedXData[i] += interval / 2;\r\n\t\t\t}\r\n\t\t\tgroupedXData[0] = xMin;\r\n\t\t}\r\n\r\n\t\t// record what data grouping values were used\r\n\t\tseries.currentDataGrouping = groupPositions.info;\r\n\t\tif (options.pointRange === null) { // null means auto, as for columns, candlesticks and OHLC\r\n\t\t\tseries.pointRange = groupPositions.info.totalRange;\r\n\t\t}\r\n\t\tseries.closestPointRange = groupPositions.info.totalRange;\r\n\r\n\t\t// Make sure the X axis extends to show the first group (#2533)\r\n\t\tif (defined(groupedXData[0]) && groupedXData[0] < xAxis.dataMin) {\r\n\t\t\tif (xAxis.min === xAxis.dataMin) {\r\n\t\t\t\txAxis.min = groupedXData[0];\r\n\t\t\t}\r\n\t\t\txAxis.dataMin = groupedXData[0];\r\n\t\t}\r\n\r\n\t\t// set series props\r\n\t\tseries.processedXData = groupedXData;\r\n\t\tseries.processedYData = groupedYData;\r\n\t} else {\r\n\t\tseries.currentDataGrouping = null;\r\n\t\tseries.pointRange = nonGroupedPointRange;\r\n\t}\r\n\tseries.hasGroupedData = hasGroupedData;\r\n};\r\n\r\n/**\r\n * Destroy the grouped data points. #622, #740\r\n */\r\nseriesProto.destroyGroupedData = function () {\r\n\r\n\tvar groupedData = this.groupedData;\r\n\r\n\t// clear previous groups\r\n\teach(groupedData || [], function (point, i) {\r\n\t\tif (point) {\r\n\t\t\tgroupedData[i] = point.destroy ? point.destroy() : null;\r\n\t\t}\r\n\t});\r\n\tthis.groupedData = null;\r\n};\r\n\r\n/**\r\n * Override the generatePoints method by adding a reference to grouped data\r\n */\r\nseriesProto.generatePoints = function () {\r\n\r\n\tbaseGeneratePoints.apply(this);\r\n\r\n\t// record grouped data in order to let it be destroyed the next time processData runs\r\n\tthis.destroyGroupedData(); // #622\r\n\tthis.groupedData = this.hasGroupedData ? this.points : null;\r\n};\r\n\r\n/**\r\n * Extend the original method, make the tooltip's header reflect the grouped range\r\n */\r\ntooltipProto.tooltipFooterHeaderFormatter = function (point, isFooter) {\r\n\tvar tooltip = this,\r\n\t\tseries = point.series,\r\n\t\toptions = series.options,\r\n\t\ttooltipOptions = series.tooltipOptions,\r\n\t\tdataGroupingOptions = options.dataGrouping,\r\n\t\txDateFormat = tooltipOptions.xDateFormat,\r\n\t\txDateFormatEnd,\r\n\t\txAxis = series.xAxis,\r\n\t\tcurrentDataGrouping,\r\n\t\tdateTimeLabelFormats,\r\n\t\tlabelFormats,\r\n\t\tformattedKey,\r\n\t\tret;\r\n\r\n\t// apply only to grouped series\r\n\tif (xAxis && xAxis.options.type === 'datetime' && dataGroupingOptions && isNumber(point.key)) {\r\n\r\n\t\t// set variables\r\n\t\tcurrentDataGrouping = series.currentDataGrouping;\r\n\t\tdateTimeLabelFormats = dataGroupingOptions.dateTimeLabelFormats;\r\n\r\n\t\t// if we have grouped data, use the grouping information to get the right format\r\n\t\tif (currentDataGrouping) {\r\n\t\t\tlabelFormats = dateTimeLabelFormats[currentDataGrouping.unitName];\r\n\t\t\tif (currentDataGrouping.count === 1) {\r\n\t\t\t\txDateFormat = labelFormats[0];\r\n\t\t\t} else {\r\n\t\t\t\txDateFormat = labelFormats[1];\r\n\t\t\t\txDateFormatEnd = labelFormats[2];\r\n\t\t\t}\r\n\t\t// if not grouped, and we don't have set the xDateFormat option, get the best fit,\r\n\t\t// so if the least distance between points is one minute, show it, but if the\r\n\t\t// least distance is one day, skip hours and minutes etc.\r\n\t\t} else if (!xDateFormat && dateTimeLabelFormats) {\r\n\t\t\txDateFormat = tooltip.getXDateFormat(point, tooltipOptions, xAxis);\r\n\t\t}\r\n\r\n\t\t// now format the key\r\n\t\tformattedKey = dateFormat(xDateFormat, point.key);\r\n\t\tif (xDateFormatEnd) {\r\n\t\t\tformattedKey += dateFormat(xDateFormatEnd, point.key + currentDataGrouping.totalRange - 1);\r\n\t\t}\r\n\r\n\t\t// return the replaced format\r\n\t\tret = tooltipOptions[(isFooter ? 'footer' : 'header') + 'Format'].replace('{point.key}', formattedKey);\r\n\r\n\t// else, fall back to the regular formatter\r\n\t} else {\r\n\t\tret = baseTooltipFooterHeaderFormatter.call(tooltip, point, isFooter);\r\n\t}\r\n\r\n\treturn ret;\r\n};\r\n\r\n/**\r\n * Extend the series destroyer\r\n */\r\nseriesProto.destroy = function () {\r\n\tvar series = this,\r\n\t\tgroupedData = series.groupedData || [],\r\n\t\ti = groupedData.length;\r\n\r\n\twhile (i--) {\r\n\t\tif (groupedData[i]) {\r\n\t\t\tgroupedData[i].destroy();\r\n\t\t}\r\n\t}\r\n\tbaseDestroy.apply(series);\r\n};\r\n\r\n\r\n// Handle default options for data grouping. This must be set at runtime because some series types are\r\n// defined after this.\r\nwrap(seriesProto, 'setOptions', function (proceed, itemOptions) {\r\n\r\n\tvar options = proceed.call(this, itemOptions),\r\n\t\ttype = this.type,\r\n\t\tplotOptions = this.chart.options.plotOptions,\r\n\t\tdefaultOptions = defaultPlotOptions[type].dataGrouping;\r\n\r\n\tif (specificOptions[type]) { // #1284\r\n\t\tif (!defaultOptions) {\r\n\t\t\tdefaultOptions = merge(commonOptions, specificOptions[type]);\r\n\t\t}\r\n\r\n\t\toptions.dataGrouping = merge(\r\n\t\t\tdefaultOptions,\r\n\t\t\tplotOptions.series && plotOptions.series.dataGrouping, // #1228\r\n\t\t\tplotOptions[type].dataGrouping, // Set by the StockChart constructor\r\n\t\t\titemOptions.dataGrouping\r\n\t\t);\r\n\t}\r\n\r\n\tif (this.chart.options._stock) {\r\n\t\tthis.requireSorting = true;\r\n\t}\r\n\r\n\treturn options;\r\n});\r\n\r\n\r\n/**\r\n * When resetting the scale reset the hasProccessed flag to avoid taking previous data grouping\r\n * of neighbour series into accound when determining group pixel width (#2692).\r\n */\r\nwrap(Axis.prototype, 'setScale', function (proceed) {\r\n\tproceed.call(this);\r\n\teach(this.series, function (series) {\r\n\t\tseries.hasProcessed = false;\r\n\t});\r\n});\r\n\r\n/**\r\n * Get the data grouping pixel width based on the greatest defined individual width\r\n * of the axis' series, and if whether one of the axes need grouping.\r\n */\r\nAxis.prototype.getGroupPixelWidth = function () {\r\n\r\n\tvar series = this.series,\r\n\t\tlen = series.length,\r\n\t\ti,\r\n\t\tgroupPixelWidth = 0,\r\n\t\tdoGrouping = false,\r\n\t\tdataLength,\r\n\t\tdgOptions;\r\n\r\n\t// If multiple series are compared on the same x axis, give them the same\r\n\t// group pixel width (#334)\r\n\ti = len;\r\n\twhile (i--) {\r\n\t\tdgOptions = series[i].options.dataGrouping;\r\n\t\tif (dgOptions) {\r\n\t\t\tgroupPixelWidth = mathMax(groupPixelWidth, dgOptions.groupPixelWidth);\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// If one of the series needs grouping, apply it to all (#1634)\r\n\ti = len;\r\n\twhile (i--) {\r\n\t\tdgOptions = series[i].options.dataGrouping;\r\n\t\t\t\r\n\t\tif (dgOptions && series[i].hasProcessed) { // #2692\r\n\r\n\t\t\tdataLength = (series[i].processedXData || series[i].data).length;\r\n\r\n\t\t\t// Execute grouping if the amount of points is greater than the limit defined in groupPixelWidth\r\n\t\t\tif (series[i].groupPixelWidth || dataLength > (this.chart.plotSizeX / groupPixelWidth) || (dataLength && dgOptions.forced)) {\r\n\t\t\t\tdoGrouping = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn doGrouping ? groupPixelWidth : 0;\r\n};\r\n\r\n\r\n\r\n/* ****************************************************************************\r\n * End data grouping module\t\t\t\t\t\t\t\t\t\t\t\t   *\r\n ******************************************************************************//* ****************************************************************************\r\n * Start OHLC series code\t\t\t\t\t\t\t\t\t\t\t\t\t *\r\n *****************************************************************************/\r\n\r\n// 1 - Set default options\r\ndefaultPlotOptions.ohlc = merge(defaultPlotOptions.column, {\r\n\tlineWidth: 1,\r\n\ttooltip: {\r\n\t\tpointFormat: '<span style=\"color:{point.color}\">\\u25CF</span> <b> {series.name}</b><br/>' + // docs\r\n\t\t\t'Open: {point.open}<br/>' +\r\n\t\t\t'High: {point.high}<br/>' +\r\n\t\t\t'Low: {point.low}<br/>' +\r\n\t\t\t'Close: {point.close}<br/>'\r\n\t},\r\n\tstates: {\r\n\t\thover: {\r\n\t\t\tlineWidth: 3\r\n\t\t}\r\n\t},\r\n\tthreshold: null\r\n\t//upColor: undefined\r\n});\r\n\r\n// 2 - Create the OHLCSeries object\r\nvar OHLCSeries = extendClass(seriesTypes.column, {\r\n\ttype: 'ohlc',\r\n\tpointArrayMap: ['open', 'high', 'low', 'close'], // array point configs are mapped to this\r\n\ttoYData: function (point) { // return a plain array for speedy calculation\r\n\t\treturn [point.open, point.high, point.low, point.close];\r\n\t},\r\n\tpointValKey: 'high',\r\n\r\n\tpointAttrToOptions: { // mapping between SVG attributes and the corresponding options\r\n\t\tstroke: 'color',\r\n\t\t'stroke-width': 'lineWidth'\r\n\t},\r\n\tupColorProp: 'stroke',\r\n\r\n\t/**\r\n\t * Postprocess mapping between options and SVG attributes\r\n\t */\r\n\tgetAttribs: function () {\r\n\t\tseriesTypes.column.prototype.getAttribs.apply(this, arguments);\r\n\t\tvar series = this,\r\n\t\t\toptions = series.options,\r\n\t\t\tstateOptions = options.states,\r\n\t\t\tupColor = options.upColor || series.color,\r\n\t\t\tseriesDownPointAttr = merge(series.pointAttr),\r\n\t\t\tupColorProp = series.upColorProp;\r\n\r\n\t\tseriesDownPointAttr[''][upColorProp] = upColor;\r\n\t\tseriesDownPointAttr.hover[upColorProp] = stateOptions.hover.upColor || upColor;\r\n\t\tseriesDownPointAttr.select[upColorProp] = stateOptions.select.upColor || upColor;\r\n\r\n\t\teach(series.points, function (point) {\r\n\t\t\tif (point.open < point.close && !point.options.color) {\r\n\t\t\t\tpoint.pointAttr = seriesDownPointAttr;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Translate data points from raw values x and y to plotX and plotY\r\n\t */\r\n\ttranslate: function () {\r\n\t\tvar series = this,\r\n\t\t\tyAxis = series.yAxis;\r\n\r\n\t\tseriesTypes.column.prototype.translate.apply(series);\r\n\r\n\t\t// do the translation\r\n\t\teach(series.points, function (point) {\r\n\t\t\t// the graphics\r\n\t\t\tif (point.open !== null) {\r\n\t\t\t\tpoint.plotOpen = yAxis.translate(point.open, 0, 1, 0, 1);\r\n\t\t\t}\r\n\t\t\tif (point.close !== null) {\r\n\t\t\t\tpoint.plotClose = yAxis.translate(point.close, 0, 1, 0, 1);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Draw the data points\r\n\t */\r\n\tdrawPoints: function () {\r\n\t\tvar series = this,\r\n\t\t\tpoints = series.points,\r\n\t\t\tchart = series.chart,\r\n\t\t\tpointAttr,\r\n\t\t\tplotOpen,\r\n\t\t\tplotClose,\r\n\t\t\tcrispCorr,\r\n\t\t\thalfWidth,\r\n\t\t\tpath,\r\n\t\t\tgraphic,\r\n\t\t\tcrispX;\r\n\r\n\r\n\t\teach(points, function (point) {\r\n\t\t\tif (point.plotY !== UNDEFINED) {\r\n\r\n\t\t\t\tgraphic = point.graphic;\r\n\t\t\t\tpointAttr = point.pointAttr[point.selected ? 'selected' : ''] || series.pointAttr[NORMAL_STATE];\r\n\r\n\t\t\t\t// crisp vector coordinates\r\n\t\t\t\tcrispCorr = (pointAttr['stroke-width'] % 2) / 2;\r\n\t\t\t\tcrispX = mathRound(point.plotX) - crispCorr;  // #2596\r\n\t\t\t\thalfWidth = mathRound(point.shapeArgs.width / 2);\r\n\r\n\t\t\t\t// the vertical stem\r\n\t\t\t\tpath = [\r\n\t\t\t\t\t'M',\r\n\t\t\t\t\tcrispX, mathRound(point.yBottom),\r\n\t\t\t\t\t'L',\r\n\t\t\t\t\tcrispX, mathRound(point.plotY)\r\n\t\t\t\t];\r\n\r\n\t\t\t\t// open\r\n\t\t\t\tif (point.open !== null) {\r\n\t\t\t\t\tplotOpen = mathRound(point.plotOpen) + crispCorr;\r\n\t\t\t\t\tpath.push(\r\n\t\t\t\t\t\t'M',\r\n\t\t\t\t\t\tcrispX,\r\n\t\t\t\t\t\tplotOpen,\r\n\t\t\t\t\t\t'L',\r\n\t\t\t\t\t\tcrispX - halfWidth,\r\n\t\t\t\t\t\tplotOpen\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// close\r\n\t\t\t\tif (point.close !== null) {\r\n\t\t\t\t\tplotClose = mathRound(point.plotClose) + crispCorr;\r\n\t\t\t\t\tpath.push(\r\n\t\t\t\t\t\t'M',\r\n\t\t\t\t\t\tcrispX,\r\n\t\t\t\t\t\tplotClose,\r\n\t\t\t\t\t\t'L',\r\n\t\t\t\t\t\tcrispX + halfWidth,\r\n\t\t\t\t\t\tplotClose\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create and/or update the graphic\r\n\t\t\t\tif (graphic) {\r\n\t\t\t\t\tgraphic.animate({ d: path });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpoint.graphic = chart.renderer.path(path)\r\n\t\t\t\t\t\t.attr(pointAttr)\r\n\t\t\t\t\t\t.add(series.group);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Disable animation\r\n\t */\r\n\tanimate: null\r\n\r\n\r\n});\r\nseriesTypes.ohlc = OHLCSeries;\r\n/* ****************************************************************************\r\n * End OHLC series code\t\t\t\t\t\t\t\t\t\t\t\t\t   *\r\n *****************************************************************************/\r\n/* ****************************************************************************\r\n * Start Candlestick series code\t\t\t\t\t\t\t\t\t\t\t  *\r\n *****************************************************************************/\r\n\r\n// 1 - set default options\r\ndefaultPlotOptions.candlestick = merge(defaultPlotOptions.column, {\r\n\tlineColor: 'black',\r\n\tlineWidth: 1,\r\n\tstates: {\r\n\t\thover: {\r\n\t\t\tlineWidth: 2\r\n\t\t}\r\n\t},\r\n\ttooltip: defaultPlotOptions.ohlc.tooltip,\r\n\tthreshold: null,\r\n\tupColor: 'white'\r\n\t// upLineColor: null\r\n});\r\n\r\n// 2 - Create the CandlestickSeries object\r\nvar CandlestickSeries = extendClass(OHLCSeries, {\r\n\ttype: 'candlestick',\r\n\r\n\t/**\r\n\t * One-to-one mapping from options to SVG attributes\r\n\t */\r\n\tpointAttrToOptions: { // mapping between SVG attributes and the corresponding options\r\n\t\tfill: 'color',\r\n\t\tstroke: 'lineColor',\r\n\t\t'stroke-width': 'lineWidth'\r\n\t},\r\n\tupColorProp: 'fill',\r\n\r\n\t/**\r\n\t * Postprocess mapping between options and SVG attributes\r\n\t */\r\n\tgetAttribs: function () {\r\n\t\tseriesTypes.ohlc.prototype.getAttribs.apply(this, arguments);\r\n\t\tvar series = this,\r\n\t\t\toptions = series.options,\r\n\t\t\tstateOptions = options.states,\t\t\t\r\n\t\t\tupLineColor = options.upLineColor || options.lineColor,\r\n\t\t\thoverStroke = stateOptions.hover.upLineColor || upLineColor, \r\n\t\t\tselectStroke = stateOptions.select.upLineColor || upLineColor;\r\n\r\n\t\t// Add custom line color for points going up (close > open).\r\n\t\t// Fill is handled by OHLCSeries' getAttribs.\r\n\t\teach(series.points, function (point) {\r\n\t\t\tif (point.open < point.close) {\r\n\t\t\t\tpoint.pointAttr[''].stroke = upLineColor;\r\n\t\t\t\tpoint.pointAttr.hover.stroke = hoverStroke;\r\n\t\t\t\tpoint.pointAttr.select.stroke = selectStroke;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Draw the data points\r\n\t */\r\n\tdrawPoints: function () {\r\n\t\tvar series = this,  //state = series.state,\r\n\t\t\tpoints = series.points,\r\n\t\t\tchart = series.chart,\r\n\t\t\tpointAttr,\r\n\t\t\tseriesPointAttr = series.pointAttr[''],\r\n\t\t\tplotOpen,\r\n\t\t\tplotClose,\r\n\t\t\ttopBox,\r\n\t\t\tbottomBox,\r\n\t\t\thasTopWhisker,\r\n\t\t\thasBottomWhisker,\r\n\t\t\tcrispCorr,\r\n\t\t\tcrispX,\r\n\t\t\tgraphic,\r\n\t\t\tpath,\r\n\t\t\thalfWidth;\r\n\r\n\r\n\t\teach(points, function (point) {\r\n\r\n\t\t\tgraphic = point.graphic;\r\n\t\t\tif (point.plotY !== UNDEFINED) {\r\n\r\n\t\t\t\tpointAttr = point.pointAttr[point.selected ? 'selected' : ''] || seriesPointAttr;\r\n\r\n\t\t\t\t// crisp vector coordinates\r\n\t\t\t\tcrispCorr = (pointAttr['stroke-width'] % 2) / 2;\r\n\t\t\t\tcrispX = mathRound(point.plotX) - crispCorr; // #2596\r\n\t\t\t\tplotOpen = point.plotOpen;\r\n\t\t\t\tplotClose = point.plotClose;\r\n\t\t\t\ttopBox = math.min(plotOpen, plotClose);\r\n\t\t\t\tbottomBox = math.max(plotOpen, plotClose);\r\n\t\t\t\thalfWidth = mathRound(point.shapeArgs.width / 2);\r\n\t\t\t\thasTopWhisker = mathRound(topBox) !== mathRound(point.plotY);\r\n\t\t\t\thasBottomWhisker = bottomBox !== point.yBottom;\r\n\t\t\t\ttopBox = mathRound(topBox) + crispCorr;\r\n\t\t\t\tbottomBox = mathRound(bottomBox) + crispCorr;\r\n\r\n\t\t\t\t// create the path\r\n\t\t\t\tpath = [\r\n\t\t\t\t\t'M',\r\n\t\t\t\t\tcrispX - halfWidth, bottomBox,\r\n\t\t\t\t\t'L',\r\n\t\t\t\t\tcrispX - halfWidth, topBox,\r\n\t\t\t\t\t'L',\r\n\t\t\t\t\tcrispX + halfWidth, topBox,\r\n\t\t\t\t\t'L',\r\n\t\t\t\t\tcrispX + halfWidth, bottomBox,\r\n\t\t\t\t\t'Z', // Use a close statement to ensure a nice rectangle #2602\r\n\t\t\t\t\t'M',\r\n\t\t\t\t\tcrispX, topBox,\r\n\t\t\t\t\t'L',\r\n\t\t\t\t\tcrispX, hasTopWhisker ? mathRound(point.plotY) : topBox, // #460, #2094\r\n\t\t\t\t\t'M',\r\n\t\t\t\t\tcrispX, bottomBox,\r\n\t\t\t\t\t'L',\r\n\t\t\t\t\tcrispX, hasBottomWhisker ? mathRound(point.yBottom) : bottomBox // #460, #2094\r\n\t\t\t\t];\r\n\r\n\t\t\t\tif (graphic) {\r\n\t\t\t\t\tgraphic.animate({ d: path });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpoint.graphic = chart.renderer.path(path)\r\n\t\t\t\t\t\t.attr(pointAttr)\r\n\t\t\t\t\t\t.add(series.group)\r\n\t\t\t\t\t\t.shadow(series.options.shadow);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n});\r\n\r\nseriesTypes.candlestick = CandlestickSeries;\r\n\r\n/* ****************************************************************************\r\n * End Candlestick series code\t\t\t\t\t\t\t\t\t\t\t\t*\r\n *****************************************************************************/\r\n/* ****************************************************************************\r\n * Start Flags series code\t\t\t\t\t\t\t\t\t\t\t\t\t*\r\n *****************************************************************************/\r\n\r\nvar symbols = SVGRenderer.prototype.symbols;\r\n\r\n// 1 - set default options\r\ndefaultPlotOptions.flags = merge(defaultPlotOptions.column, {\r\n\tfillColor: 'white',\r\n\tlineWidth: 1,\r\n\tpointRange: 0, // #673\r\n\t//radius: 2,\r\n\tshape: 'flag',\r\n\tstackDistance: 12,\r\n\tstates: {\r\n\t\thover: {\r\n\t\t\tlineColor: 'black',\r\n\t\t\tfillColor: '#FCFFC5'\r\n\t\t}\r\n\t},\r\n\tstyle: {\r\n\t\tfontSize: '11px',\r\n\t\tfontWeight: 'bold',\r\n\t\ttextAlign: 'center'\r\n\t},\r\n\ttooltip: {\r\n\t\tpointFormat: '{point.text}<br/>'\r\n\t},\r\n\tthreshold: null,\r\n\ty: -30\r\n});\r\n\r\n// 2 - Create the CandlestickSeries object\r\nseriesTypes.flags = extendClass(seriesTypes.column, {\r\n\ttype: 'flags',\r\n\tsorted: false,\r\n\tnoSharedTooltip: true,\r\n\tallowDG: false,\r\n\ttakeOrdinalPosition: false, // #1074\r\n\ttrackerGroups: ['markerGroup'],\r\n\tforceCrop: true,\r\n\t/**\r\n\t * Inherit the initialization from base Series\r\n\t */\r\n\tinit: Series.prototype.init,\r\n\r\n\t/**\r\n\t * One-to-one mapping from options to SVG attributes\r\n\t */\r\n\tpointAttrToOptions: { // mapping between SVG attributes and the corresponding options\r\n\t\tfill: 'fillColor',\r\n\t\tstroke: 'color',\r\n\t\t'stroke-width': 'lineWidth',\r\n\t\tr: 'radius'\r\n\t},\r\n\r\n\t/**\r\n\t * Extend the translate method by placing the point on the related series\r\n\t */\r\n\ttranslate: function () {\r\n\r\n\t\tseriesTypes.column.prototype.translate.apply(this);\r\n\r\n\t\tvar series = this,\r\n\t\t\toptions = series.options,\r\n\t\t\tchart = series.chart,\r\n\t\t\tpoints = series.points,\r\n\t\t\tcursor = points.length - 1,\r\n\t\t\tpoint,\r\n\t\t\tlastPoint,\r\n\t\t\toptionsOnSeries = options.onSeries,\r\n\t\t\tonSeries = optionsOnSeries && chart.get(optionsOnSeries),\r\n\t\t\tstep = onSeries && onSeries.options.step,\r\n\t\t\tonData = onSeries && onSeries.points,\r\n\t\t\ti = onData && onData.length,\r\n\t\t\txAxis = series.xAxis,\r\n\t\t\txAxisExt = xAxis.getExtremes(),\r\n\t\t\tleftPoint,\r\n\t\t\tlastX,\r\n\t\t\trightPoint,\r\n\t\t\tcurrentDataGrouping;\r\n\r\n\t\t// relate to a master series\r\n\t\tif (onSeries && onSeries.visible && i) {\r\n\t\t\tcurrentDataGrouping = onSeries.currentDataGrouping;\r\n\t\t\tlastX = onData[i - 1].x + (currentDataGrouping ? currentDataGrouping.totalRange : 0); // #2374\r\n\r\n\t\t\t// sort the data points\r\n\t\t\tpoints.sort(function (a, b) {\r\n\t\t\t\treturn (a.x - b.x);\r\n\t\t\t});\r\n\r\n\t\t\twhile (i-- && points[cursor]) {\r\n\t\t\t\tpoint = points[cursor];\r\n\t\t\t\tleftPoint = onData[i];\r\n\t\t\t\t\r\n\t\t\t\tif (leftPoint.x <= point.x && leftPoint.plotY !== UNDEFINED) {\r\n\t\t\t\t\tif (point.x <= lastX) { // #803\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tpoint.plotY = leftPoint.plotY;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t// interpolate between points, #666\r\n\t\t\t\t\t\tif (leftPoint.x < point.x && !step) { \r\n\t\t\t\t\t\t\trightPoint = onData[i + 1];\r\n\t\t\t\t\t\t\tif (rightPoint && rightPoint.plotY !== UNDEFINED) {\r\n\t\t\t\t\t\t\t\tpoint.plotY += \r\n\t\t\t\t\t\t\t\t\t((point.x - leftPoint.x) / (rightPoint.x - leftPoint.x)) * // the distance ratio, between 0 and 1 \r\n\t\t\t\t\t\t\t\t\t(rightPoint.plotY - leftPoint.plotY); // the y distance\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcursor--;\r\n\t\t\t\t\ti++; // check again for points in the same x position\r\n\t\t\t\t\tif (cursor < 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Add plotY position and handle stacking\r\n\t\teach(points, function (point, i) {\r\n\r\n\t\t\tvar stackIndex;\r\n\t\t\t\r\n\t\t\t// Undefined plotY means the point is either on axis, outside series range or hidden series.\r\n\t\t\t// If the series is outside the range of the x axis it should fall through with \r\n\t\t\t// an undefined plotY, but then we must remove the shapeArgs (#847).\r\n\t\t\tif (point.plotY === UNDEFINED) {\r\n\t\t\t\tif (point.x >= xAxisExt.min && point.x <= xAxisExt.max) { // we're inside xAxis range\r\n\t\t\t\t\tpoint.plotY = chart.chartHeight - xAxis.bottom - (xAxis.opposite ? xAxis.height : 0) + xAxis.offset - chart.plotTop;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpoint.shapeArgs = {}; // 847\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// if multiple flags appear at the same x, order them into a stack\r\n\t\t\tlastPoint = points[i - 1];\r\n\t\t\tif (lastPoint && lastPoint.plotX === point.plotX) {\r\n\t\t\t\tif (lastPoint.stackIndex === UNDEFINED) {\r\n\t\t\t\t\tlastPoint.stackIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t\tstackIndex = lastPoint.stackIndex + 1;\r\n\t\t\t}\r\n\t\t\tpoint.stackIndex = stackIndex; // #3639\t\t\r\n\t\t});\r\n\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Draw the markers\r\n\t */\r\n\tdrawPoints: function () {\r\n\t\tvar series = this,\r\n\t\t\tpointAttr,\r\n\t\t\tseriesPointAttr = series.pointAttr[''],\r\n\t\t\tpoints = series.points,\r\n\t\t\tchart = series.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tplotX,\r\n\t\t\tplotY,\r\n\t\t\toptions = series.options,\r\n\t\t\toptionsY = options.y,\r\n\t\t\tshape,\r\n\t\t\ti,\r\n\t\t\tpoint,\r\n\t\t\tgraphic,\r\n\t\t\tstackIndex,\r\n\t\t\tcrisp = (options.lineWidth % 2 / 2),\r\n\t\t\tanchorX,\r\n\t\t\tanchorY,\r\n\t\t\toutsideRight;\r\n\r\n\t\ti = points.length;\r\n\t\twhile (i--) {\r\n\t\t\tpoint = points[i];\r\n\t\t\toutsideRight = point.plotX > series.xAxis.len;\r\n\t\t\tplotX = point.plotX + (outsideRight ? crisp : -crisp);\r\n\t\t\tstackIndex = point.stackIndex;\r\n\t\t\tshape = point.options.shape || options.shape;\r\n\t\t\tplotY = point.plotY;\r\n\t\t\tif (plotY !== UNDEFINED) {\r\n\t\t\t\tplotY = point.plotY + optionsY + crisp - (stackIndex !== UNDEFINED && stackIndex * options.stackDistance);\r\n\t\t\t}\r\n\t\t\tanchorX = stackIndex ? UNDEFINED : point.plotX + crisp; // skip connectors for higher level stacked points\r\n\t\t\tanchorY = stackIndex ? UNDEFINED : point.plotY;\r\n\r\n\t\t\tgraphic = point.graphic;\r\n\r\n\t\t\t// only draw the point if y is defined and the flag is within the visible area\r\n\t\t\tif (plotY !== UNDEFINED && plotX >= 0 && !outsideRight) {\r\n\t\t\t\t// shortcuts\r\n\t\t\t\tpointAttr = point.pointAttr[point.selected ? 'select' : ''] || seriesPointAttr;\r\n\t\t\t\tif (graphic) { // update\r\n\t\t\t\t\tgraphic.attr({\r\n\t\t\t\t\t\tx: plotX,\r\n\t\t\t\t\t\ty: plotY,\r\n\t\t\t\t\t\tr: pointAttr.r,\r\n\t\t\t\t\t\tanchorX: anchorX,\r\n\t\t\t\t\t\tanchorY: anchorY\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgraphic = point.graphic = renderer.label(\r\n\t\t\t\t\t\tpoint.options.title || options.title || 'A',\r\n\t\t\t\t\t\tplotX,\r\n\t\t\t\t\t\tplotY,\r\n\t\t\t\t\t\tshape,\r\n\t\t\t\t\t\tanchorX,\r\n\t\t\t\t\t\tanchorY,\r\n\t\t\t\t\t\toptions.useHTML\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.css(merge(options.style, point.style))\r\n\t\t\t\t\t.attr(pointAttr)\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\talign: shape === 'flag' ? 'left' : 'center',\r\n\t\t\t\t\t\twidth: options.width,\r\n\t\t\t\t\t\theight: options.height\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add(series.markerGroup)\r\n\t\t\t\t\t.shadow(options.shadow);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set the tooltip anchor position\r\n\t\t\t\tpoint.tooltipPos = [plotX, plotY];\r\n\r\n\t\t\t} else if (graphic) {\r\n\t\t\t\tpoint.graphic = graphic.destroy();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Extend the column trackers with listeners to expand and contract stacks\r\n\t */\r\n\tdrawTracker: function () {\r\n\t\tvar series = this,\r\n\t\t\tpoints = series.points;\r\n\t\t\r\n\t\tTrackerMixin.drawTrackerPoint.apply(this);\r\n\r\n\t\t// Bring each stacked flag up on mouse over, this allows readability of vertically\r\n\t\t// stacked elements as well as tight points on the x axis. #1924.\r\n\t\teach(points, function (point) {\r\n\t\t\tvar graphic = point.graphic;\r\n\t\t\tif (graphic) {\r\n\t\t\t\taddEvent(graphic.element, 'mouseover', function () {\r\n\r\n\t\t\t\t\t// Raise this point\r\n\t\t\t\t\tif (point.stackIndex > 0 && !point.raised) {\r\n\t\t\t\t\t\tpoint._y = graphic.y;\r\n\t\t\t\t\t\tgraphic.attr({\r\n\t\t\t\t\t\t\ty: point._y - 8\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpoint.raised = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Revert other raised points\r\n\t\t\t\t\teach(points, function (otherPoint) {\r\n\t\t\t\t\t\tif (otherPoint !== point && otherPoint.raised && otherPoint.graphic) {\r\n\t\t\t\t\t\t\totherPoint.graphic.attr({\r\n\t\t\t\t\t\t\t\ty: otherPoint._y\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\totherPoint.raised = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Disable animation\r\n\t */\r\n\tanimate: noop,\r\n\tbuildKDTree: noop,\r\n\tsetClip: noop\r\n\r\n});\r\n\r\n// create the flag icon with anchor\r\nsymbols.flag = function (x, y, w, h, options) {\r\n\tvar anchorX = (options && options.anchorX) || x,\r\n\t\tanchorY = (options &&  options.anchorY) || y;\r\n\r\n\treturn [\r\n\t\t'M', anchorX, anchorY,\r\n\t\t'L', x, y + h,\r\n\t\tx, y,\r\n\t\tx + w, y,\r\n\t\tx + w, y + h,\r\n\t\tx, y + h,\r\n\t\t'M', anchorX, anchorY,\r\n\t\t'Z'\r\n\t];\r\n};\r\n\r\n// create the circlepin and squarepin icons with anchor\r\neach(['circle', 'square'], function (shape) {\r\n\tsymbols[shape + 'pin'] = function (x, y, w, h, options) {\r\n\r\n\t\tvar anchorX = options && options.anchorX,\r\n\t\t\tanchorY = options &&  options.anchorY,\r\n\t\t\tpath = symbols[shape](x, y, w, h),\r\n\t\t\tlabelTopOrBottomY;\r\n\r\n\t\tif (anchorX && anchorY) {\r\n\t\t\t// if the label is below the anchor, draw the connecting line from the top edge of the label\r\n\t\t\t// otherwise start drawing from the bottom edge\r\n\t\t\tlabelTopOrBottomY = (y > anchorY) ? y : y + h;\r\n\t\t\tpath.push('M', anchorX, labelTopOrBottomY, 'L', anchorX, anchorY);\r\n\t\t}\r\n\r\n\t\treturn path;\r\n\t};\r\n});\r\n\r\n// The symbol callbacks are generated on the SVGRenderer object in all browsers. Even\r\n// VML browsers need this in order to generate shapes in export. Now share\r\n// them with the VMLRenderer.\r\nif (Renderer === Highcharts.VMLRenderer) {\r\n\teach(['flag', 'circlepin', 'squarepin'], function (shape) {\r\n\t\tVMLRenderer.prototype.symbols[shape] = symbols[shape];\r\n\t});\r\n}\r\n\r\n/* ****************************************************************************\r\n * End Flags series code\t\t\t\t\t\t\t\t\t\t\t\t\t  *\r\n *****************************************************************************/\r\n/* ****************************************************************************\r\n * Start Scroller code\t\t\t\t\t\t\t\t\t\t\t\t\t\t*\r\n *****************************************************************************/\r\nvar units = [].concat(defaultDataGroupingUnits), // copy\r\n\tdefaultSeriesType,\r\n\t\r\n\t// Finding the min or max of a set of variables where we don't know if they are defined,\r\n\t// is a pattern that is repeated several places in Highcharts. Consider making this\r\n\t// a global utility method.\r\n\tnumExt = function (extreme) {\r\n\t\tvar numbers = grep(arguments, function (n) { return typeof n === 'number'; });\r\n\t\tif (numbers.length) {\r\n\t\t\treturn Math[extreme].apply(0, numbers);\r\n\t\t}\r\n\t};\r\n\r\n// add more resolution to units\r\nunits[4] = ['day', [1, 2, 3, 4]]; // allow more days\r\nunits[5] = ['week', [1, 2, 3]]; // allow more weeks\r\n\r\ndefaultSeriesType = seriesTypes.areaspline === UNDEFINED ? 'line' : 'areaspline';\r\n\r\nextend(defaultOptions, {\r\n\tnavigator: {\r\n\t\t//enabled: true,\r\n\t\thandles: {\r\n\t\t\tbackgroundColor: '#ebe7e8',\r\n\t\t\tborderColor: '#b2b1b6'\r\n\t\t},\r\n\t\theight: 40,\r\n\t\tmargin: 25,\r\n\t\tmaskFill: 'rgba(128,179,236,0.3)',\r\n\t\tmaskInside: true,\r\n\t\toutlineColor: '#b2b1b6',\r\n\t\toutlineWidth: 1,\r\n\t\tseries: {\r\n\t\t\ttype: defaultSeriesType,\r\n\t\t\tcolor: '#4572A7',\r\n\t\t\tcompare: null,\r\n\t\t\tfillOpacity: 0.05,\r\n\t\t\tdataGrouping: {\r\n\t\t\t\tapproximation: 'average',\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tgroupPixelWidth: 2,\r\n\t\t\t\tsmoothed: true,\r\n\t\t\t\tunits: units\r\n\t\t\t},\r\n\t\t\tdataLabels: {\r\n\t\t\t\tenabled: false,\r\n\t\t\t\tzIndex: 2 // #1839\r\n\t\t\t},\r\n\t\t\tid: PREFIX + 'navigator-series',\r\n\t\t\tlineColor: '#4572A7',\r\n\t\t\tlineWidth: 1,\r\n\t\t\tmarker: {\r\n\t\t\t\tenabled: false\r\n\t\t\t},\r\n\t\t\tpointRange: 0,\r\n\t\t\tshadow: false,\r\n\t\t\tthreshold: null\r\n\t\t},\r\n\t\t//top: undefined,\r\n\t\txAxis: {\r\n\t\t\ttickWidth: 0,\r\n\t\t\tlineWidth: 0,\r\n\t\t\tgridLineColor: '#EEE',\r\n\t\t\tgridLineWidth: 1,\r\n\t\t\ttickPixelInterval: 200,\r\n\t\t\tlabels: {\r\n\t\t\t\talign: 'left',\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tcolor: '#888'\r\n\t\t\t\t},\r\n\t\t\t\tx: 3,\r\n\t\t\t\ty: -4\r\n\t\t\t},\r\n\t\t\tcrosshair: false\r\n\t\t},\r\n\t\tyAxis: {\r\n\t\t\tgridLineWidth: 0,\r\n\t\t\tstartOnTick: false,\r\n\t\t\tendOnTick: false,\r\n\t\t\tminPadding: 0.1,\r\n\t\t\tmaxPadding: 0.1,\r\n\t\t\tlabels: {\r\n\t\t\t\tenabled: false\r\n\t\t\t},\r\n\t\t\tcrosshair: false,\r\n\t\t\ttitle: {\r\n\t\t\t\ttext: null\r\n\t\t\t},\r\n\t\t\ttickWidth: 0\r\n\t\t}\r\n\t},\r\n\tscrollbar: {\r\n\t\t//enabled: true\r\n\t\theight: isTouchDevice ? 20 : 14,\r\n\t\tbarBackgroundColor: '#bfc8d1',\r\n\t\tbarBorderRadius: 0,\r\n\t\tbarBorderWidth: 1,\r\n\t\tbarBorderColor: '#bfc8d1',\r\n\t\tbuttonArrowColor: '#666',\r\n\t\tbuttonBackgroundColor: '#ebe7e8',\r\n\t\tbuttonBorderColor: '#bbb',\r\n\t\tbuttonBorderRadius: 0,\r\n\t\tbuttonBorderWidth: 1,\r\n\t\tminWidth: 6,\r\n\t\trifleColor: '#666',\r\n\t\ttrackBackgroundColor: '#eeeeee',\r\n\t\ttrackBorderColor: '#eeeeee',\r\n\t\ttrackBorderWidth: 1,\r\n\t\t// trackBorderRadius: 0\r\n\t\tliveRedraw: hasSVG && !isTouchDevice\r\n\t}\r\n});\r\n\r\n/**\r\n * The Scroller class\r\n * @param {Object} chart\r\n */\r\nfunction Scroller(chart) {\r\n\tvar chartOptions = chart.options,\r\n\t\tnavigatorOptions = chartOptions.navigator,\r\n\t\tnavigatorEnabled = navigatorOptions.enabled,\r\n\t\tscrollbarOptions = chartOptions.scrollbar,\r\n\t\tscrollbarEnabled = scrollbarOptions.enabled,\r\n\t\theight = navigatorEnabled ? navigatorOptions.height : 0,\r\n\t\tscrollbarHeight = scrollbarEnabled ? scrollbarOptions.height : 0;\r\n\r\n\r\n\tthis.handles = [];\r\n\tthis.scrollbarButtons = [];\r\n\tthis.elementsToDestroy = []; // Array containing the elements to destroy when Scroller is destroyed\r\n\r\n\tthis.chart = chart;\r\n\tthis.setBaseSeries();\r\n\r\n\tthis.height = height;\r\n\tthis.scrollbarHeight = scrollbarHeight;\r\n\tthis.scrollbarEnabled = scrollbarEnabled;\r\n\tthis.navigatorEnabled = navigatorEnabled;\r\n\tthis.navigatorOptions = navigatorOptions;\r\n\tthis.scrollbarOptions = scrollbarOptions;\r\n\tthis.outlineHeight = height + scrollbarHeight;\r\n\r\n\t// Run scroller\r\n\tthis.init();\r\n}\r\n\r\nScroller.prototype = {\r\n\t/**\r\n\t * Draw one of the handles on the side of the zoomed range in the navigator\r\n\t * @param {Number} x The x center for the handle\r\n\t * @param {Number} index 0 for left and 1 for right\r\n\t */\r\n\tdrawHandle: function (x, index) {\r\n\t\tvar scroller = this,\r\n\t\t\tchart = scroller.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\telementsToDestroy = scroller.elementsToDestroy,\r\n\t\t\thandles = scroller.handles,\r\n\t\t\thandlesOptions = scroller.navigatorOptions.handles,\r\n\t\t\tattr = {\r\n\t\t\t\tfill: handlesOptions.backgroundColor,\r\n\t\t\t\tstroke: handlesOptions.borderColor,\r\n\t\t\t\t'stroke-width': 1\r\n\t\t\t},\r\n\t\t\ttempElem;\r\n\r\n\t\t// create the elements\r\n\t\tif (!scroller.rendered) {\r\n\t\t\t// the group\r\n\t\t\thandles[index] = renderer.g('navigator-handle-' + ['left', 'right'][index])\r\n\t\t\t\t.css({ cursor: 'ew-resize' })\r\n\t\t\t\t.attr({ zIndex: 4 - index }) // zIndex = 3 for right handle, 4 for left\r\n\t\t\t\t.add();\r\n\r\n\t\t\t// the rectangle\r\n\t\t\ttempElem = renderer.rect(-4.5, 0, 9, 16, 0, 1)\r\n\t\t\t\t.attr(attr)\r\n\t\t\t\t.add(handles[index]);\r\n\t\t\telementsToDestroy.push(tempElem);\r\n\r\n\t\t\t// the rifles\r\n\t\t\ttempElem = renderer.path([\r\n\t\t\t\t\t'M',\r\n\t\t\t\t\t-1.5, 4,\r\n\t\t\t\t\t'L',\r\n\t\t\t\t\t-1.5, 12,\r\n\t\t\t\t\t'M',\r\n\t\t\t\t\t0.5, 4,\r\n\t\t\t\t\t'L',\r\n\t\t\t\t\t0.5, 12\r\n\t\t\t\t]).attr(attr)\r\n\t\t\t\t.add(handles[index]);\r\n\t\t\telementsToDestroy.push(tempElem);\r\n\t\t}\r\n\r\n\t\t// Place it\r\n\t\thandles[index][chart.isResizing ? 'animate' : 'attr']({\r\n\t\t\ttranslateX: scroller.scrollerLeft + scroller.scrollbarHeight + parseInt(x, 10),\r\n\t\t\ttranslateY: scroller.top + scroller.height / 2 - 8\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Draw the scrollbar buttons with arrows\r\n\t * @param {Number} index 0 is left, 1 is right\r\n\t */\r\n\tdrawScrollbarButton: function (index) {\r\n\t\tvar scroller = this,\r\n\t\t\tchart = scroller.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\telementsToDestroy = scroller.elementsToDestroy,\r\n\t\t\tscrollbarButtons = scroller.scrollbarButtons,\r\n\t\t\tscrollbarHeight = scroller.scrollbarHeight,\r\n\t\t\tscrollbarOptions = scroller.scrollbarOptions,\r\n\t\t\ttempElem;\r\n\r\n\t\tif (!scroller.rendered) {\r\n\t\t\tscrollbarButtons[index] = renderer.g().add(scroller.scrollbarGroup);\r\n\r\n\t\t\ttempElem = renderer.rect(\r\n\t\t\t\t\t-0.5,\r\n\t\t\t\t\t-0.5,\r\n\t\t\t\t\tscrollbarHeight + 1, // +1 to compensate for crispifying in rect method\r\n\t\t\t\t\tscrollbarHeight + 1,\r\n\t\t\t\t\tscrollbarOptions.buttonBorderRadius,\r\n\t\t\t\t\tscrollbarOptions.buttonBorderWidth\r\n\t\t\t\t).attr({\r\n\t\t\t\t\tstroke: scrollbarOptions.buttonBorderColor,\r\n\t\t\t\t\t'stroke-width': scrollbarOptions.buttonBorderWidth,\r\n\t\t\t\t\tfill: scrollbarOptions.buttonBackgroundColor\r\n\t\t\t\t}).add(scrollbarButtons[index]);\r\n\t\t\telementsToDestroy.push(tempElem);\r\n\r\n\t\t\ttempElem = renderer.path([\r\n\t\t\t\t\t'M',\r\n\t\t\t\t\tscrollbarHeight / 2 + (index ? -1 : 1), scrollbarHeight / 2 - 3,\r\n\t\t\t\t\t'L',\r\n\t\t\t\t\tscrollbarHeight / 2 + (index ? -1 : 1), scrollbarHeight / 2 + 3,\r\n\t\t\t\t\tscrollbarHeight / 2 + (index ? 2 : -2), scrollbarHeight / 2\r\n\t\t\t\t]).attr({\r\n\t\t\t\t\tfill: scrollbarOptions.buttonArrowColor\r\n\t\t\t\t}).add(scrollbarButtons[index]);\r\n\t\t\telementsToDestroy.push(tempElem);\r\n\t\t}\r\n\r\n\t\t// adjust the right side button to the varying length of the scroll track\r\n\t\tif (index) {\r\n\t\t\tscrollbarButtons[index].attr({\r\n\t\t\t\ttranslateX: scroller.scrollerWidth - scrollbarHeight\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Render the navigator and scroll bar\r\n\t * @param {Number} min X axis value minimum\r\n\t * @param {Number} max X axis value maximum\r\n\t * @param {Number} pxMin Pixel value minimum\r\n\t * @param {Number} pxMax Pixel value maximum\r\n\t */\r\n\trender: function (min, max, pxMin, pxMax) {\r\n\t\tvar scroller = this,\r\n\t\t\tchart = scroller.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tnavigatorLeft,\r\n\t\t\tnavigatorWidth,\r\n\t\t\tscrollerLeft,\r\n\t\t\tscrollerWidth,\r\n\t\t\tscrollbarGroup = scroller.scrollbarGroup,\r\n\t\t\tnavigatorGroup = scroller.navigatorGroup,\r\n\t\t\tscrollbar = scroller.scrollbar,\r\n\t\t\txAxis = scroller.xAxis,\r\n\t\t\tscrollbarTrack = scroller.scrollbarTrack,\r\n\t\t\tscrollbarHeight = scroller.scrollbarHeight,\r\n\t\t\tscrollbarEnabled = scroller.scrollbarEnabled,\r\n\t\t\tnavigatorOptions = scroller.navigatorOptions,\r\n\t\t\tscrollbarOptions = scroller.scrollbarOptions,\r\n\t\t\tscrollbarMinWidth = scrollbarOptions.minWidth,\r\n\t\t\theight = scroller.height,\r\n\t\t\ttop = scroller.top,\r\n\t\t\tnavigatorEnabled = scroller.navigatorEnabled,\r\n\t\t\toutlineWidth = navigatorOptions.outlineWidth,\r\n\t\t\thalfOutline = outlineWidth / 2,\r\n\t\t\tzoomedMin,\r\n\t\t\tzoomedMax,\r\n\t\t\trange,\r\n\t\t\tscrX,\r\n\t\t\tscrWidth,\r\n\t\t\tscrollbarPad = 0,\r\n\t\t\toutlineHeight = scroller.outlineHeight,\r\n\t\t\tbarBorderRadius = scrollbarOptions.barBorderRadius,\r\n\t\t\tstrokeWidth,\r\n\t\t\tscrollbarStrokeWidth = scrollbarOptions.barBorderWidth,\r\n\t\t\tcenterBarX,\r\n\t\t\toutlineTop = top + halfOutline,\r\n\t\t\tverb,\r\n\t\t\tunionExtremes;\r\n\r\n\t\t// don't render the navigator until we have data (#486)\r\n\t\tif (isNaN(min)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tscroller.navigatorLeft = navigatorLeft = pick(\r\n\t\t\txAxis.left,\r\n\t\t\tchart.plotLeft + scrollbarHeight // in case of scrollbar only, without navigator\r\n\t\t);\r\n\t\tscroller.navigatorWidth = navigatorWidth = pick(xAxis.len, chart.plotWidth - 2 * scrollbarHeight);\r\n\t\tscroller.scrollerLeft = scrollerLeft = navigatorLeft - scrollbarHeight;\r\n\t\tscroller.scrollerWidth = scrollerWidth = scrollerWidth = navigatorWidth + 2 * scrollbarHeight;\r\n\r\n\t\t// Set the scroller x axis extremes to reflect the total. The navigator extremes\r\n\t\t// should always be the extremes of the union of all series in the chart as\r\n\t\t// well as the navigator series.\r\n\t\tif (xAxis.getExtremes) {\r\n\t\t\tunionExtremes = scroller.getUnionExtremes(true);\r\n\r\n\t\t\tif (unionExtremes && (unionExtremes.dataMin !== xAxis.min || unionExtremes.dataMax !== xAxis.max)) {\r\n\t\t\t\txAxis.setExtremes(unionExtremes.dataMin, unionExtremes.dataMax, true, false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Get the pixel position of the handles\r\n\t\tpxMin = pick(pxMin, xAxis.translate(min));\r\n\t\tpxMax = pick(pxMax, xAxis.translate(max));\r\n\t\tif (isNaN(pxMin) || mathAbs(pxMin) === Infinity) { // Verify (#1851, #2238)\r\n\t\t\tpxMin = 0;\r\n\t\t\tpxMax = scrollerWidth;\r\n\t\t}\r\n\r\n\t\t// Are we below the minRange? (#2618)\r\n\t\tif (xAxis.translate(pxMax, true) - xAxis.translate(pxMin, true) < chart.xAxis[0].minRange) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\t// handles are allowed to cross, but never exceed the plot area\r\n\t\tscroller.zoomedMax = mathMin(mathMax(pxMin, pxMax), navigatorWidth);\r\n\t\tscroller.zoomedMin = \r\n\t\t\tmathMax(scroller.fixedWidth ? scroller.zoomedMax - scroller.fixedWidth : mathMin(pxMin, pxMax), 0);\r\n\t\tscroller.range = scroller.zoomedMax - scroller.zoomedMin;\r\n\t\tzoomedMax = mathRound(scroller.zoomedMax);\r\n\t\tzoomedMin = mathRound(scroller.zoomedMin);\r\n\t\trange = zoomedMax - zoomedMin;\r\n\r\n\r\n\r\n\t\t// on first render, create all elements\r\n\t\tif (!scroller.rendered) {\r\n\r\n\t\t\tif (navigatorEnabled) {\r\n\r\n\t\t\t\t// draw the navigator group\r\n\t\t\t\tscroller.navigatorGroup = navigatorGroup = renderer.g('navigator')\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\tzIndex: 3\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add();\r\n\r\n\t\t\t\tscroller.leftShade = renderer.rect()\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\tfill: navigatorOptions.maskFill\r\n\t\t\t\t\t}).add(navigatorGroup);\r\n\t\t\t\t\r\n\t\t\t\tif (navigatorOptions.maskInside) {\r\n\t\t\t\t\tscroller.leftShade.css({ cursor: 'ew-resize '});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscroller.rightShade = renderer.rect()\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tfill: navigatorOptions.maskFill\r\n\t\t\t\t\t\t}).add(navigatorGroup);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tscroller.outline = renderer.path()\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t'stroke-width': outlineWidth,\r\n\t\t\t\t\t\tstroke: navigatorOptions.outlineColor\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add(navigatorGroup);\r\n\t\t\t}\r\n\r\n\t\t\tif (scrollbarEnabled) {\r\n\r\n\t\t\t\t// draw the scrollbar group\r\n\t\t\t\tscroller.scrollbarGroup = scrollbarGroup = renderer.g('scrollbar').add();\r\n\r\n\t\t\t\t// the scrollbar track\r\n\t\t\t\tstrokeWidth = scrollbarOptions.trackBorderWidth;\r\n\t\t\t\tscroller.scrollbarTrack = scrollbarTrack = renderer.rect().attr({\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: -strokeWidth % 2 / 2,\r\n\t\t\t\t\tfill: scrollbarOptions.trackBackgroundColor,\r\n\t\t\t\t\tstroke: scrollbarOptions.trackBorderColor,\r\n\t\t\t\t\t'stroke-width': strokeWidth,\r\n\t\t\t\t\tr: scrollbarOptions.trackBorderRadius || 0,\r\n\t\t\t\t\theight: scrollbarHeight\r\n\t\t\t\t}).add(scrollbarGroup);\r\n\r\n\t\t\t\t// the scrollbar itself\r\n\t\t\t\tscroller.scrollbar = scrollbar = renderer.rect()\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\ty: -scrollbarStrokeWidth % 2 / 2,\r\n\t\t\t\t\t\theight: scrollbarHeight,\r\n\t\t\t\t\t\tfill: scrollbarOptions.barBackgroundColor,\r\n\t\t\t\t\t\tstroke: scrollbarOptions.barBorderColor,\r\n\t\t\t\t\t\t'stroke-width': scrollbarStrokeWidth,\r\n\t\t\t\t\t\tr: barBorderRadius\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add(scrollbarGroup);\r\n\r\n\t\t\t\tscroller.scrollbarRifles = renderer.path()\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\tstroke: scrollbarOptions.rifleColor,\r\n\t\t\t\t\t\t'stroke-width': 1\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add(scrollbarGroup);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// place elements\r\n\t\tverb = chart.isResizing ? 'animate' : 'attr';\r\n\r\n\t\tif (navigatorEnabled) {\r\n\t\t\tscroller.leftShade[verb](navigatorOptions.maskInside ? {\r\n\t\t\t\tx: navigatorLeft + zoomedMin,\r\n\t\t\t\ty: top,\r\n\t\t\t\twidth: zoomedMax - zoomedMin,\r\n\t\t\t\theight: height\r\n\t\t\t} : {\r\n\t\t\t\tx: navigatorLeft,\r\n\t\t\t\ty: top,\r\n\t\t\t\twidth: zoomedMin,\r\n\t\t\t\theight: height\r\n\t\t\t});\r\n\t\t\tif (scroller.rightShade) {\r\n\t\t\t\tscroller.rightShade[verb]({\r\n\t\t\t\t\tx: navigatorLeft + zoomedMax,\r\n\t\t\t\t\ty: top,\r\n\t\t\t\t\twidth: navigatorWidth - zoomedMax,\r\n\t\t\t\t\theight: height\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\r\n\t\t\tscroller.outline[verb]({ d: [\r\n\t\t\t\tM,\r\n\t\t\t\tscrollerLeft, outlineTop, // left\r\n\t\t\t\tL,\r\n\t\t\t\tnavigatorLeft + zoomedMin - halfOutline, outlineTop, // upper left of zoomed range\r\n\t\t\t\tnavigatorLeft + zoomedMin - halfOutline, outlineTop + outlineHeight, // lower left of z.r.\r\n\t\t\t\tL,\r\n\t\t\t\tnavigatorLeft + zoomedMax - halfOutline, outlineTop + outlineHeight, // lower right of z.r.\r\n\t\t\t\tL,\r\n\t\t\t\tnavigatorLeft + zoomedMax - halfOutline, outlineTop, // upper right of z.r.\r\n\t\t\t\tscrollerLeft + scrollerWidth, outlineTop // right\r\n\t\t\t].concat(navigatorOptions.maskInside ? [\r\n\t\t\t\tM,\r\n\t\t\t\tnavigatorLeft + zoomedMin + halfOutline, outlineTop, // upper left of zoomed range\r\n\t\t\t\tL,\r\n\t\t\t\tnavigatorLeft + zoomedMax - halfOutline, outlineTop // upper right of z.r.\r\n\t\t\t] : [])});\r\n\t\t\t// draw handles\r\n\t\t\tscroller.drawHandle(zoomedMin + halfOutline, 0);\r\n\t\t\tscroller.drawHandle(zoomedMax + halfOutline, 1);\r\n\t\t}\r\n\r\n\t\t// draw the scrollbar\r\n\t\tif (scrollbarEnabled && scrollbarGroup) {\r\n\r\n\t\t\t// draw the buttons\r\n\t\t\tscroller.drawScrollbarButton(0);\r\n\t\t\tscroller.drawScrollbarButton(1);\r\n\r\n\t\t\tscrollbarGroup[verb]({\r\n\t\t\t\ttranslateX: scrollerLeft,\r\n\t\t\t\ttranslateY: mathRound(outlineTop + height)\r\n\t\t\t});\r\n\r\n\t\t\tscrollbarTrack[verb]({\r\n\t\t\t\twidth: scrollerWidth\r\n\t\t\t});\r\n\r\n\t\t\t// prevent the scrollbar from drawing to small (#1246)\r\n\t\t\tscrX = scrollbarHeight + zoomedMin;\r\n\t\t\tscrWidth = range - scrollbarStrokeWidth;\r\n\t\t\tif (scrWidth < scrollbarMinWidth) {\r\n\t\t\t\tscrollbarPad = (scrollbarMinWidth - scrWidth) / 2;\r\n\t\t\t\tscrWidth = scrollbarMinWidth;\r\n\t\t\t\tscrX -= scrollbarPad;\r\n\t\t\t}\r\n\t\t\tscroller.scrollbarPad = scrollbarPad;\r\n\t\t\tscrollbar[verb]({\r\n\t\t\t\tx: mathFloor(scrX) + (scrollbarStrokeWidth % 2 / 2),\r\n\t\t\t\twidth: scrWidth\r\n\t\t\t});\r\n\r\n\t\t\tcenterBarX = scrollbarHeight + zoomedMin + range / 2 - 0.5;\r\n\r\n\t\t\tscroller.scrollbarRifles\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tvisibility: range > 12 ? VISIBLE : HIDDEN\r\n\t\t\t\t})[verb]({\r\n\t\t\t\t\td: [\r\n\t\t\t\t\t\tM,\r\n\t\t\t\t\t\tcenterBarX - 3, scrollbarHeight / 4,\r\n\t\t\t\t\t\tL,\r\n\t\t\t\t\t\tcenterBarX - 3, 2 * scrollbarHeight / 3,\r\n\t\t\t\t\t\tM,\r\n\t\t\t\t\t\tcenterBarX, scrollbarHeight / 4,\r\n\t\t\t\t\t\tL,\r\n\t\t\t\t\t\tcenterBarX, 2 * scrollbarHeight / 3,\r\n\t\t\t\t\t\tM,\r\n\t\t\t\t\t\tcenterBarX + 3, scrollbarHeight / 4,\r\n\t\t\t\t\t\tL,\r\n\t\t\t\t\t\tcenterBarX + 3, 2 * scrollbarHeight / 3\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tscroller.scrollbarPad = scrollbarPad;\r\n\t\tscroller.rendered = true;\r\n\t},\r\n\r\n\t/**\r\n\t * Set up the mouse and touch events for the navigator and scrollbar\r\n\t */\r\n\taddEvents: function () {\r\n\t\tvar container = this.chart.container,\r\n\t\t\tmouseDownHandler = this.mouseDownHandler,\r\n\t\t\tmouseMoveHandler = this.mouseMoveHandler,\r\n\t\t\tmouseUpHandler = this.mouseUpHandler,\r\n\t\t\t_events;\r\n\r\n\t\t// Mouse events\r\n\t\t_events = [\r\n\t\t\t[container, 'mousedown', mouseDownHandler],\r\n\t\t\t[container, 'mousemove', mouseMoveHandler],\r\n\t\t\t[document, 'mouseup', mouseUpHandler]\r\n\t\t];\r\n\r\n\t\t// Touch events\r\n\t\tif (hasTouch) {\r\n\t\t\t_events.push(\r\n\t\t\t\t[container, 'touchstart', mouseDownHandler],\r\n\t\t\t\t[container, 'touchmove', mouseMoveHandler],\r\n\t\t\t\t[document, 'touchend', mouseUpHandler]\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// Add them all\r\n\t\teach(_events, function (args) {\r\n\t\t\taddEvent.apply(null, args);\r\n\t\t});\r\n\t\tthis._events = _events;\r\n\t},\r\n\r\n\t/**\r\n\t * Removes the event handlers attached previously with addEvents.\r\n\t */\r\n\tremoveEvents: function () {\r\n\r\n\t\teach(this._events, function (args) {\r\n\t\t\tremoveEvent.apply(null, args);\r\n\t\t});\r\n\t\tthis._events = UNDEFINED;\r\n\t\tif (this.navigatorEnabled && this.baseSeries) {\r\n\t\t\tremoveEvent(this.baseSeries, 'updatedData', this.updatedDataHandler);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Initiate the Scroller object\r\n\t */\r\n\tinit: function () {\r\n\t\tvar scroller = this,\r\n\t\t\tchart = scroller.chart,\r\n\t\t\txAxis,\r\n\t\t\tyAxis,\r\n\t\t\tscrollbarHeight = scroller.scrollbarHeight,\r\n\t\t\tnavigatorOptions = scroller.navigatorOptions,\r\n\t\t\theight = scroller.height,\r\n\t\t\ttop = scroller.top,\r\n\t\t\tdragOffset,\r\n\t\t\thasDragged,\r\n\t\t\tbaseSeries = scroller.baseSeries;\r\n\r\n\t\t/**\r\n\t\t * Event handler for the mouse down event.\r\n\t\t */\r\n\t\tscroller.mouseDownHandler = function (e) {\r\n\t\t\te = chart.pointer.normalize(e);\r\n\r\n\t\t\tvar zoomedMin = scroller.zoomedMin,\r\n\t\t\t\tzoomedMax = scroller.zoomedMax,\r\n\t\t\t\ttop = scroller.top,\r\n\t\t\t\tscrollbarHeight = scroller.scrollbarHeight,\r\n\t\t\t\tscrollerLeft = scroller.scrollerLeft,\r\n\t\t\t\tscrollerWidth = scroller.scrollerWidth,\r\n\t\t\t\tnavigatorLeft = scroller.navigatorLeft,\r\n\t\t\t\tnavigatorWidth = scroller.navigatorWidth,\r\n\t\t\t\tscrollbarPad = scroller.scrollbarPad,\r\n\t\t\t\trange = scroller.range,\r\n\t\t\t\tchartX = e.chartX,\r\n\t\t\t\tchartY = e.chartY,\r\n\t\t\t\tbaseXAxis = chart.xAxis[0],\r\n\t\t\t\tfixedMax,\r\n\t\t\t\text,\r\n\t\t\t\thandleSensitivity = isTouchDevice ? 10 : 7,\r\n\t\t\t\tleft,\r\n\t\t\t\tisOnNavigator;\r\n\r\n\t\t\tif (chartY > top && chartY < top + height + scrollbarHeight) { // we're vertically inside the navigator\r\n\t\t\t\tisOnNavigator = !scroller.scrollbarEnabled || chartY < top + height;\r\n\r\n\t\t\t\t// grab the left handle\r\n\t\t\t\tif (isOnNavigator && math.abs(chartX - zoomedMin - navigatorLeft) < handleSensitivity) {\r\n\t\t\t\t\tscroller.grabbedLeft = true;\r\n\t\t\t\t\tscroller.otherHandlePos = zoomedMax;\r\n\t\t\t\t\tscroller.fixedExtreme = baseXAxis.max;\r\n\t\t\t\t\tchart.fixedRange = null;\r\n\r\n\t\t\t\t// grab the right handle\r\n\t\t\t\t} else if (isOnNavigator && math.abs(chartX - zoomedMax - navigatorLeft) < handleSensitivity) {\r\n\t\t\t\t\tscroller.grabbedRight = true;\r\n\t\t\t\t\tscroller.otherHandlePos = zoomedMin;\r\n\t\t\t\t\tscroller.fixedExtreme = baseXAxis.min;\r\n\t\t\t\t\tchart.fixedRange = null;\r\n\r\n\t\t\t\t// grab the zoomed range\r\n\t\t\t\t} else if (chartX > navigatorLeft + zoomedMin - scrollbarPad && chartX < navigatorLeft + zoomedMax + scrollbarPad) {\r\n\t\t\t\t\tscroller.grabbedCenter = chartX;\r\n\t\t\t\t\tscroller.fixedWidth = range;\r\n\r\n\t\t\t\t\tdragOffset = chartX - zoomedMin;\r\n\r\n\r\n\t\t\t\t// shift the range by clicking on shaded areas, scrollbar track or scrollbar buttons\r\n\t\t\t\t} else if (chartX > scrollerLeft && chartX < scrollerLeft + scrollerWidth) {\r\n\r\n\t\t\t\t\t// Center around the clicked point\r\n\t\t\t\t\tif (isOnNavigator) {\r\n\t\t\t\t\t\tleft = chartX - navigatorLeft - range / 2;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Click on scrollbar\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// Click left scrollbar button\r\n\t\t\t\t\t\tif (chartX < navigatorLeft) { \r\n\t\t\t\t\t\t\tleft = zoomedMin - range * 0.2;\r\n\r\n\t\t\t\t\t\t// Click right scrollbar button\r\n\t\t\t\t\t\t} else if (chartX > scrollerLeft + scrollerWidth - scrollbarHeight) {\r\n\t\t\t\t\t\t\tleft = zoomedMin + range * 0.2;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Click on scrollbar track, shift the scrollbar by one range\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tleft = chartX < navigatorLeft + zoomedMin ? // on the left\r\n\t\t\t\t\t\t\t\tzoomedMin - range :\r\n\t\t\t\t\t\t\t\tzoomedMax;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (left < 0) {\r\n\t\t\t\t\t\tleft = 0;\r\n\t\t\t\t\t} else if (left + range >= navigatorWidth) {\r\n\t\t\t\t\t\tleft = navigatorWidth - range;\r\n\t\t\t\t\t\tfixedMax = scroller.getUnionExtremes().dataMax; // #2293, #3543\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (left !== zoomedMin) { // it has actually moved\r\n\t\t\t\t\t\tscroller.fixedWidth = range; // #1370\r\n\r\n\t\t\t\t\t\text = xAxis.toFixedRange(left, left + range, null, fixedMax);\r\n\t\t\t\t\t\tbaseXAxis.setExtremes(\r\n\t\t\t\t\t\t\text.min,\r\n\t\t\t\t\t\t\text.max,\r\n\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t{ trigger: 'navigator' }\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Event handler for the mouse move event.\r\n\t\t */\r\n\t\tscroller.mouseMoveHandler = function (e) {\r\n\t\t\tvar scrollbarHeight = scroller.scrollbarHeight,\r\n\t\t\t\tnavigatorLeft = scroller.navigatorLeft,\r\n\t\t\t\tnavigatorWidth = scroller.navigatorWidth,\r\n\t\t\t\tscrollerLeft = scroller.scrollerLeft,\r\n\t\t\t\tscrollerWidth = scroller.scrollerWidth,\r\n\t\t\t\trange = scroller.range,\r\n\t\t\t\tchartX;\r\n\r\n\t\t\t// In iOS, a mousemove event with e.pageX === 0 is fired when holding the finger\r\n\t\t\t// down in the center of the scrollbar. This should be ignored.\r\n\t\t\tif (e.pageX !== 0) {\r\n\r\n\t\t\t\te = chart.pointer.normalize(e);\r\n\t\t\t\tchartX = e.chartX;\r\n\r\n\t\t\t\t// validation for handle dragging\r\n\t\t\t\tif (chartX < navigatorLeft) {\r\n\t\t\t\t\tchartX = navigatorLeft;\r\n\t\t\t\t} else if (chartX > scrollerLeft + scrollerWidth - scrollbarHeight) {\r\n\t\t\t\t\tchartX = scrollerLeft + scrollerWidth - scrollbarHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// drag left handle\r\n\t\t\t\tif (scroller.grabbedLeft) {\r\n\t\t\t\t\thasDragged = true;\r\n\t\t\t\t\tscroller.render(0, 0, chartX - navigatorLeft, scroller.otherHandlePos);\r\n\r\n\t\t\t\t// drag right handle\r\n\t\t\t\t} else if (scroller.grabbedRight) {\r\n\t\t\t\t\thasDragged = true;\r\n\t\t\t\t\tscroller.render(0, 0, scroller.otherHandlePos, chartX - navigatorLeft);\r\n\r\n\t\t\t\t// drag scrollbar or open area in navigator\r\n\t\t\t\t} else if (scroller.grabbedCenter) {\r\n\r\n\t\t\t\t\thasDragged = true;\r\n\t\t\t\t\tif (chartX < dragOffset) { // outside left\r\n\t\t\t\t\t\tchartX = dragOffset;\r\n\t\t\t\t\t} else if (chartX > navigatorWidth + dragOffset - range) { // outside right\r\n\t\t\t\t\t\tchartX = navigatorWidth + dragOffset - range;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tscroller.render(0, 0, chartX - dragOffset, chartX - dragOffset + range);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif (hasDragged && scroller.scrollbarOptions.liveRedraw) {\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tscroller.mouseUpHandler(e);\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Event handler for the mouse up event.\r\n\t\t */\r\n\t\tscroller.mouseUpHandler = function (e) {\r\n\t\t\tvar ext,\r\n\t\t\t\tfixedMin,\r\n\t\t\t\tfixedMax;\r\n\r\n\t\t\tif (hasDragged) {\r\n\t\t\t\t// When dragging one handle, make sure the other one doesn't change\r\n\t\t\t\tif (scroller.zoomedMin === scroller.otherHandlePos) {\r\n\t\t\t\t\tfixedMin = scroller.fixedExtreme;\r\n\t\t\t\t} else if (scroller.zoomedMax === scroller.otherHandlePos) {\r\n\t\t\t\t\tfixedMax = scroller.fixedExtreme;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\text = xAxis.toFixedRange(scroller.zoomedMin, scroller.zoomedMax, fixedMin, fixedMax);\r\n\t\t\t\tchart.xAxis[0].setExtremes(\r\n\t\t\t\t\text.min,\r\n\t\t\t\t\text.max,\r\n\t\t\t\t\ttrue,\r\n\t\t\t\t\tfalse,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttrigger: 'navigator',\r\n\t\t\t\t\t\ttriggerOp: 'navigator-drag',\r\n\t\t\t\t\t\tDOMEvent: e // #1838\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (e.type !== 'mousemove') {\r\n\t\t\t\tscroller.grabbedLeft = scroller.grabbedRight = scroller.grabbedCenter = scroller.fixedWidth =\r\n\t\t\t\t\tscroller.fixedExtreme = scroller.otherHandlePos = hasDragged = dragOffset = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\r\n\t\tvar xAxisIndex = chart.xAxis.length,\r\n\t\t\tyAxisIndex = chart.yAxis.length;\r\n\r\n\t\t// make room below the chart\r\n\t\tchart.extraBottomMargin = scroller.outlineHeight + navigatorOptions.margin;\r\n\r\n\t\tif (scroller.navigatorEnabled) {\r\n\t\t\t// an x axis is required for scrollbar also\r\n\t\t\tscroller.xAxis = xAxis = new Axis(chart, merge({\r\n\t\t\t\t// inherit base xAxis' break and ordinal options\r\n\t\t\t\tbreaks: baseSeries && baseSeries.xAxis.options.breaks,\r\n\t\t\t\tordinal: baseSeries && baseSeries.xAxis.options.ordinal \r\n\t\t\t}, navigatorOptions.xAxis, {\r\n\t\t\t\tid: 'navigator-x-axis',\r\n\t\t\t\tisX: true,\r\n\t\t\t\ttype: 'datetime',\r\n\t\t\t\tindex: xAxisIndex,\r\n\t\t\t\theight: height,\r\n\t\t\t\toffset: 0,\r\n\t\t\t\toffsetLeft: scrollbarHeight,\r\n\t\t\t\toffsetRight: -scrollbarHeight,\r\n\t\t\t\tkeepOrdinalPadding: true, // #2436\r\n\t\t\t\tstartOnTick: false,\r\n\t\t\t\tendOnTick: false,\r\n\t\t\t\tminPadding: 0,\r\n\t\t\t\tmaxPadding: 0,\r\n\t\t\t\tzoomEnabled: false\r\n\t\t\t}));\r\n\r\n\t\t\tscroller.yAxis = yAxis = new Axis(chart, merge(navigatorOptions.yAxis, {\r\n\t\t\t\tid: 'navigator-y-axis',\r\n\t\t\t\talignTicks: false,\r\n\t\t\t\theight: height,\r\n\t\t\t\toffset: 0,\r\n\t\t\t\tindex: yAxisIndex,\r\n\t\t\t\tzoomEnabled: false\r\n\t\t\t}));\r\n\r\n\t\t\t// If we have a base series, initialize the navigator series\r\n\t\t\tif (baseSeries || navigatorOptions.series.data) {\r\n\t\t\t\tscroller.addBaseSeries();\r\n\r\n\t\t\t// If not, set up an event to listen for added series\r\n\t\t\t} else if (chart.series.length === 0) {\r\n\r\n\t\t\t\twrap(chart, 'redraw', function (proceed, animation) {\r\n\t\t\t\t\t// We've got one, now add it as base and reset chart.redraw\r\n\t\t\t\t\tif (chart.series.length > 0 && !scroller.series) {\r\n\t\t\t\t\t\tscroller.setBaseSeries();\r\n\t\t\t\t\t\tchart.redraw = proceed; // reset\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproceed.call(chart, animation);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t// in case of scrollbar only, fake an x axis to get translation\r\n\t\t} else {\r\n\t\t\tscroller.xAxis = xAxis = {\r\n\t\t\t\ttranslate: function (value, reverse) {\r\n\t\t\t\t\tvar axis = chart.xAxis[0],\r\n\t\t\t\t\t\text = axis.getExtremes(),\r\n\t\t\t\t\t\tscrollTrackWidth = chart.plotWidth - 2 * scrollbarHeight,\r\n\t\t\t\t\t\tmin = numExt('min', axis.options.min, ext.dataMin),\r\n\t\t\t\t\t\tvalueRange = numExt('max', axis.options.max, ext.dataMax) - min;\r\n\r\n\t\t\t\t\treturn reverse ?\r\n\t\t\t\t\t\t// from pixel to value\r\n\t\t\t\t\t\t(value * valueRange / scrollTrackWidth) + min :\r\n\t\t\t\t\t\t// from value to pixel\r\n\t\t\t\t\t\tscrollTrackWidth * (value - min) / valueRange;\r\n\t\t\t\t},\r\n\t\t\t\ttoFixedRange: Axis.prototype.toFixedRange\r\n\t\t\t};\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * For stock charts, extend the Chart.getMargins method so that we can set the final top position\r\n\t\t * of the navigator once the height of the chart, including the legend, is determined. #367.\r\n\t\t */\r\n\t\twrap(chart, 'getMargins', function (proceed) {\r\n\r\n\t\t\tvar legend = this.legend,\r\n\t\t\t\tlegendOptions = legend.options;\r\n\r\n\t\t\tproceed.apply(this, [].slice.call(arguments, 1));\r\n\r\n\t\t\t// Compute the top position\r\n\t\t\tscroller.top = top = scroller.navigatorOptions.top ||\r\n\t\t\t\tthis.chartHeight - scroller.height - scroller.scrollbarHeight - this.spacing[2] -\r\n\t\t\t\t\t\t(legendOptions.verticalAlign === 'bottom' && legendOptions.enabled && !legendOptions.floating ?\r\n\t\t\t\t\t\t\tlegend.legendHeight + pick(legendOptions.margin, 10) : 0);\r\n\r\n\t\t\tif (xAxis && yAxis) { // false if navigator is disabled (#904)\r\n\r\n\t\t\t\txAxis.options.top = yAxis.options.top = top;\r\n\r\n\t\t\t\txAxis.setAxisSize();\r\n\t\t\t\tyAxis.setAxisSize();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tscroller.addEvents();\r\n\t},\r\n\r\n\t/**\r\n\t * Get the union data extremes of the chart - the outer data extremes of the base\r\n\t * X axis and the navigator axis.\r\n\t */\r\n\tgetUnionExtremes: function (returnFalseOnNoBaseSeries) {\r\n\t\tvar baseAxis = this.chart.xAxis[0],\r\n\t\t\tnavAxis = this.xAxis,\r\n\t\t\tnavAxisOptions = navAxis.options,\r\n\t\t\tbaseAxisOptions = baseAxis.options;\r\n\r\n\t\tif (!returnFalseOnNoBaseSeries || baseAxis.dataMin !== null) {\r\n\t\t\treturn {\r\n\t\t\t\tdataMin: numExt(\r\n\t\t\t\t\t'min',\r\n\t\t\t\t\tnavAxisOptions && navAxisOptions.min,\r\n\t\t\t\t\tbaseAxisOptions.min,\r\n\t\t\t\t\tbaseAxis.dataMin, \r\n\t\t\t\t\tnavAxis.dataMin\r\n\t\t\t\t),\r\n\t\t\t\tdataMax: numExt(\r\n\t\t\t\t\t'max',\r\n\t\t\t\t\tnavAxisOptions && navAxisOptions.max,\r\n\t\t\t\t\tbaseAxisOptions.max,\r\n\t\t\t\t\tbaseAxis.dataMax, \r\n\t\t\t\t\tnavAxis.dataMax\r\n\t\t\t\t)\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set the base series. With a bit of modification we should be able to make\r\n\t * this an API method to be called from the outside\r\n\t */\r\n\tsetBaseSeries: function (baseSeriesOption) {\r\n\t\tvar chart = this.chart;\r\n\r\n\t\tbaseSeriesOption = baseSeriesOption || chart.options.navigator.baseSeries;\r\n\r\n\t\t// If we're resetting, remove the existing series\r\n\t\tif (this.series) {\r\n\t\t\tthis.series.remove();\r\n\t\t}\r\n\r\n\t\t// Set the new base series\r\n\t\tthis.baseSeries = chart.series[baseSeriesOption] ||\r\n\t\t\t(typeof baseSeriesOption === 'string' && chart.get(baseSeriesOption)) ||\r\n\t\t\tchart.series[0];\r\n\r\n\t\t// When run after render, this.xAxis already exists\r\n\t\tif (this.xAxis) {\r\n\t\t\tthis.addBaseSeries();\r\n\t\t}\r\n\t},\r\n\r\n\taddBaseSeries: function () {\r\n\t\tvar baseSeries = this.baseSeries,\r\n\t\t\tbaseOptions = baseSeries ? baseSeries.options : {},\r\n\t\t\tbaseData = baseOptions.data,\r\n\t\t\tmergedNavSeriesOptions,\r\n\t\t\tnavigatorSeriesOptions = this.navigatorOptions.series,\r\n\t\t\tnavigatorData;\r\n\r\n\t\t// remove it to prevent merging one by one\r\n\t\tnavigatorData = navigatorSeriesOptions.data;\r\n\t\tthis.hasNavigatorData = !!navigatorData;\r\n\r\n\t\t// Merge the series options\r\n\t\tmergedNavSeriesOptions = merge(baseOptions, navigatorSeriesOptions, {\r\n\t\t\tenableMouseTracking: false,\r\n\t\t\tgroup: 'nav', // for columns\r\n\t\t\tpadXAxis: false,\r\n\t\t\txAxis: 'navigator-x-axis',\r\n\t\t\tyAxis: 'navigator-y-axis',\r\n\t\t\tname: 'Navigator',\r\n\t\t\tshowInLegend: false,\r\n\t\t\tisInternal: true,\r\n\t\t\tvisible: true\r\n\t\t});\r\n\r\n\t\t// set the data back\r\n\t\tmergedNavSeriesOptions.data = navigatorData || baseData;\r\n\r\n\t\t// add the series\r\n\t\tthis.series = this.chart.initSeries(mergedNavSeriesOptions);\r\n\r\n\t\t// Respond to updated data in the base series.\r\n\t\t// Abort if lazy-loading data from the server.\r\n\t\tif (baseSeries && this.navigatorOptions.adaptToUpdatedData !== false) {\r\n\t\t\taddEvent(baseSeries, 'updatedData', this.updatedDataHandler);\r\n\t\t\t// Survive Series.update()\r\n\t\t\tbaseSeries.userOptions.events = extend(baseSeries.userOptions.event, { updatedData: this.updatedDataHandler });\r\n\r\n\t\t}\r\n\t},\r\n\r\n\tupdatedDataHandler: function () {\r\n\t\tvar scroller = this.chart.scroller,\r\n\t\t\tbaseSeries = scroller.baseSeries,\r\n\t\t\tbaseXAxis = baseSeries.xAxis,\r\n\t\t\tbaseExtremes = baseXAxis.getExtremes(),\r\n\t\t\tbaseMin = baseExtremes.min,\r\n\t\t\tbaseMax = baseExtremes.max,\r\n\t\t\tbaseDataMin = baseExtremes.dataMin,\r\n\t\t\tbaseDataMax = baseExtremes.dataMax,\r\n\t\t\trange = baseMax - baseMin,\r\n\t\t\tstickToMin,\r\n\t\t\tstickToMax,\r\n\t\t\tnewMax,\r\n\t\t\tnewMin,\r\n\t\t\tdoRedraw,\r\n\t\t\tnavigatorSeries = scroller.series,\r\n\t\t\tnavXData = navigatorSeries.xData,\r\n\t\t\thasSetExtremes = !!baseXAxis.setExtremes;\r\n\r\n\t\t// detect whether to move the range\r\n\t\tstickToMax = baseMax >= navXData[navXData.length - 1] - (this.closestPointRange || 0); // #570\r\n\t\tstickToMin = baseMin <= baseDataMin;\r\n\r\n\t\t// set the navigator series data to the new data of the base series\r\n\t\tif (!scroller.hasNavigatorData) {\r\n\t\t\tnavigatorSeries.options.pointStart = baseSeries.xData[0];\r\n\t\t\tnavigatorSeries.setData(baseSeries.options.data, false);\r\n\t\t\tdoRedraw = true;\r\n\t\t}\r\n\r\n\t\t// if the zoomed range is already at the min, move it to the right as new data\r\n\t\t// comes in\r\n\t\tif (stickToMin) {\r\n\t\t\tnewMin = baseDataMin;\r\n\t\t\tnewMax = newMin + range;\r\n\t\t}\r\n\r\n\t\t// if the zoomed range is already at the max, move it to the right as new data\r\n\t\t// comes in\r\n\t\tif (stickToMax) {\r\n\t\t\tnewMax = baseDataMax;\r\n\t\t\tif (!stickToMin) { // if stickToMin is true, the new min value is set above\r\n\t\t\t\tnewMin = mathMax(newMax - range, navigatorSeries.xData[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// update the extremes\r\n\t\tif (hasSetExtremes && (stickToMin || stickToMax)) {\r\n\t\t\tif (!isNaN(newMin)) {\r\n\t\t\t\tbaseXAxis.setExtremes(newMin, newMax, true, false, { trigger: 'updatedData' });\r\n\t\t\t}\r\n\r\n\t\t// if it is not at any edge, just move the scroller window to reflect the new series data\r\n\t\t} else {\r\n\t\t\tif (doRedraw) {\r\n\t\t\t\tthis.chart.redraw(false);\r\n\t\t\t}\r\n\r\n\t\t\tscroller.render(\r\n\t\t\t\tmathMax(baseMin, baseDataMin),\r\n\t\t\t\tmathMin(baseMax, baseDataMax)\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Destroys allocated elements.\r\n\t */\r\n\tdestroy: function () {\r\n\t\tvar scroller = this;\r\n\r\n\t\t// Disconnect events added in addEvents\r\n\t\tscroller.removeEvents();\r\n\r\n\t\t// Destroy properties\r\n\t\teach([scroller.xAxis, scroller.yAxis, scroller.leftShade, scroller.rightShade, scroller.outline, scroller.scrollbarTrack, scroller.scrollbarRifles, scroller.scrollbarGroup, scroller.scrollbar], function (prop) {\r\n\t\t\tif (prop && prop.destroy) {\r\n\t\t\t\tprop.destroy();\r\n\t\t\t}\r\n\t\t});\r\n\t\tscroller.xAxis = scroller.yAxis = scroller.leftShade = scroller.rightShade = scroller.outline = scroller.scrollbarTrack = scroller.scrollbarRifles = scroller.scrollbarGroup = scroller.scrollbar = null;\r\n\r\n\t\t// Destroy elements in collection\r\n\t\teach([scroller.scrollbarButtons, scroller.handles, scroller.elementsToDestroy], function (coll) {\r\n\t\t\tdestroyObjectProperties(coll);\r\n\t\t});\r\n\t}\r\n};\r\n\r\nHighcharts.Scroller = Scroller;\r\n\r\n\r\n/**\r\n * For Stock charts, override selection zooming with some special features because\r\n * X axis zooming is already allowed by the Navigator and Range selector.\r\n */\r\nwrap(Axis.prototype, 'zoom', function (proceed, newMin, newMax) {\r\n\tvar chart = this.chart,\r\n\t\tchartOptions = chart.options,\r\n\t\tzoomType = chartOptions.chart.zoomType,\r\n\t\tpreviousZoom,\r\n\t\tnavigator = chartOptions.navigator,\r\n\t\trangeSelector = chartOptions.rangeSelector,\r\n\t\tret;\r\n\r\n\tif (this.isXAxis && ((navigator && navigator.enabled) ||\r\n\t\t\t(rangeSelector && rangeSelector.enabled))) {\r\n\r\n\t\t// For x only zooming, fool the chart.zoom method not to create the zoom button\r\n\t\t// because the property already exists\r\n\t\tif (zoomType === 'x') {\r\n\t\t\tchart.resetZoomButton = 'blocked';\r\n\r\n\t\t// For y only zooming, ignore the X axis completely\r\n\t\t} else if (zoomType === 'y') {\r\n\t\t\tret = false;\r\n\r\n\t\t// For xy zooming, record the state of the zoom before zoom selection, then when\r\n\t\t// the reset button is pressed, revert to this state\r\n\t\t} else if (zoomType === 'xy') {\r\n\t\t\tpreviousZoom = this.previousZoom;\r\n\t\t\tif (defined(newMin)) {\r\n\t\t\t\tthis.previousZoom = [this.min, this.max];\r\n\t\t\t} else if (previousZoom) {\r\n\t\t\t\tnewMin = previousZoom[0];\r\n\t\t\t\tnewMax = previousZoom[1];\r\n\t\t\t\tdelete this.previousZoom;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\treturn ret !== UNDEFINED ? ret : proceed.call(this, newMin, newMax);\r\n});\r\n\r\n// Initialize scroller for stock charts\r\nwrap(Chart.prototype, 'init', function (proceed, options, callback) {\r\n\r\n\taddEvent(this, 'beforeRender', function () {\r\n\t\tvar options = this.options;\r\n\t\tif (options.navigator.enabled || options.scrollbar.enabled) {\r\n\t\t\tthis.scroller = new Scroller(this);\r\n\t\t}\r\n\t});\r\n\r\n\tproceed.call(this, options, callback);\r\n\r\n});\r\n\r\n// Pick up badly formatted point options to addPoint\r\nwrap(Series.prototype, 'addPoint', function (proceed, options, redraw, shift, animation) {\r\n\tvar turboThreshold = this.options.turboThreshold;\r\n\tif (turboThreshold && this.xData.length > turboThreshold && isObject(options) && !isArray(options) && this.chart.scroller) {\r\n\t\terror(20, true);\r\n\t}\r\n\tproceed.call(this, options, redraw, shift, animation);\r\n});\r\n\r\n/* ****************************************************************************\r\n * End Scroller code\t\t\t\t\t\t\t\t\t\t\t\t\t\t  *\r\n *****************************************************************************/\r\n/* ****************************************************************************\r\n * Start Range Selector code\t\t\t\t\t\t\t\t\t\t\t\t  *\r\n *****************************************************************************/\r\nextend(defaultOptions, {\r\n\trangeSelector: {\r\n\t\t// allButtonsEnabled: false,\r\n\t\t// enabled: true,\r\n\t\t// buttons: {Object}\r\n\t\t// buttonSpacing: 0,\r\n\t\tbuttonTheme: {\r\n\t\t\twidth: 28,\r\n\t\t\theight: 18,\r\n\t\t\tfill: '#f7f7f7',\r\n\t\t\tpadding: 2,\r\n\t\t\tr: 0,\r\n\t\t\t'stroke-width': 0,\r\n\t\t\tstyle: {\r\n\t\t\t\tcolor: '#444',\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t\tfontWeight: 'normal'\r\n\t\t\t},\r\n\t\t\tzIndex: 7, // #484, #852\r\n\t\t\tstates: {\r\n\t\t\t\thover: {\r\n\t\t\t\t\tfill: '#e7e7e7'\r\n\t\t\t\t},\r\n\t\t\t\tselect: {\r\n\t\t\t\t\tfill: '#e7f0f9',\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tcolor: 'black',\r\n\t\t\t\t\t\tfontWeight: 'bold'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tinputPosition: {\r\n\t\t\talign: 'right'\r\n\t\t},\r\n\t\t// inputDateFormat: '%b %e, %Y',\r\n\t\t// inputEditDateFormat: '%Y-%m-%d',\r\n\t\t// inputEnabled: true,\r\n\t\t// inputStyle: {},\r\n\t\tlabelStyle: {\r\n\t\t\tcolor: '#666'\r\n\t\t}\r\n\t\t// selected: undefined\r\n\t}\r\n});\r\ndefaultOptions.lang = merge(defaultOptions.lang, {\r\n\trangeSelectorZoom: 'Zoom',\r\n\trangeSelectorFrom: 'From',\r\n\trangeSelectorTo: 'To'\r\n});\r\n\r\n/**\r\n * The object constructor for the range selector\r\n * @param {Object} chart\r\n */\r\nfunction RangeSelector(chart) {\r\n\r\n\t// Run RangeSelector\r\n\tthis.init(chart);\r\n}\r\n\r\nRangeSelector.prototype = {\r\n\t/**\r\n\t * The method to run when one of the buttons in the range selectors is clicked\r\n\t * @param {Number} i The index of the button\r\n\t * @param {Object} rangeOptions\r\n\t * @param {Boolean} redraw\r\n\t */\r\n\tclickButton: function (i, redraw) {\r\n\t\tvar rangeSelector = this,\r\n\t\t\tselected = rangeSelector.selected,\r\n\t\t\tchart = rangeSelector.chart,\r\n\t\t\tbuttons = rangeSelector.buttons,\r\n\t\t\trangeOptions = rangeSelector.buttonOptions[i],\r\n\t\t\tbaseAxis = chart.xAxis[0],\r\n\t\t\tunionExtremes = (chart.scroller && chart.scroller.getUnionExtremes()) || baseAxis || {},\r\n\t\t\tdataMin = unionExtremes.dataMin,\r\n\t\t\tdataMax = unionExtremes.dataMax,\r\n\t\t\tnewMin,\r\n\t\t\tnewMax = baseAxis && mathRound(mathMin(baseAxis.max, pick(dataMax, baseAxis.max))), // #1568\r\n\t\t\tnow,\r\n\t\t\tdate = new Date(newMax),\r\n\t\t\ttype = rangeOptions.type,\r\n\t\t\tcount = rangeOptions.count,\r\n\t\t\tbaseXAxisOptions,\r\n\t\t\trange = rangeOptions._range,\r\n\t\t\trangeMin,\r\n\t\t\tyear,\r\n\t\t\ttimeName;\r\n\r\n\t\tif (dataMin === null || dataMax === null || // chart has no data, base series is removed\r\n\t\t\t\ti === rangeSelector.selected) { // same button is clicked twice\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (type === 'month' || type === 'year') {\r\n\t\t\ttimeName = { month: 'Month', year: 'FullYear'}[type];\r\n\t\t\tdate['set' + timeName](date['get' + timeName]() - count);\r\n\r\n\t\t\tnewMin = date.getTime();\r\n\t\t\tdataMin = pick(dataMin, Number.MIN_VALUE);\r\n\t\t\tif (isNaN(newMin) || newMin < dataMin) {\r\n\t\t\t\tnewMin = dataMin;\r\n\t\t\t\tnewMax = mathMin(newMin + range, dataMax);\r\n\t\t\t} else {\r\n\t\t\t\trange = newMax - newMin;\r\n\t\t\t}\r\n\r\n\t\t// Fixed times like minutes, hours, days\r\n\t\t} else if (range) {\r\n\t\t\tnewMin = mathMax(newMax - range, dataMin);\r\n\t\t\tnewMax = mathMin(newMin + range, dataMax);\r\n\t\t\r\n\t\t} else if (type === 'ytd') {\r\n\r\n\t\t\t// On user clicks on the buttons, or a delayed action running from the beforeRender \r\n\t\t\t// event (below), the baseAxis is defined.\r\n\t\t\tif (baseAxis) {\r\n\r\n\t\t\t\t// When \"ytd\" is the pre-selected button for the initial view, its calculation\r\n\t\t\t\t// is delayed and rerun in the beforeRender event (below). When the series\r\n\t\t\t\t// are initialized, but before the chart is rendered, we have access to the xData\r\n\t\t\t\t// array (#942).\r\n\t\t\t\tif (dataMax === UNDEFINED) {\r\n\t\t\t\t\tdataMin = Number.MAX_VALUE;\r\n\t\t\t\t\tdataMax = Number.MIN_VALUE;\r\n\t\t\t\t\teach(chart.series, function (series) {\r\n\t\t\t\t\t\tvar xData = series.xData; // reassign it to the last item\r\n\t\t\t\t\t\tdataMin = mathMin(xData[0], dataMin);\r\n\t\t\t\t\t\tdataMax = mathMax(xData[xData.length - 1], dataMax);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tredraw = false;\r\n\t\t\t\t}\r\n\t\t\t\tnow = new Date(dataMax);\r\n\t\t\t\tyear = now.getFullYear();\r\n\t\t\t\tnewMin = rangeMin = mathMax(dataMin || 0, Date.UTC(year, 0, 1));\r\n\t\t\t\tnow = now.getTime();\r\n\t\t\t\tnewMax = mathMin(dataMax || now, now);\r\n\r\n\t\t\t// \"ytd\" is pre-selected. We don't yet have access to processed point and extremes data\r\n\t\t\t// (things like pointStart and pointInterval are missing), so we delay the process (#942)\r\n\t\t\t} else {\r\n\t\t\t\taddEvent(chart, 'beforeRender', function () {\r\n\t\t\t\t\trangeSelector.clickButton(i);\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else if (type === 'all' && baseAxis) {\r\n\t\t\tnewMin = dataMin;\r\n\t\t\tnewMax = dataMax;\r\n\t\t}\r\n\r\n\t\t// Deselect previous button\r\n\t\tif (buttons[selected]) {\r\n\t\t\tbuttons[selected].setState(0);\r\n\t\t}\r\n\t\t// Select this button\r\n\t\tif (buttons[i]) {\r\n\t\t\tbuttons[i].setState(2);\r\n\t\t}\r\n\r\n\t\tchart.fixedRange = range;\r\n\r\n\t\t// update the chart\r\n\t\tif (!baseAxis) { // axis not yet instanciated\r\n\t\t\tbaseXAxisOptions = chart.options.xAxis;\r\n\t\t\tbaseXAxisOptions[0] = merge(\r\n\t\t\t\tbaseXAxisOptions[0],\r\n\t\t\t\t{\r\n\t\t\t\t\trange: range,\r\n\t\t\t\t\tmin: rangeMin\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\trangeSelector.setSelected(i);\r\n\t\t} else { // existing axis object; after render time\r\n\t\t\tbaseAxis.setExtremes(\r\n\t\t\t\tnewMin,\r\n\t\t\t\tnewMax,\r\n\t\t\t\tpick(redraw, 1),\r\n\t\t\t\t0, \r\n\t\t\t\t{ \r\n\t\t\t\t\ttrigger: 'rangeSelectorButton',\r\n\t\t\t\t\trangeSelectorButton: rangeOptions\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\trangeSelector.setSelected(i);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set the selected option. This method only sets the internal flag, it doesn't\r\n\t * update the buttons or the actual zoomed range.\r\n\t */\r\n\tsetSelected: function (selected) {\r\n\t\tthis.selected = this.options.selected = selected;\r\n\t},\r\n\t\r\n\t/**\r\n\t * The default buttons for pre-selecting time frames\r\n\t */\r\n\tdefaultButtons: [{\r\n\t\ttype: 'month',\r\n\t\tcount: 1,\r\n\t\ttext: '1m'\r\n\t}, {\r\n\t\ttype: 'month',\r\n\t\tcount: 3,\r\n\t\ttext: '3m'\r\n\t}, {\r\n\t\ttype: 'month',\r\n\t\tcount: 6,\r\n\t\ttext: '6m'\r\n\t}, {\r\n\t\ttype: 'ytd',\r\n\t\ttext: 'YTD'\r\n\t}, {\r\n\t\ttype: 'year',\r\n\t\tcount: 1,\r\n\t\ttext: '1y'\r\n\t}, {\r\n\t\ttype: 'all',\r\n\t\ttext: 'All'\r\n\t}],\r\n\r\n\t/**\r\n\t * Initialize the range selector\r\n\t */\r\n\tinit: function (chart) {\r\n\t\t\r\n\t\tvar rangeSelector = this,\r\n\t\t\toptions = chart.options.rangeSelector,\r\n\t\t\tbuttonOptions = options.buttons || [].concat(rangeSelector.defaultButtons),\r\n\t\t\tselectedOption = options.selected,\r\n\t\t\tblurInputs = rangeSelector.blurInputs = function () {\r\n\t\t\t\tvar minInput = rangeSelector.minInput,\r\n\t\t\t\t\tmaxInput = rangeSelector.maxInput;\r\n\t\t\t\tif (minInput && minInput.blur) { //#3274 in some case blur is not defined\r\n\t\t\t\t\tfireEvent(minInput, 'blur'); //#3274\r\n\t\t\t\t}\r\n\t\t\t\tif (maxInput && maxInput.blur) { //#3274 in some case blur is not defined\r\n\t\t\t\t\tfireEvent(maxInput, 'blur'); //#3274\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\trangeSelector.chart = chart;\r\n\t\trangeSelector.options = options;\r\n\t\trangeSelector.buttons = [];\r\n\t\t\r\n\t\tchart.extraTopMargin = 35;\r\n\t\trangeSelector.buttonOptions = buttonOptions;\r\n\r\n\t\taddEvent(chart.container, 'mousedown', blurInputs);\r\n\t\taddEvent(chart, 'resize', blurInputs);\r\n\r\n\t\t// Extend the buttonOptions with actual range\r\n\t\teach(buttonOptions, rangeSelector.computeButtonRange);\r\n\r\n\t\t// zoomed range based on a pre-selected button index\r\n\t\tif (selectedOption !== UNDEFINED && buttonOptions[selectedOption]) {\r\n\t\t\tthis.clickButton(selectedOption, false);\r\n\t\t}\r\n\r\n\t\t// normalize the pressed button whenever a new range is selected\r\n\t\taddEvent(chart, 'load', function () {\r\n\t\t\taddEvent(chart.xAxis[0], 'afterSetExtremes', function () {\r\n\t\t\t\trangeSelector.updateButtonStates(true);\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Dynamically update the range selector buttons after a new range has been set\r\n\t */\r\n\tupdateButtonStates: function (updating) {\r\n\t\tvar rangeSelector = this,\r\n\t\t\tchart = this.chart,\r\n\t\t\tbaseAxis = chart.xAxis[0],\r\n\t\t\tunionExtremes = (chart.scroller && chart.scroller.getUnionExtremes()) || baseAxis,\r\n\t\t\tdataMin = unionExtremes.dataMin,\r\n\t\t\tdataMax = unionExtremes.dataMax,\r\n\t\t\tselected = rangeSelector.selected,\r\n\t\t\tallButtonsEnabled = rangeSelector.options.allButtonsEnabled,\r\n\t\t\tbuttons = rangeSelector.buttons;\r\n\r\n\t\tif (updating && chart.fixedRange !== mathRound(baseAxis.max - baseAxis.min)) {\r\n\t\t\tif (buttons[selected]) {\r\n\t\t\t\tbuttons[selected].setState(0);\r\n\t\t\t}\r\n\t\t\trangeSelector.setSelected(null);\r\n\t\t}\r\n\r\n\t\teach(rangeSelector.buttonOptions, function (rangeOptions, i) {\r\n\t\t\tvar range = rangeOptions._range,\r\n\t\t\t\t// Disable buttons where the range exceeds what is allowed in the current view\r\n\t\t\t\tisTooGreatRange = range > dataMax - dataMin,\r\n\t\t\t\t// Disable buttons where the range is smaller than the minimum range\r\n\t\t\t\tisTooSmallRange = range < baseAxis.minRange,\r\n\t\t\t\t// Disable the All button if we're already showing all \r\n\t\t\t\tisAllButAlreadyShowingAll = rangeOptions.type === 'all' && baseAxis.max - baseAxis.min >= dataMax - dataMin && \r\n\t\t\t\t\tbuttons[i].state !== 2,\r\n\t\t\t\t// Disable the YTD button if the complete range is within the same year\r\n\t\t\t\tisYTDButNotAvailable = rangeOptions.type === 'ytd' && dateFormat('%Y', dataMin) === dateFormat('%Y', dataMax);\r\n\r\n\t\t\t// The new zoom area happens to match the range for a button - mark it selected.\r\n\t\t\t// This happens when scrolling across an ordinal gap. It can be seen in the intraday\r\n\t\t\t// demos when selecting 1h and scroll across the night gap.\r\n\t\t\tif (range === mathRound(baseAxis.max - baseAxis.min) && i !== selected) {\r\n\t\t\t\trangeSelector.setSelected(i);\r\n\t\t\t\tbuttons[i].setState(2);\r\n\t\t\t\r\n\t\t\t} else if (!allButtonsEnabled && (isTooGreatRange || isTooSmallRange || isAllButAlreadyShowingAll || isYTDButNotAvailable)) {\r\n\t\t\t\tbuttons[i].setState(3);\r\n\r\n\t\t\t} else if (buttons[i].state === 3) {\r\n\t\t\t\tbuttons[i].setState(0);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/** \r\n\t * Compute and cache the range for an individual button\r\n\t */\r\n\tcomputeButtonRange: function (rangeOptions) {\r\n\t\tvar type = rangeOptions.type,\r\n\t\t\tcount = rangeOptions.count || 1,\r\n\r\n\t\t\t// these time intervals have a fixed number of milliseconds, as opposed\r\n\t\t\t// to month, ytd and year\r\n\t\t\tfixedTimes = {\r\n\t\t\t\tmillisecond: 1,\r\n\t\t\t\tsecond: 1000,\r\n\t\t\t\tminute: 60 * 1000,\r\n\t\t\t\thour: 3600 * 1000,\r\n\t\t\t\tday: 24 * 3600 * 1000,\r\n\t\t\t\tweek: 7 * 24 * 3600 * 1000\r\n\t\t\t};\r\n\t\t\r\n\t\t// Store the range on the button object\r\n\t\tif (fixedTimes[type]) {\r\n\t\t\trangeOptions._range = fixedTimes[type] * count;\t\t\t\t\r\n\t\t} else if (type === 'month' || type === 'year') {\r\n\t\t\trangeOptions._range = { month: 30, year: 365 }[type] * 24 * 36e5 * count;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Set the internal and displayed value of a HTML input for the dates\r\n\t * @param {String} name\r\n\t * @param {Number} time\r\n\t */\r\n\tsetInputValue: function (name, time) {\r\n\t\tvar options = this.chart.options.rangeSelector;\r\n\r\n\t\tif (defined(time)) {\r\n\t\t\tthis[name + 'Input'].HCTime = time;\r\n\t\t}\r\n\t\t\r\n\t\tthis[name + 'Input'].value = dateFormat(options.inputEditDateFormat || '%Y-%m-%d', this[name + 'Input'].HCTime);\r\n\t\tthis[name + 'DateBox'].attr({ text: dateFormat(options.inputDateFormat || '%b %e, %Y', this[name + 'Input'].HCTime) });\r\n\t},\r\n\r\n\t/**\r\n\t * Draw either the 'from' or the 'to' HTML input box of the range selector\r\n\t * @param {Object} name\r\n\t */\r\n\tdrawInput: function (name) {\r\n\t\tvar rangeSelector = this,\r\n\t\t\tchart = rangeSelector.chart,\r\n\t\t\tchartStyle = chart.renderer.style,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\toptions = chart.options.rangeSelector,\r\n\t\t\tlang = defaultOptions.lang,\r\n\t\t\tdiv = rangeSelector.div,\r\n\t\t\tisMin = name === 'min',\r\n\t\t\tinput,\r\n\t\t\tlabel,\r\n\t\t\tdateBox,\r\n\t\t\tinputGroup = this.inputGroup;\r\n\r\n\t\t// Create the text label\r\n\t\tthis[name + 'Label'] = label = renderer.label(lang[isMin ? 'rangeSelectorFrom' : 'rangeSelectorTo'], this.inputGroup.offset)\r\n\t\t\t.attr({\r\n\t\t\t\tpadding: 2\r\n\t\t\t})\r\n\t\t\t.css(merge(chartStyle, options.labelStyle))\r\n\t\t\t.add(inputGroup);\r\n\t\tinputGroup.offset += label.width + 5;\r\n\t\t\r\n\t\t// Create an SVG label that shows updated date ranges and and records click events that \r\n\t\t// bring in the HTML input.\r\n\t\tthis[name + 'DateBox'] = dateBox = renderer.label('', inputGroup.offset)\r\n\t\t\t.attr({\r\n\t\t\t\tpadding: 2,\r\n\t\t\t\twidth: options.inputBoxWidth || 90,\r\n\t\t\t\theight: options.inputBoxHeight || 17,\r\n\t\t\t\tstroke: options.inputBoxBorderColor || 'silver',\r\n\t\t\t\t'stroke-width': 1\r\n\t\t\t})\r\n\t\t\t.css(merge({\r\n\t\t\t\ttextAlign: 'center',\r\n\t\t\t\tcolor: '#444'\r\n\t\t\t}, chartStyle, options.inputStyle))\r\n\t\t\t.on('click', function () {\r\n\t\t\t\trangeSelector[name + 'Input'].focus();\r\n\t\t\t})\r\n\t\t\t.add(inputGroup);\r\n\t\tinputGroup.offset += dateBox.width + (isMin ? 10 : 0);\r\n\t\t\r\n\r\n\t\t// Create the HTML input element. This is rendered as 1x1 pixel then set to the right size \r\n\t\t// when focused.\r\n\t\tthis[name + 'Input'] = input = createElement('input', {\r\n\t\t\tname: name,\r\n\t\t\tclassName: PREFIX + 'range-selector',\r\n\t\t\ttype: 'text'\r\n\t\t}, extend({\r\n\t\t\tposition: ABSOLUTE,\r\n\t\t\tborder: 0,\r\n\t\t\twidth: '1px', // Chrome needs a pixel to see it\r\n\t\t\theight: '1px',\r\n\t\t\tpadding: 0,\r\n\t\t\ttextAlign: 'center',\r\n\t\t\tfontSize: chartStyle.fontSize,\r\n\t\t\tfontFamily: chartStyle.fontFamily,\r\n\t\t\ttop: chart.plotTop + PX // prevent jump on focus in Firefox\r\n\t\t}, options.inputStyle), div);\r\n\r\n\t\t// Blow up the input box\r\n\t\tinput.onfocus = function () {\r\n\t\t\tcss(this, {\r\n\t\t\t\tleft: (inputGroup.translateX + dateBox.x) + PX,\r\n\t\t\t\ttop: inputGroup.translateY + PX,\r\n\t\t\t\twidth: (dateBox.width - 2) + PX,\r\n\t\t\t\theight: (dateBox.height - 2) + PX,\r\n\t\t\t\tborder: '2px solid silver'\r\n\t\t\t});\r\n\t\t};\r\n\t\t// Hide away the input box\r\n\t\tinput.onblur = function () {\r\n\t\t\tcss(this, {\r\n\t\t\t\tborder: 0,\r\n\t\t\t\twidth: '1px',\r\n\t\t\t\theight: '1px'\r\n\t\t\t});\r\n\t\t\trangeSelector.setInputValue(name);\r\n\t\t};\r\n\r\n\t\t// handle changes in the input boxes\r\n\t\tinput.onchange = function () {\r\n\t\t\tvar inputValue = input.value,\r\n\t\t\t\tvalue = (options.inputDateParser || Date.parse)(inputValue),\r\n\t\t\t\txAxis = chart.xAxis[0],\r\n\t\t\t\tdataMin = xAxis.dataMin,\r\n\t\t\t\tdataMax = xAxis.dataMax;\r\n\r\n\t\t\t// If the value isn't parsed directly to a value by the browser's Date.parse method,\r\n\t\t\t// like YYYY-MM-DD in IE, try parsing it a different way\r\n\t\t\tif (isNaN(value)) {\r\n\t\t\t\tvalue = inputValue.split('-');\r\n\t\t\t\tvalue = Date.UTC(pInt(value[0]), pInt(value[1]) - 1, pInt(value[2]));\r\n\t\t\t}\r\n\r\n\t\t\tif (!isNaN(value)) {\r\n\r\n\t\t\t\t// Correct for timezone offset (#433)\r\n\t\t\t\tif (!defaultOptions.global.useUTC) {\r\n\t\t\t\t\tvalue = value + new Date().getTimezoneOffset() * 60 * 1000;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Validate the extremes. If it goes beyound the data min or max, use the\r\n\t\t\t\t// actual data extreme (#2438).\r\n\t\t\t\tif (isMin) {\r\n\t\t\t\t\tif (value > rangeSelector.maxInput.HCTime) {\r\n\t\t\t\t\t\tvalue = UNDEFINED;\r\n\t\t\t\t\t} else if (value < dataMin) {\r\n\t\t\t\t\t\tvalue = dataMin;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (value < rangeSelector.minInput.HCTime) {\r\n\t\t\t\t\t\tvalue = UNDEFINED;\r\n\t\t\t\t\t} else if (value > dataMax) {\r\n\t\t\t\t\t\tvalue = dataMax;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set the extremes\r\n\t\t\t\tif (value !== UNDEFINED) {\r\n\t\t\t\t\tchart.xAxis[0].setExtremes(\r\n\t\t\t\t\t\tisMin ? value : xAxis.min,\r\n\t\t\t\t\t\tisMin ? xAxis.max : value,\r\n\t\t\t\t\t\tUNDEFINED,\r\n\t\t\t\t\t\tUNDEFINED,\r\n\t\t\t\t\t\t{ trigger: 'rangeSelectorInput' }\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Render the range selector including the buttons and the inputs. The first time render\r\n\t * is called, the elements are created and positioned. On subsequent calls, they are\r\n\t * moved and updated.\r\n\t * @param {Number} min X axis minimum\r\n\t * @param {Number} max X axis maximum\r\n\t */\r\n\trender: function (min, max) {\r\n\r\n\t\tvar rangeSelector = this,\r\n\t\t\tchart = rangeSelector.chart,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tcontainer = chart.container,\r\n\t\t\tchartOptions = chart.options,\r\n\t\t\tnavButtonOptions = chartOptions.exporting && chartOptions.navigation && chartOptions.navigation.buttonOptions, \r\n\t\t\toptions = chartOptions.rangeSelector,\r\n\t\t\tbuttons = rangeSelector.buttons,\r\n\t\t\tlang = defaultOptions.lang,\r\n\t\t\tdiv = rangeSelector.div,\r\n\t\t\tinputGroup = rangeSelector.inputGroup,\r\n\t\t\tbuttonTheme = options.buttonTheme,\r\n\t\t\tbuttonPosition = options.buttonPosition || {},\r\n\t\t\tinputEnabled = options.inputEnabled,\r\n\t\t\tstates = buttonTheme && buttonTheme.states,\r\n\t\t\tplotLeft = chart.plotLeft,\r\n\t\t\tyAlign,\r\n\t\t\tbuttonLeft,\r\n\t\t\tbuttonTop,\r\n\t\t\tbuttonGroup = rangeSelector.group,\r\n\t\t\tbuttonBBox;\r\n\r\n\r\n\t\t// create the elements\r\n\t\tif (!rangeSelector.rendered) {\r\n\r\n\t\t\trangeSelector.group = buttonGroup = renderer.g('range-selector-buttons').add();\r\n\r\n\t\t\trangeSelector.zoomText = renderer.text(lang.rangeSelectorZoom, pick(buttonPosition.x, plotLeft), pick(buttonPosition.y, chart.plotTop - 35) + 15)\r\n\t\t\t\t.css(options.labelStyle)\r\n\t\t\t\t.add(buttonGroup);\r\n\r\n\t\t\t// button starting position\r\n\t\t\tbuttonLeft = pick(buttonPosition.x, plotLeft) + rangeSelector.zoomText.getBBox().width + 5;\r\n\t\t\tbuttonTop = pick(buttonPosition.y, chart.plotTop - 35);\r\n\r\n\t\t\teach(rangeSelector.buttonOptions, function (rangeOptions, i) {\r\n\t\t\t\tbuttons[i] = renderer.button(\r\n\t\t\t\t\t\trangeOptions.text,\r\n\t\t\t\t\t\tbuttonLeft,\r\n\t\t\t\t\t\tbuttonTop,\r\n\t\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\t\trangeSelector.clickButton(i);\r\n\t\t\t\t\t\t\trangeSelector.isActive = true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbuttonTheme,\r\n\t\t\t\t\t\tstates && states.hover,\r\n\t\t\t\t\t\tstates && states.select,\r\n\t\t\t\t\t\tstates && states.disabled\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.css({\r\n\t\t\t\t\t\ttextAlign: 'center'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.add(buttonGroup);\r\n\r\n\t\t\t\t// increase button position for the next button\r\n\t\t\t\tbuttonLeft += buttons[i].width + pick(options.buttonSpacing, 5);\r\n\r\n\t\t\t\tif (rangeSelector.selected === i) {\r\n\t\t\t\t\tbuttons[i].setState(2);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trangeSelector.updateButtonStates();\r\n\r\n\t\t\t// first create a wrapper outside the container in order to make\r\n\t\t\t// the inputs work and make export correct\r\n\t\t\tif (inputEnabled !== false) {\r\n\t\t\t\trangeSelector.div = div = createElement('div', null, {\r\n\t\t\t\t\tposition: 'relative',\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\tzIndex: 1 // above container\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcontainer.parentNode.insertBefore(div, container);\r\n\r\n\t\t\t\t// Create the group to keep the inputs\r\n\t\t\t\trangeSelector.inputGroup = inputGroup = renderer.g('input-group')\r\n\t\t\t\t\t.add();\r\n\t\t\t\tinputGroup.offset = 0;\r\n\r\n\t\t\t\trangeSelector.drawInput('min');\r\n\t\t\t\trangeSelector.drawInput('max');\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (inputEnabled !== false) {\r\n\t\t\r\n\t\t\t// Update the alignment to the updated spacing box\r\n\t\t\tyAlign = chart.plotTop - 45;\t\t\r\n\t\t\tinputGroup.align(extend({\r\n\t\t\t\ty: yAlign,\r\n\t\t\t\twidth: inputGroup.offset,\r\n\t\t\t\t// Detect collision with the exporting buttons\r\n\t\t\t\tx: navButtonOptions && (yAlign < (navButtonOptions.y || 0) + navButtonOptions.height - chart.spacing[0]) ? \r\n\t\t\t\t\t-40 : 0\r\n\t\t\t}, options.inputPosition), true, chart.spacingBox);\r\n\r\n\t\t\t// Hide if overlapping - inputEnabled is null or undefined\r\n\t\t\tif (!defined(inputEnabled)) {\r\n\t\t\t\tbuttonBBox = buttonGroup.getBBox();\r\n\t\t\t\tinputGroup[inputGroup.translateX < buttonBBox.x + buttonBBox.width + 10 ? 'hide' : 'show']();\r\n\t\t\t}\r\n\t\r\n\t\t\t// Set or reset the input values\r\n\t\t\trangeSelector.setInputValue('min', min);\r\n\t\t\trangeSelector.setInputValue('max', max);\r\n\t\t}\r\n\r\n\t\trangeSelector.rendered = true;\r\n\t},\r\n\r\n\t/**\r\n\t * Destroys allocated elements.\r\n\t */\r\n\tdestroy: function () {\r\n\t\tvar minInput = this.minInput,\r\n\t\t\tmaxInput = this.maxInput,\r\n\t\t\tchart = this.chart,\r\n\t\t\tblurInputs = this.blurInputs,\r\n\t\t\tkey;\r\n\r\n\t\tremoveEvent(chart.container, 'mousedown', blurInputs);\r\n\t\tremoveEvent(chart, 'resize', blurInputs);\r\n\r\n\t\t// Destroy elements in collections\r\n\t\tdestroyObjectProperties(this.buttons);\r\n\t\t\r\n\t\t// Clear input element events\r\n\t\tif (minInput) {\r\n\t\t\tminInput.onfocus = minInput.onblur = minInput.onchange = null;\r\n\t\t}\r\n\t\tif (maxInput) {\r\n\t\t\tmaxInput.onfocus = maxInput.onblur = maxInput.onchange = null;\r\n\t\t}\r\n\r\n\t\t// Destroy HTML and SVG elements\r\n\t\tfor (key in this) {\r\n\t\t\tif (this[key] && key !== 'chart') {\r\n\t\t\t\tif (this[key].destroy) { // SVGElement\r\n\t\t\t\t\tthis[key].destroy();\r\n\t\t\t\t} else if (this[key].nodeType) { // HTML element\r\n\t\t\t\t\tdiscardElement(this[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis[key] = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Add logic to normalize the zoomed range in order to preserve the pressed state of range selector buttons\r\n */\r\nAxis.prototype.toFixedRange = function (pxMin, pxMax, fixedMin, fixedMax) {\r\n\tvar fixedRange = this.chart && this.chart.fixedRange,\r\n\t\tnewMin = pick(fixedMin, this.translate(pxMin, true)),\r\n\t\tnewMax = pick(fixedMax, this.translate(pxMax, true)),\r\n\t\tchangeRatio = fixedRange && (newMax - newMin) / fixedRange;\r\n\r\n\t// If the difference between the fixed range and the actual requested range is\r\n\t// too great, the user is dragging across an ordinal gap, and we need to release\r\n\t// the range selector button.\r\n\tif (changeRatio > 0.7 && changeRatio < 1.3) {\r\n\t\tif (fixedMax) {\r\n\t\t\tnewMin = newMax - fixedRange;\r\n\t\t} else {\r\n\t\t\tnewMax = newMin + fixedRange;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tmin: newMin,\r\n\t\tmax: newMax\r\n\t};\r\n};\r\n\r\n// Initialize scroller for stock charts\r\nwrap(Chart.prototype, 'init', function (proceed, options, callback) {\r\n\t\r\n\taddEvent(this, 'init', function () {\r\n\t\tif (this.options.rangeSelector.enabled) {\r\n\t\t\tthis.rangeSelector = new RangeSelector(this);\r\n\t\t}\r\n\t});\r\n\r\n\tproceed.call(this, options, callback);\r\n\t\r\n});\r\n\r\n\r\nHighcharts.RangeSelector = RangeSelector;\r\n\r\n/* ****************************************************************************\r\n * End Range Selector code\t\t\t\t\t\t\t\t\t\t\t\t\t*\r\n *****************************************************************************/\r\n\r\n\r\n\r\nChart.prototype.callbacks.push(function (chart) {\r\n\tvar extremes,\r\n\t\tscroller = chart.scroller,\r\n\t\trangeSelector = chart.rangeSelector;\r\n\r\n\tfunction renderScroller() {\r\n\t\textremes = chart.xAxis[0].getExtremes();\r\n\t\tscroller.render(extremes.min, extremes.max);\r\n\t}\r\n\r\n\tfunction renderRangeSelector() {\r\n\t\textremes = chart.xAxis[0].getExtremes();\r\n\t\tif (!isNaN(extremes.min)) {\r\n\t\t\trangeSelector.render(extremes.min, extremes.max);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction afterSetExtremesHandlerScroller(e) {\r\n\t\tif (e.triggerOp !== 'navigator-drag') {\r\n\t\t\tscroller.render(e.min, e.max);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction afterSetExtremesHandlerRangeSelector(e) {\r\n\t\trangeSelector.render(e.min, e.max);\r\n\t}\r\n\r\n\tfunction destroyEvents() {\r\n\t\tif (scroller) {\r\n\t\t\tremoveEvent(chart.xAxis[0], 'afterSetExtremes', afterSetExtremesHandlerScroller);\r\n\t\t}\r\n\t\tif (rangeSelector) {\r\n\t\t\tremoveEvent(chart, 'resize', renderRangeSelector);\r\n\t\t\tremoveEvent(chart.xAxis[0], 'afterSetExtremes', afterSetExtremesHandlerRangeSelector);\r\n\t\t}\r\n\t}\r\n\r\n\t// initiate the scroller\r\n\tif (scroller) {\r\n\t\t// redraw the scroller on setExtremes\r\n\t\taddEvent(chart.xAxis[0], 'afterSetExtremes', afterSetExtremesHandlerScroller);\r\n\r\n\t\t// redraw the scroller on chart resize or box resize\r\n\t\twrap(chart, 'drawChartBox', function (proceed) {\r\n\t\t\tvar isDirtyBox = this.isDirtyBox;\r\n\t\t\tproceed.call(this);\r\n\t\t\tif (isDirtyBox) {\r\n\t\t\t\trenderScroller();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// do it now\r\n\t\trenderScroller();\r\n\t}\r\n\tif (rangeSelector) {\r\n\t\t// redraw the scroller on setExtremes\r\n\t\taddEvent(chart.xAxis[0], 'afterSetExtremes', afterSetExtremesHandlerRangeSelector);\r\n\r\n\t\t// redraw the scroller chart resize\r\n\t\taddEvent(chart, 'resize', renderRangeSelector);\r\n\r\n\t\t// do it now\r\n\t\trenderRangeSelector();\r\n\t}\r\n\r\n\t// Remove resize/afterSetExtremes at chart destroy\r\n\taddEvent(chart, 'destroy', destroyEvents);\r\n});\r\n/**\r\n * A wrapper for Chart with all the default values for a Stock chart\r\n */\r\nHighcharts.StockChart = function (options, callback) {\r\n\tvar seriesOptions = options.series, // to increase performance, don't merge the data \r\n\t\topposite,\r\n\r\n\t\t// Always disable startOnTick:true on the main axis when the navigator is enabled (#1090)\r\n\t\tnavigatorEnabled = pick(options.navigator && options.navigator.enabled, true),\r\n\t\tdisableStartOnTick = navigatorEnabled ? {\r\n\t\t\tstartOnTick: false,\r\n\t\t\tendOnTick: false\r\n\t\t} : null,\r\n\r\n\t\tlineOptions = {\r\n\r\n\t\t\tmarker: {\r\n\t\t\t\tenabled: false,\r\n\t\t\t\tradius: 2\r\n\t\t\t},\r\n\t\t\t// gapSize: 0,\r\n\t\t\tstates: {\r\n\t\t\t\thover: {\r\n\t\t\t\t\tlineWidth: 2\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcolumnOptions = {\r\n\t\t\tshadow: false,\r\n\t\t\tborderWidth: 0\r\n\t\t};\r\n\r\n\t// apply X axis options to both single and multi y axes\r\n\toptions.xAxis = map(splat(options.xAxis || {}), function (xAxisOptions) {\r\n\t\treturn merge({ // defaults\r\n\t\t\t\tminPadding: 0,\r\n\t\t\t\tmaxPadding: 0,\r\n\t\t\t\tordinal: true,\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\ttext: null\r\n\t\t\t\t},\r\n\t\t\t\tlabels: {\r\n\t\t\t\t\toverflow: 'justify'\r\n\t\t\t\t},\r\n\t\t\t\tshowLastLabel: true\r\n\t\t\t}, xAxisOptions, // user options \r\n\t\t\t{ // forced options\r\n\t\t\t\ttype: 'datetime',\r\n\t\t\t\tcategories: null\r\n\t\t\t},\r\n\t\t\tdisableStartOnTick\r\n\t\t);\r\n\t});\r\n\r\n\t// apply Y axis options to both single and multi y axes\r\n\toptions.yAxis = map(splat(options.yAxis || {}), function (yAxisOptions) {\r\n\t\topposite = pick(yAxisOptions.opposite, true);\r\n\t\treturn merge({ // defaults\r\n\t\t\tlabels: {\r\n\t\t\t\ty: -2\r\n\t\t\t},\r\n\t\t\topposite: opposite,\r\n\t\t\tshowLastLabel: false,\r\n\t\t\ttitle: {\r\n\t\t\t\ttext: null\r\n\t\t\t}\r\n\t\t}, yAxisOptions // user options\r\n\t\t);\r\n\t});\r\n\r\n\toptions.series = null;\r\n\r\n\toptions = merge({\r\n\t\tchart: {\r\n\t\t\tpanning: true,\r\n\t\t\tpinchType: 'x'\r\n\t\t},\r\n\t\tnavigator: {\r\n\t\t\tenabled: true\r\n\t\t},\r\n\t\tscrollbar: {\r\n\t\t\tenabled: true\r\n\t\t},\r\n\t\trangeSelector: {\r\n\t\t\tenabled: true\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\ttext: null,\r\n\t\t\tstyle: {\r\n\t\t\t\tfontSize: '16px'\r\n\t\t\t}\r\n\t\t},\r\n\t\ttooltip: {\r\n\t\t\tshared: true,\r\n\t\t\tcrosshairs: true\r\n\t\t},\r\n\t\tlegend: {\r\n\t\t\tenabled: false\r\n\t\t},\r\n\r\n\t\tplotOptions: {\r\n\t\t\tline: lineOptions,\r\n\t\t\tspline: lineOptions,\r\n\t\t\tarea: lineOptions,\r\n\t\t\tareaspline: lineOptions,\r\n\t\t\tarearange: lineOptions,\r\n\t\t\tareasplinerange: lineOptions,\r\n\t\t\tcolumn: columnOptions,\r\n\t\t\tcolumnrange: columnOptions,\r\n\t\t\tcandlestick: columnOptions,\r\n\t\t\tohlc: columnOptions\r\n\t\t}\r\n\r\n\t},\r\n\toptions, // user's options\r\n\r\n\t{ // forced options\r\n\t\t_stock: true, // internal flag\r\n\t\tchart: {\r\n\t\t\tinverted: false\r\n\t\t}\r\n\t});\r\n\r\n\toptions.series = seriesOptions;\r\n\r\n\r\n\treturn new Chart(options, callback);\r\n};\r\n\r\n// Implement the pinchType option\r\nwrap(Pointer.prototype, 'init', function (proceed, chart, options) {\r\n\r\n\tvar pinchType = options.chart.pinchType || '';\r\n\t\t\r\n\tproceed.call(this, chart, options);\r\n\r\n\t// Pinch status\r\n\tthis.pinchX = this.pinchHor = pinchType.indexOf('x') !== -1;\r\n\tthis.pinchY = this.pinchVert = pinchType.indexOf('y') !== -1;\r\n\tthis.hasZoom = this.hasZoom || this.pinchHor || this.pinchVert;\r\n});\r\n\r\n// Override the automatic label alignment so that the first Y axis' labels\r\n// are drawn on top of the grid line, and subsequent axes are drawn outside\r\nwrap(Axis.prototype, 'autoLabelAlign', function (proceed) {\r\n\tvar chart = this.chart,\r\n\t\toptions = this.options,\r\n\t\tpanes = chart._labelPanes = chart._labelPanes || {},\r\n\t\tkey,\r\n\t\tlabelOptions = this.options.labels;\r\n\tif (this.chart.options._stock && this.coll === 'yAxis') {\r\n\t\tkey = options.top + ',' + options.height;\r\n\t\tif (!panes[key] && labelOptions.enabled) { // do it only for the first Y axis of each pane\r\n\t\t\tif (labelOptions.x === 15) { // default\r\n\t\t\t\tlabelOptions.x = 0;\r\n\t\t\t}\r\n\t\t\tif (labelOptions.align === undefined) {\r\n\t\t\t\tlabelOptions.align = 'right';\r\n\t\t\t}\r\n\t\t\tpanes[key] = 1;\r\n\t\t\treturn 'right';\r\n\t\t}\r\n\t}\r\n\treturn proceed.call(this, [].slice.call(arguments, 1));\r\n});\r\n\r\n// Override getPlotLinePath to allow for multipane charts\r\nwrap(Axis.prototype, 'getPlotLinePath', function (proceed, value, lineWidth, old, force, translatedValue) {\r\n\tvar axis = this,\r\n\t\tseries = (this.isLinked && !this.series ? this.linkedParent.series : this.series),\r\n\t\tchart = axis.chart,\r\n\t\trenderer = chart.renderer,\r\n\t\taxisLeft = axis.left,\r\n\t\taxisTop = axis.top,\r\n\t\tx1,\r\n\t\ty1,\r\n\t\tx2,\r\n\t\ty2,\r\n\t\tresult = [],\r\n\t\taxes = [], //#3416 need a default array\r\n\t\taxes2,\r\n\t\tuniqueAxes;\r\n\r\n\t// Ignore in case of color Axis. #3360, #3524\r\n\tif (axis.coll === 'colorAxis') {\r\n\t\treturn proceed.apply(this, [].slice.call(arguments, 1));\r\n\t}\r\n\r\n\t// Get the related axes based on series\r\n\taxes = (axis.isXAxis ? \r\n\t\t(defined(axis.options.yAxis) ?\r\n\t\t\t[chart.yAxis[axis.options.yAxis]] : \r\n\t\t\tmap(series, function (S) { return S.yAxis; })\r\n\t\t) :\r\n\t\t(defined(axis.options.xAxis) ?\r\n\t\t\t[chart.xAxis[axis.options.xAxis]] : \r\n\t\t\tmap(series, function (S) { return S.xAxis; })\r\n\t\t)\r\n\t);\r\n\r\n\t// Get the related axes based options.*Axis setting #2810\r\n\taxes2 = (axis.isXAxis ? chart.yAxis : chart.xAxis);\r\n\teach(axes2, function (A) {\r\n\t\tif (defined(A.options.id) ? A.options.id.indexOf('navigator') === -1 : true) {\r\n\t\t\tvar a = (A.isXAxis ? 'yAxis' : 'xAxis'),\r\n\t\t\t\trax = (defined(A.options[a]) ? chart[a][A.options[a]] : chart[a][0]);\t\r\n\r\n\t\t\tif (axis === rax) {\r\n\t\t\t\taxes.push(A);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\r\n\t// Remove duplicates in the axes array. If there are no axes in the axes array,\r\n\t// we are adding an axis without data, so we need to populate this with grid\r\n\t// lines (#2796).\r\n\tuniqueAxes = axes.length ? [] : [axis.isXAxis ? chart.yAxis[0] : chart.xAxis[0]]; //#3742\r\n\teach(axes, function (axis2) {\r\n\t\tif (inArray(axis2, uniqueAxes) === -1) {\r\n\t\t\tuniqueAxes.push(axis2);\r\n\t\t}\r\n\t});\r\n\t\r\n\ttranslatedValue = pick(translatedValue, axis.translate(value, null, null, old));\r\n\t\r\n\tif (!isNaN(translatedValue)) {\r\n\t\tif (axis.horiz) {\r\n\t\t\teach(uniqueAxes, function (axis2) {\r\n\t\t\t\tvar skip;\r\n\r\n\t\t\t\ty1 = axis2.pos;\r\n\t\t\t\ty2 = y1 + axis2.len;\r\n\t\t\t\tx1 = x2 = mathRound(translatedValue + axis.transB);\r\n\r\n\t\t\t\tif (x1 < axisLeft || x1 > axisLeft + axis.width) { // outside plot area\r\n\t\t\t\t\tif (force) {\r\n\t\t\t\t\t\tx1 = x2 = mathMin(mathMax(axisLeft, x1), axisLeft + axis.width);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tskip = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!skip) {\r\n\t\t\t\t\tresult.push('M', x1, y1, 'L', x2, y2);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\teach(uniqueAxes, function (axis2) {\r\n\t\t\t\tvar skip;\r\n\r\n\t\t\t\tx1 = axis2.pos;\r\n\t\t\t\tx2 = x1 + axis2.len;\r\n\t\t\t\ty1 = y2 = mathRound(axisTop + axis.height - translatedValue);\r\n\r\n\t\t\t\tif (y1 < axisTop || y1 > axisTop + axis.height) { // outside plot area\r\n\t\t\t\t\tif (force) {\r\n\t\t\t\t\t\ty1 = y2 = mathMin(mathMax(axisTop, y1), axis.top + axis.height);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tskip = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!skip) {\r\n\t\t\t\t\tresult.push('M', x1, y1, 'L', x2, y2);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tif (result.length > 0) {\r\n\t\treturn renderer.crispPolyLine(result, lineWidth || 1); \r\n\t} else {\r\n\t\treturn null; //#3557 getPlotLinePath in regular Highcharts also returns null\r\n\t}\r\n});\r\n\r\n// Override getPlotBandPath to allow for multipane charts\r\nAxis.prototype.getPlotBandPath = function (from, to) {\t\t\r\n\tvar toPath = this.getPlotLinePath(to, null, null, true),\r\n\t\tpath = this.getPlotLinePath(from, null, null, true),\r\n\t\tresult = [],\r\n\t\ti;\r\n\r\n\tif (path && toPath) {\r\n\t\t// Go over each subpath\r\n\t\tfor (i = 0; i < path.length; i += 6) {\r\n\t\t\tresult.push('M', path[i + 1], path[i + 2], 'L', path[i + 4], path[i + 5], toPath[i + 4], toPath[i + 5], toPath[i + 1], toPath[i + 2]);\r\n\t\t}\r\n\t} else { // outside the axis area\r\n\t\tresult = null;\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\n// Function to crisp a line with multiple segments\r\nSVGRenderer.prototype.crispPolyLine = function (points, width) {\r\n\t// points format: [M, 0, 0, L, 100, 0]\t\t\r\n\t// normalize to a crisp line\r\n\tvar i;\r\n\tfor (i = 0; i < points.length; i = i + 6) {\r\n\t\tif (points[i + 1] === points[i + 4]) {\r\n\t\t\t// Substract due to #1129. Now bottom and left axis gridlines behave the same.\r\n\t\t\tpoints[i + 1] = points[i + 4] = mathRound(points[i + 1]) - (width % 2 / 2);\r\n\t\t}\r\n\t\tif (points[i + 2] === points[i + 5]) {\r\n\t\t\tpoints[i + 2] = points[i + 5] = mathRound(points[i + 2]) + (width % 2 / 2);\r\n\t\t}\r\n\t}\r\n\treturn points;\r\n};\r\nif (Renderer === Highcharts.VMLRenderer) {\r\n\tVMLRenderer.prototype.crispPolyLine = SVGRenderer.prototype.crispPolyLine;\r\n}\r\n\r\n\r\n// Wrapper to hide the label\r\nwrap(Axis.prototype, 'hideCrosshair', function (proceed, i) {\r\n\tproceed.call(this, i);\r\n\r\n\tif (!defined(this.crossLabelArray)) { return; }\r\n\r\n\tif (defined(i)) {\r\n\t\tif (this.crossLabelArray[i]) { this.crossLabelArray[i].hide(); }\r\n\t} else {\r\n\t\teach(this.crossLabelArray, function (crosslabel) {\r\n\t\t\tcrosslabel.hide();\r\n\t\t});\r\n\t}\r\n});\r\n\r\n// Wrapper to draw the label\r\nwrap(Axis.prototype, 'drawCrosshair', function (proceed, e, point) {\r\n\t// Draw the crosshair\r\n\tproceed.call(this, e, point);\r\n\r\n\t// Check if the label has to be drawn\r\n\tif (!defined(this.crosshair.label) || !this.crosshair.label.enabled || !defined(point)) { \r\n\t\treturn; \r\n\t}\r\n\r\n\tvar chart = this.chart,\r\n\t\toptions = this.options.crosshair.label,\t\t// the label's options\r\n\t\taxis = this.isXAxis ? 'x' : 'y',\t\t\t// axis name\r\n\t\thoriz = this.horiz,\t\t\t\t\t\t\t// axis orientation\r\n\t\topposite = this.opposite,\t\t\t\t\t// axis position\r\n\t\tleft = this.left,\t\t\t\t\t\t\t// left position\r\n\t\ttop = this.top,\t\t\t\t\t\t\t\t// top position\r\n\t\tcrossLabel = this.crossLabel,\t\t\t\t// reference to the svgElement\r\n\t\tposx,\r\n\t\tposy,\r\n\t\tcrossBox,\r\n\t\tformatOption = options.format,\r\n\t\tformatFormat = '',\r\n\t\tlimit;\r\n\r\n\t// If the label does not exist yet, create it.\r\n\tif (!crossLabel) {\r\n\t\tcrossLabel = this.crossLabel = chart.renderer.label()\t\t\t\r\n\t\t.attr({\r\n\t\t\talign: options.align || (horiz ? 'center' : opposite ? (this.labelAlign === 'right' ? 'right' : 'left') : (this.labelAlign === 'left' ? 'left' : 'center')),\r\n\t\t\tzIndex: 12,\r\n\t\t\theight: horiz ? 16 : UNDEFINED,\r\n\t\t\tfill: options.backgroundColor || (this.series[0] && this.series[0].color) || 'gray',\r\n\t\t\tpadding: pick(options.padding, 2),\r\n\t\t\tstroke: options.borderColor || null,\r\n\t\t\t'stroke-width': options.borderWidth || 0\r\n\t\t})\r\n\t\t.css(extend({\t\t\t\t\r\n\t\t\tcolor: 'white',\r\n\t\t\tfontWeight: 'normal',\r\n\t\t\tfontSize: '11px',\r\n\t\t\ttextAlign: 'center'\r\n\t\t}, options.style))\r\n\t\t.add();\r\n\t}\r\n\r\n\tif (horiz) {\r\n\t\tposx = point.plotX + left;\r\n\t\tposy = top + (opposite ? 0 : this.height);\r\n\t} else {\r\n\t\tposx = opposite ? this.width + left : 0;\r\n\t\tposy = point.plotY + top;\r\n\t}\r\n\r\n\t// if the crosshair goes out of view (too high or too low, hide it and hide the label)\r\n\tif (posy < top || posy > top + this.height) {\r\n\t\tthis.hideCrosshair();\r\n\t\treturn;\r\n\t}\r\n\r\n\t// TODO: Dynamic date formats like in Series.tooltipHeaderFormat. \r\n\tif (!formatOption && !options.formatter) {\r\n\t\tif (this.isDatetimeAxis) {\r\n\t\t\tformatFormat = '%b %d, %Y';\r\n\t\t}\r\n\t\tformatOption = '{value' + (formatFormat ? ':' + formatFormat : '') + '}';\r\n\t}\r\n\r\n\t// show the label\r\n\tcrossLabel.attr({\r\n\t\ttext: formatOption ? format(formatOption, {value: point[axis]}) : options.formatter.call(this, point[axis]), \r\n\t\tx: posx, \r\n\t\ty: posy, \r\n\t\tvisibility: VISIBLE\r\n\t});\r\n\tcrossBox = crossLabel.getBBox();\r\n\r\n\t// now it is placed we can correct its position\r\n\tif (horiz) {\r\n\t\tif (((this.options.tickPosition === 'inside') && !opposite) ||\r\n\t\t\t((this.options.tickPosition !== 'inside') && opposite)) {\r\n\t\t\tposy = crossLabel.y - crossBox.height;\r\n\t\t}\t\r\n\t} else {\r\n\t\tposy = crossLabel.y - (crossBox.height / 2);\r\n\t}\r\n\r\n\t// check the edges\r\n\tif (horiz) {\r\n\t\tlimit = {\r\n\t\t\tleft: left - crossBox.x,\r\n\t\t\tright: left + this.width - crossBox.x\r\n\t\t};\r\n\t} else {\r\n\t\tlimit = {\r\n\t\t\tleft: this.labelAlign === 'left' ? left : 0,\r\n\t\t\tright: this.labelAlign === 'right' ? left + this.width : chart.chartWidth\r\n\t\t};\r\n\t}\r\n\r\n\t// left edge\r\n\tif (crossLabel.translateX < limit.left) {\r\n\t\tposx += limit.left - crossLabel.translateX;\r\n\t}\r\n\t// right edge\r\n\tif (crossLabel.translateX + crossBox.width >= limit.right) {\r\n\t\tposx -= crossLabel.translateX + crossBox.width - limit.right;\r\n\t}\r\n\r\n\t// show the crosslabel\r\n\tcrossLabel.attr({x: posx, y: posy, visibility: VISIBLE});\r\n});\r\n\r\n/* ****************************************************************************\r\n * Start value compare logic                                                  *\r\n *****************************************************************************/\r\n \r\nvar seriesInit = seriesProto.init, \r\n\tseriesProcessData = seriesProto.processData,\r\n\tpointTooltipFormatter = Point.prototype.tooltipFormatter;\r\n\t\r\n/**\r\n * Extend series.init by adding a method to modify the y value used for plotting\r\n * on the y axis. This method is called both from the axis when finding dataMin\r\n * and dataMax, and from the series.translate method.\r\n */\r\nseriesProto.init = function () {\r\n\t\r\n\t// Call base method\r\n\tseriesInit.apply(this, arguments);\r\n\t\r\n\t// Set comparison mode\r\n\tthis.setCompare(this.options.compare);\r\n};\r\n\r\n/**\r\n * The setCompare method can be called also from the outside after render time\r\n */\r\nseriesProto.setCompare = function (compare) {\r\n\r\n\t// Set or unset the modifyValue method\r\n\tthis.modifyValue = (compare === 'value' || compare === 'percent') ? function (value, point) {\r\n\t\tvar compareValue = this.compareValue;\r\n\t\t\r\n\t\tif (value !== UNDEFINED) { // #2601\r\n\r\n\t\t\t// get the modified value\r\n\t\t\tvalue = compare === 'value' ? \r\n\t\t\t\tvalue - compareValue : // compare value\r\n\t\t\t\tvalue = 100 * (value / compareValue) - 100; // compare percent\r\n\t\t\t\t\r\n\t\t\t// record for tooltip etc.\r\n\t\t\tif (point) {\r\n\t\t\t\tpoint.change = value;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn value;\r\n\t} : null;\r\n\r\n\t// Mark dirty\r\n\tif (this.chart.hasRendered) {\r\n\t\tthis.isDirty = true;\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * Extend series.processData by finding the first y value in the plot area,\r\n * used for comparing the following values \r\n */\r\nseriesProto.processData = function () {\r\n\tvar series = this,\r\n\t\ti = 0,\r\n\t\tprocessedXData,\r\n\t\tprocessedYData,\r\n\t\tlength;\r\n\t\r\n\t// call base method\r\n\tseriesProcessData.apply(this, arguments);\r\n\r\n\tif (series.xAxis && series.processedYData) { // not pies\r\n\t\t\r\n\t\t// local variables\r\n\t\tprocessedXData = series.processedXData;\r\n\t\tprocessedYData = series.processedYData;\r\n\t\tlength = processedYData.length;\r\n\t\t\r\n\t\t// find the first value for comparison\r\n\t\tfor (; i < length; i++) {\r\n\t\t\tif (typeof processedYData[i] === NUMBER && processedXData[i] >= series.xAxis.min) {\r\n\t\t\t\tseries.compareValue = processedYData[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Modify series extremes\r\n */\r\nwrap(seriesProto, 'getExtremes', function (proceed) {\r\n\tproceed.apply(this, [].slice.call(arguments, 1));\r\n\r\n\tif (this.modifyValue) {\r\n\t\tthis.dataMax = this.modifyValue(this.dataMax);\r\n\t\tthis.dataMin = this.modifyValue(this.dataMin);\r\n\t}\t\t\r\n});\r\n\r\n/**\r\n * Add a utility method, setCompare, to the Y axis\r\n */\r\nAxis.prototype.setCompare = function (compare, redraw) {\r\n\tif (!this.isXAxis) {\r\n\t\teach(this.series, function (series) {\r\n\t\t\tseries.setCompare(compare);\r\n\t\t});\r\n\t\tif (pick(redraw, true)) {\r\n\t\t\tthis.chart.redraw();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Extend the tooltip formatter by adding support for the point.change variable\r\n * as well as the changeDecimals option\r\n */\r\nPoint.prototype.tooltipFormatter = function (pointFormat) {\r\n\tvar point = this;\r\n\t\r\n\tpointFormat = pointFormat.replace(\r\n\t\t'{point.change}',\r\n\t\t(point.change > 0 ? '+' : '') + Highcharts.numberFormat(point.change, pick(point.series.tooltipOptions.changeDecimals, 2))\r\n\t); \r\n\t\r\n\treturn pointTooltipFormatter.apply(this, [pointFormat]);\r\n};\r\n\r\n/* ****************************************************************************\r\n * End value compare logic                                                    *\r\n *****************************************************************************/\r\n\r\n\r\n/**\r\n * Extend the Series prototype to create a separate series clip box. This is related\r\n * to using multiple panes, and a future pane logic should incorporate this feature (#2754).\r\n */\r\nwrap(Series.prototype, 'render', function (proceed) {\r\n\t// Only do this on stock charts (#2939), and only if the series type handles clipping\r\n\t// in the animate method (#2975).\r\n\tif (this.chart.options._stock) {\r\n\r\n\t\t// First render, initial clip box\r\n\t\tif (!this.clipBox && this.animate && this.animate.toString().indexOf('sharedClip') !== -1) {\r\n\t\t\tthis.clipBox = merge(this.chart.clipBox);\r\n\t\t\tthis.clipBox.width = this.xAxis.len;\r\n\t\t\tthis.clipBox.height = this.yAxis.len;\r\n\r\n\t\t// On redrawing, resizing etc, update the clip rectangle\r\n\t\t} else if (this.chart[this.sharedClipKey]) {\r\n\t\t\tthis.chart[this.sharedClipKey].attr({\r\n\t\t\t\twidth: this.xAxis.len,\r\n\t\t\t\theight: this.yAxis.len\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tproceed.call(this);\r\n});\r\n\r\n// global variables\r\nextend(Highcharts, {\r\n\t\r\n\t// Constructors\r\n\tColor: Color,\r\n\tPoint: Point,\r\n\tTick: Tick,\t\r\n\tRenderer: Renderer,\r\n\tSVGElement: SVGElement,\r\n\tSVGRenderer: SVGRenderer,\r\n\t\r\n\t// Various\r\n\tarrayMin: arrayMin,\r\n\tarrayMax: arrayMax,\r\n\tcharts: charts,\r\n\tdateFormat: dateFormat,\r\n\terror: error,\r\n\tformat: format,\r\n\tpathAnim: pathAnim,\r\n\tgetOptions: getOptions,\r\n\thasBidiBug: hasBidiBug,\r\n\tisTouchDevice: isTouchDevice,\r\n\tsetOptions: setOptions,\r\n\taddEvent: addEvent,\r\n\tremoveEvent: removeEvent,\r\n\tcreateElement: createElement,\r\n\tdiscardElement: discardElement,\r\n\tcss: css,\r\n\teach: each,\r\n\tmap: map,\r\n\tmerge: merge,\r\n\tsplat: splat,\r\n\textendClass: extendClass,\r\n\tpInt: pInt,\r\n\tsvg: hasSVG,\r\n\tcanvas: useCanVG,\r\n\tvml: !hasSVG && !useCanVG,\r\n\tproduct: PRODUCT,\r\n\tversion: VERSION\r\n});\r\n\r\n}());\r\n;/**\r\n * @license Highstock JS v2.1.3 (2015-02-27)\r\n * Exporting module\r\n *\r\n * (c) 2010-2014 Torstein Honsi\r\n *\r\n * License: www.highcharts.com/license\r\n */\r\n\r\n// JSLint options:\r\n/*global Highcharts, HighchartsAdapter, document, window, Math, setTimeout */\r\n\r\n(function (Highcharts) { // encapsulate\r\n\r\n// create shortcuts\r\nvar Chart = Highcharts.Chart,\r\n\taddEvent = Highcharts.addEvent,\r\n\tremoveEvent = Highcharts.removeEvent,\r\n\tfireEvent = HighchartsAdapter.fireEvent,\r\n\tcreateElement = Highcharts.createElement,\r\n\tdiscardElement = Highcharts.discardElement,\r\n\tcss = Highcharts.css,\r\n\tmerge = Highcharts.merge,\r\n\teach = Highcharts.each,\r\n\textend = Highcharts.extend,\r\n\tsplat = Highcharts.splat,\r\n\tmath = Math,\r\n\tmathMax = math.max,\r\n\tdoc = document,\r\n\twin = window,\r\n\tisTouchDevice = Highcharts.isTouchDevice,\r\n\tM = 'M',\r\n\tL = 'L',\r\n\tDIV = 'div',\r\n\tHIDDEN = 'hidden',\r\n\tNONE = 'none',\r\n\tPREFIX = 'highcharts-',\r\n\tABSOLUTE = 'absolute',\r\n\tPX = 'px',\r\n\tUNDEFINED,\r\n\tsymbols = Highcharts.Renderer.prototype.symbols,\r\n\tdefaultOptions = Highcharts.getOptions(),\r\n\tbuttonOffset;\r\n\r\n\t// Add language\r\n\textend(defaultOptions.lang, {\r\n\t\tprintChart: 'Print chart',\r\n\t\tdownloadPNG: 'Download PNG image',\r\n\t\tdownloadJPEG: 'Download JPEG image',\r\n\t\tdownloadPDF: 'Download PDF document',\r\n\t\tdownloadSVG: 'Download SVG vector image',\r\n\t\tcontextButtonTitle: 'Chart context menu'\r\n\t});\r\n\r\n// Buttons and menus are collected in a separate config option set called 'navigation'.\r\n// This can be extended later to add control buttons like zoom and pan right click menus.\r\ndefaultOptions.navigation = {\r\n\tmenuStyle: {\r\n\t\tborder: '1px solid #A0A0A0',\r\n\t\tbackground: '#FFFFFF',\r\n\t\tpadding: '5px 0'\r\n\t},\r\n\tmenuItemStyle: {\r\n\t\tpadding: '0 10px',\r\n\t\tbackground: NONE,\r\n\t\tcolor: '#303030',\r\n\t\tfontSize: isTouchDevice ? '14px' : '11px'\r\n\t},\r\n\tmenuItemHoverStyle: {\r\n\t\tbackground: '#4572A5',\r\n\t\tcolor: '#FFFFFF'\r\n\t},\r\n\r\n\tbuttonOptions: {\r\n\t\tsymbolFill: '#E0E0E0',\r\n\t\tsymbolSize: 14,\r\n\t\tsymbolStroke: '#666',\r\n\t\tsymbolStrokeWidth: 3,\r\n\t\tsymbolX: 12.5,\r\n\t\tsymbolY: 10.5,\r\n\t\talign: 'right',\r\n\t\tbuttonSpacing: 3,\r\n\t\theight: 22,\r\n\t\t// text: null,\r\n\t\ttheme: {\r\n\t\t\tfill: 'white', // capture hover\r\n\t\t\tstroke: 'none'\r\n\t\t},\r\n\t\tverticalAlign: 'top',\r\n\t\twidth: 24\r\n\t}\r\n};\r\n\r\n\r\n\r\n// Add the export related options\r\ndefaultOptions.exporting = {\r\n\t//enabled: true,\r\n\t//filename: 'chart',\r\n\ttype: 'image/png',\r\n\turl: 'http://export.highcharts.com/',\r\n\t//width: undefined,\r\n\t//scale: 2\r\n\tbuttons: {\r\n\t\tcontextButton: {\r\n\t\t\tmenuClassName: PREFIX + 'contextmenu',\r\n\t\t\t//x: -10,\r\n\t\t\tsymbol: 'menu',\r\n\t\t\t_titleKey: 'contextButtonTitle',\r\n\t\t\tmenuItems: [{\r\n\t\t\t\ttextKey: 'printChart',\r\n\t\t\t\tonclick: function () {\r\n\t\t\t\t\tthis.print();\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\tseparator: true\r\n\t\t\t}, {\r\n\t\t\t\ttextKey: 'downloadPNG',\r\n\t\t\t\tonclick: function () {\r\n\t\t\t\t\tthis.exportChart();\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttextKey: 'downloadJPEG',\r\n\t\t\t\tonclick: function () {\r\n\t\t\t\t\tthis.exportChart({\r\n\t\t\t\t\t\ttype: 'image/jpeg'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttextKey: 'downloadPDF',\r\n\t\t\t\tonclick: function () {\r\n\t\t\t\t\tthis.exportChart({\r\n\t\t\t\t\t\ttype: 'application/pdf'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttextKey: 'downloadSVG',\r\n\t\t\t\tonclick: function () {\r\n\t\t\t\t\tthis.exportChart({\r\n\t\t\t\t\t\ttype: 'image/svg+xml'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Enable this block to add \"View SVG\" to the dropdown menu\r\n\t\t\t/*\r\n\t\t\t,{\r\n\r\n\t\t\t\ttext: 'View SVG',\r\n\t\t\t\tonclick: function () {\r\n\t\t\t\t\tvar svg = this.getSVG()\r\n\t\t\t\t\t\t.replace(/</g, '\\n&lt;')\r\n\t\t\t\t\t\t.replace(/>/g, '&gt;');\r\n\r\n\t\t\t\t\tdoc.body.innerHTML = '<pre>' + svg + '</pre>';\r\n\t\t\t\t}\r\n\t\t\t} // */\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Add the Highcharts.post utility\r\nHighcharts.post = function (url, data, formAttributes) {\r\n\tvar name,\r\n\t\tform;\r\n\r\n\t// create the form\r\n\tform = createElement('form', merge({\r\n\t\tmethod: 'post',\r\n\t\taction: url,\r\n\t\tenctype: 'multipart/form-data'\r\n\t}, formAttributes), {\r\n\t\tdisplay: NONE\r\n\t}, doc.body);\r\n\r\n\t// add the data\r\n\tfor (name in data) {\r\n\t\tcreateElement('input', {\r\n\t\t\ttype: HIDDEN,\r\n\t\t\tname: name,\r\n\t\t\tvalue: data[name]\r\n\t\t}, null, form);\r\n\t}\r\n\r\n\t// submit\r\n\tform.submit();\r\n\r\n\t// clean up\r\n\tdiscardElement(form);\r\n};\r\n\r\nextend(Chart.prototype, {\r\n\r\n\t/**\r\n\t * A collection of regex fixes on the produces SVG to account for expando properties,\r\n\t * browser bugs, VML problems and other. Returns a cleaned SVG.\r\n\t */\r\n\tsanitizeSVG: function (svg) {\r\n\t\treturn svg\r\n\t\t\t.replace(/zIndex=\"[^\"]+\"/g, '')\r\n\t\t\t.replace(/isShadow=\"[^\"]+\"/g, '')\r\n\t\t\t.replace(/symbolName=\"[^\"]+\"/g, '')\r\n\t\t\t.replace(/jQuery[0-9]+=\"[^\"]+\"/g, '')\r\n\t\t\t.replace(/url\\([^#]+#/g, 'url(#')\r\n\t\t\t.replace(/<svg /, '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" ')\r\n\t\t\t.replace(/ (NS[0-9]+\\:)?href=/g, ' xlink:href=') // #3567\r\n\t\t\t.replace(/\\n/, ' ')\r\n\t\t\t// Any HTML added to the container after the SVG (#894)\r\n\t\t\t.replace(/<\\/svg>.*?$/, '</svg>') \r\n\t\t\t// Batik doesn't support rgba fills and strokes (#3095)\r\n\t\t\t.replace(/(fill|stroke)=\"rgba\\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\\.]+)\\)\"/g, '$1=\"rgb($2)\" $1-opacity=\"$3\"')\r\n\t\t\t\r\n\t\t\t// An issue with PhantomJS as of 2015-01-11. Revisit with newer versions. (#3649)\r\n\t\t\t.replace(/(text-shadow:)([^;\"]+)([;\"])/g, function (s, $1, $2, $3) {\r\n\t\t\t\t// Escape commas within rgb and rgba definitions\r\n\t\t\t\t$2 = $2.replace(/\\([^\\)]+\\)/g, function (s) {\r\n\t\t\t\t\treturn s.replace(/,/g, '|');\r\n\t\t\t\t});\r\n\t\t\t\t// Keep the first definition\r\n\t\t\t\t$2 = $2.split(',')[0];\r\n\t\t\t\t// Re-inert commas\r\n\t\t\t\t$2 = $2.replace(/\\([^\\)]+\\)/g, function (s) {\r\n\t\t\t\t\treturn s.replace(/\\|/g, ',');\r\n\t\t\t\t});\r\n\t\t\t\ts = $1 + $2 + $3;\r\n\t\t\t\treturn s;\r\n\t\t\t})\r\n\t\t\t/* This fails in IE < 8\r\n\t\t\t.replace(/([0-9]+)\\.([0-9]+)/g, function(s1, s2, s3) { // round off to save weight\r\n\t\t\t\treturn s2 +'.'+ s3[0];\r\n\t\t\t})*/\r\n\r\n\t\t\t// Replace HTML entities, issue #347\r\n\t\t\t.replace(/&nbsp;/g, '\\u00A0') // no-break space\r\n\t\t\t.replace(/&shy;/g,  '\\u00AD') // soft hyphen\r\n\r\n\t\t\t// IE specific\r\n\t\t\t.replace(/<IMG /g, '<image ')\r\n\t\t\t.replace(/height=([^\" ]+)/g, 'height=\"$1\"')\r\n\t\t\t.replace(/width=([^\" ]+)/g, 'width=\"$1\"')\r\n\t\t\t.replace(/hc-svg-href=\"([^\"]+)\">/g, 'xlink:href=\"$1\"/>')\r\n\t\t\t.replace(/id=([^\" >]+)/g, 'id=\"$1\"')\r\n\t\t\t.replace(/class=([^\" >]+)/g, 'class=\"$1\"')\r\n\t\t\t.replace(/ transform /g, ' ')\r\n\t\t\t.replace(/:(path|rect)/g, '$1')\r\n\t\t\t.replace(/style=\"([^\"]+)\"/g, function (s) {\r\n\t\t\t\treturn s.toLowerCase();\r\n\t\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Return an SVG representation of the chart\r\n\t *\r\n\t * @param additionalOptions {Object} Additional chart options for the generated SVG representation\r\n\t */\r\n\tgetSVG: function (additionalOptions) {\r\n\t\tvar chart = this,\r\n\t\t\tchartCopy,\r\n\t\t\tsandbox,\r\n\t\t\tsvg,\r\n\t\t\tseriesOptions,\r\n\t\t\tsourceWidth,\r\n\t\t\tsourceHeight,\r\n\t\t\tcssWidth,\r\n\t\t\tcssHeight,\r\n\t\t\toptions = merge(chart.options, additionalOptions); // copy the options and add extra options\r\n\r\n\t\t// IE compatibility hack for generating SVG content that it doesn't really understand\r\n\t\tif (!doc.createElementNS) {\r\n\t\t\t/*jslint unparam: true*//* allow unused parameter ns in function below */\r\n\t\t\tdoc.createElementNS = function (ns, tagName) {\r\n\t\t\t\treturn doc.createElement(tagName);\r\n\t\t\t};\r\n\t\t\t/*jslint unparam: false*/\r\n\t\t}\r\n\r\n\t\t// create a sandbox where a new chart will be generated\r\n\t\tsandbox = createElement(DIV, null, {\r\n\t\t\tposition: ABSOLUTE,\r\n\t\t\ttop: '-9999em',\r\n\t\t\twidth: chart.chartWidth + PX,\r\n\t\t\theight: chart.chartHeight + PX\r\n\t\t}, doc.body);\r\n\r\n\t\t// get the source size\r\n\t\tcssWidth = chart.renderTo.style.width;\r\n\t\tcssHeight = chart.renderTo.style.height;\r\n\t\tsourceWidth = options.exporting.sourceWidth ||\r\n\t\t\toptions.chart.width ||\r\n\t\t\t(/px$/.test(cssWidth) && parseInt(cssWidth, 10)) ||\r\n\t\t\t600;\r\n\t\tsourceHeight = options.exporting.sourceHeight ||\r\n\t\t\toptions.chart.height ||\r\n\t\t\t(/px$/.test(cssHeight) && parseInt(cssHeight, 10)) ||\r\n\t\t\t400;\r\n\r\n\t\t// override some options\r\n\t\textend(options.chart, {\r\n\t\t\tanimation: false,\r\n\t\t\trenderTo: sandbox,\r\n\t\t\tforExport: true,\r\n\t\t\twidth: sourceWidth,\r\n\t\t\theight: sourceHeight\r\n\t\t});\r\n\t\toptions.exporting.enabled = false; // hide buttons in print\r\n\t\tdelete options.data; // #3004\r\n\r\n\t\t// prepare for replicating the chart\r\n\t\toptions.series = [];\r\n\t\teach(chart.series, function (serie) {\r\n\t\t\tseriesOptions = merge(serie.options, {\r\n\t\t\t\tanimation: false, // turn off animation\r\n\t\t\t\tenableMouseTracking: false,\r\n\t\t\t\tshowCheckbox: false,\r\n\t\t\t\tvisible: serie.visible\r\n\t\t\t});\r\n\r\n\t\t\tif (!seriesOptions.isInternal) { // used for the navigator series that has its own option set\r\n\t\t\t\toptions.series.push(seriesOptions);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Axis options must be merged in one by one, since it may be an array or an object (#2022, #3900)\r\n\t\tif (additionalOptions) {\r\n\t\t\teach(['xAxis', 'yAxis'], function (axisType) {\r\n\t\t\t\teach(splat(additionalOptions[axisType]), function (axisOptions, i) {\r\n\t\t\t\t\toptions[axisType][i] = merge(options[axisType][i], axisOptions);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// generate the chart copy\r\n\t\tchartCopy = new Highcharts.Chart(options, chart.callback);\r\n\r\n\t\t// reflect axis extremes in the export\r\n\t\teach(['xAxis', 'yAxis'], function (axisType) {\r\n\t\t\teach(chart[axisType], function (axis, i) {\r\n\t\t\t\tvar axisCopy = chartCopy[axisType][i],\r\n\t\t\t\t\textremes = axis.getExtremes(),\r\n\t\t\t\t\tuserMin = extremes.userMin,\r\n\t\t\t\t\tuserMax = extremes.userMax;\r\n\r\n\t\t\t\tif (axisCopy && (userMin !== UNDEFINED || userMax !== UNDEFINED)) {\r\n\t\t\t\t\taxisCopy.setExtremes(userMin, userMax, true, false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// get the SVG from the container's innerHTML\r\n\t\tsvg = chartCopy.container.innerHTML;\r\n\r\n\t\t// free up memory\r\n\t\toptions = null;\r\n\t\tchartCopy.destroy();\r\n\t\tdiscardElement(sandbox);\r\n\r\n\t\t// sanitize\r\n\t\tsvg = this.sanitizeSVG(svg);\r\n\r\n\t\t// IE9 beta bugs with innerHTML. Test again with final IE9.\r\n\t\tsvg = svg.replace(/(url\\(#highcharts-[0-9]+)&quot;/g, '$1')\r\n\t\t\t.replace(/&quot;/g, \"'\");\r\n\r\n\t\treturn svg;\r\n\t},\r\n\r\n\tgetSVGForExport: function (options, chartOptions) {\r\n\t\tvar chartExportingOptions = this.options.exporting;\r\n\r\n\t\treturn this.getSVG(merge(\r\n\t\t\t{ chart: { borderRadius: 0 } },\r\n\t\t\tchartExportingOptions.chartOptions,\r\n\t\t\tchartOptions,\r\n\t\t\t{\r\n\t\t\t\texporting: {\r\n\t\t\t\t\tsourceWidth: (options && options.sourceWidth) || chartExportingOptions.sourceWidth,\r\n\t\t\t\t\tsourceHeight: (options && options.sourceHeight) || chartExportingOptions.sourceHeight\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t));\r\n\t},\r\n\r\n\t/**\r\n\t * Submit the SVG representation of the chart to the server\r\n\t * @param {Object} options Exporting options. Possible members are url, type, width and formAttributes.\r\n\t * @param {Object} chartOptions Additional chart options for the SVG representation of the chart\r\n\t */\r\n\texportChart: function (options, chartOptions) {\r\n\t\t\r\n\t\tvar svg = this.getSVGForExport(options, chartOptions);\r\n\r\n\t\t// merge the options\r\n\t\toptions = merge(this.options.exporting, options);\r\n\r\n\t\t// do the post\r\n\t\tHighcharts.post(options.url, {\r\n\t\t\tfilename: options.filename || 'chart',\r\n\t\t\ttype: options.type,\r\n\t\t\twidth: options.width || 0, // IE8 fails to post undefined correctly, so use 0\r\n\t\t\tscale: options.scale || 2,\r\n\t\t\tsvg: svg\r\n\t\t}, options.formAttributes);\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Print the chart\r\n\t */\r\n\tprint: function () {\r\n\r\n\t\tvar chart = this,\r\n\t\t\tcontainer = chart.container,\r\n\t\t\torigDisplay = [],\r\n\t\t\torigParent = container.parentNode,\r\n\t\t\tbody = doc.body,\r\n\t\t\tchildNodes = body.childNodes;\r\n\r\n\t\tif (chart.isPrinting) { // block the button while in printing mode\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tchart.isPrinting = true;\r\n\r\n\t\tfireEvent(chart, 'beforePrint');\r\n\r\n\t\t// hide all body content\r\n\t\teach(childNodes, function (node, i) {\r\n\t\t\tif (node.nodeType === 1) {\r\n\t\t\t\torigDisplay[i] = node.style.display;\r\n\t\t\t\tnode.style.display = NONE;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// pull out the chart\r\n\t\tbody.appendChild(container);\r\n\r\n\t\t// print\r\n\t\twin.focus(); // #1510\r\n\t\twin.print();\r\n\r\n\t\t// allow the browser to prepare before reverting\r\n\t\tsetTimeout(function () {\r\n\r\n\t\t\t// put the chart back in\r\n\t\t\torigParent.appendChild(container);\r\n\r\n\t\t\t// restore all body content\r\n\t\t\teach(childNodes, function (node, i) {\r\n\t\t\t\tif (node.nodeType === 1) {\r\n\t\t\t\t\tnode.style.display = origDisplay[i];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tchart.isPrinting = false;\r\n\r\n\t\t\tfireEvent(chart, 'afterPrint');\r\n\r\n\t\t}, 1000);\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Display a popup menu for choosing the export type\r\n\t *\r\n\t * @param {String} className An identifier for the menu\r\n\t * @param {Array} items A collection with text and onclicks for the items\r\n\t * @param {Number} x The x position of the opener button\r\n\t * @param {Number} y The y position of the opener button\r\n\t * @param {Number} width The width of the opener button\r\n\t * @param {Number} height The height of the opener button\r\n\t */\r\n\tcontextMenu: function (className, items, x, y, width, height, button) {\r\n\t\tvar chart = this,\r\n\t\t\tnavOptions = chart.options.navigation,\r\n\t\t\tmenuItemStyle = navOptions.menuItemStyle,\r\n\t\t\tchartWidth = chart.chartWidth,\r\n\t\t\tchartHeight = chart.chartHeight,\r\n\t\t\tcacheName = 'cache-' + className,\r\n\t\t\tmenu = chart[cacheName],\r\n\t\t\tmenuPadding = mathMax(width, height), // for mouse leave detection\r\n\t\t\tboxShadow = '3px 3px 10px #888',\r\n\t\t\tinnerMenu,\r\n\t\t\thide,\r\n\t\t\thideTimer,\r\n\t\t\tmenuStyle,\r\n\t\t\tdocMouseUpHandler = function (e) {\r\n\t\t\t\tif (!chart.pointer.inClass(e.target, className)) {\r\n\t\t\t\t\thide();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t// create the menu only the first time\r\n\t\tif (!menu) {\r\n\r\n\t\t\t// create a HTML element above the SVG\r\n\t\t\tchart[cacheName] = menu = createElement(DIV, {\r\n\t\t\t\tclassName: className\r\n\t\t\t}, {\r\n\t\t\t\tposition: ABSOLUTE,\r\n\t\t\t\tzIndex: 1000,\r\n\t\t\t\tpadding: menuPadding + PX\r\n\t\t\t}, chart.container);\r\n\r\n\t\t\tinnerMenu = createElement(DIV, null,\r\n\t\t\t\textend({\r\n\t\t\t\t\tMozBoxShadow: boxShadow,\r\n\t\t\t\t\tWebkitBoxShadow: boxShadow,\r\n\t\t\t\t\tboxShadow: boxShadow\r\n\t\t\t\t}, navOptions.menuStyle), menu);\r\n\r\n\t\t\t// hide on mouse out\r\n\t\t\thide = function () {\r\n\t\t\t\tcss(menu, { display: NONE });\r\n\t\t\t\tif (button) {\r\n\t\t\t\t\tbutton.setState(0);\r\n\t\t\t\t}\r\n\t\t\t\tchart.openMenu = false;\r\n\t\t\t};\r\n\r\n\t\t\t// Hide the menu some time after mouse leave (#1357)\r\n\t\t\taddEvent(menu, 'mouseleave', function () {\r\n\t\t\t\thideTimer = setTimeout(hide, 500);\r\n\t\t\t});\r\n\t\t\taddEvent(menu, 'mouseenter', function () {\r\n\t\t\t\tclearTimeout(hideTimer);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t// Hide it on clicking or touching outside the menu (#2258, #2335, #2407)\r\n\t\t\taddEvent(document, 'mouseup', docMouseUpHandler);\r\n\t\t\taddEvent(chart, 'destroy', function () {\r\n\t\t\t\tremoveEvent(document, 'mouseup', docMouseUpHandler);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t// create the items\r\n\t\t\teach(items, function (item) {\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tvar element = item.separator ?\r\n\t\t\t\t\t\tcreateElement('hr', null, null, innerMenu) :\r\n\t\t\t\t\t\tcreateElement(DIV, {\r\n\t\t\t\t\t\t\tonmouseover: function () {\r\n\t\t\t\t\t\t\t\tcss(this, navOptions.menuItemHoverStyle);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonmouseout: function () {\r\n\t\t\t\t\t\t\t\tcss(this, menuItemStyle);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonclick: function () {\r\n\t\t\t\t\t\t\t\thide();\r\n\t\t\t\t\t\t\t\tif (item.onclick) {\r\n\t\t\t\t\t\t\t\t\titem.onclick.apply(chart, arguments);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tinnerHTML: item.text || chart.options.lang[item.textKey]\r\n\t\t\t\t\t\t}, extend({\r\n\t\t\t\t\t\t\tcursor: 'pointer'\r\n\t\t\t\t\t\t}, menuItemStyle), innerMenu);\r\n\r\n\r\n\t\t\t\t\t// Keep references to menu divs to be able to destroy them\r\n\t\t\t\t\tchart.exportDivElements.push(element);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Keep references to menu and innerMenu div to be able to destroy them\r\n\t\t\tchart.exportDivElements.push(innerMenu, menu);\r\n\r\n\t\t\tchart.exportMenuWidth = menu.offsetWidth;\r\n\t\t\tchart.exportMenuHeight = menu.offsetHeight;\r\n\t\t}\r\n\r\n\t\tmenuStyle = { display: 'block' };\r\n\r\n\t\t// if outside right, right align it\r\n\t\tif (x + chart.exportMenuWidth > chartWidth) {\r\n\t\t\tmenuStyle.right = (chartWidth - x - width - menuPadding) + PX;\r\n\t\t} else {\r\n\t\t\tmenuStyle.left = (x - menuPadding) + PX;\r\n\t\t}\r\n\t\t// if outside bottom, bottom align it\r\n\t\tif (y + height + chart.exportMenuHeight > chartHeight && button.alignOptions.verticalAlign !== 'top') {\r\n\t\t\tmenuStyle.bottom = (chartHeight - y - menuPadding)  + PX;\r\n\t\t} else {\r\n\t\t\tmenuStyle.top = (y + height - menuPadding) + PX;\r\n\t\t}\r\n\r\n\t\tcss(menu, menuStyle);\r\n\t\tchart.openMenu = true;\r\n\t},\r\n\r\n\t/**\r\n\t * Add the export button to the chart\r\n\t */\r\n\taddButton: function (options) {\r\n\t\tvar chart = this,\r\n\t\t\trenderer = chart.renderer,\r\n\t\t\tbtnOptions = merge(chart.options.navigation.buttonOptions, options),\r\n\t\t\tonclick = btnOptions.onclick,\r\n\t\t\tmenuItems = btnOptions.menuItems,\r\n\t\t\tsymbol,\r\n\t\t\tbutton,\r\n\t\t\tsymbolAttr = {\r\n\t\t\t\tstroke: btnOptions.symbolStroke,\r\n\t\t\t\tfill: btnOptions.symbolFill\r\n\t\t\t},\r\n\t\t\tsymbolSize = btnOptions.symbolSize || 12;\r\n\t\tif (!chart.btnCount) {\r\n\t\t\tchart.btnCount = 0;\r\n\t\t}\r\n\r\n\t\t// Keeps references to the button elements\r\n\t\tif (!chart.exportDivElements) {\r\n\t\t\tchart.exportDivElements = [];\r\n\t\t\tchart.exportSVGElements = [];\r\n\t\t}\r\n\r\n\t\tif (btnOptions.enabled === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tvar attr = btnOptions.theme,\r\n\t\t\tstates = attr.states,\r\n\t\t\thover = states && states.hover,\r\n\t\t\tselect = states && states.select,\r\n\t\t\tcallback;\r\n\r\n\t\tdelete attr.states;\r\n\r\n\t\tif (onclick) {\r\n\t\t\tcallback = function () {\r\n\t\t\t\tonclick.apply(chart, arguments);\r\n\t\t\t};\r\n\r\n\t\t} else if (menuItems) {\r\n\t\t\tcallback = function () {\r\n\t\t\t\tchart.contextMenu(\r\n\t\t\t\t\tbutton.menuClassName,\r\n\t\t\t\t\tmenuItems,\r\n\t\t\t\t\tbutton.translateX,\r\n\t\t\t\t\tbutton.translateY,\r\n\t\t\t\t\tbutton.width,\r\n\t\t\t\t\tbutton.height,\r\n\t\t\t\t\tbutton\r\n\t\t\t\t);\r\n\t\t\t\tbutton.setState(2);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\r\n\t\tif (btnOptions.text && btnOptions.symbol) {\r\n\t\t\tattr.paddingLeft = Highcharts.pick(attr.paddingLeft, 25);\r\n\r\n\t\t} else if (!btnOptions.text) {\r\n\t\t\textend(attr, {\r\n\t\t\t\twidth: btnOptions.width,\r\n\t\t\t\theight: btnOptions.height,\r\n\t\t\t\tpadding: 0\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tbutton = renderer.button(btnOptions.text, 0, 0, callback, attr, hover, select)\r\n\t\t\t.attr({\r\n\t\t\t\ttitle: chart.options.lang[btnOptions._titleKey],\r\n\t\t\t\t'stroke-linecap': 'round'\r\n\t\t\t});\r\n\t\tbutton.menuClassName = options.menuClassName || PREFIX + 'menu-' + chart.btnCount++;\r\n\r\n\t\tif (btnOptions.symbol) {\r\n\t\t\tsymbol = renderer.symbol(\r\n\t\t\t\t\tbtnOptions.symbol,\r\n\t\t\t\t\tbtnOptions.symbolX - (symbolSize / 2),\r\n\t\t\t\t\tbtnOptions.symbolY - (symbolSize / 2),\r\n\t\t\t\t\tsymbolSize,\r\n\t\t\t\t\tsymbolSize\r\n\t\t\t\t)\r\n\t\t\t\t.attr(extend(symbolAttr, {\r\n\t\t\t\t\t'stroke-width': btnOptions.symbolStrokeWidth || 1,\r\n\t\t\t\t\tzIndex: 1\r\n\t\t\t\t})).add(button);\r\n\t\t}\r\n\r\n\t\tbutton.add()\r\n\t\t\t.align(extend(btnOptions, {\r\n\t\t\t\twidth: button.width,\r\n\t\t\t\tx: Highcharts.pick(btnOptions.x, buttonOffset) // #1654\r\n\t\t\t}), true, 'spacingBox');\r\n\r\n\t\tbuttonOffset += (button.width + btnOptions.buttonSpacing) * (btnOptions.align === 'right' ? -1 : 1);\r\n\r\n\t\tchart.exportSVGElements.push(button, symbol);\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Destroy the buttons.\r\n\t */\r\n\tdestroyExport: function (e) {\r\n\t\tvar chart = e.target,\r\n\t\t\ti,\r\n\t\t\telem;\r\n\r\n\t\t// Destroy the extra buttons added\r\n\t\tfor (i = 0; i < chart.exportSVGElements.length; i++) {\r\n\t\t\telem = chart.exportSVGElements[i];\r\n\r\n\t\t\t// Destroy and null the svg/vml elements\r\n\t\t\tif (elem) { // #1822\r\n\t\t\t\telem.onclick = elem.ontouchstart = null;\r\n\t\t\t\tchart.exportSVGElements[i] = elem.destroy();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Destroy the divs for the menu\r\n\t\tfor (i = 0; i < chart.exportDivElements.length; i++) {\r\n\t\t\telem = chart.exportDivElements[i];\r\n\r\n\t\t\t// Remove the event handler\r\n\t\t\tremoveEvent(elem, 'mouseleave');\r\n\r\n\t\t\t// Remove inline events\r\n\t\t\tchart.exportDivElements[i] = elem.onmouseout = elem.onmouseover = elem.ontouchstart = elem.onclick = null;\r\n\r\n\t\t\t// Destroy the div by moving to garbage bin\r\n\t\t\tdiscardElement(elem);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nsymbols.menu = function (x, y, width, height) {\r\n\tvar arr = [\r\n\t\tM, x, y + 2.5,\r\n\t\tL, x + width, y + 2.5,\r\n\t\tM, x, y + height / 2 + 0.5,\r\n\t\tL, x + width, y + height / 2 + 0.5,\r\n\t\tM, x, y + height - 1.5,\r\n\t\tL, x + width, y + height - 1.5\r\n\t];\r\n\treturn arr;\r\n};\r\n\r\n// Add the buttons on chart load\r\nChart.prototype.callbacks.push(function (chart) {\r\n\tvar n,\r\n\t\texportingOptions = chart.options.exporting,\r\n\t\tbuttons = exportingOptions.buttons;\r\n\r\n\tbuttonOffset = 0;\r\n\r\n\tif (exportingOptions.enabled !== false) {\r\n\r\n\t\tfor (n in buttons) {\r\n\t\t\tchart.addButton(buttons[n]);\r\n\t\t}\r\n\r\n\t\t// Destroy the export elements at chart destroy\r\n\t\taddEvent(chart, 'destroy', chart.destroyExport);\r\n\t}\r\n\r\n});\r\n\r\n\r\n}(Highcharts));\r\n;//! moment.js\r\n//! version : 2.8.1\r\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\r\n//! license : MIT\r\n//! momentjs.com\r\n\r\n(function (undefined) {\r\n    /************************************\r\n        Constants\r\n    ************************************/\r\n\r\n    var moment,\r\n        VERSION = '2.8.1',\r\n        // the global-scope this is NOT the global object in Node.js\r\n        globalScope = typeof global !== 'undefined' ? global : this,\r\n        oldGlobalMoment,\r\n        round = Math.round,\r\n        i,\r\n\r\n        YEAR = 0,\r\n        MONTH = 1,\r\n        DATE = 2,\r\n        HOUR = 3,\r\n        MINUTE = 4,\r\n        SECOND = 5,\r\n        MILLISECOND = 6,\r\n\r\n        // internal storage for locale config files\r\n        locales = {},\r\n\r\n        // extra moment internal properties (plugins register props here)\r\n        momentProperties = [],\r\n\r\n        // check for nodeJS\r\n        hasModule = (typeof module !== 'undefined' && module.exports),\r\n\r\n        // ASP.NET json date format regex\r\n        aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i,\r\n        aspNetTimeSpanJsonRegex = /(\\-)?(?:(\\d*)\\.)?(\\d+)\\:(\\d+)(?:\\:(\\d+)\\.?(\\d{3})?)?/,\r\n\r\n        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\r\n        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\r\n        isoDurationRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,\r\n\r\n        // format tokens\r\n        formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,\r\n        localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LT|LL?L?L?|l{1,4})/g,\r\n\r\n        // parsing token regexes\r\n        parseTokenOneOrTwoDigits = /\\d\\d?/, // 0 - 99\r\n        parseTokenOneToThreeDigits = /\\d{1,3}/, // 0 - 999\r\n        parseTokenOneToFourDigits = /\\d{1,4}/, // 0 - 9999\r\n        parseTokenOneToSixDigits = /[+\\-]?\\d{1,6}/, // -999,999 - 999,999\r\n        parseTokenDigits = /\\d+/, // nonzero number of digits\r\n        parseTokenWord = /[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i, // any word (or two) characters or numbers including two/three word month in arabic.\r\n        parseTokenTimezone = /Z|[\\+\\-]\\d\\d:?\\d\\d/gi, // +00:00 -00:00 +0000 -0000 or Z\r\n        parseTokenT = /T/i, // T (ISO separator)\r\n        parseTokenTimestampMs = /[\\+\\-]?\\d+(\\.\\d{1,3})?/, // 123456789 123456789.123\r\n        parseTokenOrdinal = /\\d{1,2}/,\r\n\r\n        //strict parsing regexes\r\n        parseTokenOneDigit = /\\d/, // 0 - 9\r\n        parseTokenTwoDigits = /\\d\\d/, // 00 - 99\r\n        parseTokenThreeDigits = /\\d{3}/, // 000 - 999\r\n        parseTokenFourDigits = /\\d{4}/, // 0000 - 9999\r\n        parseTokenSixDigits = /[+-]?\\d{6}/, // -999,999 - 999,999\r\n        parseTokenSignedNumber = /[+-]?\\d+/, // -inf - inf\r\n\r\n        // iso 8601 regex\r\n        // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\r\n        isoRegex = /^\\s*(?:[+-]\\d{6}|\\d{4})-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\r\n\r\n        isoFormat = 'YYYY-MM-DDTHH:mm:ssZ',\r\n\r\n        isoDates = [\r\n            ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d{2}-\\d{2}/],\r\n            ['YYYY-MM-DD', /\\d{4}-\\d{2}-\\d{2}/],\r\n            ['GGGG-[W]WW-E', /\\d{4}-W\\d{2}-\\d/],\r\n            ['GGGG-[W]WW', /\\d{4}-W\\d{2}/],\r\n            ['YYYY-DDD', /\\d{4}-\\d{3}/]\r\n        ],\r\n\r\n        // iso time formats and regexes\r\n        isoTimes = [\r\n            ['HH:mm:ss.SSSS', /(T| )\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\r\n            ['HH:mm:ss', /(T| )\\d\\d:\\d\\d:\\d\\d/],\r\n            ['HH:mm', /(T| )\\d\\d:\\d\\d/],\r\n            ['HH', /(T| )\\d\\d/]\r\n        ],\r\n\r\n        // timezone chunker \"+10:00\" > [\"10\", \"00\"] or \"-1530\" > [\"-15\", \"30\"]\r\n        parseTimezoneChunker = /([\\+\\-]|\\d\\d)/gi,\r\n\r\n        // getter and setter names\r\n        proxyGettersAndSetters = 'Date|Hours|Minutes|Seconds|Milliseconds'.split('|'),\r\n        unitMillisecondFactors = {\r\n            'Milliseconds' : 1,\r\n            'Seconds' : 1e3,\r\n            'Minutes' : 6e4,\r\n            'Hours' : 36e5,\r\n            'Days' : 864e5,\r\n            'Months' : 2592e6,\r\n            'Years' : 31536e6\r\n        },\r\n\r\n        unitAliases = {\r\n            ms : 'millisecond',\r\n            s : 'second',\r\n            m : 'minute',\r\n            h : 'hour',\r\n            d : 'day',\r\n            D : 'date',\r\n            w : 'week',\r\n            W : 'isoWeek',\r\n            M : 'month',\r\n            Q : 'quarter',\r\n            y : 'year',\r\n            DDD : 'dayOfYear',\r\n            e : 'weekday',\r\n            E : 'isoWeekday',\r\n            gg: 'weekYear',\r\n            GG: 'isoWeekYear'\r\n        },\r\n\r\n        camelFunctions = {\r\n            dayofyear : 'dayOfYear',\r\n            isoweekday : 'isoWeekday',\r\n            isoweek : 'isoWeek',\r\n            weekyear : 'weekYear',\r\n            isoweekyear : 'isoWeekYear'\r\n        },\r\n\r\n        // format function strings\r\n        formatFunctions = {},\r\n\r\n        // default relative time thresholds\r\n        relativeTimeThresholds = {\r\n            s: 45,  // seconds to minute\r\n            m: 45,  // minutes to hour\r\n            h: 22,  // hours to day\r\n            d: 26,  // days to month\r\n            M: 11   // months to year\r\n        },\r\n\r\n        // tokens to ordinalize and pad\r\n        ordinalizeTokens = 'DDD w W M D d'.split(' '),\r\n        paddedTokens = 'M D H h m s w W'.split(' '),\r\n\r\n        formatTokenFunctions = {\r\n            M    : function () {\r\n                return this.month() + 1;\r\n            },\r\n            MMM  : function (format) {\r\n                return this.localeData().monthsShort(this, format);\r\n            },\r\n            MMMM : function (format) {\r\n                return this.localeData().months(this, format);\r\n            },\r\n            D    : function () {\r\n                return this.date();\r\n            },\r\n            DDD  : function () {\r\n                return this.dayOfYear();\r\n            },\r\n            d    : function () {\r\n                return this.day();\r\n            },\r\n            dd   : function (format) {\r\n                return this.localeData().weekdaysMin(this, format);\r\n            },\r\n            ddd  : function (format) {\r\n                return this.localeData().weekdaysShort(this, format);\r\n            },\r\n            dddd : function (format) {\r\n                return this.localeData().weekdays(this, format);\r\n            },\r\n            w    : function () {\r\n                return this.week();\r\n            },\r\n            W    : function () {\r\n                return this.isoWeek();\r\n            },\r\n            YY   : function () {\r\n                return leftZeroFill(this.year() % 100, 2);\r\n            },\r\n            YYYY : function () {\r\n                return leftZeroFill(this.year(), 4);\r\n            },\r\n            YYYYY : function () {\r\n                return leftZeroFill(this.year(), 5);\r\n            },\r\n            YYYYYY : function () {\r\n                var y = this.year(), sign = y >= 0 ? '+' : '-';\r\n                return sign + leftZeroFill(Math.abs(y), 6);\r\n            },\r\n            gg   : function () {\r\n                return leftZeroFill(this.weekYear() % 100, 2);\r\n            },\r\n            gggg : function () {\r\n                return leftZeroFill(this.weekYear(), 4);\r\n            },\r\n            ggggg : function () {\r\n                return leftZeroFill(this.weekYear(), 5);\r\n            },\r\n            GG   : function () {\r\n                return leftZeroFill(this.isoWeekYear() % 100, 2);\r\n            },\r\n            GGGG : function () {\r\n                return leftZeroFill(this.isoWeekYear(), 4);\r\n            },\r\n            GGGGG : function () {\r\n                return leftZeroFill(this.isoWeekYear(), 5);\r\n            },\r\n            e : function () {\r\n                return this.weekday();\r\n            },\r\n            E : function () {\r\n                return this.isoWeekday();\r\n            },\r\n            a    : function () {\r\n                return this.localeData().meridiem(this.hours(), this.minutes(), true);\r\n            },\r\n            A    : function () {\r\n                return this.localeData().meridiem(this.hours(), this.minutes(), false);\r\n            },\r\n            H    : function () {\r\n                return this.hours();\r\n            },\r\n            h    : function () {\r\n                return this.hours() % 12 || 12;\r\n            },\r\n            m    : function () {\r\n                return this.minutes();\r\n            },\r\n            s    : function () {\r\n                return this.seconds();\r\n            },\r\n            S    : function () {\r\n                return toInt(this.milliseconds() / 100);\r\n            },\r\n            SS   : function () {\r\n                return leftZeroFill(toInt(this.milliseconds() / 10), 2);\r\n            },\r\n            SSS  : function () {\r\n                return leftZeroFill(this.milliseconds(), 3);\r\n            },\r\n            SSSS : function () {\r\n                return leftZeroFill(this.milliseconds(), 3);\r\n            },\r\n            Z    : function () {\r\n                var a = -this.zone(),\r\n                    b = '+';\r\n                if (a < 0) {\r\n                    a = -a;\r\n                    b = '-';\r\n                }\r\n                return b + leftZeroFill(toInt(a / 60), 2) + ':' + leftZeroFill(toInt(a) % 60, 2);\r\n            },\r\n            ZZ   : function () {\r\n                var a = -this.zone(),\r\n                    b = '+';\r\n                if (a < 0) {\r\n                    a = -a;\r\n                    b = '-';\r\n                }\r\n                return b + leftZeroFill(toInt(a / 60), 2) + leftZeroFill(toInt(a) % 60, 2);\r\n            },\r\n            z : function () {\r\n                return this.zoneAbbr();\r\n            },\r\n            zz : function () {\r\n                return this.zoneName();\r\n            },\r\n            X    : function () {\r\n                return this.unix();\r\n            },\r\n            Q : function () {\r\n                return this.quarter();\r\n            }\r\n        },\r\n\r\n        deprecations = {},\r\n\r\n        lists = ['months', 'monthsShort', 'weekdays', 'weekdaysShort', 'weekdaysMin'];\r\n\r\n    // Pick the first defined of two or three arguments. dfl comes from\r\n    // default.\r\n    function dfl(a, b, c) {\r\n        switch (arguments.length) {\r\n            case 2: return a != null ? a : b;\r\n            case 3: return a != null ? a : b != null ? b : c;\r\n            default: throw new Error('Implement me');\r\n        }\r\n    }\r\n\r\n    function defaultParsingFlags() {\r\n        // We need to deep clone this object, and es5 standard is not very\r\n        // helpful.\r\n        return {\r\n            empty : false,\r\n            unusedTokens : [],\r\n            unusedInput : [],\r\n            overflow : -2,\r\n            charsLeftOver : 0,\r\n            nullInput : false,\r\n            invalidMonth : null,\r\n            invalidFormat : false,\r\n            userInvalidated : false,\r\n            iso: false\r\n        };\r\n    }\r\n\r\n    function printMsg(msg) {\r\n        if (moment.suppressDeprecationWarnings === false &&\r\n                typeof console !== 'undefined' && console.warn) {\r\n            console.warn(\"Deprecation warning: \" + msg);\r\n        }\r\n    }\r\n\r\n    function deprecate(msg, fn) {\r\n        var firstTime = true;\r\n        return extend(function () {\r\n            if (firstTime) {\r\n                printMsg(msg);\r\n                firstTime = false;\r\n            }\r\n            return fn.apply(this, arguments);\r\n        }, fn);\r\n    }\r\n\r\n    function deprecateSimple(name, msg) {\r\n        if (!deprecations[name]) {\r\n            printMsg(msg);\r\n            deprecations[name] = true;\r\n        }\r\n    }\r\n\r\n    function padToken(func, count) {\r\n        return function (a) {\r\n            return leftZeroFill(func.call(this, a), count);\r\n        };\r\n    }\r\n    function ordinalizeToken(func, period) {\r\n        return function (a) {\r\n            return this.localeData().ordinal(func.call(this, a), period);\r\n        };\r\n    }\r\n\r\n    while (ordinalizeTokens.length) {\r\n        i = ordinalizeTokens.pop();\r\n        formatTokenFunctions[i + 'o'] = ordinalizeToken(formatTokenFunctions[i], i);\r\n    }\r\n    while (paddedTokens.length) {\r\n        i = paddedTokens.pop();\r\n        formatTokenFunctions[i + i] = padToken(formatTokenFunctions[i], 2);\r\n    }\r\n    formatTokenFunctions.DDDD = padToken(formatTokenFunctions.DDD, 3);\r\n\r\n\r\n    /************************************\r\n        Constructors\r\n    ************************************/\r\n\r\n    function Locale() {\r\n    }\r\n\r\n    // Moment prototype object\r\n    function Moment(config, skipOverflow) {\r\n        if (skipOverflow !== false) {\r\n            checkOverflow(config);\r\n        }\r\n        copyConfig(this, config);\r\n        this._d = new Date(+config._d);\r\n    }\r\n\r\n    // Duration Constructor\r\n    function Duration(duration) {\r\n        var normalizedInput = normalizeObjectUnits(duration),\r\n            years = normalizedInput.year || 0,\r\n            quarters = normalizedInput.quarter || 0,\r\n            months = normalizedInput.month || 0,\r\n            weeks = normalizedInput.week || 0,\r\n            days = normalizedInput.day || 0,\r\n            hours = normalizedInput.hour || 0,\r\n            minutes = normalizedInput.minute || 0,\r\n            seconds = normalizedInput.second || 0,\r\n            milliseconds = normalizedInput.millisecond || 0;\r\n\r\n        // representation for dateAddRemove\r\n        this._milliseconds = +milliseconds +\r\n            seconds * 1e3 + // 1000\r\n            minutes * 6e4 + // 1000 * 60\r\n            hours * 36e5; // 1000 * 60 * 60\r\n        // Because of dateAddRemove treats 24 hours as different from a\r\n        // day when working around DST, we need to store them separately\r\n        this._days = +days +\r\n            weeks * 7;\r\n        // It is impossible translate months into days without knowing\r\n        // which months you are are talking about, so we have to store\r\n        // it separately.\r\n        this._months = +months +\r\n            quarters * 3 +\r\n            years * 12;\r\n\r\n        this._data = {};\r\n\r\n        this._locale = moment.localeData();\r\n\r\n        this._bubble();\r\n    }\r\n\r\n    /************************************\r\n        Helpers\r\n    ************************************/\r\n\r\n\r\n    function extend(a, b) {\r\n        for (var i in b) {\r\n            if (b.hasOwnProperty(i)) {\r\n                a[i] = b[i];\r\n            }\r\n        }\r\n\r\n        if (b.hasOwnProperty('toString')) {\r\n            a.toString = b.toString;\r\n        }\r\n\r\n        if (b.hasOwnProperty('valueOf')) {\r\n            a.valueOf = b.valueOf;\r\n        }\r\n\r\n        return a;\r\n    }\r\n\r\n    function copyConfig(to, from) {\r\n        var i, prop, val;\r\n\r\n        if (typeof from._isAMomentObject !== 'undefined') {\r\n            to._isAMomentObject = from._isAMomentObject;\r\n        }\r\n        if (typeof from._i !== 'undefined') {\r\n            to._i = from._i;\r\n        }\r\n        if (typeof from._f !== 'undefined') {\r\n            to._f = from._f;\r\n        }\r\n        if (typeof from._l !== 'undefined') {\r\n            to._l = from._l;\r\n        }\r\n        if (typeof from._strict !== 'undefined') {\r\n            to._strict = from._strict;\r\n        }\r\n        if (typeof from._tzm !== 'undefined') {\r\n            to._tzm = from._tzm;\r\n        }\r\n        if (typeof from._isUTC !== 'undefined') {\r\n            to._isUTC = from._isUTC;\r\n        }\r\n        if (typeof from._offset !== 'undefined') {\r\n            to._offset = from._offset;\r\n        }\r\n        if (typeof from._pf !== 'undefined') {\r\n            to._pf = from._pf;\r\n        }\r\n        if (typeof from._locale !== 'undefined') {\r\n            to._locale = from._locale;\r\n        }\r\n\r\n        if (momentProperties.length > 0) {\r\n            for (i in momentProperties) {\r\n                prop = momentProperties[i];\r\n                val = from[prop];\r\n                if (typeof val !== 'undefined') {\r\n                    to[prop] = val;\r\n                }\r\n            }\r\n        }\r\n\r\n        return to;\r\n    }\r\n\r\n    function absRound(number) {\r\n        if (number < 0) {\r\n            return Math.ceil(number);\r\n        } else {\r\n            return Math.floor(number);\r\n        }\r\n    }\r\n\r\n    // left zero fill a number\r\n    // see http://jsperf.com/left-zero-filling for performance comparison\r\n    function leftZeroFill(number, targetLength, forceSign) {\r\n        var output = '' + Math.abs(number),\r\n            sign = number >= 0;\r\n\r\n        while (output.length < targetLength) {\r\n            output = '0' + output;\r\n        }\r\n        return (sign ? (forceSign ? '+' : '') : '-') + output;\r\n    }\r\n\r\n    function positiveMomentsDifference(base, other) {\r\n        var res = {milliseconds: 0, months: 0};\r\n\r\n        res.months = other.month() - base.month() +\r\n            (other.year() - base.year()) * 12;\r\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\r\n            --res.months;\r\n        }\r\n\r\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\r\n\r\n        return res;\r\n    }\r\n\r\n    function momentsDifference(base, other) {\r\n        var res;\r\n        other = makeAs(other, base);\r\n        if (base.isBefore(other)) {\r\n            res = positiveMomentsDifference(base, other);\r\n        } else {\r\n            res = positiveMomentsDifference(other, base);\r\n            res.milliseconds = -res.milliseconds;\r\n            res.months = -res.months;\r\n        }\r\n\r\n        return res;\r\n    }\r\n\r\n    // TODO: remove 'name' arg after deprecation is removed\r\n    function createAdder(direction, name) {\r\n        return function (val, period) {\r\n            var dur, tmp;\r\n            //invert the arguments, but complain about it\r\n            if (period !== null && !isNaN(+period)) {\r\n                deprecateSimple(name, \"moment().\" + name  + \"(period, number) is deprecated. Please use moment().\" + name + \"(number, period).\");\r\n                tmp = val; val = period; period = tmp;\r\n            }\r\n\r\n            val = typeof val === 'string' ? +val : val;\r\n            dur = moment.duration(val, period);\r\n            addOrSubtractDurationFromMoment(this, dur, direction);\r\n            return this;\r\n        };\r\n    }\r\n\r\n    function addOrSubtractDurationFromMoment(mom, duration, isAdding, updateOffset) {\r\n        var milliseconds = duration._milliseconds,\r\n            days = duration._days,\r\n            months = duration._months;\r\n        updateOffset = updateOffset == null ? true : updateOffset;\r\n\r\n        if (milliseconds) {\r\n            mom._d.setTime(+mom._d + milliseconds * isAdding);\r\n        }\r\n        if (days) {\r\n            rawSetter(mom, 'Date', rawGetter(mom, 'Date') + days * isAdding);\r\n        }\r\n        if (months) {\r\n            rawMonthSetter(mom, rawGetter(mom, 'Month') + months * isAdding);\r\n        }\r\n        if (updateOffset) {\r\n            moment.updateOffset(mom, days || months);\r\n        }\r\n    }\r\n\r\n    // check if is an array\r\n    function isArray(input) {\r\n        return Object.prototype.toString.call(input) === '[object Array]';\r\n    }\r\n\r\n    function isDate(input) {\r\n        return Object.prototype.toString.call(input) === '[object Date]' ||\r\n            input instanceof Date;\r\n    }\r\n\r\n    // compare two arrays, return the number of differences\r\n    function compareArrays(array1, array2, dontConvert) {\r\n        var len = Math.min(array1.length, array2.length),\r\n            lengthDiff = Math.abs(array1.length - array2.length),\r\n            diffs = 0,\r\n            i;\r\n        for (i = 0; i < len; i++) {\r\n            if ((dontConvert && array1[i] !== array2[i]) ||\r\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\r\n                diffs++;\r\n            }\r\n        }\r\n        return diffs + lengthDiff;\r\n    }\r\n\r\n    function normalizeUnits(units) {\r\n        if (units) {\r\n            var lowered = units.toLowerCase().replace(/(.)s$/, '$1');\r\n            units = unitAliases[units] || camelFunctions[lowered] || lowered;\r\n        }\r\n        return units;\r\n    }\r\n\r\n    function normalizeObjectUnits(inputObject) {\r\n        var normalizedInput = {},\r\n            normalizedProp,\r\n            prop;\r\n\r\n        for (prop in inputObject) {\r\n            if (inputObject.hasOwnProperty(prop)) {\r\n                normalizedProp = normalizeUnits(prop);\r\n                if (normalizedProp) {\r\n                    normalizedInput[normalizedProp] = inputObject[prop];\r\n                }\r\n            }\r\n        }\r\n\r\n        return normalizedInput;\r\n    }\r\n\r\n    function makeList(field) {\r\n        var count, setter;\r\n\r\n        if (field.indexOf('week') === 0) {\r\n            count = 7;\r\n            setter = 'day';\r\n        }\r\n        else if (field.indexOf('month') === 0) {\r\n            count = 12;\r\n            setter = 'month';\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n\r\n        moment[field] = function (format, index) {\r\n            var i, getter,\r\n                method = moment._locale[field],\r\n                results = [];\r\n\r\n            if (typeof format === 'number') {\r\n                index = format;\r\n                format = undefined;\r\n            }\r\n\r\n            getter = function (i) {\r\n                var m = moment().utc().set(setter, i);\r\n                return method.call(moment._locale, m, format || '');\r\n            };\r\n\r\n            if (index != null) {\r\n                return getter(index);\r\n            }\r\n            else {\r\n                for (i = 0; i < count; i++) {\r\n                    results.push(getter(i));\r\n                }\r\n                return results;\r\n            }\r\n        };\r\n    }\r\n\r\n    function toInt(argumentForCoercion) {\r\n        var coercedNumber = +argumentForCoercion,\r\n            value = 0;\r\n\r\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\r\n            if (coercedNumber >= 0) {\r\n                value = Math.floor(coercedNumber);\r\n            } else {\r\n                value = Math.ceil(coercedNumber);\r\n            }\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    function daysInMonth(year, month) {\r\n        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();\r\n    }\r\n\r\n    function weeksInYear(year, dow, doy) {\r\n        return weekOfYear(moment([year, 11, 31 + dow - doy]), dow, doy).week;\r\n    }\r\n\r\n    function daysInYear(year) {\r\n        return isLeapYear(year) ? 366 : 365;\r\n    }\r\n\r\n    function isLeapYear(year) {\r\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\r\n    }\r\n\r\n    function checkOverflow(m) {\r\n        var overflow;\r\n        if (m._a && m._pf.overflow === -2) {\r\n            overflow =\r\n                m._a[MONTH] < 0 || m._a[MONTH] > 11 ? MONTH :\r\n                m._a[DATE] < 1 || m._a[DATE] > daysInMonth(m._a[YEAR], m._a[MONTH]) ? DATE :\r\n                m._a[HOUR] < 0 || m._a[HOUR] > 23 ? HOUR :\r\n                m._a[MINUTE] < 0 || m._a[MINUTE] > 59 ? MINUTE :\r\n                m._a[SECOND] < 0 || m._a[SECOND] > 59 ? SECOND :\r\n                m._a[MILLISECOND] < 0 || m._a[MILLISECOND] > 999 ? MILLISECOND :\r\n                -1;\r\n\r\n            if (m._pf._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\r\n                overflow = DATE;\r\n            }\r\n\r\n            m._pf.overflow = overflow;\r\n        }\r\n    }\r\n\r\n    function isValid(m) {\r\n        if (m._isValid == null) {\r\n            m._isValid = !isNaN(m._d.getTime()) &&\r\n                m._pf.overflow < 0 &&\r\n                !m._pf.empty &&\r\n                !m._pf.invalidMonth &&\r\n                !m._pf.nullInput &&\r\n                !m._pf.invalidFormat &&\r\n                !m._pf.userInvalidated;\r\n\r\n            if (m._strict) {\r\n                m._isValid = m._isValid &&\r\n                    m._pf.charsLeftOver === 0 &&\r\n                    m._pf.unusedTokens.length === 0;\r\n            }\r\n        }\r\n        return m._isValid;\r\n    }\r\n\r\n    function normalizeLocale(key) {\r\n        return key ? key.toLowerCase().replace('_', '-') : key;\r\n    }\r\n\r\n    // pick the locale from the array\r\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\r\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\r\n    function chooseLocale(names) {\r\n        var i = 0, j, next, locale, split;\r\n\r\n        while (i < names.length) {\r\n            split = normalizeLocale(names[i]).split('-');\r\n            j = split.length;\r\n            next = normalizeLocale(names[i + 1]);\r\n            next = next ? next.split('-') : null;\r\n            while (j > 0) {\r\n                locale = loadLocale(split.slice(0, j).join('-'));\r\n                if (locale) {\r\n                    return locale;\r\n                }\r\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\r\n                    //the next array item is better than a shallower substring of this one\r\n                    break;\r\n                }\r\n                j--;\r\n            }\r\n            i++;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    function loadLocale(name) {\r\n        var oldLocale = null;\r\n        if (!locales[name] && hasModule) {\r\n            try {\r\n                oldLocale = moment.locale();\r\n                require('./locale/' + name);\r\n                // because defineLocale currently also sets the global locale, we want to undo that for lazy loaded locales\r\n                moment.locale(oldLocale);\r\n            } catch (e) { }\r\n        }\r\n        return locales[name];\r\n    }\r\n\r\n    // Return a moment from input, that is local/utc/zone equivalent to model.\r\n    function makeAs(input, model) {\r\n        return model._isUTC ? moment(input).zone(model._offset || 0) :\r\n            moment(input).local();\r\n    }\r\n\r\n    /************************************\r\n        Locale\r\n    ************************************/\r\n\r\n\r\n    extend(Locale.prototype, {\r\n\r\n        set : function (config) {\r\n            var prop, i;\r\n            for (i in config) {\r\n                prop = config[i];\r\n                if (typeof prop === 'function') {\r\n                    this[i] = prop;\r\n                } else {\r\n                    this['_' + i] = prop;\r\n                }\r\n            }\r\n        },\r\n\r\n        _months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),\r\n        months : function (m) {\r\n            return this._months[m.month()];\r\n        },\r\n\r\n        _monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),\r\n        monthsShort : function (m) {\r\n            return this._monthsShort[m.month()];\r\n        },\r\n\r\n        monthsParse : function (monthName) {\r\n            var i, mom, regex;\r\n\r\n            if (!this._monthsParse) {\r\n                this._monthsParse = [];\r\n            }\r\n\r\n            for (i = 0; i < 12; i++) {\r\n                // make the regex if we don't have it already\r\n                if (!this._monthsParse[i]) {\r\n                    mom = moment.utc([2000, i]);\r\n                    regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\r\n                    this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\r\n                }\r\n                // test the regex\r\n                if (this._monthsParse[i].test(monthName)) {\r\n                    return i;\r\n                }\r\n            }\r\n        },\r\n\r\n        _weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\r\n        weekdays : function (m) {\r\n            return this._weekdays[m.day()];\r\n        },\r\n\r\n        _weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),\r\n        weekdaysShort : function (m) {\r\n            return this._weekdaysShort[m.day()];\r\n        },\r\n\r\n        _weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),\r\n        weekdaysMin : function (m) {\r\n            return this._weekdaysMin[m.day()];\r\n        },\r\n\r\n        weekdaysParse : function (weekdayName) {\r\n            var i, mom, regex;\r\n\r\n            if (!this._weekdaysParse) {\r\n                this._weekdaysParse = [];\r\n            }\r\n\r\n            for (i = 0; i < 7; i++) {\r\n                // make the regex if we don't have it already\r\n                if (!this._weekdaysParse[i]) {\r\n                    mom = moment([2000, 1]).day(i);\r\n                    regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\r\n                    this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\r\n                }\r\n                // test the regex\r\n                if (this._weekdaysParse[i].test(weekdayName)) {\r\n                    return i;\r\n                }\r\n            }\r\n        },\r\n\r\n        _longDateFormat : {\r\n            LT : 'h:mm A',\r\n            L : 'MM/DD/YYYY',\r\n            LL : 'MMMM D, YYYY',\r\n            LLL : 'MMMM D, YYYY LT',\r\n            LLLL : 'dddd, MMMM D, YYYY LT'\r\n        },\r\n        longDateFormat : function (key) {\r\n            var output = this._longDateFormat[key];\r\n            if (!output && this._longDateFormat[key.toUpperCase()]) {\r\n                output = this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (val) {\r\n                    return val.slice(1);\r\n                });\r\n                this._longDateFormat[key] = output;\r\n            }\r\n            return output;\r\n        },\r\n\r\n        isPM : function (input) {\r\n            // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\r\n            // Using charAt should be more compatible.\r\n            return ((input + '').toLowerCase().charAt(0) === 'p');\r\n        },\r\n\r\n        _meridiemParse : /[ap]\\.?m?\\.?/i,\r\n        meridiem : function (hours, minutes, isLower) {\r\n            if (hours > 11) {\r\n                return isLower ? 'pm' : 'PM';\r\n            } else {\r\n                return isLower ? 'am' : 'AM';\r\n            }\r\n        },\r\n\r\n        _calendar : {\r\n            sameDay : '[Today at] LT',\r\n            nextDay : '[Tomorrow at] LT',\r\n            nextWeek : 'dddd [at] LT',\r\n            lastDay : '[Yesterday at] LT',\r\n            lastWeek : '[Last] dddd [at] LT',\r\n            sameElse : 'L'\r\n        },\r\n        calendar : function (key, mom) {\r\n            var output = this._calendar[key];\r\n            return typeof output === 'function' ? output.apply(mom) : output;\r\n        },\r\n\r\n        _relativeTime : {\r\n            future : 'in %s',\r\n            past : '%s ago',\r\n            s : 'a few seconds',\r\n            m : 'a minute',\r\n            mm : '%d minutes',\r\n            h : 'an hour',\r\n            hh : '%d hours',\r\n            d : 'a day',\r\n            dd : '%d days',\r\n            M : 'a month',\r\n            MM : '%d months',\r\n            y : 'a year',\r\n            yy : '%d years'\r\n        },\r\n\r\n        relativeTime : function (number, withoutSuffix, string, isFuture) {\r\n            var output = this._relativeTime[string];\r\n            return (typeof output === 'function') ?\r\n                output(number, withoutSuffix, string, isFuture) :\r\n                output.replace(/%d/i, number);\r\n        },\r\n\r\n        pastFuture : function (diff, output) {\r\n            var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\r\n            return typeof format === 'function' ? format(output) : format.replace(/%s/i, output);\r\n        },\r\n\r\n        ordinal : function (number) {\r\n            return this._ordinal.replace('%d', number);\r\n        },\r\n        _ordinal : '%d',\r\n\r\n        preparse : function (string) {\r\n            return string;\r\n        },\r\n\r\n        postformat : function (string) {\r\n            return string;\r\n        },\r\n\r\n        week : function (mom) {\r\n            return weekOfYear(mom, this._week.dow, this._week.doy).week;\r\n        },\r\n\r\n        _week : {\r\n            dow : 0, // Sunday is the first day of the week.\r\n            doy : 6  // The week that contains Jan 1st is the first week of the year.\r\n        },\r\n\r\n        _invalidDate: 'Invalid date',\r\n        invalidDate: function () {\r\n            return this._invalidDate;\r\n        }\r\n    });\r\n\r\n    /************************************\r\n        Formatting\r\n    ************************************/\r\n\r\n\r\n    function removeFormattingTokens(input) {\r\n        if (input.match(/\\[[\\s\\S]/)) {\r\n            return input.replace(/^\\[|\\]$/g, '');\r\n        }\r\n        return input.replace(/\\\\/g, '');\r\n    }\r\n\r\n    function makeFormatFunction(format) {\r\n        var array = format.match(formattingTokens), i, length;\r\n\r\n        for (i = 0, length = array.length; i < length; i++) {\r\n            if (formatTokenFunctions[array[i]]) {\r\n                array[i] = formatTokenFunctions[array[i]];\r\n            } else {\r\n                array[i] = removeFormattingTokens(array[i]);\r\n            }\r\n        }\r\n\r\n        return function (mom) {\r\n            var output = '';\r\n            for (i = 0; i < length; i++) {\r\n                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];\r\n            }\r\n            return output;\r\n        };\r\n    }\r\n\r\n    // format date using native date object\r\n    function formatMoment(m, format) {\r\n        if (!m.isValid()) {\r\n            return m.localeData().invalidDate();\r\n        }\r\n\r\n        format = expandFormat(format, m.localeData());\r\n\r\n        if (!formatFunctions[format]) {\r\n            formatFunctions[format] = makeFormatFunction(format);\r\n        }\r\n\r\n        return formatFunctions[format](m);\r\n    }\r\n\r\n    function expandFormat(format, locale) {\r\n        var i = 5;\r\n\r\n        function replaceLongDateFormatTokens(input) {\r\n            return locale.longDateFormat(input) || input;\r\n        }\r\n\r\n        localFormattingTokens.lastIndex = 0;\r\n        while (i >= 0 && localFormattingTokens.test(format)) {\r\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\r\n            localFormattingTokens.lastIndex = 0;\r\n            i -= 1;\r\n        }\r\n\r\n        return format;\r\n    }\r\n\r\n\r\n    /************************************\r\n        Parsing\r\n    ************************************/\r\n\r\n\r\n    // get the regex to find the next token\r\n    function getParseRegexForToken(token, config) {\r\n        var a, strict = config._strict;\r\n        switch (token) {\r\n        case 'Q':\r\n            return parseTokenOneDigit;\r\n        case 'DDDD':\r\n            return parseTokenThreeDigits;\r\n        case 'YYYY':\r\n        case 'GGGG':\r\n        case 'gggg':\r\n            return strict ? parseTokenFourDigits : parseTokenOneToFourDigits;\r\n        case 'Y':\r\n        case 'G':\r\n        case 'g':\r\n            return parseTokenSignedNumber;\r\n        case 'YYYYYY':\r\n        case 'YYYYY':\r\n        case 'GGGGG':\r\n        case 'ggggg':\r\n            return strict ? parseTokenSixDigits : parseTokenOneToSixDigits;\r\n        case 'S':\r\n            if (strict) {\r\n                return parseTokenOneDigit;\r\n            }\r\n            /* falls through */\r\n        case 'SS':\r\n            if (strict) {\r\n                return parseTokenTwoDigits;\r\n            }\r\n            /* falls through */\r\n        case 'SSS':\r\n            if (strict) {\r\n                return parseTokenThreeDigits;\r\n            }\r\n            /* falls through */\r\n        case 'DDD':\r\n            return parseTokenOneToThreeDigits;\r\n        case 'MMM':\r\n        case 'MMMM':\r\n        case 'dd':\r\n        case 'ddd':\r\n        case 'dddd':\r\n            return parseTokenWord;\r\n        case 'a':\r\n        case 'A':\r\n            return config._locale._meridiemParse;\r\n        case 'X':\r\n            return parseTokenTimestampMs;\r\n        case 'Z':\r\n        case 'ZZ':\r\n            return parseTokenTimezone;\r\n        case 'T':\r\n            return parseTokenT;\r\n        case 'SSSS':\r\n            return parseTokenDigits;\r\n        case 'MM':\r\n        case 'DD':\r\n        case 'YY':\r\n        case 'GG':\r\n        case 'gg':\r\n        case 'HH':\r\n        case 'hh':\r\n        case 'mm':\r\n        case 'ss':\r\n        case 'ww':\r\n        case 'WW':\r\n            return strict ? parseTokenTwoDigits : parseTokenOneOrTwoDigits;\r\n        case 'M':\r\n        case 'D':\r\n        case 'd':\r\n        case 'H':\r\n        case 'h':\r\n        case 'm':\r\n        case 's':\r\n        case 'w':\r\n        case 'W':\r\n        case 'e':\r\n        case 'E':\r\n            return parseTokenOneOrTwoDigits;\r\n        case 'Do':\r\n            return parseTokenOrdinal;\r\n        default :\r\n            a = new RegExp(regexpEscape(unescapeFormat(token.replace('\\\\', '')), 'i'));\r\n            return a;\r\n        }\r\n    }\r\n\r\n    function timezoneMinutesFromString(string) {\r\n        string = string || '';\r\n        var possibleTzMatches = (string.match(parseTokenTimezone) || []),\r\n            tzChunk = possibleTzMatches[possibleTzMatches.length - 1] || [],\r\n            parts = (tzChunk + '').match(parseTimezoneChunker) || ['-', 0, 0],\r\n            minutes = +(parts[1] * 60) + toInt(parts[2]);\r\n\r\n        return parts[0] === '+' ? -minutes : minutes;\r\n    }\r\n\r\n    // function to convert string input to date\r\n    function addTimeToArrayFromToken(token, input, config) {\r\n        var a, datePartArray = config._a;\r\n\r\n        switch (token) {\r\n        // QUARTER\r\n        case 'Q':\r\n            if (input != null) {\r\n                datePartArray[MONTH] = (toInt(input) - 1) * 3;\r\n            }\r\n            break;\r\n        // MONTH\r\n        case 'M' : // fall through to MM\r\n        case 'MM' :\r\n            if (input != null) {\r\n                datePartArray[MONTH] = toInt(input) - 1;\r\n            }\r\n            break;\r\n        case 'MMM' : // fall through to MMMM\r\n        case 'MMMM' :\r\n            a = config._locale.monthsParse(input);\r\n            // if we didn't find a month name, mark the date as invalid.\r\n            if (a != null) {\r\n                datePartArray[MONTH] = a;\r\n            } else {\r\n                config._pf.invalidMonth = input;\r\n            }\r\n            break;\r\n        // DAY OF MONTH\r\n        case 'D' : // fall through to DD\r\n        case 'DD' :\r\n            if (input != null) {\r\n                datePartArray[DATE] = toInt(input);\r\n            }\r\n            break;\r\n        case 'Do' :\r\n            if (input != null) {\r\n                datePartArray[DATE] = toInt(parseInt(input, 10));\r\n            }\r\n            break;\r\n        // DAY OF YEAR\r\n        case 'DDD' : // fall through to DDDD\r\n        case 'DDDD' :\r\n            if (input != null) {\r\n                config._dayOfYear = toInt(input);\r\n            }\r\n\r\n            break;\r\n        // YEAR\r\n        case 'YY' :\r\n            datePartArray[YEAR] = moment.parseTwoDigitYear(input);\r\n            break;\r\n        case 'YYYY' :\r\n        case 'YYYYY' :\r\n        case 'YYYYYY' :\r\n            datePartArray[YEAR] = toInt(input);\r\n            break;\r\n        // AM / PM\r\n        case 'a' : // fall through to A\r\n        case 'A' :\r\n            config._isPm = config._locale.isPM(input);\r\n            break;\r\n        // 24 HOUR\r\n        case 'H' : // fall through to hh\r\n        case 'HH' : // fall through to hh\r\n        case 'h' : // fall through to hh\r\n        case 'hh' :\r\n            datePartArray[HOUR] = toInt(input);\r\n            break;\r\n        // MINUTE\r\n        case 'm' : // fall through to mm\r\n        case 'mm' :\r\n            datePartArray[MINUTE] = toInt(input);\r\n            break;\r\n        // SECOND\r\n        case 's' : // fall through to ss\r\n        case 'ss' :\r\n            datePartArray[SECOND] = toInt(input);\r\n            break;\r\n        // MILLISECOND\r\n        case 'S' :\r\n        case 'SS' :\r\n        case 'SSS' :\r\n        case 'SSSS' :\r\n            datePartArray[MILLISECOND] = toInt(('0.' + input) * 1000);\r\n            break;\r\n        // UNIX TIMESTAMP WITH MS\r\n        case 'X':\r\n            config._d = new Date(parseFloat(input) * 1000);\r\n            break;\r\n        // TIMEZONE\r\n        case 'Z' : // fall through to ZZ\r\n        case 'ZZ' :\r\n            config._useUTC = true;\r\n            config._tzm = timezoneMinutesFromString(input);\r\n            break;\r\n        // WEEKDAY - human\r\n        case 'dd':\r\n        case 'ddd':\r\n        case 'dddd':\r\n            a = config._locale.weekdaysParse(input);\r\n            // if we didn't get a weekday name, mark the date as invalid\r\n            if (a != null) {\r\n                config._w = config._w || {};\r\n                config._w['d'] = a;\r\n            } else {\r\n                config._pf.invalidWeekday = input;\r\n            }\r\n            break;\r\n        // WEEK, WEEK DAY - numeric\r\n        case 'w':\r\n        case 'ww':\r\n        case 'W':\r\n        case 'WW':\r\n        case 'd':\r\n        case 'e':\r\n        case 'E':\r\n            token = token.substr(0, 1);\r\n            /* falls through */\r\n        case 'gggg':\r\n        case 'GGGG':\r\n        case 'GGGGG':\r\n            token = token.substr(0, 2);\r\n            if (input) {\r\n                config._w = config._w || {};\r\n                config._w[token] = toInt(input);\r\n            }\r\n            break;\r\n        case 'gg':\r\n        case 'GG':\r\n            config._w = config._w || {};\r\n            config._w[token] = moment.parseTwoDigitYear(input);\r\n        }\r\n    }\r\n\r\n    function dayOfYearFromWeekInfo(config) {\r\n        var w, weekYear, week, weekday, dow, doy, temp;\r\n\r\n        w = config._w;\r\n        if (w.GG != null || w.W != null || w.E != null) {\r\n            dow = 1;\r\n            doy = 4;\r\n\r\n            // TODO: We need to take the current isoWeekYear, but that depends on\r\n            // how we interpret now (local, utc, fixed offset). So create\r\n            // a now version of current config (take local/utc/offset flags, and\r\n            // create now).\r\n            weekYear = dfl(w.GG, config._a[YEAR], weekOfYear(moment(), 1, 4).year);\r\n            week = dfl(w.W, 1);\r\n            weekday = dfl(w.E, 1);\r\n        } else {\r\n            dow = config._locale._week.dow;\r\n            doy = config._locale._week.doy;\r\n\r\n            weekYear = dfl(w.gg, config._a[YEAR], weekOfYear(moment(), dow, doy).year);\r\n            week = dfl(w.w, 1);\r\n\r\n            if (w.d != null) {\r\n                // weekday -- low day numbers are considered next week\r\n                weekday = w.d;\r\n                if (weekday < dow) {\r\n                    ++week;\r\n                }\r\n            } else if (w.e != null) {\r\n                // local weekday -- counting starts from begining of week\r\n                weekday = w.e + dow;\r\n            } else {\r\n                // default to begining of week\r\n                weekday = dow;\r\n            }\r\n        }\r\n        temp = dayOfYearFromWeeks(weekYear, week, weekday, doy, dow);\r\n\r\n        config._a[YEAR] = temp.year;\r\n        config._dayOfYear = temp.dayOfYear;\r\n    }\r\n\r\n    // convert an array to a date.\r\n    // the array should mirror the parameters below\r\n    // note: all values past the year are optional and will default to the lowest possible value.\r\n    // [year, month, day , hour, minute, second, millisecond]\r\n    function dateFromConfig(config) {\r\n        var i, date, input = [], currentDate, yearToUse;\r\n\r\n        if (config._d) {\r\n            return;\r\n        }\r\n\r\n        currentDate = currentDateArray(config);\r\n\r\n        //compute day of the year from weeks and weekdays\r\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\r\n            dayOfYearFromWeekInfo(config);\r\n        }\r\n\r\n        //if the day of the year is set, figure out what it is\r\n        if (config._dayOfYear) {\r\n            yearToUse = dfl(config._a[YEAR], currentDate[YEAR]);\r\n\r\n            if (config._dayOfYear > daysInYear(yearToUse)) {\r\n                config._pf._overflowDayOfYear = true;\r\n            }\r\n\r\n            date = makeUTCDate(yearToUse, 0, config._dayOfYear);\r\n            config._a[MONTH] = date.getUTCMonth();\r\n            config._a[DATE] = date.getUTCDate();\r\n        }\r\n\r\n        // Default to current date.\r\n        // * if no year, month, day of month are given, default to today\r\n        // * if day of month is given, default month and year\r\n        // * if month is given, default only year\r\n        // * if year is given, don't default anything\r\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\r\n            config._a[i] = input[i] = currentDate[i];\r\n        }\r\n\r\n        // Zero out whatever was not defaulted, including time\r\n        for (; i < 7; i++) {\r\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\r\n        }\r\n\r\n        config._d = (config._useUTC ? makeUTCDate : makeDate).apply(null, input);\r\n        // Apply timezone offset from input. The actual zone can be changed\r\n        // with parseZone.\r\n        if (config._tzm != null) {\r\n            config._d.setUTCMinutes(config._d.getUTCMinutes() + config._tzm);\r\n        }\r\n    }\r\n\r\n    function dateFromObject(config) {\r\n        var normalizedInput;\r\n\r\n        if (config._d) {\r\n            return;\r\n        }\r\n\r\n        normalizedInput = normalizeObjectUnits(config._i);\r\n        config._a = [\r\n            normalizedInput.year,\r\n            normalizedInput.month,\r\n            normalizedInput.day,\r\n            normalizedInput.hour,\r\n            normalizedInput.minute,\r\n            normalizedInput.second,\r\n            normalizedInput.millisecond\r\n        ];\r\n\r\n        dateFromConfig(config);\r\n    }\r\n\r\n    function currentDateArray(config) {\r\n        var now = new Date();\r\n        if (config._useUTC) {\r\n            return [\r\n                now.getUTCFullYear(),\r\n                now.getUTCMonth(),\r\n                now.getUTCDate()\r\n            ];\r\n        } else {\r\n            return [now.getFullYear(), now.getMonth(), now.getDate()];\r\n        }\r\n    }\r\n\r\n    // date from string and format string\r\n    function makeDateFromStringAndFormat(config) {\r\n        if (config._f === moment.ISO_8601) {\r\n            parseISO(config);\r\n            return;\r\n        }\r\n\r\n        config._a = [];\r\n        config._pf.empty = true;\r\n\r\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\r\n        var string = '' + config._i,\r\n            i, parsedInput, tokens, token, skipped,\r\n            stringLength = string.length,\r\n            totalParsedInputLength = 0;\r\n\r\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\r\n\r\n        for (i = 0; i < tokens.length; i++) {\r\n            token = tokens[i];\r\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\r\n            if (parsedInput) {\r\n                skipped = string.substr(0, string.indexOf(parsedInput));\r\n                if (skipped.length > 0) {\r\n                    config._pf.unusedInput.push(skipped);\r\n                }\r\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\r\n                totalParsedInputLength += parsedInput.length;\r\n            }\r\n            // don't parse if it's not a known token\r\n            if (formatTokenFunctions[token]) {\r\n                if (parsedInput) {\r\n                    config._pf.empty = false;\r\n                }\r\n                else {\r\n                    config._pf.unusedTokens.push(token);\r\n                }\r\n                addTimeToArrayFromToken(token, parsedInput, config);\r\n            }\r\n            else if (config._strict && !parsedInput) {\r\n                config._pf.unusedTokens.push(token);\r\n            }\r\n        }\r\n\r\n        // add remaining unparsed input length to the string\r\n        config._pf.charsLeftOver = stringLength - totalParsedInputLength;\r\n        if (string.length > 0) {\r\n            config._pf.unusedInput.push(string);\r\n        }\r\n\r\n        // handle am pm\r\n        if (config._isPm && config._a[HOUR] < 12) {\r\n            config._a[HOUR] += 12;\r\n        }\r\n        // if is 12 am, change hours to 0\r\n        if (config._isPm === false && config._a[HOUR] === 12) {\r\n            config._a[HOUR] = 0;\r\n        }\r\n\r\n        dateFromConfig(config);\r\n        checkOverflow(config);\r\n    }\r\n\r\n    function unescapeFormat(s) {\r\n        return s.replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\r\n            return p1 || p2 || p3 || p4;\r\n        });\r\n    }\r\n\r\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\r\n    function regexpEscape(s) {\r\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n    }\r\n\r\n    // date from string and array of format strings\r\n    function makeDateFromStringAndArray(config) {\r\n        var tempConfig,\r\n            bestMoment,\r\n\r\n            scoreToBeat,\r\n            i,\r\n            currentScore;\r\n\r\n        if (config._f.length === 0) {\r\n            config._pf.invalidFormat = true;\r\n            config._d = new Date(NaN);\r\n            return;\r\n        }\r\n\r\n        for (i = 0; i < config._f.length; i++) {\r\n            currentScore = 0;\r\n            tempConfig = copyConfig({}, config);\r\n            tempConfig._pf = defaultParsingFlags();\r\n            tempConfig._f = config._f[i];\r\n            makeDateFromStringAndFormat(tempConfig);\r\n\r\n            if (!isValid(tempConfig)) {\r\n                continue;\r\n            }\r\n\r\n            // if there is any input that was not parsed add a penalty for that format\r\n            currentScore += tempConfig._pf.charsLeftOver;\r\n\r\n            //or tokens\r\n            currentScore += tempConfig._pf.unusedTokens.length * 10;\r\n\r\n            tempConfig._pf.score = currentScore;\r\n\r\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\r\n                scoreToBeat = currentScore;\r\n                bestMoment = tempConfig;\r\n            }\r\n        }\r\n\r\n        extend(config, bestMoment || tempConfig);\r\n    }\r\n\r\n    // date from iso format\r\n    function parseISO(config) {\r\n        var i, l,\r\n            string = config._i,\r\n            match = isoRegex.exec(string);\r\n\r\n        if (match) {\r\n            config._pf.iso = true;\r\n            for (i = 0, l = isoDates.length; i < l; i++) {\r\n                if (isoDates[i][1].exec(string)) {\r\n                    // match[5] should be \"T\" or undefined\r\n                    config._f = isoDates[i][0] + (match[6] || ' ');\r\n                    break;\r\n                }\r\n            }\r\n            for (i = 0, l = isoTimes.length; i < l; i++) {\r\n                if (isoTimes[i][1].exec(string)) {\r\n                    config._f += isoTimes[i][0];\r\n                    break;\r\n                }\r\n            }\r\n            if (string.match(parseTokenTimezone)) {\r\n                config._f += 'Z';\r\n            }\r\n            makeDateFromStringAndFormat(config);\r\n        } else {\r\n            config._isValid = false;\r\n        }\r\n    }\r\n\r\n    // date from iso format or fallback\r\n    function makeDateFromString(config) {\r\n        parseISO(config);\r\n        if (config._isValid === false) {\r\n            delete config._isValid;\r\n            moment.createFromInputFallback(config);\r\n        }\r\n    }\r\n\r\n    function makeDateFromInput(config) {\r\n        var input = config._i, matched;\r\n        if (input === undefined) {\r\n            config._d = new Date();\r\n        } else if (isDate(input)) {\r\n            config._d = new Date(+input);\r\n        } else if ((matched = aspNetJsonRegex.exec(input)) !== null) {\r\n            config._d = new Date(+matched[1]);\r\n        } else if (typeof input === 'string') {\r\n            makeDateFromString(config);\r\n        } else if (isArray(input)) {\r\n            config._a = input.slice(0);\r\n            dateFromConfig(config);\r\n        } else if (typeof(input) === 'object') {\r\n            dateFromObject(config);\r\n        } else if (typeof(input) === 'number') {\r\n            // from milliseconds\r\n            config._d = new Date(input);\r\n        } else {\r\n            moment.createFromInputFallback(config);\r\n        }\r\n    }\r\n\r\n    function makeDate(y, m, d, h, M, s, ms) {\r\n        //can't just apply() to create a date:\r\n        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply\r\n        var date = new Date(y, m, d, h, M, s, ms);\r\n\r\n        //the date constructor doesn't accept years < 1970\r\n        if (y < 1970) {\r\n            date.setFullYear(y);\r\n        }\r\n        return date;\r\n    }\r\n\r\n    function makeUTCDate(y) {\r\n        var date = new Date(Date.UTC.apply(null, arguments));\r\n        if (y < 1970) {\r\n            date.setUTCFullYear(y);\r\n        }\r\n        return date;\r\n    }\r\n\r\n    function parseWeekday(input, locale) {\r\n        if (typeof input === 'string') {\r\n            if (!isNaN(input)) {\r\n                input = parseInt(input, 10);\r\n            }\r\n            else {\r\n                input = locale.weekdaysParse(input);\r\n                if (typeof input !== 'number') {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n        return input;\r\n    }\r\n\r\n    /************************************\r\n        Relative Time\r\n    ************************************/\r\n\r\n\r\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\r\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\r\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\r\n    }\r\n\r\n    function relativeTime(posNegDuration, withoutSuffix, locale) {\r\n        var duration = moment.duration(posNegDuration).abs(),\r\n            seconds = round(duration.as('s')),\r\n            minutes = round(duration.as('m')),\r\n            hours = round(duration.as('h')),\r\n            days = round(duration.as('d')),\r\n            months = round(duration.as('M')),\r\n            years = round(duration.as('y')),\r\n\r\n            args = seconds < relativeTimeThresholds.s && ['s', seconds] ||\r\n                minutes === 1 && ['m'] ||\r\n                minutes < relativeTimeThresholds.m && ['mm', minutes] ||\r\n                hours === 1 && ['h'] ||\r\n                hours < relativeTimeThresholds.h && ['hh', hours] ||\r\n                days === 1 && ['d'] ||\r\n                days < relativeTimeThresholds.d && ['dd', days] ||\r\n                months === 1 && ['M'] ||\r\n                months < relativeTimeThresholds.M && ['MM', months] ||\r\n                years === 1 && ['y'] || ['yy', years];\r\n\r\n        args[2] = withoutSuffix;\r\n        args[3] = +posNegDuration > 0;\r\n        args[4] = locale;\r\n        return substituteTimeAgo.apply({}, args);\r\n    }\r\n\r\n\r\n    /************************************\r\n        Week of Year\r\n    ************************************/\r\n\r\n\r\n    // firstDayOfWeek       0 = sun, 6 = sat\r\n    //                      the day of the week that starts the week\r\n    //                      (usually sunday or monday)\r\n    // firstDayOfWeekOfYear 0 = sun, 6 = sat\r\n    //                      the first week is the week that contains the first\r\n    //                      of this day of the week\r\n    //                      (eg. ISO weeks use thursday (4))\r\n    function weekOfYear(mom, firstDayOfWeek, firstDayOfWeekOfYear) {\r\n        var end = firstDayOfWeekOfYear - firstDayOfWeek,\r\n            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),\r\n            adjustedMoment;\r\n\r\n\r\n        if (daysToDayOfWeek > end) {\r\n            daysToDayOfWeek -= 7;\r\n        }\r\n\r\n        if (daysToDayOfWeek < end - 7) {\r\n            daysToDayOfWeek += 7;\r\n        }\r\n\r\n        adjustedMoment = moment(mom).add(daysToDayOfWeek, 'd');\r\n        return {\r\n            week: Math.ceil(adjustedMoment.dayOfYear() / 7),\r\n            year: adjustedMoment.year()\r\n        };\r\n    }\r\n\r\n    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\r\n    function dayOfYearFromWeeks(year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek) {\r\n        var d = makeUTCDate(year, 0, 1).getUTCDay(), daysToAdd, dayOfYear;\r\n\r\n        d = d === 0 ? 7 : d;\r\n        weekday = weekday != null ? weekday : firstDayOfWeek;\r\n        daysToAdd = firstDayOfWeek - d + (d > firstDayOfWeekOfYear ? 7 : 0) - (d < firstDayOfWeek ? 7 : 0);\r\n        dayOfYear = 7 * (week - 1) + (weekday - firstDayOfWeek) + daysToAdd + 1;\r\n\r\n        return {\r\n            year: dayOfYear > 0 ? year : year - 1,\r\n            dayOfYear: dayOfYear > 0 ?  dayOfYear : daysInYear(year - 1) + dayOfYear\r\n        };\r\n    }\r\n\r\n    /************************************\r\n        Top Level Functions\r\n    ************************************/\r\n\r\n    function makeMoment(config) {\r\n        var input = config._i,\r\n            format = config._f;\r\n\r\n        config._locale = config._locale || moment.localeData(config._l);\r\n\r\n        if (input === null || (format === undefined && input === '')) {\r\n            return moment.invalid({nullInput: true});\r\n        }\r\n\r\n        if (typeof input === 'string') {\r\n            config._i = input = config._locale.preparse(input);\r\n        }\r\n\r\n        if (moment.isMoment(input)) {\r\n            return new Moment(input, true);\r\n        } else if (format) {\r\n            if (isArray(format)) {\r\n                makeDateFromStringAndArray(config);\r\n            } else {\r\n                makeDateFromStringAndFormat(config);\r\n            }\r\n        } else {\r\n            makeDateFromInput(config);\r\n        }\r\n\r\n        return new Moment(config);\r\n    }\r\n\r\n    moment = function (input, format, locale, strict) {\r\n        var c;\r\n\r\n        if (typeof(locale) === \"boolean\") {\r\n            strict = locale;\r\n            locale = undefined;\r\n        }\r\n        // object construction must be done this way.\r\n        // https://github.com/moment/moment/issues/1423\r\n        c = {};\r\n        c._isAMomentObject = true;\r\n        c._i = input;\r\n        c._f = format;\r\n        c._l = locale;\r\n        c._strict = strict;\r\n        c._isUTC = false;\r\n        c._pf = defaultParsingFlags();\r\n\r\n        return makeMoment(c);\r\n    };\r\n\r\n    moment.suppressDeprecationWarnings = false;\r\n\r\n    moment.createFromInputFallback = deprecate(\r\n        'moment construction falls back to js Date. This is ' +\r\n        'discouraged and will be removed in upcoming major ' +\r\n        'release. Please refer to ' +\r\n        'https://github.com/moment/moment/issues/1407 for more info.',\r\n        function (config) {\r\n            config._d = new Date(config._i);\r\n        }\r\n    );\r\n\r\n    // Pick a moment m from moments so that m[fn](other) is true for all\r\n    // other. This relies on the function fn to be transitive.\r\n    //\r\n    // moments should either be an array of moment objects or an array, whose\r\n    // first element is an array of moment objects.\r\n    function pickBy(fn, moments) {\r\n        var res, i;\r\n        if (moments.length === 1 && isArray(moments[0])) {\r\n            moments = moments[0];\r\n        }\r\n        if (!moments.length) {\r\n            return moment();\r\n        }\r\n        res = moments[0];\r\n        for (i = 1; i < moments.length; ++i) {\r\n            if (moments[i][fn](res)) {\r\n                res = moments[i];\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    moment.min = function () {\r\n        var args = [].slice.call(arguments, 0);\r\n\r\n        return pickBy('isBefore', args);\r\n    };\r\n\r\n    moment.max = function () {\r\n        var args = [].slice.call(arguments, 0);\r\n\r\n        return pickBy('isAfter', args);\r\n    };\r\n\r\n    // creating with utc\r\n    moment.utc = function (input, format, locale, strict) {\r\n        var c;\r\n\r\n        if (typeof(locale) === \"boolean\") {\r\n            strict = locale;\r\n            locale = undefined;\r\n        }\r\n        // object construction must be done this way.\r\n        // https://github.com/moment/moment/issues/1423\r\n        c = {};\r\n        c._isAMomentObject = true;\r\n        c._useUTC = true;\r\n        c._isUTC = true;\r\n        c._l = locale;\r\n        c._i = input;\r\n        c._f = format;\r\n        c._strict = strict;\r\n        c._pf = defaultParsingFlags();\r\n\r\n        return makeMoment(c).utc();\r\n    };\r\n\r\n    // creating with unix timestamp (in seconds)\r\n    moment.unix = function (input) {\r\n        return moment(input * 1000);\r\n    };\r\n\r\n    // duration\r\n    moment.duration = function (input, key) {\r\n        var duration = input,\r\n            // matching against regexp is expensive, do it on demand\r\n            match = null,\r\n            sign,\r\n            ret,\r\n            parseIso,\r\n            diffRes;\r\n\r\n        if (moment.isDuration(input)) {\r\n            duration = {\r\n                ms: input._milliseconds,\r\n                d: input._days,\r\n                M: input._months\r\n            };\r\n        } else if (typeof input === 'number') {\r\n            duration = {};\r\n            if (key) {\r\n                duration[key] = input;\r\n            } else {\r\n                duration.milliseconds = input;\r\n            }\r\n        } else if (!!(match = aspNetTimeSpanJsonRegex.exec(input))) {\r\n            sign = (match[1] === '-') ? -1 : 1;\r\n            duration = {\r\n                y: 0,\r\n                d: toInt(match[DATE]) * sign,\r\n                h: toInt(match[HOUR]) * sign,\r\n                m: toInt(match[MINUTE]) * sign,\r\n                s: toInt(match[SECOND]) * sign,\r\n                ms: toInt(match[MILLISECOND]) * sign\r\n            };\r\n        } else if (!!(match = isoDurationRegex.exec(input))) {\r\n            sign = (match[1] === '-') ? -1 : 1;\r\n            parseIso = function (inp) {\r\n                // We'd normally use ~~inp for this, but unfortunately it also\r\n                // converts floats to ints.\r\n                // inp may be undefined, so careful calling replace on it.\r\n                var res = inp && parseFloat(inp.replace(',', '.'));\r\n                // apply sign while we're at it\r\n                return (isNaN(res) ? 0 : res) * sign;\r\n            };\r\n            duration = {\r\n                y: parseIso(match[2]),\r\n                M: parseIso(match[3]),\r\n                d: parseIso(match[4]),\r\n                h: parseIso(match[5]),\r\n                m: parseIso(match[6]),\r\n                s: parseIso(match[7]),\r\n                w: parseIso(match[8])\r\n            };\r\n        } else if (typeof duration === 'object' &&\r\n                ('from' in duration || 'to' in duration)) {\r\n            diffRes = momentsDifference(moment(duration.from), moment(duration.to));\r\n\r\n            duration = {};\r\n            duration.ms = diffRes.milliseconds;\r\n            duration.M = diffRes.months;\r\n        }\r\n\r\n        ret = new Duration(duration);\r\n\r\n        if (moment.isDuration(input) && input.hasOwnProperty('_locale')) {\r\n            ret._locale = input._locale;\r\n        }\r\n\r\n        return ret;\r\n    };\r\n\r\n    // version number\r\n    moment.version = VERSION;\r\n\r\n    // default format\r\n    moment.defaultFormat = isoFormat;\r\n\r\n    // constant that refers to the ISO standard\r\n    moment.ISO_8601 = function () {};\r\n\r\n    // Plugins that add properties should also add the key here (null value),\r\n    // so we can properly clone ourselves.\r\n    moment.momentProperties = momentProperties;\r\n\r\n    // This function will be called whenever a moment is mutated.\r\n    // It is intended to keep the offset in sync with the timezone.\r\n    moment.updateOffset = function () {};\r\n\r\n    // This function allows you to set a threshold for relative time strings\r\n    moment.relativeTimeThreshold = function (threshold, limit) {\r\n        if (relativeTimeThresholds[threshold] === undefined) {\r\n            return false;\r\n        }\r\n        if (limit === undefined) {\r\n            return relativeTimeThresholds[threshold];\r\n        }\r\n        relativeTimeThresholds[threshold] = limit;\r\n        return true;\r\n    };\r\n\r\n    moment.lang = deprecate(\r\n        \"moment.lang is deprecated. Use moment.locale instead.\",\r\n        function (key, value) {\r\n            return moment.locale(key, value);\r\n        }\r\n    );\r\n\r\n    // This function will load locale and then set the global locale.  If\r\n    // no arguments are passed in, it will simply return the current global\r\n    // locale key.\r\n    moment.locale = function (key, values) {\r\n        var data;\r\n        if (key) {\r\n            if (typeof(values) !== \"undefined\") {\r\n                data = moment.defineLocale(key, values);\r\n            }\r\n            else {\r\n                data = moment.localeData(key);\r\n            }\r\n\r\n            if (data) {\r\n                moment.duration._locale = moment._locale = data;\r\n            }\r\n        }\r\n\r\n        return moment._locale._abbr;\r\n    };\r\n\r\n    moment.defineLocale = function (name, values) {\r\n        if (values !== null) {\r\n            values.abbr = name;\r\n            if (!locales[name]) {\r\n                locales[name] = new Locale();\r\n            }\r\n            locales[name].set(values);\r\n\r\n            // backwards compat for now: also set the locale\r\n            moment.locale(name);\r\n\r\n            return locales[name];\r\n        } else {\r\n            // useful for testing\r\n            delete locales[name];\r\n            return null;\r\n        }\r\n    };\r\n\r\n    moment.langData = deprecate(\r\n        \"moment.langData is deprecated. Use moment.localeData instead.\",\r\n        function (key) {\r\n            return moment.localeData(key);\r\n        }\r\n    );\r\n\r\n    // returns locale data\r\n    moment.localeData = function (key) {\r\n        var locale;\r\n\r\n        if (key && key._locale && key._locale._abbr) {\r\n            key = key._locale._abbr;\r\n        }\r\n\r\n        if (!key) {\r\n            return moment._locale;\r\n        }\r\n\r\n        if (!isArray(key)) {\r\n            //short-circuit everything else\r\n            locale = loadLocale(key);\r\n            if (locale) {\r\n                return locale;\r\n            }\r\n            key = [key];\r\n        }\r\n\r\n        return chooseLocale(key);\r\n    };\r\n\r\n    // compare moment object\r\n    moment.isMoment = function (obj) {\r\n        return obj instanceof Moment ||\r\n            (obj != null &&  obj.hasOwnProperty('_isAMomentObject'));\r\n    };\r\n\r\n    // for typechecking Duration objects\r\n    moment.isDuration = function (obj) {\r\n        return obj instanceof Duration;\r\n    };\r\n\r\n    for (i = lists.length - 1; i >= 0; --i) {\r\n        makeList(lists[i]);\r\n    }\r\n\r\n    moment.normalizeUnits = function (units) {\r\n        return normalizeUnits(units);\r\n    };\r\n\r\n    moment.invalid = function (flags) {\r\n        var m = moment.utc(NaN);\r\n        if (flags != null) {\r\n            extend(m._pf, flags);\r\n        }\r\n        else {\r\n            m._pf.userInvalidated = true;\r\n        }\r\n\r\n        return m;\r\n    };\r\n\r\n    moment.parseZone = function () {\r\n        return moment.apply(null, arguments).parseZone();\r\n    };\r\n\r\n    moment.parseTwoDigitYear = function (input) {\r\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\r\n    };\r\n\r\n    /************************************\r\n        Moment Prototype\r\n    ************************************/\r\n\r\n\r\n    extend(moment.fn = Moment.prototype, {\r\n\r\n        clone : function () {\r\n            return moment(this);\r\n        },\r\n\r\n        valueOf : function () {\r\n            return +this._d + ((this._offset || 0) * 60000);\r\n        },\r\n\r\n        unix : function () {\r\n            return Math.floor(+this / 1000);\r\n        },\r\n\r\n        toString : function () {\r\n            return this.clone().locale('en').format(\"ddd MMM DD YYYY HH:mm:ss [GMT]ZZ\");\r\n        },\r\n\r\n        toDate : function () {\r\n            return this._offset ? new Date(+this) : this._d;\r\n        },\r\n\r\n        toISOString : function () {\r\n            var m = moment(this).utc();\r\n            if (0 < m.year() && m.year() <= 9999) {\r\n                return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\r\n            } else {\r\n                return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\r\n            }\r\n        },\r\n\r\n        toArray : function () {\r\n            var m = this;\r\n            return [\r\n                m.year(),\r\n                m.month(),\r\n                m.date(),\r\n                m.hours(),\r\n                m.minutes(),\r\n                m.seconds(),\r\n                m.milliseconds()\r\n            ];\r\n        },\r\n\r\n        isValid : function () {\r\n            return isValid(this);\r\n        },\r\n\r\n        isDSTShifted : function () {\r\n            if (this._a) {\r\n                return this.isValid() && compareArrays(this._a, (this._isUTC ? moment.utc(this._a) : moment(this._a)).toArray()) > 0;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        parsingFlags : function () {\r\n            return extend({}, this._pf);\r\n        },\r\n\r\n        invalidAt: function () {\r\n            return this._pf.overflow;\r\n        },\r\n\r\n        utc : function (keepLocalTime) {\r\n            return this.zone(0, keepLocalTime);\r\n        },\r\n\r\n        local : function (keepLocalTime) {\r\n            if (this._isUTC) {\r\n                this.zone(0, keepLocalTime);\r\n                this._isUTC = false;\r\n\r\n                if (keepLocalTime) {\r\n                    this.add(this._d.getTimezoneOffset(), 'm');\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n\r\n        format : function (inputString) {\r\n            var output = formatMoment(this, inputString || moment.defaultFormat);\r\n            return this.localeData().postformat(output);\r\n        },\r\n\r\n        add : createAdder(1, 'add'),\r\n\r\n        subtract : createAdder(-1, 'subtract'),\r\n\r\n        diff : function (input, units, asFloat) {\r\n            var that = makeAs(input, this),\r\n                zoneDiff = (this.zone() - that.zone()) * 6e4,\r\n                diff, output;\r\n\r\n            units = normalizeUnits(units);\r\n\r\n            if (units === 'year' || units === 'month') {\r\n                // average number of days in the months in the given dates\r\n                diff = (this.daysInMonth() + that.daysInMonth()) * 432e5; // 24 * 60 * 60 * 1000 / 2\r\n                // difference in months\r\n                output = ((this.year() - that.year()) * 12) + (this.month() - that.month());\r\n                // adjust by taking difference in days, average number of days\r\n                // and dst in the given months.\r\n                output += ((this - moment(this).startOf('month')) -\r\n                        (that - moment(that).startOf('month'))) / diff;\r\n                // same as above but with zones, to negate all dst\r\n                output -= ((this.zone() - moment(this).startOf('month').zone()) -\r\n                        (that.zone() - moment(that).startOf('month').zone())) * 6e4 / diff;\r\n                if (units === 'year') {\r\n                    output = output / 12;\r\n                }\r\n            } else {\r\n                diff = (this - that);\r\n                output = units === 'second' ? diff / 1e3 : // 1000\r\n                    units === 'minute' ? diff / 6e4 : // 1000 * 60\r\n                    units === 'hour' ? diff / 36e5 : // 1000 * 60 * 60\r\n                    units === 'day' ? (diff - zoneDiff) / 864e5 : // 1000 * 60 * 60 * 24, negate dst\r\n                    units === 'week' ? (diff - zoneDiff) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst\r\n                    diff;\r\n            }\r\n            return asFloat ? output : absRound(output);\r\n        },\r\n\r\n        from : function (time, withoutSuffix) {\r\n            return moment.duration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\r\n        },\r\n\r\n        fromNow : function (withoutSuffix) {\r\n            return this.from(moment(), withoutSuffix);\r\n        },\r\n\r\n        calendar : function (time) {\r\n            // We want to compare the start of today, vs this.\r\n            // Getting start-of-today depends on whether we're zone'd or not.\r\n            var now = time || moment(),\r\n                sod = makeAs(now, this).startOf('day'),\r\n                diff = this.diff(sod, 'days', true),\r\n                format = diff < -6 ? 'sameElse' :\r\n                    diff < -1 ? 'lastWeek' :\r\n                    diff < 0 ? 'lastDay' :\r\n                    diff < 1 ? 'sameDay' :\r\n                    diff < 2 ? 'nextDay' :\r\n                    diff < 7 ? 'nextWeek' : 'sameElse';\r\n            return this.format(this.localeData().calendar(format, this));\r\n        },\r\n\r\n        isLeapYear : function () {\r\n            return isLeapYear(this.year());\r\n        },\r\n\r\n        isDST : function () {\r\n            return (this.zone() < this.clone().month(0).zone() ||\r\n                this.zone() < this.clone().month(5).zone());\r\n        },\r\n\r\n        day : function (input) {\r\n            var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\r\n            if (input != null) {\r\n                input = parseWeekday(input, this.localeData());\r\n                return this.add(input - day, 'd');\r\n            } else {\r\n                return day;\r\n            }\r\n        },\r\n\r\n        month : makeAccessor('Month', true),\r\n\r\n        startOf : function (units) {\r\n            units = normalizeUnits(units);\r\n            // the following switch intentionally omits break keywords\r\n            // to utilize falling through the cases.\r\n            switch (units) {\r\n            case 'year':\r\n                this.month(0);\r\n                /* falls through */\r\n            case 'quarter':\r\n            case 'month':\r\n                this.date(1);\r\n                /* falls through */\r\n            case 'week':\r\n            case 'isoWeek':\r\n            case 'day':\r\n                this.hours(0);\r\n                /* falls through */\r\n            case 'hour':\r\n                this.minutes(0);\r\n                /* falls through */\r\n            case 'minute':\r\n                this.seconds(0);\r\n                /* falls through */\r\n            case 'second':\r\n                this.milliseconds(0);\r\n                /* falls through */\r\n            }\r\n\r\n            // weeks are a special case\r\n            if (units === 'week') {\r\n                this.weekday(0);\r\n            } else if (units === 'isoWeek') {\r\n                this.isoWeekday(1);\r\n            }\r\n\r\n            // quarters are also special\r\n            if (units === 'quarter') {\r\n                this.month(Math.floor(this.month() / 3) * 3);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        endOf: function (units) {\r\n            units = normalizeUnits(units);\r\n            return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\r\n        },\r\n\r\n        isAfter: function (input, units) {\r\n            units = typeof units !== 'undefined' ? units : 'millisecond';\r\n            return +this.clone().startOf(units) > +moment(input).startOf(units);\r\n        },\r\n\r\n        isBefore: function (input, units) {\r\n            units = typeof units !== 'undefined' ? units : 'millisecond';\r\n            return +this.clone().startOf(units) < +moment(input).startOf(units);\r\n        },\r\n\r\n        isSame: function (input, units) {\r\n            units = units || 'ms';\r\n            return +this.clone().startOf(units) === +makeAs(input, this).startOf(units);\r\n        },\r\n\r\n        min: deprecate(\r\n                 'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',\r\n                 function (other) {\r\n                     other = moment.apply(null, arguments);\r\n                     return other < this ? this : other;\r\n                 }\r\n         ),\r\n\r\n        max: deprecate(\r\n                'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',\r\n                function (other) {\r\n                    other = moment.apply(null, arguments);\r\n                    return other > this ? this : other;\r\n                }\r\n        ),\r\n\r\n        // keepLocalTime = true means only change the timezone, without\r\n        // affecting the local hour. So 5:31:26 +0300 --[zone(2, true)]-->\r\n        // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist int zone\r\n        // +0200, so we adjust the time as needed, to be valid.\r\n        //\r\n        // Keeping the time actually adds/subtracts (one hour)\r\n        // from the actual represented time. That is why we call updateOffset\r\n        // a second time. In case it wants us to change the offset again\r\n        // _changeInProgress == true case, then we have to adjust, because\r\n        // there is no such time in the given timezone.\r\n        zone : function (input, keepLocalTime) {\r\n            var offset = this._offset || 0,\r\n                localAdjust;\r\n            if (input != null) {\r\n                if (typeof input === 'string') {\r\n                    input = timezoneMinutesFromString(input);\r\n                }\r\n                if (Math.abs(input) < 16) {\r\n                    input = input * 60;\r\n                }\r\n                if (!this._isUTC && keepLocalTime) {\r\n                    localAdjust = this._d.getTimezoneOffset();\r\n                }\r\n                this._offset = input;\r\n                this._isUTC = true;\r\n                if (localAdjust != null) {\r\n                    this.subtract(localAdjust, 'm');\r\n                }\r\n                if (offset !== input) {\r\n                    if (!keepLocalTime || this._changeInProgress) {\r\n                        addOrSubtractDurationFromMoment(this,\r\n                                moment.duration(offset - input, 'm'), 1, false);\r\n                    } else if (!this._changeInProgress) {\r\n                        this._changeInProgress = true;\r\n                        moment.updateOffset(this, true);\r\n                        this._changeInProgress = null;\r\n                    }\r\n                }\r\n            } else {\r\n                return this._isUTC ? offset : this._d.getTimezoneOffset();\r\n            }\r\n            return this;\r\n        },\r\n\r\n        zoneAbbr : function () {\r\n            return this._isUTC ? 'UTC' : '';\r\n        },\r\n\r\n        zoneName : function () {\r\n            return this._isUTC ? 'Coordinated Universal Time' : '';\r\n        },\r\n\r\n        parseZone : function () {\r\n            if (this._tzm) {\r\n                this.zone(this._tzm);\r\n            } else if (typeof this._i === 'string') {\r\n                this.zone(this._i);\r\n            }\r\n            return this;\r\n        },\r\n\r\n        hasAlignedHourOffset : function (input) {\r\n            if (!input) {\r\n                input = 0;\r\n            }\r\n            else {\r\n                input = moment(input).zone();\r\n            }\r\n\r\n            return (this.zone() - input) % 60 === 0;\r\n        },\r\n\r\n        daysInMonth : function () {\r\n            return daysInMonth(this.year(), this.month());\r\n        },\r\n\r\n        dayOfYear : function (input) {\r\n            var dayOfYear = round((moment(this).startOf('day') - moment(this).startOf('year')) / 864e5) + 1;\r\n            return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\r\n        },\r\n\r\n        quarter : function (input) {\r\n            return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\r\n        },\r\n\r\n        weekYear : function (input) {\r\n            var year = weekOfYear(this, this.localeData()._week.dow, this.localeData()._week.doy).year;\r\n            return input == null ? year : this.add((input - year), 'y');\r\n        },\r\n\r\n        isoWeekYear : function (input) {\r\n            var year = weekOfYear(this, 1, 4).year;\r\n            return input == null ? year : this.add((input - year), 'y');\r\n        },\r\n\r\n        week : function (input) {\r\n            var week = this.localeData().week(this);\r\n            return input == null ? week : this.add((input - week) * 7, 'd');\r\n        },\r\n\r\n        isoWeek : function (input) {\r\n            var week = weekOfYear(this, 1, 4).week;\r\n            return input == null ? week : this.add((input - week) * 7, 'd');\r\n        },\r\n\r\n        weekday : function (input) {\r\n            var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\r\n            return input == null ? weekday : this.add(input - weekday, 'd');\r\n        },\r\n\r\n        isoWeekday : function (input) {\r\n            // behaves the same as moment#day except\r\n            // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\r\n            // as a setter, sunday should belong to the previous week.\r\n            return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);\r\n        },\r\n\r\n        isoWeeksInYear : function () {\r\n            return weeksInYear(this.year(), 1, 4);\r\n        },\r\n\r\n        weeksInYear : function () {\r\n            var weekInfo = this.localeData()._week;\r\n            return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\r\n        },\r\n\r\n        get : function (units) {\r\n            units = normalizeUnits(units);\r\n            return this[units]();\r\n        },\r\n\r\n        set : function (units, value) {\r\n            units = normalizeUnits(units);\r\n            if (typeof this[units] === 'function') {\r\n                this[units](value);\r\n            }\r\n            return this;\r\n        },\r\n\r\n        // If passed a locale key, it will set the locale for this\r\n        // instance.  Otherwise, it will return the locale configuration\r\n        // variables for this instance.\r\n        locale : function (key) {\r\n            if (key === undefined) {\r\n                return this._locale._abbr;\r\n            } else {\r\n                this._locale = moment.localeData(key);\r\n                return this;\r\n            }\r\n        },\r\n\r\n        lang : deprecate(\r\n            \"moment().lang() is deprecated. Use moment().localeData() instead.\",\r\n            function (key) {\r\n                if (key === undefined) {\r\n                    return this.localeData();\r\n                } else {\r\n                    this._locale = moment.localeData(key);\r\n                    return this;\r\n                }\r\n            }\r\n        ),\r\n\r\n        localeData : function () {\r\n            return this._locale;\r\n        }\r\n    });\r\n\r\n    function rawMonthSetter(mom, value) {\r\n        var dayOfMonth;\r\n\r\n        // TODO: Move this out of here!\r\n        if (typeof value === 'string') {\r\n            value = mom.localeData().monthsParse(value);\r\n            // TODO: Another silent failure?\r\n            if (typeof value !== 'number') {\r\n                return mom;\r\n            }\r\n        }\r\n\r\n        dayOfMonth = Math.min(mom.date(),\r\n                daysInMonth(mom.year(), value));\r\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\r\n        return mom;\r\n    }\r\n\r\n    function rawGetter(mom, unit) {\r\n        return mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]();\r\n    }\r\n\r\n    function rawSetter(mom, unit, value) {\r\n        if (unit === 'Month') {\r\n            return rawMonthSetter(mom, value);\r\n        } else {\r\n            return mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\r\n        }\r\n    }\r\n\r\n    function makeAccessor(unit, keepTime) {\r\n        return function (value) {\r\n            if (value != null) {\r\n                rawSetter(this, unit, value);\r\n                moment.updateOffset(this, keepTime);\r\n                return this;\r\n            } else {\r\n                return rawGetter(this, unit);\r\n            }\r\n        };\r\n    }\r\n\r\n    moment.fn.millisecond = moment.fn.milliseconds = makeAccessor('Milliseconds', false);\r\n    moment.fn.second = moment.fn.seconds = makeAccessor('Seconds', false);\r\n    moment.fn.minute = moment.fn.minutes = makeAccessor('Minutes', false);\r\n    // Setting the hour should keep the time, because the user explicitly\r\n    // specified which hour he wants. So trying to maintain the same hour (in\r\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\r\n    // this rule.\r\n    moment.fn.hour = moment.fn.hours = makeAccessor('Hours', true);\r\n    // moment.fn.month is defined separately\r\n    moment.fn.date = makeAccessor('Date', true);\r\n    moment.fn.dates = deprecate('dates accessor is deprecated. Use date instead.', makeAccessor('Date', true));\r\n    moment.fn.year = makeAccessor('FullYear', true);\r\n    moment.fn.years = deprecate('years accessor is deprecated. Use year instead.', makeAccessor('FullYear', true));\r\n\r\n    // add plural methods\r\n    moment.fn.days = moment.fn.day;\r\n    moment.fn.months = moment.fn.month;\r\n    moment.fn.weeks = moment.fn.week;\r\n    moment.fn.isoWeeks = moment.fn.isoWeek;\r\n    moment.fn.quarters = moment.fn.quarter;\r\n\r\n    // add aliased format methods\r\n    moment.fn.toJSON = moment.fn.toISOString;\r\n\r\n    /************************************\r\n        Duration Prototype\r\n    ************************************/\r\n\r\n\r\n    function daysToYears (days) {\r\n        // 400 years have 146097 days (taking into account leap year rules)\r\n        return days * 400 / 146097;\r\n    }\r\n\r\n    function yearsToDays (years) {\r\n        // years * 365 + absRound(years / 4) -\r\n        //     absRound(years / 100) + absRound(years / 400);\r\n        return years * 146097 / 400;\r\n    }\r\n\r\n    extend(moment.duration.fn = Duration.prototype, {\r\n\r\n        _bubble : function () {\r\n            var milliseconds = this._milliseconds,\r\n                days = this._days,\r\n                months = this._months,\r\n                data = this._data,\r\n                seconds, minutes, hours, years = 0;\r\n\r\n            // The following code bubbles up values, see the tests for\r\n            // examples of what that means.\r\n            data.milliseconds = milliseconds % 1000;\r\n\r\n            seconds = absRound(milliseconds / 1000);\r\n            data.seconds = seconds % 60;\r\n\r\n            minutes = absRound(seconds / 60);\r\n            data.minutes = minutes % 60;\r\n\r\n            hours = absRound(minutes / 60);\r\n            data.hours = hours % 24;\r\n\r\n            days += absRound(hours / 24);\r\n\r\n            // Accurately convert days to years, assume start from year 0.\r\n            years = absRound(daysToYears(days));\r\n            days -= absRound(yearsToDays(years));\r\n\r\n            // 30 days to a month\r\n            // TODO (iskren): Use anchor date (like 1st Jan) to compute this.\r\n            months += absRound(days / 30);\r\n            days %= 30;\r\n\r\n            // 12 months -> 1 year\r\n            years += absRound(months / 12);\r\n            months %= 12;\r\n\r\n            data.days = days;\r\n            data.months = months;\r\n            data.years = years;\r\n        },\r\n\r\n        abs : function () {\r\n            this._milliseconds = Math.abs(this._milliseconds);\r\n            this._days = Math.abs(this._days);\r\n            this._months = Math.abs(this._months);\r\n\r\n            this._data.milliseconds = Math.abs(this._data.milliseconds);\r\n            this._data.seconds = Math.abs(this._data.seconds);\r\n            this._data.minutes = Math.abs(this._data.minutes);\r\n            this._data.hours = Math.abs(this._data.hours);\r\n            this._data.months = Math.abs(this._data.months);\r\n            this._data.years = Math.abs(this._data.years);\r\n\r\n            return this;\r\n        },\r\n\r\n        weeks : function () {\r\n            return absRound(this.days() / 7);\r\n        },\r\n\r\n        valueOf : function () {\r\n            return this._milliseconds +\r\n              this._days * 864e5 +\r\n              (this._months % 12) * 2592e6 +\r\n              toInt(this._months / 12) * 31536e6;\r\n        },\r\n\r\n        humanize : function (withSuffix) {\r\n            var output = relativeTime(this, !withSuffix, this.localeData());\r\n\r\n            if (withSuffix) {\r\n                output = this.localeData().pastFuture(+this, output);\r\n            }\r\n\r\n            return this.localeData().postformat(output);\r\n        },\r\n\r\n        add : function (input, val) {\r\n            // supports only 2.0-style add(1, 's') or add(moment)\r\n            var dur = moment.duration(input, val);\r\n\r\n            this._milliseconds += dur._milliseconds;\r\n            this._days += dur._days;\r\n            this._months += dur._months;\r\n\r\n            this._bubble();\r\n\r\n            return this;\r\n        },\r\n\r\n        subtract : function (input, val) {\r\n            var dur = moment.duration(input, val);\r\n\r\n            this._milliseconds -= dur._milliseconds;\r\n            this._days -= dur._days;\r\n            this._months -= dur._months;\r\n\r\n            this._bubble();\r\n\r\n            return this;\r\n        },\r\n\r\n        get : function (units) {\r\n            units = normalizeUnits(units);\r\n            return this[units.toLowerCase() + 's']();\r\n        },\r\n\r\n        as : function (units) {\r\n            var days, months;\r\n            units = normalizeUnits(units);\r\n\r\n            days = this._days + this._milliseconds / 864e5;\r\n            if (units === 'month' || units === 'year') {\r\n                months = this._months + daysToYears(days) * 12;\r\n                return units === 'month' ? months : months / 12;\r\n            } else {\r\n                days += yearsToDays(this._months / 12);\r\n                switch (units) {\r\n                    case 'week': return days / 7;\r\n                    case 'day': return days;\r\n                    case 'hour': return days * 24;\r\n                    case 'minute': return days * 24 * 60;\r\n                    case 'second': return days * 24 * 60 * 60;\r\n                    case 'millisecond': return days * 24 * 60 * 60 * 1000;\r\n                    default: throw new Error('Unknown unit ' + units);\r\n                }\r\n            }\r\n        },\r\n\r\n        lang : moment.fn.lang,\r\n        locale : moment.fn.locale,\r\n\r\n        toIsoString : deprecate(\r\n            \"toIsoString() is deprecated. Please use toISOString() instead \" +\r\n            \"(notice the capitals)\",\r\n            function () {\r\n                return this.toISOString();\r\n            }\r\n        ),\r\n\r\n        toISOString : function () {\r\n            // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\r\n            var years = Math.abs(this.years()),\r\n                months = Math.abs(this.months()),\r\n                days = Math.abs(this.days()),\r\n                hours = Math.abs(this.hours()),\r\n                minutes = Math.abs(this.minutes()),\r\n                seconds = Math.abs(this.seconds() + this.milliseconds() / 1000);\r\n\r\n            if (!this.asSeconds()) {\r\n                // this is the same as C#'s (Noda) and python (isodate)...\r\n                // but not other JS (goog.date)\r\n                return 'P0D';\r\n            }\r\n\r\n            return (this.asSeconds() < 0 ? '-' : '') +\r\n                'P' +\r\n                (years ? years + 'Y' : '') +\r\n                (months ? months + 'M' : '') +\r\n                (days ? days + 'D' : '') +\r\n                ((hours || minutes || seconds) ? 'T' : '') +\r\n                (hours ? hours + 'H' : '') +\r\n                (minutes ? minutes + 'M' : '') +\r\n                (seconds ? seconds + 'S' : '');\r\n        },\r\n\r\n        localeData : function () {\r\n            return this._locale;\r\n        }\r\n    });\r\n\r\n    function makeDurationGetter(name) {\r\n        moment.duration.fn[name] = function () {\r\n            return this._data[name];\r\n        };\r\n    }\r\n\r\n    for (i in unitMillisecondFactors) {\r\n        if (unitMillisecondFactors.hasOwnProperty(i)) {\r\n            makeDurationGetter(i.toLowerCase());\r\n        }\r\n    }\r\n\r\n    moment.duration.fn.asMilliseconds = function () {\r\n        return this.as('ms');\r\n    };\r\n    moment.duration.fn.asSeconds = function () {\r\n        return this.as('s');\r\n    };\r\n    moment.duration.fn.asMinutes = function () {\r\n        return this.as('m');\r\n    };\r\n    moment.duration.fn.asHours = function () {\r\n        return this.as('h');\r\n    };\r\n    moment.duration.fn.asDays = function () {\r\n        return this.as('d');\r\n    };\r\n    moment.duration.fn.asWeeks = function () {\r\n        return this.as('weeks');\r\n    };\r\n    moment.duration.fn.asMonths = function () {\r\n        return this.as('M');\r\n    };\r\n    moment.duration.fn.asYears = function () {\r\n        return this.as('y');\r\n    };\r\n\r\n    /************************************\r\n        Default Locale\r\n    ************************************/\r\n\r\n\r\n    // Set default locale, other locale will inherit from English.\r\n    moment.locale('en', {\r\n        ordinal : function (number) {\r\n            var b = number % 10,\r\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\r\n                (b === 1) ? 'st' :\r\n                (b === 2) ? 'nd' :\r\n                (b === 3) ? 'rd' : 'th';\r\n            return number + output;\r\n        }\r\n    });\r\n\r\n    /* EMBED_LOCALES */\r\n\r\n    /************************************\r\n        Exposing Moment\r\n    ************************************/\r\n\r\n    function makeGlobal(shouldDeprecate) {\r\n        /*global ender:false */\r\n        if (typeof ender !== 'undefined') {\r\n            return;\r\n        }\r\n        oldGlobalMoment = globalScope.moment;\r\n        if (shouldDeprecate) {\r\n            globalScope.moment = deprecate(\r\n                    'Accessing Moment through the global scope is ' +\r\n                    'deprecated, and will be removed in an upcoming ' +\r\n                    'release.',\r\n                    moment);\r\n        } else {\r\n            globalScope.moment = moment;\r\n        }\r\n    }\r\n\r\n    // CommonJS module is defined\r\n    if (hasModule) {\r\n        module.exports = moment;\r\n    } else if (typeof define === 'function' && define.amd) {\r\n        define('moment', function (require, exports, module) {\r\n            if (module.config && module.config() && module.config().noGlobal === true) {\r\n                // release the global variable\r\n                globalScope.moment = oldGlobalMoment;\r\n            }\r\n\r\n            return moment;\r\n        });\r\n        makeGlobal(true);\r\n    } else {\r\n        makeGlobal();\r\n    }\r\n}).call(this);\r\n;/**\r\n * eventsource.js\r\n * Available under MIT License (MIT)\r\n * https://github.com/Yaffle/EventSource/\r\n */\r\n\r\n/*jslint indent: 2, vars: true, plusplus: true */\r\n/*global setTimeout, clearTimeout */\r\n\r\n(function (global) {\r\n  \"use strict\";\r\n\r\n  function Map() {\r\n    this.data = {};\r\n  }\r\n\r\n  Map.prototype = {\r\n    get: function (key) {\r\n      return this.data[key + \"~\"];\r\n    },\r\n    set: function (key, value) {\r\n      this.data[key + \"~\"] = value;\r\n    },\r\n    \"delete\": function (key) {\r\n      delete this.data[key + \"~\"];\r\n    }\r\n  };\r\n\r\n  function EventTarget() {\r\n    this.listeners = new Map();\r\n  }\r\n\r\n  function throwError(e) {\r\n    setTimeout(function () {\r\n      throw e;\r\n    }, 0);\r\n  }\r\n\r\n  EventTarget.prototype = {\r\n    dispatchEvent: function (event) {\r\n      event.target = this;\r\n      var type = String(event.type);\r\n      var listeners = this.listeners;\r\n      var typeListeners = listeners.get(type);\r\n      if (!typeListeners) {\r\n        return;\r\n      }\r\n      var length = typeListeners.length;\r\n      var i = -1;\r\n      var listener = null;\r\n      while (++i < length) {\r\n        listener = typeListeners[i];\r\n        try {\r\n          listener.call(this, event);\r\n        } catch (e) {\r\n          throwError(e);\r\n        }\r\n      }\r\n    },\r\n    addEventListener: function (type, callback) {\r\n      type = String(type);\r\n      var listeners = this.listeners;\r\n      var typeListeners = listeners.get(type);\r\n      if (!typeListeners) {\r\n        typeListeners = [];\r\n        listeners.set(type, typeListeners);\r\n      }\r\n      var i = typeListeners.length;\r\n      while (--i >= 0) {\r\n        if (typeListeners[i] === callback) {\r\n          return;\r\n        }\r\n      }\r\n      typeListeners.push(callback);\r\n    },\r\n    removeEventListener: function (type, callback) {\r\n      type = String(type);\r\n      var listeners = this.listeners;\r\n      var typeListeners = listeners.get(type);\r\n      if (!typeListeners) {\r\n        return;\r\n      }\r\n      var length = typeListeners.length;\r\n      var filtered = [];\r\n      var i = -1;\r\n      while (++i < length) {\r\n        if (typeListeners[i] !== callback) {\r\n          filtered.push(typeListeners[i]);\r\n        }\r\n      }\r\n      if (filtered.length === 0) {\r\n        listeners[\"delete\"](type);\r\n      } else {\r\n        listeners.set(type, filtered);\r\n      }\r\n    }\r\n  };\r\n\r\n  function Event(type) {\r\n    this.type = type;\r\n    this.target = null;\r\n  }\r\n\r\n  function MessageEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.data = options.data;\r\n    this.lastEventId = options.lastEventId;\r\n  }\r\n\r\n  MessageEvent.prototype = Event.prototype;\r\n\r\n  var XHR = global.XMLHttpRequest;\r\n  var XDR = global.XDomainRequest;\r\n  var isCORSSupported = Boolean(XHR && ((new XHR()).withCredentials !== undefined));\r\n  var isXHR = isCORSSupported;\r\n  var Transport = isCORSSupported ? XHR : XDR;\r\n  var WAITING = -1;\r\n  var CONNECTING = 0;\r\n  var OPEN = 1;\r\n  var CLOSED = 2;\r\n  var AFTER_CR = 3;\r\n  var FIELD_START = 4;\r\n  var FIELD = 5;\r\n  var VALUE_START = 6;\r\n  var VALUE = 7;\r\n  var contentTypeRegExp = /^text\\/event\\-stream;?(\\s*charset\\=utf\\-8)?$/i;\r\n\r\n  var MINIMUM_DURATION = 1000;\r\n  var MAXIMUM_DURATION = 18000000;\r\n\r\n  function getDuration(value, def) {\r\n    var n = Number(value) || def;\r\n    return (n < MINIMUM_DURATION ? MINIMUM_DURATION : (n > MAXIMUM_DURATION ? MAXIMUM_DURATION : n));\r\n  }\r\n\r\n  function fire(that, f, event) {\r\n    try {\r\n      if (typeof f === \"function\") {\r\n        f.call(that, event);\r\n      }\r\n    } catch (e) {\r\n      throwError(e);\r\n    }\r\n  }\r\n\r\n  function EventSource(url, options) {\r\n    url = String(url);\r\n\r\n    var withCredentials = Boolean(isCORSSupported && options && options.withCredentials);\r\n    var initialRetry = getDuration(options ? options.retry : NaN, 1000);\r\n    var heartbeatTimeout = getDuration(options ? options.heartbeatTimeout : NaN, 45000);\r\n    var lastEventId = (options && options.lastEventId && String(options.lastEventId)) || \"\";\r\n    var that = this;\r\n    var retry = initialRetry;\r\n    var wasActivity = false;\r\n    var xhr = new Transport();\r\n    var timeout = 0;\r\n    var timeout0 = 0;\r\n    var charOffset = 0;\r\n    var currentState = WAITING;\r\n    var dataBuffer = [];\r\n    var lastEventIdBuffer = \"\";\r\n    var eventTypeBuffer = \"\";\r\n    var onTimeout = null;\r\n\r\n    var state = FIELD_START;\r\n    var field = \"\";\r\n    var value = \"\";\r\n\r\n    options = null;\r\n\r\n    function close() {\r\n      currentState = CLOSED;\r\n      if (xhr !== null) {\r\n        xhr.abort();\r\n        xhr = null;\r\n      }\r\n      if (timeout !== 0) {\r\n        clearTimeout(timeout);\r\n        timeout = 0;\r\n      }\r\n      if (timeout0 !== 0) {\r\n        clearTimeout(timeout0);\r\n        timeout0 = 0;\r\n      }\r\n      that.readyState = CLOSED;\r\n    }\r\n\r\n    function onProgress(isLoadEnd) {\r\n      var responseText = currentState === OPEN || currentState === CONNECTING ? xhr.responseText || \"\" : \"\";\r\n      var event = null;\r\n      var isWrongStatusCodeOrContentType = false;\r\n\r\n      if (currentState === CONNECTING) {\r\n        var status = 0;\r\n        var statusText = \"\";\r\n        var contentType = \"\";\r\n        if (isXHR) {\r\n          try {\r\n            status = Number(xhr.status || 0);\r\n            statusText = String(xhr.statusText || \"\");\r\n            contentType = String(xhr.getResponseHeader(\"Content-Type\") || \"\");\r\n          } catch (error) {\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\r\n            status = 0;\r\n            // FF < 14, WebKit\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\r\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\r\n          }\r\n        } else {\r\n          status = 200;\r\n          contentType = xhr.contentType;\r\n        }\r\n        if (status === 200 && contentTypeRegExp.test(contentType)) {\r\n          currentState = OPEN;\r\n          wasActivity = true;\r\n          retry = initialRetry;\r\n          that.readyState = OPEN;\r\n          event = new Event(\"open\");\r\n          that.dispatchEvent(event);\r\n          fire(that, that.onopen, event);\r\n          if (currentState === CLOSED) {\r\n            return;\r\n          }\r\n        } else {\r\n          if (status !== 0) {\r\n            var message = \"\";\r\n            if (status !== 200) {\r\n              message = \"EventSource's response has a status \" + status + \" \" + statusText.replace(/\\s+/g, \" \") + \" that is not 200. Aborting the connection.\";\r\n            } else {\r\n              message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + contentType.replace(/\\s+/g, \" \") + \". Aborting the connection.\";\r\n            }\r\n            setTimeout(function () {\r\n              throw new Error(message);\r\n            });\r\n            isWrongStatusCodeOrContentType = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (currentState === OPEN) {\r\n        if (responseText.length > charOffset) {\r\n          wasActivity = true;\r\n        }\r\n        var i = charOffset - 1;\r\n        var length = responseText.length;\r\n        var c = \"\\n\";\r\n        while (++i < length) {\r\n          c = responseText[i];\r\n          if (state === AFTER_CR && c === \"\\n\") {\r\n            state = FIELD_START;\r\n          } else {\r\n            if (state === AFTER_CR) {\r\n              state = FIELD_START;\r\n            }\r\n            if (c === \"\\r\" || c === \"\\n\") {\r\n              if (field === \"data\") {\r\n                dataBuffer.push(value);\r\n              } else if (field === \"id\") {\r\n                lastEventIdBuffer = value;\r\n              } else if (field === \"event\") {\r\n                eventTypeBuffer = value;\r\n              } else if (field === \"retry\") {\r\n                initialRetry = getDuration(value, initialRetry);\r\n                retry = initialRetry;\r\n              } else if (field === \"heartbeatTimeout\") {//!\r\n                heartbeatTimeout = getDuration(value, heartbeatTimeout);\r\n                if (timeout !== 0) {\r\n                  clearTimeout(timeout);\r\n                  timeout = setTimeout(onTimeout, heartbeatTimeout);\r\n                }\r\n              }\r\n              value = \"\";\r\n              field = \"\";\r\n              if (state === FIELD_START) {\r\n                if (dataBuffer.length !== 0) {\r\n                  lastEventId = lastEventIdBuffer;\r\n                  if (eventTypeBuffer === \"\") {\r\n                    eventTypeBuffer = \"message\";\r\n                  }\r\n                  event = new MessageEvent(eventTypeBuffer, {\r\n                    data: dataBuffer.join(\"\\n\"),\r\n                    lastEventId: lastEventIdBuffer\r\n                  });\r\n                  that.dispatchEvent(event);\r\n                  if (eventTypeBuffer === \"message\") {\r\n                    fire(that, that.onmessage, event);\r\n                  }\r\n                  if (currentState === CLOSED) {\r\n                    return;\r\n                  }\r\n                }\r\n                dataBuffer.length = 0;\r\n                eventTypeBuffer = \"\";\r\n              }\r\n              state = c === \"\\r\" ? AFTER_CR : FIELD_START;\r\n            } else {\r\n              if (state === FIELD_START) {\r\n                state = FIELD;\r\n              }\r\n              if (state === FIELD) {\r\n                if (c === \":\") {\r\n                  state = VALUE_START;\r\n                } else {\r\n                  field += c;\r\n                }\r\n              } else if (state === VALUE_START) {\r\n                if (c !== \" \") {\r\n                  value += c;\r\n                }\r\n                state = VALUE;\r\n              } else if (state === VALUE) {\r\n                value += c;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        charOffset = length;\r\n      }\r\n\r\n      if ((currentState === OPEN || currentState === CONNECTING) &&\r\n          (isLoadEnd || isWrongStatusCodeOrContentType || (charOffset > 1024 * 1024) || (timeout === 0 && !wasActivity))) {\r\n        currentState = WAITING;\r\n        xhr.abort();\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        if (retry > initialRetry * 16) {\r\n          retry = initialRetry * 16;\r\n        }\r\n        if (retry > MAXIMUM_DURATION) {\r\n          retry = MAXIMUM_DURATION;\r\n        }\r\n        timeout = setTimeout(onTimeout, retry);\r\n        retry = retry * 2 + 1;\r\n\r\n        that.readyState = CONNECTING;\r\n        event = new Event(\"error\");\r\n        that.dispatchEvent(event);\r\n        fire(that, that.onerror, event);\r\n      } else {\r\n        if (timeout === 0) {\r\n          wasActivity = false;\r\n          timeout = setTimeout(onTimeout, heartbeatTimeout);\r\n        }\r\n      }\r\n    }\r\n\r\n    function onProgress2() {\r\n      onProgress(false);\r\n    }\r\n\r\n    function onLoadEnd() {\r\n      onProgress(true);\r\n    }\r\n\r\n    if (isXHR) {\r\n      // workaround for Opera issue with \"progress\" events\r\n      timeout0 = setTimeout(function f() {\r\n        if (xhr.readyState === 3) {\r\n          onProgress2();\r\n        }\r\n        timeout0 = setTimeout(f, 500);\r\n      }, 0);\r\n    }\r\n\r\n    onTimeout = function () {\r\n      timeout = 0;\r\n      if (currentState !== WAITING) {\r\n        onProgress(false);\r\n        return;\r\n      }\r\n      // loading indicator in Safari, Chrome < 14, Firefox\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\r\n      if (isXHR && (xhr.sendAsBinary !== undefined || xhr.onloadend === undefined) && global.document && global.document.readyState && global.document.readyState !== \"complete\") {\r\n        timeout = setTimeout(onTimeout, 4);\r\n        return;\r\n      }\r\n      // XDomainRequest#abort removes onprogress, onerror, onload\r\n\r\n      xhr.onload = xhr.onerror = onLoadEnd;\r\n\r\n      if (isXHR) {\r\n        // improper fix to match Firefox behaviour, but it is better than just ignore abort\r\n        // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\r\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\r\n        // https://code.google.com/p/chromium/issues/detail?id=153570\r\n        xhr.onabort = onLoadEnd;\r\n\r\n        // Firefox 3.5 - 3.6 - ? < 9.0\r\n        // onprogress is not fired sometimes or delayed\r\n        xhr.onreadystatechange = onProgress2;\r\n      }\r\n\r\n      xhr.onprogress = onProgress2;\r\n\r\n      wasActivity = false;\r\n      timeout = setTimeout(onTimeout, heartbeatTimeout);\r\n\r\n      charOffset = 0;\r\n      currentState = CONNECTING;\r\n      dataBuffer.length = 0;\r\n      eventTypeBuffer = \"\";\r\n      lastEventIdBuffer = lastEventId;\r\n      value = \"\";\r\n      field = \"\";\r\n      state = FIELD_START;\r\n\r\n      var s = url.slice(0, 5);\r\n      if (s !== \"data:\" && s !== \"blob:\") {\r\n        s = url + ((url.indexOf(\"?\", 0) === -1 ? \"?\" : \"&\") + \"lastEventId=\" + encodeURIComponent(lastEventId) + \"&r=\" + String(Math.random() + 1).slice(2));\r\n      } else {\r\n        s = url;\r\n      }\r\n      xhr.open(\"GET\", s, true);\r\n\r\n      if (isXHR) {\r\n        // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\r\n        xhr.withCredentials = withCredentials;\r\n\r\n        xhr.responseType = \"text\";\r\n\r\n        // Request header field Cache-Control is not allowed by Access-Control-Allow-Headers.\r\n        // \"Cache-control: no-cache\" are not honored in Chrome and Firefox\r\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\r\n        //xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\r\n        xhr.setRequestHeader(\"Accept\", \"text/event-stream\");\r\n        // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\r\n        //xhr.setRequestHeader(\"Last-Event-ID\", lastEventId);\r\n      }\r\n\r\n      xhr.send(null);\r\n    };\r\n\r\n    EventTarget.call(this);\r\n    this.close = close;\r\n    this.url = url;\r\n    this.readyState = CONNECTING;\r\n    this.withCredentials = withCredentials;\r\n\r\n    this.onopen = null;\r\n    this.onmessage = null;\r\n    this.onerror = null;\r\n\r\n    onTimeout();\r\n  }\r\n\r\n  function F() {\r\n    this.CONNECTING = CONNECTING;\r\n    this.OPEN = OPEN;\r\n    this.CLOSED = CLOSED;\r\n  }\r\n  F.prototype = EventTarget.prototype;\r\n\r\n  EventSource.prototype = new F();\r\n  F.call(EventSource);\r\n\r\n  if (Transport) {\r\n    // Why replace a native EventSource ?\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\r\n    // https://code.google.com/p/chromium/issues/detail?id=260144\r\n    // https://code.google.com/p/chromium/issues/detail?id=225654\r\n    // ...\r\n    global.NativeEventSource = global.EventSource;\r\n    global.EventSource = EventSource;\r\n  }\r\n\r\n}(this));\r\n;/**\r\n * A small plugin for getting the CSV of a rendered chart\r\n */\r\n/*global Highcharts, document */\r\n(function (Highcharts) {\r\n\r\n    'use strict';\r\n\r\n    var each = Highcharts.each,\r\n        downloadAttrSupported = document.createElement('a').download !== undefined;\r\n\r\n\r\n    Highcharts.Chart.prototype.getCSV = function () {\r\n        var columns = [],\r\n            line,\r\n            csv = '',\r\n            row,\r\n            col,\r\n            maxRows,\r\n            options = (this.options.exporting || {}).csv || {},\r\n\r\n            // Options\r\n            dateFormat = options.dateFormat || '%Y-%m-%d %H:%M:%S',\r\n            itemDelimiter = options.itemDelimiter || ';', // use ';' for direct import to Excel\r\n            lineDelimiter = options.lineDelimiter || '\\n'; // '\\n' isn't working with the js csv data extraction\r\n\r\n\r\n        each(this.series, function (series) {\r\n            if (series.options.includeInCSVExport !== false) {\r\n                if (series.xAxis) {\r\n                    var xData = series.xData.slice(),\r\n                        xTitle = 'X values';\r\n                    if (series.xAxis.isDatetimeAxis) {\r\n                        xData = Highcharts.map(xData, function (x) {\r\n                            return Highcharts.dateFormat(dateFormat, x);\r\n                        });\r\n                        xTitle = 'DateTime';\r\n                    } else if (series.xAxis.categories) {\r\n                        xData = Highcharts.map(xData, function (x) {\r\n                            return Highcharts.pick(series.xAxis.categories[x], x);\r\n                        });\r\n                        xTitle = 'Category';\r\n                    }\r\n                    columns.push(xData);\r\n                    columns[columns.length - 1].unshift(xTitle);\r\n                }\r\n                columns.push(series.yData.slice());\r\n                columns[columns.length - 1].unshift(series.name);\r\n            }\r\n        });\r\n\r\n        // Transform the columns to CSV\r\n        maxRows = Math.max.apply(this, Highcharts.map(columns, function (col) { return col.length; }));\r\n        for (row = 0; row < maxRows; row = row + 1) {\r\n            line = [];\r\n            for (col = 0; col < columns.length; col = col + 1) {\r\n                line.push(columns[col][row]);\r\n            }\r\n            csv += line.join(itemDelimiter) + lineDelimiter;\r\n        }\r\n\r\n        return csv;\r\n    };\r\n\r\n    // Add \"Download CSV\" to the exporting menu. Use download attribute if supported, else\r\n    // run a simple PHP script that returns a file. The source code for the PHP script can be viewed at\r\n    // https://raw.github.com/highslide-software/highcharts.com/master/studies/csv-export/csv.php\r\n    if (Highcharts.getOptions().exporting) {\r\n        Highcharts.getOptions().exporting.buttons.contextButton.menuItems.push({\r\n            text: Highcharts.getOptions().lang.downloadCSV || 'Save as CSV',\r\n            onclick: function () {\r\n                var a;\r\n\r\n                // Download attribute supported\r\n                if (downloadAttrSupported) {\r\n                    // Client side extraction\r\n                    a = document.createElement('a');\r\n                    a.href        = 'data:attachment/csv,' + this.getCSV().replace(/\\n/g, '%0A');\r\n                    a.target      = '_blank';\r\n                    a.download    = (this.title ? this.title.textStr.replace(/ /g, '-').toLowerCase() : 'chart') + '.csv';\r\n                    document.body.appendChild(a);\r\n                    a.click();\r\n                    a.remove();\r\n\r\n                // Fall back to server side handling\r\n                } else {\r\n                    Highcharts.post('http://www.highcharts.com/studies/csv-export/csv.php', {\r\n                        csv: this.getCSV()\r\n                    });\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n}(Highcharts));\r\n;/*!\r\n * Javascript Cookie v1.5.1\r\n * https://github.com/js-cookie/js-cookie\r\n *\r\n * Copyright 2006, 2014 Klaus Hartl\r\n * Released under the MIT license\r\n */\r\n(function (factory) {\r\n\tvar jQuery;\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD (Register as an anonymous module)\r\n\t\tdefine(['jquery'], factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\t// Node/CommonJS\r\n\t\ttry {\r\n\t\t\tjQuery = require('jquery');\r\n\t\t} catch(e) {}\r\n\t\tmodule.exports = factory(jQuery);\r\n\t} else {\r\n\t\t// Browser globals\r\n\t\tvar _OldCookies = window.Cookies;\r\n\t\tvar api = window.Cookies = factory(window.jQuery);\r\n\t\tapi.noConflict = function() {\r\n\t\t\twindow.Cookies = _OldCookies;\r\n\t\t\treturn api;\r\n\t\t};\r\n\t}\r\n}(function ($) {\r\n\r\n\tvar pluses = /\\+/g;\r\n\r\n\tfunction encode(s) {\r\n\t\treturn api.raw ? s : encodeURIComponent(s);\r\n\t}\r\n\r\n\tfunction decode(s) {\r\n\t\treturn api.raw ? s : decodeURIComponent(s);\r\n\t}\r\n\r\n\tfunction stringifyCookieValue(value) {\r\n\t\treturn encode(api.json ? JSON.stringify(value) : String(value));\r\n\t}\r\n\r\n\tfunction parseCookieValue(s) {\r\n\t\tif (s.indexOf('\"') === 0) {\r\n\t\t\t// This is a quoted cookie as according to RFC2068, unescape...\r\n\t\t\ts = s.slice(1, -1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\');\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\t// Replace server-side written pluses with spaces.\r\n\t\t\t// If we can't decode the cookie, ignore it, it's unusable.\r\n\t\t\t// If we can't parse the cookie, ignore it, it's unusable.\r\n\t\t\ts = decodeURIComponent(s.replace(pluses, ' '));\r\n\t\t\treturn api.json ? JSON.parse(s) : s;\r\n\t\t} catch(e) {}\r\n\t}\r\n\r\n\tfunction read(s, converter) {\r\n\t\tvar value = api.raw ? s : parseCookieValue(s);\r\n\t\treturn isFunction(converter) ? converter(value) : value;\r\n\t}\r\n\r\n\tfunction extend() {\r\n\t\tvar key, options;\r\n\t\tvar i = 0;\r\n\t\tvar result = {};\r\n\t\tfor (; i < arguments.length; i++) {\r\n\t\t\toptions = arguments[ i ];\r\n\t\t\tfor (key in options) {\r\n\t\t\t\tresult[key] = options[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction isFunction(obj) {\r\n\t\treturn Object.prototype.toString.call(obj) === '[object Function]';\r\n\t}\r\n\r\n\tvar api = function (key, value, options) {\r\n\r\n\t\t// Write\r\n\r\n\t\tif (arguments.length > 1 && !isFunction(value)) {\r\n\t\t\toptions = extend(api.defaults, options);\r\n\r\n\t\t\tif (typeof options.expires === 'number') {\r\n\t\t\t\tvar days = options.expires, t = options.expires = new Date();\r\n\t\t\t\tt.setMilliseconds(t.getMilliseconds() + days * 864e+5);\r\n\t\t\t}\r\n\r\n\t\t\treturn (document.cookie = [\r\n\t\t\t\tencode(key), '=', stringifyCookieValue(value),\r\n\t\t\t\toptions.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\r\n\t\t\t\toptions.path    ? '; path=' + options.path : '',\r\n\t\t\t\toptions.domain  ? '; domain=' + options.domain : '',\r\n\t\t\t\toptions.secure  ? '; secure' : ''\r\n\t\t\t].join(''));\r\n\t\t}\r\n\r\n\t\t// Read\r\n\r\n\t\tvar result = key ? undefined : {},\r\n\t\t\t// To prevent the for loop in the first place assign an empty array\r\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\r\n\t\t\t// calling \"get()\".\r\n\t\t\tcookies = document.cookie ? document.cookie.split('; ') : [],\r\n\t\t\ti = 0,\r\n\t\t\tl = cookies.length;\r\n\r\n\t\tfor (; i < l; i++) {\r\n\t\t\tvar parts = cookies[i].split('='),\r\n\t\t\t\tname = decode(parts.shift()),\r\n\t\t\t\tcookie = parts.join('=');\r\n\r\n\t\t\tif (key === name) {\r\n\t\t\t\t// If second argument (value) is a function it's a converter...\r\n\t\t\t\tresult = read(cookie, value);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// Prevent storing a cookie that we couldn't decode.\r\n\t\t\tif (!key && (cookie = read(cookie)) !== undefined) {\r\n\t\t\t\tresult[name] = cookie;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tapi.get = api.set = api;\r\n\tapi.defaults = {};\r\n\r\n\tapi.remove = function (key, options) {\r\n\t\t// Must not alter options, thus extending a fresh object...\r\n\t\tapi(key, '', extend(options, { expires: -1 }));\r\n\t\treturn !api(key);\r\n\t};\r\n\r\n\tif ( $ ) {\r\n\t\t$.cookie = api;\r\n\t\t$.removeCookie = api.remove;\r\n\t}\r\n\r\n\treturn api;\r\n}));\r\n;/**\r\n*\r\n* jquery.sparkline.js\r\n*\r\n* v@VERSION@\r\n* (c) Splunk, Inc\r\n* Contact: Gareth Watts (gareth@splunk.com)\r\n* http://omnipotent.net/jquery.sparkline/\r\n*\r\n* Generates inline sparkline charts from data supplied either to the method\r\n* or inline in HTML\r\n*\r\n* Compatible with Internet Explorer 6.0+ and modern browsers equipped with the canvas tag\r\n* (Firefox 2.0+, Safari, Opera, etc)\r\n*\r\n* License: New BSD License\r\n*\r\n* Copyright (c) 2012, Splunk Inc.\r\n* All rights reserved.\r\n*\r\n* Redistribution and use in source and binary forms, with or without modification,\r\n* are permitted provided that the following conditions are met:\r\n*\r\n*     * Redistributions of source code must retain the above copyright notice,\r\n*       this list of conditions and the following disclaimer.\r\n*     * Redistributions in binary form must reproduce the above copyright notice,\r\n*       this list of conditions and the following disclaimer in the documentation\r\n*       and/or other materials provided with the distribution.\r\n*     * Neither the name of Splunk Inc nor the names of its contributors may\r\n*       be used to endorse or promote products derived from this software without\r\n*       specific prior written permission.\r\n*\r\n* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY\r\n* EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\r\n* OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT\r\n* SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT\r\n* OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\r\n* HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n* OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n*\r\n*\r\n* Usage:\r\n*  $(selector).sparkline(values, options)\r\n*\r\n* If values is undefined or set to 'html' then the data values are read from the specified tag:\r\n*   <p>Sparkline: <span class=\"sparkline\">1,4,6,6,8,5,3,5</span></p>\r\n*   $('.sparkline').sparkline();\r\n* There must be no spaces in the enclosed data set\r\n*\r\n* Otherwise values must be an array of numbers or null values\r\n*    <p>Sparkline: <span id=\"sparkline1\">This text replaced if the browser is compatible</span></p>\r\n*    $('#sparkline1').sparkline([1,4,6,6,8,5,3,5])\r\n*    $('#sparkline2').sparkline([1,4,6,null,null,5,3,5])\r\n*\r\n* Values can also be specified in an HTML comment, or as a values attribute:\r\n*    <p>Sparkline: <span class=\"sparkline\"><!--1,4,6,6,8,5,3,5 --></span></p>\r\n*    <p>Sparkline: <span class=\"sparkline\" values=\"1,4,6,6,8,5,3,5\"></span></p>\r\n*    $('.sparkline').sparkline();\r\n*\r\n* For line charts, x values can also be specified:\r\n*   <p>Sparkline: <span class=\"sparkline\">1:1,2.7:4,3.4:6,5:6,6:8,8.7:5,9:3,10:5</span></p>\r\n*    $('#sparkline1').sparkline([ [1,1], [2.7,4], [3.4,6], [5,6], [6,8], [8.7,5], [9,3], [10,5] ])\r\n*\r\n* By default, options should be passed in as the second argument to the sparkline function:\r\n*   $('.sparkline').sparkline([1,2,3,4], {type: 'bar'})\r\n*\r\n* Options can also be set by passing them on the tag itself.  This feature is disabled by default though\r\n* as there's a slight performance overhead:\r\n*   $('.sparkline').sparkline([1,2,3,4], {enableTagOptions: true})\r\n*   <p>Sparkline: <span class=\"sparkline\" sparkType=\"bar\" sparkBarColor=\"red\">loading</span></p>\r\n* Prefix all options supplied as tag attribute with \"spark\" (configurable by setting tagOptionsPrefix)\r\n*\r\n* Supported options:\r\n*   lineColor - Color of the line used for the chart\r\n*   fillColor - Color used to fill in the chart - Set to '' or false for a transparent chart\r\n*   width - Width of the chart - Defaults to 3 times the number of values in pixels\r\n*   height - Height of the chart - Defaults to the height of the containing element\r\n*   chartRangeMin - Specify the minimum value to use for the Y range of the chart - Defaults to the minimum value supplied\r\n*   chartRangeMax - Specify the maximum value to use for the Y range of the chart - Defaults to the maximum value supplied\r\n*   chartRangeClip - Clip out of range values to the max/min specified by chartRangeMin and chartRangeMax\r\n*   chartRangeMinX - Specify the minimum value to use for the X range of the chart - Defaults to the minimum value supplied\r\n*   chartRangeMaxX - Specify the maximum value to use for the X range of the chart - Defaults to the maximum value supplied\r\n*   composite - If true then don't erase any existing chart attached to the tag, but draw\r\n*           another chart over the top - Note that width and height are ignored if an\r\n*           existing chart is detected.\r\n*   tagValuesAttribute - Name of tag attribute to check for data values - Defaults to 'values'\r\n*   enableTagOptions - Whether to check tags for sparkline options\r\n*   tagOptionsPrefix - Prefix used for options supplied as tag attributes - Defaults to 'spark'\r\n*   disableHiddenCheck - If set to true, then the plugin will assume that charts will never be drawn into a\r\n*           hidden dom element, avoding a browser reflow\r\n*   disableInteraction - If set to true then all mouseover/click interaction behaviour will be disabled,\r\n*       making the plugin perform much like it did in 1.x\r\n*   disableTooltips - If set to true then tooltips will be disabled - Defaults to false (tooltips enabled)\r\n*   disableHighlight - If set to true then highlighting of selected chart elements on mouseover will be disabled\r\n*       defaults to false (highlights enabled)\r\n*   highlightLighten - Factor to lighten/darken highlighted chart values by - Defaults to 1.4 for a 40% increase\r\n*   tooltipContainer - Specify which DOM element the tooltip should be rendered into - defaults to document.body\r\n*   tooltipClassname - Optional CSS classname to apply to tooltips - If not specified then a default style will be applied\r\n*   tooltipOffsetX - How many pixels away from the mouse pointer to render the tooltip on the X axis\r\n*   tooltipOffsetY - How many pixels away from the mouse pointer to render the tooltip on the r axis\r\n*   tooltipFormatter  - Optional callback that allows you to override the HTML displayed in the tooltip\r\n*       callback is given arguments of (sparkline, options, fields)\r\n*   tooltipChartTitle - If specified then the tooltip uses the string specified by this setting as a title\r\n*   tooltipFormat - A format string or SPFormat object  (or an array thereof for multiple entries)\r\n*       to control the format of the tooltip\r\n*   tooltipPrefix - A string to prepend to each field displayed in a tooltip\r\n*   tooltipSuffix - A string to append to each field displayed in a tooltip\r\n*   tooltipSkipNull - If true then null values will not have a tooltip displayed (defaults to true)\r\n*   tooltipValueLookups - An object or range map to map field values to tooltip strings\r\n*       (eg. to map -1 to \"Lost\", 0 to \"Draw\", and 1 to \"Win\")\r\n*   numberFormatter - Optional callback for formatting numbers in tooltips\r\n*   numberDigitGroupSep - Character to use for group separator in numbers \"1,234\" - Defaults to \",\"\r\n*   numberDecimalMark - Character to use for the decimal point when formatting numbers - Defaults to \".\"\r\n*   numberDigitGroupCount - Number of digits between group separator - Defaults to 3\r\n*\r\n* There are 7 types of sparkline, selected by supplying a \"type\" option of 'line' (default),\r\n* 'bar', 'tristate', 'bullet', 'discrete', 'pie' or 'box'\r\n*    line - Line chart.  Options:\r\n*       spotColor - Set to '' to not end each line in a circular spot\r\n*       minSpotColor - If set, color of spot at minimum value\r\n*       maxSpotColor - If set, color of spot at maximum value\r\n*       spotRadius - Radius in pixels\r\n*       lineWidth - Width of line in pixels\r\n*       normalRangeMin\r\n*       normalRangeMax - If set draws a filled horizontal bar between these two values marking the \"normal\"\r\n*                      or expected range of values\r\n*       normalRangeColor - Color to use for the above bar\r\n*       drawNormalOnTop - Draw the normal range above the chart fill color if true\r\n*       defaultPixelsPerValue - Defaults to 3 pixels of width for each value in the chart\r\n*       highlightSpotColor - The color to use for drawing a highlight spot on mouseover - Set to null to disable\r\n*       highlightLineColor - The color to use for drawing a highlight line on mouseover - Set to null to disable\r\n*       valueSpots - Specify which points to draw spots on, and in which color.  Accepts a range map\r\n*\r\n*   bar - Bar chart.  Options:\r\n*       barColor - Color of bars for postive values\r\n*       negBarColor - Color of bars for negative values\r\n*       zeroColor - Color of bars with zero values\r\n*       nullColor - Color of bars with null values - Defaults to omitting the bar entirely\r\n*       barWidth - Width of bars in pixels\r\n*       colorMap - Optional mappnig of values to colors to override the *BarColor values above\r\n*                  can be an Array of values to control the color of individual bars or a range map\r\n*                  to specify colors for individual ranges of values\r\n*       barSpacing - Gap between bars in pixels\r\n*       zeroAxis - Centers the y-axis around zero if true\r\n*\r\n*   tristate - Charts values of win (>0), lose (<0) or draw (=0)\r\n*       posBarColor - Color of win values\r\n*       negBarColor - Color of lose values\r\n*       zeroBarColor - Color of draw values\r\n*       barWidth - Width of bars in pixels\r\n*       barSpacing - Gap between bars in pixels\r\n*       colorMap - Optional mappnig of values to colors to override the *BarColor values above\r\n*                  can be an Array of values to control the color of individual bars or a range map\r\n*                  to specify colors for individual ranges of values\r\n*\r\n*   discrete - Options:\r\n*       lineHeight - Height of each line in pixels - Defaults to 30% of the graph height\r\n*       thesholdValue - Values less than this value will be drawn using thresholdColor instead of lineColor\r\n*       thresholdColor\r\n*\r\n*   bullet - Values for bullet graphs msut be in the order: target, performance, range1, range2, range3, ...\r\n*       options:\r\n*       targetColor - The color of the vertical target marker\r\n*       targetWidth - The width of the target marker in pixels\r\n*       performanceColor - The color of the performance measure horizontal bar\r\n*       rangeColors - Colors to use for each qualitative range background color\r\n*\r\n*   pie - Pie chart. Options:\r\n*       sliceColors - An array of colors to use for pie slices\r\n*       offset - Angle in degrees to offset the first slice - Try -90 or +90\r\n*       borderWidth - Width of border to draw around the pie chart, in pixels - Defaults to 0 (no border)\r\n*       borderColor - Color to use for the pie chart border - Defaults to #000\r\n*\r\n*   box - Box plot. Options:\r\n*       raw - Set to true to supply pre-computed plot points as values\r\n*             values should be: low_outlier, low_whisker, q1, median, q3, high_whisker, high_outlier\r\n*             When set to false you can supply any number of values and the box plot will\r\n*             be computed for you.  Default is false.\r\n*       showOutliers - Set to true (default) to display outliers as circles\r\n*       outlierIQR - Interquartile range used to determine outliers.  Default 1.5\r\n*       boxLineColor - Outline color of the box\r\n*       boxFillColor - Fill color for the box\r\n*       whiskerColor - Line color used for whiskers\r\n*       outlierLineColor - Outline color of outlier circles\r\n*       outlierFillColor - Fill color of the outlier circles\r\n*       spotRadius - Radius of outlier circles\r\n*       medianColor - Line color of the median line\r\n*       target - Draw a target cross hair at the supplied value (default undefined)\r\n*\r\n*\r\n*\r\n*   Examples:\r\n*   $('#sparkline1').sparkline(myvalues, { lineColor: '#f00', fillColor: false });\r\n*   $('.barsparks').sparkline('html', { type:'bar', height:'40px', barWidth:5 });\r\n*   $('#tristate').sparkline([1,1,-1,1,0,0,-1], { type:'tristate' }):\r\n*   $('#discrete').sparkline([1,3,4,5,5,3,4,5], { type:'discrete' });\r\n*   $('#bullet').sparkline([10,12,12,9,7], { type:'bullet' });\r\n*   $('#pie').sparkline([1,1,2], { type:'pie' });\r\n*/\r\n\r\n/*jslint regexp: true, browser: true, jquery: true, white: true, nomen: false, plusplus: false, maxerr: 500, indent: 4 */\r\n\r\n(function(document, Math, undefined) { // performance/minified-size optimization\r\n(function(factory) {\r\n    if(typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (jQuery && !jQuery.fn.sparkline) {\r\n        factory(jQuery);\r\n    }\r\n}\r\n(function($) {\r\n    'use strict';\r\n\r\n    var UNSET_OPTION = {},\r\n        getDefaults, createClass, SPFormat, clipval, quartile, normalizeValue, normalizeValues,\r\n        remove, isNumber, all, sum, addCSS, ensureArray, formatNumber, RangeMap,\r\n        MouseHandler, Tooltip, barHighlightMixin,\r\n        line, bar, tristate, discrete, bullet, pie, box, defaultStyles, initStyles,\r\n        VShape, VCanvas_base, VCanvas_canvas, VCanvas_vml, pending, shapeCount = 0;\r\n\r\n\r\n    /**\r\n     * Default configuration settings\r\n     */\r\n    getDefaults = function () {\r\n        return {\r\n            // Settings common to most/all chart types\r\n            common: {\r\n                type: 'line',\r\n                lineColor: '#00f',\r\n                fillColor: '#cdf',\r\n                defaultPixelsPerValue: 3,\r\n                width: 'auto',\r\n                height: 'auto',\r\n                composite: false,\r\n                tagValuesAttribute: 'values',\r\n                tagOptionsPrefix: 'spark',\r\n                enableTagOptions: false,\r\n                enableHighlight: true,\r\n                highlightLighten: 1.4,\r\n                tooltipSkipNull: true,\r\n                tooltipPrefix: '',\r\n                tooltipSuffix: '',\r\n                disableHiddenCheck: false,\r\n                numberFormatter: false,\r\n                numberDigitGroupCount: 3,\r\n                numberDigitGroupSep: ',',\r\n                numberDecimalMark: '.',\r\n                disableTooltips: false,\r\n                disableInteraction: false\r\n            },\r\n            // Defaults for line charts\r\n            line: {\r\n                spotColor: '#f80',\r\n                highlightSpotColor: '#5f5',\r\n                highlightLineColor: '#f22',\r\n                spotRadius: 1.5,\r\n                minSpotColor: '#f80',\r\n                maxSpotColor: '#f80',\r\n                lineWidth: 1,\r\n                normalRangeMin: undefined,\r\n                normalRangeMax: undefined,\r\n                normalRangeColor: '#ccc',\r\n                drawNormalOnTop: false,\r\n                chartRangeMin: undefined,\r\n                chartRangeMax: undefined,\r\n                chartRangeMinX: undefined,\r\n                chartRangeMaxX: undefined,\r\n                tooltipFormat: new SPFormat('<span style=\"color: {{color}}\">&#9679;</span> {{prefix}}{{y}}{{suffix}}')\r\n            },\r\n            // Defaults for bar charts\r\n            bar: {\r\n                barColor: '#3366cc',\r\n                negBarColor: '#f44',\r\n                stackedBarColor: ['#3366cc', '#dc3912', '#ff9900', '#109618', '#66aa00',\r\n                    '#dd4477', '#0099c6', '#990099'],\r\n                zeroColor: undefined,\r\n                nullColor: undefined,\r\n                zeroAxis: true,\r\n                barWidth: 4,\r\n                barSpacing: 1,\r\n                chartRangeMax: undefined,\r\n                chartRangeMin: undefined,\r\n                chartRangeClip: false,\r\n                colorMap: undefined,\r\n                tooltipFormat: new SPFormat('<span style=\"color: {{color}}\">&#9679;</span> {{prefix}}{{value}}{{suffix}}')\r\n            },\r\n            // Defaults for tristate charts\r\n            tristate: {\r\n                barWidth: 4,\r\n                barSpacing: 1,\r\n                posBarColor: '#6f6',\r\n                negBarColor: '#f44',\r\n                zeroBarColor: '#999',\r\n                colorMap: {},\r\n                tooltipFormat: new SPFormat('<span style=\"color: {{color}}\">&#9679;</span> {{value:map}}'),\r\n                tooltipValueLookups: { map: { '-1': 'Loss', '0': 'Draw', '1': 'Win' } }\r\n            },\r\n            // Defaults for discrete charts\r\n            discrete: {\r\n                lineHeight: 'auto',\r\n                thresholdColor: undefined,\r\n                thresholdValue: 0,\r\n                chartRangeMax: undefined,\r\n                chartRangeMin: undefined,\r\n                chartRangeClip: false,\r\n                tooltipFormat: new SPFormat('{{prefix}}{{value}}{{suffix}}')\r\n            },\r\n            // Defaults for bullet charts\r\n            bullet: {\r\n                targetColor: '#f33',\r\n                targetWidth: 3, // width of the target bar in pixels\r\n                performanceColor: '#33f',\r\n                rangeColors: ['#d3dafe', '#a8b6ff', '#7f94ff'],\r\n                base: undefined, // set this to a number to change the base start number\r\n                tooltipFormat: new SPFormat('{{fieldkey:fields}} - {{value}}'),\r\n                tooltipValueLookups: { fields: {r: 'Range', p: 'Performance', t: 'Target'} }\r\n            },\r\n            // Defaults for pie charts\r\n            pie: {\r\n                offset: 0,\r\n                sliceColors: ['#3366cc', '#dc3912', '#ff9900', '#109618', '#66aa00',\r\n                    '#dd4477', '#0099c6', '#990099'],\r\n                borderWidth: 0,\r\n                borderColor: '#000',\r\n                tooltipFormat: new SPFormat('<span style=\"color: {{color}}\">&#9679;</span> {{value}} ({{percent.1}}%)')\r\n            },\r\n            // Defaults for box plots\r\n            box: {\r\n                raw: false,\r\n                boxLineColor: '#000',\r\n                boxFillColor: '#cdf',\r\n                whiskerColor: '#000',\r\n                outlierLineColor: '#333',\r\n                outlierFillColor: '#fff',\r\n                medianColor: '#f00',\r\n                showOutliers: true,\r\n                outlierIQR: 1.5,\r\n                spotRadius: 1.5,\r\n                target: undefined,\r\n                targetColor: '#4a2',\r\n                chartRangeMax: undefined,\r\n                chartRangeMin: undefined,\r\n                tooltipFormat: new SPFormat('{{field:fields}}: {{value}}'),\r\n                tooltipFormatFieldlistKey: 'field',\r\n                tooltipValueLookups: { fields: { lq: 'Lower Quartile', med: 'Median',\r\n                    uq: 'Upper Quartile', lo: 'Left Outlier', ro: 'Right Outlier',\r\n                    lw: 'Left Whisker', rw: 'Right Whisker'} }\r\n            }\r\n        };\r\n    };\r\n\r\n    // You can have tooltips use a css class other than jqstooltip by specifying tooltipClassname\r\n    defaultStyles = '.jqstooltip { ' +\r\n            'position: absolute;' +\r\n            'left: 0px;' +\r\n            'top: 0px;' +\r\n            'visibility: hidden;' +\r\n            'background: rgb(0, 0, 0) transparent;' +\r\n            'background-color: rgba(0,0,0,0.6);' +\r\n            'filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);' +\r\n            '-ms-filter: \"progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)\";' +\r\n            'color: white;' +\r\n            'font: 10px arial, san serif;' +\r\n            'text-align: left;' +\r\n            'white-space: nowrap;' +\r\n            'padding: 5px;' +\r\n            'border: 1px solid white;' +\r\n            'box-sizing: content-box;' +\r\n            'z-index: 10000;' +\r\n            '}' +\r\n            '.jqsfield { ' +\r\n            'color: white;' +\r\n            'font: 10px arial, san serif;' +\r\n            'text-align: left;' +\r\n            '}';\r\n\r\n\r\n    /**\r\n     * Utilities\r\n     */\r\n\r\n    createClass = function (/* [baseclass, [mixin, ...]], definition */) {\r\n        var Class, args;\r\n        Class = function () {\r\n            this.init.apply(this, arguments);\r\n        };\r\n        if (arguments.length > 1) {\r\n            if (arguments[0]) {\r\n                Class.prototype = $.extend(new arguments[0](), arguments[arguments.length - 1]);\r\n                Class._super = arguments[0].prototype;\r\n            } else {\r\n                Class.prototype = arguments[arguments.length - 1];\r\n            }\r\n            if (arguments.length > 2) {\r\n                args = Array.prototype.slice.call(arguments, 1, -1);\r\n                args.unshift(Class.prototype);\r\n                $.extend.apply($, args);\r\n            }\r\n        } else {\r\n            Class.prototype = arguments[0];\r\n        }\r\n        Class.prototype.cls = Class;\r\n        return Class;\r\n    };\r\n\r\n    /**\r\n     * Wraps a format string for tooltips\r\n     * {{x}}\r\n     * {{x.2}\r\n     * {{x:months}}\r\n     */\r\n    $.SPFormatClass = SPFormat = createClass({\r\n        fre: /\\{\\{([\\w.]+?)(:(.+?))?\\}\\}/g,\r\n        precre: /(\\w+)\\.(\\d+)/,\r\n\r\n        init: function (format, fclass) {\r\n            this.format = format;\r\n            this.fclass = fclass;\r\n        },\r\n\r\n        render: function (fieldset, lookups, options) {\r\n            var self = this,\r\n                fields = fieldset,\r\n                match, token, lookupkey, fieldvalue, prec;\r\n            return this.format.replace(this.fre, function () {\r\n                var lookup;\r\n                token = arguments[1];\r\n                lookupkey = arguments[3];\r\n                match = self.precre.exec(token);\r\n                if (match) {\r\n                    prec = match[2];\r\n                    token = match[1];\r\n                } else {\r\n                    prec = false;\r\n                }\r\n                fieldvalue = fields[token];\r\n                if (fieldvalue === undefined) {\r\n                    return '';\r\n                }\r\n                if (lookupkey && lookups && lookups[lookupkey]) {\r\n                    lookup = lookups[lookupkey];\r\n                    if (lookup.get) { // RangeMap\r\n                        return lookups[lookupkey].get(fieldvalue) || fieldvalue;\r\n                    } else {\r\n                        return lookups[lookupkey][fieldvalue] || fieldvalue;\r\n                    }\r\n                }\r\n                if (isNumber(fieldvalue)) {\r\n                    if (options.get('numberFormatter')) {\r\n                        fieldvalue = options.get('numberFormatter')(fieldvalue);\r\n                    } else {\r\n                        fieldvalue = formatNumber(fieldvalue, prec,\r\n                            options.get('numberDigitGroupCount'),\r\n                            options.get('numberDigitGroupSep'),\r\n                            options.get('numberDecimalMark'));\r\n                    }\r\n                }\r\n                return fieldvalue;\r\n            });\r\n        }\r\n    });\r\n\r\n    // convience method to avoid needing the new operator\r\n    $.spformat = function(format, fclass) {\r\n        return new SPFormat(format, fclass);\r\n    };\r\n\r\n    clipval = function (val, min, max) {\r\n        if (val < min) {\r\n            return min;\r\n        }\r\n        if (val > max) {\r\n            return max;\r\n        }\r\n        return val;\r\n    };\r\n\r\n    quartile = function (values, q) {\r\n        var vl;\r\n        if (q === 2) {\r\n            vl = Math.floor(values.length / 2);\r\n            return values.length % 2 ? values[vl] : (values[vl-1] + values[vl]) / 2;\r\n        } else {\r\n            if (values.length % 2 ) { // odd\r\n                vl = (values.length * q + q) / 4;\r\n                return vl % 1 ? (values[Math.floor(vl)] + values[Math.floor(vl) - 1]) / 2 : values[vl-1];\r\n            } else { //even\r\n                vl = (values.length * q + 2) / 4;\r\n                return vl % 1 ? (values[Math.floor(vl)] + values[Math.floor(vl) - 1]) / 2 :  values[vl-1];\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n    normalizeValue = function (val) {\r\n        var nf;\r\n        switch (val) {\r\n            case 'undefined':\r\n                val = undefined;\r\n                break;\r\n            case 'null':\r\n                val = null;\r\n                break;\r\n            case 'true':\r\n                val = true;\r\n                break;\r\n            case 'false':\r\n                val = false;\r\n                break;\r\n            default:\r\n                nf = parseFloat(val);\r\n                if (val == nf) {\r\n                    val = nf;\r\n                }\r\n        }\r\n        return val;\r\n    };\r\n\r\n    normalizeValues = function (vals) {\r\n        var i, result = [];\r\n        for (i = vals.length; i--;) {\r\n            result[i] = normalizeValue(vals[i]);\r\n        }\r\n        return result;\r\n    };\r\n\r\n    remove = function (vals, filter) {\r\n        var i, vl, result = [];\r\n        for (i = 0, vl = vals.length; i < vl; i++) {\r\n            if (vals[i] !== filter) {\r\n                result.push(vals[i]);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n\r\n    isNumber = function (num) {\r\n        return !isNaN(parseFloat(num)) && isFinite(num);\r\n    };\r\n\r\n    formatNumber = function (num, prec, groupsize, groupsep, decsep) {\r\n        var p, i;\r\n        num = (prec === false ? parseFloat(num).toString() : num.toFixed(prec)).split('');\r\n        p = (p = $.inArray('.', num)) < 0 ? num.length : p;\r\n        if (p < num.length) {\r\n            num[p] = decsep;\r\n        }\r\n        for (i = p - groupsize; i > 0; i -= groupsize) {\r\n            num.splice(i, 0, groupsep);\r\n        }\r\n        return num.join('');\r\n    };\r\n\r\n    // determine if all values of an array match a value\r\n    // returns true if the array is empty\r\n    all = function (val, arr, ignoreNull) {\r\n        var i;\r\n        for (i = arr.length; i--; ) {\r\n            if (ignoreNull && arr[i] === null) continue;\r\n            if (arr[i] !== val) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n\r\n    // sums the numeric values in an array, ignoring other values\r\n    sum = function (vals) {\r\n        var total = 0, i;\r\n        for (i = vals.length; i--;) {\r\n            total += typeof vals[i] === 'number' ? vals[i] : 0;\r\n        }\r\n        return total;\r\n    };\r\n\r\n    ensureArray = function (val) {\r\n        return $.isArray(val) ? val : [val];\r\n    };\r\n\r\n    // http://paulirish.com/2008/bookmarklet-inject-new-css-rules/\r\n    addCSS = function(css) {\r\n        var tag, iefail;\r\n        if (document.createStyleSheet) {\r\n            try {\r\n                document.createStyleSheet().cssText = css;\r\n                return;\r\n            } catch (e) {\r\n                // IE <= 9 maxes out at 31 stylesheets; inject into page instead.\r\n                iefail = true;\r\n            }\r\n        }\r\n        tag = document.createElement('style');\r\n        tag.type = 'text/css';\r\n        document.getElementsByTagName('head')[0].appendChild(tag);\r\n        if (iefail) {\r\n            document.styleSheets[document.styleSheets.length - 1].cssText = css;\r\n        } else {\r\n            tag[(typeof document.body.style.WebkitAppearance == 'string') /* webkit only */ ? 'innerText' : 'innerHTML'] = css;\r\n        }\r\n    };\r\n\r\n\r\n    // Provide a cross-browser interface to a few simple drawing primitives\r\n    $.fn.simpledraw = function (width, height, useExisting, interact) {\r\n        var target, mhandler;\r\n        if (useExisting && (target = this.data('_jqs_vcanvas'))) {\r\n            return target;\r\n        }\r\n\r\n        if ($.fn.sparkline.canvas === false) {\r\n            // We've already determined that neither Canvas nor VML are available\r\n            return false;\r\n\r\n        } else if ($.fn.sparkline.canvas === undefined) {\r\n            // No function defined yet -- need to see if we support Canvas or VML\r\n            var el = document.createElement('canvas');\r\n            if (!!(el.getContext && el.getContext('2d'))) {\r\n                // Canvas is available\r\n                $.fn.sparkline.canvas = function(width, height, target, interact) {\r\n                    return new VCanvas_canvas(width, height, target, interact);\r\n                };\r\n            } else if (document.namespaces && !document.namespaces.v) {\r\n                // VML is available\r\n                document.namespaces.add('v', 'urn:schemas-microsoft-com:vml', '#default#VML');\r\n                $.fn.sparkline.canvas = function(width, height, target, interact) {\r\n                    return new VCanvas_vml(width, height, target);\r\n                };\r\n            } else {\r\n                // Neither Canvas nor VML are available\r\n                $.fn.sparkline.canvas = false;\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (width === undefined) {\r\n            width = $(this).innerWidth();\r\n        }\r\n        if (height === undefined) {\r\n            height = $(this).innerHeight();\r\n        }\r\n\r\n        target = $.fn.sparkline.canvas(width, height, this, interact);\r\n\r\n        mhandler = $(this).data('_jqs_mhandler');\r\n        if (mhandler) {\r\n            mhandler.registerCanvas(target);\r\n        }\r\n        return target;\r\n    };\r\n\r\n    $.fn.cleardraw = function () {\r\n        var target = this.data('_jqs_vcanvas');\r\n        if (target) {\r\n            target.reset();\r\n        }\r\n    };\r\n\r\n\r\n    $.RangeMapClass = RangeMap = createClass({\r\n        init: function (map) {\r\n            var key, range, rangelist = [];\r\n            for (key in map) {\r\n                if (map.hasOwnProperty(key) && typeof key === 'string' && key.indexOf(':') > -1) {\r\n                    range = key.split(':');\r\n                    range[0] = range[0].length === 0 ? -Infinity : parseFloat(range[0]);\r\n                    range[1] = range[1].length === 0 ? Infinity : parseFloat(range[1]);\r\n                    range[2] = map[key];\r\n                    rangelist.push(range);\r\n                }\r\n            }\r\n            this.map = map;\r\n            this.rangelist = rangelist || false;\r\n        },\r\n\r\n        get: function (value) {\r\n            var rangelist = this.rangelist,\r\n                i, range, result;\r\n            if ((result = this.map[value]) !== undefined) {\r\n                return result;\r\n            }\r\n            if (rangelist) {\r\n                for (i = rangelist.length; i--;) {\r\n                    range = rangelist[i];\r\n                    if (range[0] <= value && range[1] >= value) {\r\n                        return range[2];\r\n                    }\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n    });\r\n\r\n    // Convenience function\r\n    $.range_map = function(map) {\r\n        return new RangeMap(map);\r\n    };\r\n\r\n\r\n    MouseHandler = createClass({\r\n        init: function (el, options) {\r\n            var $el = $(el);\r\n            this.$el = $el;\r\n            this.options = options;\r\n            this.currentPageX = 0;\r\n            this.currentPageY = 0;\r\n            this.el = el;\r\n            this.splist = [];\r\n            this.tooltip = null;\r\n            this.over = false;\r\n            this.displayTooltips = !options.get('disableTooltips');\r\n            this.highlightEnabled = !options.get('disableHighlight');\r\n        },\r\n\r\n        registerSparkline: function (sp) {\r\n            this.splist.push(sp);\r\n            if (this.over) {\r\n                this.updateDisplay();\r\n            }\r\n        },\r\n\r\n        registerCanvas: function (canvas) {\r\n            var $canvas = $(canvas.canvas);\r\n            this.canvas = canvas;\r\n            this.$canvas = $canvas;\r\n            $canvas.mouseenter($.proxy(this.mouseenter, this));\r\n            $canvas.mouseleave($.proxy(this.mouseleave, this));\r\n            $canvas.click($.proxy(this.mouseclick, this));\r\n        },\r\n\r\n        reset: function (removeTooltip) {\r\n            this.splist = [];\r\n            if (this.tooltip && removeTooltip) {\r\n                this.tooltip.remove();\r\n                this.tooltip = undefined;\r\n            }\r\n        },\r\n\r\n        mouseclick: function (e) {\r\n            var clickEvent = $.Event('sparklineClick');\r\n            clickEvent.originalEvent = e;\r\n            clickEvent.sparklines = this.splist;\r\n            this.$el.trigger(clickEvent);\r\n        },\r\n\r\n        mouseenter: function (e) {\r\n            $(document.body).unbind('mousemove.jqs');\r\n            $(document.body).bind('mousemove.jqs', $.proxy(this.mousemove, this));\r\n            this.over = true;\r\n            this.currentPageX = e.pageX;\r\n            this.currentPageY = e.pageY;\r\n            this.currentEl = e.target;\r\n            if (!this.tooltip && this.displayTooltips) {\r\n                this.tooltip = new Tooltip(this.options);\r\n                this.tooltip.updatePosition(e.pageX, e.pageY);\r\n            }\r\n            this.updateDisplay();\r\n        },\r\n\r\n        mouseleave: function () {\r\n            $(document.body).unbind('mousemove.jqs');\r\n            var splist = this.splist,\r\n                 spcount = splist.length,\r\n                 needsRefresh = false,\r\n                 sp, i;\r\n            this.over = false;\r\n            this.currentEl = null;\r\n\r\n            if (this.tooltip) {\r\n                this.tooltip.remove();\r\n                this.tooltip = null;\r\n            }\r\n\r\n            for (i = 0; i < spcount; i++) {\r\n                sp = splist[i];\r\n                if (sp.clearRegionHighlight()) {\r\n                    needsRefresh = true;\r\n                }\r\n            }\r\n\r\n            if (needsRefresh) {\r\n                this.canvas.render();\r\n            }\r\n        },\r\n\r\n        mousemove: function (e) {\r\n            this.currentPageX = e.pageX;\r\n            this.currentPageY = e.pageY;\r\n            this.currentEl = e.target;\r\n            if (this.tooltip) {\r\n                this.tooltip.updatePosition(e.pageX, e.pageY);\r\n            }\r\n            this.updateDisplay();\r\n        },\r\n\r\n        updateDisplay: function () {\r\n            var splist = this.splist,\r\n                 spcount = splist.length,\r\n                 needsRefresh = false,\r\n                 offset = this.$canvas.offset(),\r\n                 localX = this.currentPageX - offset.left,\r\n                 localY = this.currentPageY - offset.top,\r\n                 tooltiphtml, sp, i, result, changeEvent;\r\n            if (!this.over) {\r\n                return;\r\n            }\r\n            for (i = 0; i < spcount; i++) {\r\n                sp = splist[i];\r\n                result = sp.setRegionHighlight(this.currentEl, localX, localY);\r\n                if (result) {\r\n                    needsRefresh = true;\r\n                }\r\n            }\r\n            if (needsRefresh) {\r\n                changeEvent = $.Event('sparklineRegionChange');\r\n                changeEvent.sparklines = this.splist;\r\n                this.$el.trigger(changeEvent);\r\n                if (this.tooltip) {\r\n                    tooltiphtml = '';\r\n                    for (i = 0; i < spcount; i++) {\r\n                        sp = splist[i];\r\n                        tooltiphtml += sp.getCurrentRegionTooltip();\r\n                    }\r\n                    this.tooltip.setContent(tooltiphtml);\r\n                }\r\n                if (!this.disableHighlight) {\r\n                    this.canvas.render();\r\n                }\r\n            }\r\n            if (result === null) {\r\n                this.mouseleave();\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    Tooltip = createClass({\r\n        sizeStyle: 'position: static !important;' +\r\n            'display: block !important;' +\r\n            'visibility: hidden !important;' +\r\n            'float: left !important;',\r\n\r\n        init: function (options) {\r\n            var tooltipClassname = options.get('tooltipClassname', 'jqstooltip'),\r\n                sizetipStyle = this.sizeStyle,\r\n                offset;\r\n            this.container = options.get('tooltipContainer') || document.body;\r\n            this.tooltipOffsetX = options.get('tooltipOffsetX', 10);\r\n            this.tooltipOffsetY = options.get('tooltipOffsetY', 12);\r\n            // remove any previous lingering tooltip\r\n            $('#jqssizetip').remove();\r\n            $('#jqstooltip').remove();\r\n            this.sizetip = $('<div/>', {\r\n                id: 'jqssizetip',\r\n                style: sizetipStyle,\r\n                'class': tooltipClassname\r\n            });\r\n            this.tooltip = $('<div/>', {\r\n                id: 'jqstooltip',\r\n                'class': tooltipClassname\r\n            }).appendTo(this.container);\r\n            // account for the container's location\r\n            offset = this.tooltip.offset();\r\n            this.offsetLeft = offset.left;\r\n            this.offsetTop = offset.top;\r\n            this.hidden = true;\r\n            $(window).unbind('resize.jqs scroll.jqs');\r\n            $(window).bind('resize.jqs scroll.jqs', $.proxy(this.updateWindowDims, this));\r\n            this.updateWindowDims();\r\n        },\r\n\r\n        updateWindowDims: function () {\r\n            this.scrollTop = $(window).scrollTop();\r\n            this.scrollLeft = $(window).scrollLeft();\r\n            this.scrollRight = this.scrollLeft + $(window).width();\r\n            this.updatePosition();\r\n        },\r\n\r\n        getSize: function (content) {\r\n            this.sizetip.html(content).appendTo(this.container);\r\n            this.width = this.sizetip.width() + 1;\r\n            this.height = this.sizetip.height();\r\n            this.sizetip.remove();\r\n        },\r\n\r\n        setContent: function (content) {\r\n            if (!content) {\r\n                this.tooltip.css('visibility', 'hidden');\r\n                this.hidden = true;\r\n                return;\r\n            }\r\n            this.getSize(content);\r\n            this.tooltip.html(content)\r\n                .css({\r\n                    'width': this.width,\r\n                    'height': this.height,\r\n                    'visibility': 'visible'\r\n                });\r\n            if (this.hidden) {\r\n                this.hidden = false;\r\n                this.updatePosition();\r\n            }\r\n        },\r\n\r\n        updatePosition: function (x, y) {\r\n            if (x === undefined) {\r\n                if (this.mousex === undefined) {\r\n                    return;\r\n                }\r\n                x = this.mousex - this.offsetLeft;\r\n                y = this.mousey - this.offsetTop;\r\n\r\n            } else {\r\n                this.mousex = x = x - this.offsetLeft;\r\n                this.mousey = y = y - this.offsetTop;\r\n            }\r\n            if (!this.height || !this.width || this.hidden) {\r\n                return;\r\n            }\r\n\r\n            y -= this.height + this.tooltipOffsetY;\r\n            x += this.tooltipOffsetX;\r\n\r\n            if (y < this.scrollTop) {\r\n                y = this.scrollTop;\r\n            }\r\n            if (x < this.scrollLeft) {\r\n                x = this.scrollLeft;\r\n            } else if (x + this.width > this.scrollRight) {\r\n                x = this.scrollRight - this.width;\r\n            }\r\n\r\n            this.tooltip.css({\r\n                'left': x,\r\n                'top': y\r\n            });\r\n        },\r\n\r\n        remove: function () {\r\n            this.tooltip.remove();\r\n            this.sizetip.remove();\r\n            this.sizetip = this.tooltip = undefined;\r\n            $(window).unbind('resize.jqs scroll.jqs');\r\n        }\r\n    });\r\n\r\n\r\n    initStyles = function() {\r\n        addCSS(defaultStyles);\r\n    };\r\n\r\n    $(initStyles);\r\n\r\n    pending = [];\r\n    $.fn.sparkline = function (userValues, userOptions) {\r\n        return this.each(function () {\r\n            var options = new $.fn.sparkline.options(this, userOptions),\r\n                 $this = $(this),\r\n                 render, i;\r\n            render = function () {\r\n                var values, width, height, tmp, mhandler, sp, vals;\r\n                if (userValues === 'html' || userValues === undefined) {\r\n                    vals = this.getAttribute(options.get('tagValuesAttribute'));\r\n                    if (vals === undefined || vals === null) {\r\n                        vals = $this.html();\r\n                    }\r\n                    values = vals.replace(/(^\\s*<!--)|(-->\\s*$)|\\s+/g, '').split(',');\r\n                } else {\r\n                    values = userValues;\r\n                }\r\n\r\n                width = options.get('width') === 'auto' ? values.length * options.get('defaultPixelsPerValue') : options.get('width');\r\n                if (options.get('height') === 'auto') {\r\n                    if (!options.get('composite') || !$.data(this, '_jqs_vcanvas')) {\r\n                        // must be a better way to get the line height\r\n                        tmp = document.createElement('span');\r\n                        tmp.innerHTML = 'a';\r\n                        $this.html(tmp);\r\n                        height = $(tmp).innerHeight() || $(tmp).height();\r\n                        $(tmp).remove();\r\n                        tmp = null;\r\n                    }\r\n                } else {\r\n                    height = options.get('height');\r\n                }\r\n\r\n                if (!options.get('disableInteraction')) {\r\n                    mhandler = $.data(this, '_jqs_mhandler');\r\n                    if (!mhandler) {\r\n                        mhandler = new MouseHandler(this, options);\r\n                        $.data(this, '_jqs_mhandler', mhandler);\r\n                    } else if (!options.get('composite')) {\r\n                        mhandler.reset();\r\n                    }\r\n                } else {\r\n                    mhandler = false;\r\n                }\r\n\r\n                if (options.get('composite') && !$.data(this, '_jqs_vcanvas')) {\r\n                    if (!$.data(this, '_jqs_errnotify')) {\r\n                        alert('Attempted to attach a composite sparkline to an element with no existing sparkline');\r\n                        $.data(this, '_jqs_errnotify', true);\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                sp = new $.fn.sparkline[options.get('type')](this, values, options, width, height);\r\n\r\n                sp.render();\r\n\r\n                if (mhandler) {\r\n                    mhandler.registerSparkline(sp);\r\n                }\r\n            };\r\n            if (($(this).html() && !options.get('disableHiddenCheck') && $(this).is(':hidden')) || !$(this).parents('body').length) {\r\n                if (!options.get('composite') && $.data(this, '_jqs_pending')) {\r\n                    // remove any existing references to the element\r\n                    for (i = pending.length; i; i--) {\r\n                        if (pending[i - 1][0] == this) {\r\n                            pending.splice(i - 1, 1);\r\n                        }\r\n                    }\r\n                }\r\n                pending.push([this, render]);\r\n                $.data(this, '_jqs_pending', true);\r\n            } else {\r\n                render.call(this);\r\n            }\r\n        });\r\n    };\r\n\r\n    $.fn.sparkline.defaults = getDefaults();\r\n\r\n\r\n    $.sparkline_display_visible = function () {\r\n        var el, i, pl;\r\n        var done = [];\r\n        for (i = 0, pl = pending.length; i < pl; i++) {\r\n            el = pending[i][0];\r\n            if ($(el).is(':visible') && !$(el).parents().is(':hidden')) {\r\n                pending[i][1].call(el);\r\n                $.data(pending[i][0], '_jqs_pending', false);\r\n                done.push(i);\r\n            } else if (!$(el).closest('html').length && !$.data(el, '_jqs_pending')) {\r\n                // element has been inserted and removed from the DOM\r\n                // If it was not yet inserted into the dom then the .data request\r\n                // will return true.\r\n                // removing from the dom causes the data to be removed.\r\n                $.data(pending[i][0], '_jqs_pending', false);\r\n                done.push(i);\r\n            }\r\n        }\r\n        for (i = done.length; i; i--) {\r\n            pending.splice(done[i - 1], 1);\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * User option handler\r\n     */\r\n    $.fn.sparkline.options = createClass({\r\n        init: function (tag, userOptions) {\r\n            var extendedOptions, defaults, base, tagOptionType;\r\n            this.userOptions = userOptions = userOptions || {};\r\n            this.tag = tag;\r\n            this.tagValCache = {};\r\n            defaults = $.fn.sparkline.defaults;\r\n            base = defaults.common;\r\n            this.tagOptionsPrefix = userOptions.enableTagOptions && (userOptions.tagOptionsPrefix || base.tagOptionsPrefix);\r\n\r\n            tagOptionType = this.getTagSetting('type');\r\n            if (tagOptionType === UNSET_OPTION) {\r\n                extendedOptions = defaults[userOptions.type || base.type];\r\n            } else {\r\n                extendedOptions = defaults[tagOptionType];\r\n            }\r\n            this.mergedOptions = $.extend({}, base, extendedOptions, userOptions);\r\n        },\r\n\r\n\r\n        getTagSetting: function (key) {\r\n            var prefix = this.tagOptionsPrefix,\r\n                val, i, pairs, keyval;\r\n            if (prefix === false || prefix === undefined) {\r\n                return UNSET_OPTION;\r\n            }\r\n            if (this.tagValCache.hasOwnProperty(key)) {\r\n                val = this.tagValCache.key;\r\n            } else {\r\n                val = this.tag.getAttribute(prefix + key);\r\n                if (val === undefined || val === null) {\r\n                    val = UNSET_OPTION;\r\n                } else if (val.substr(0, 1) === '[') {\r\n                    val = val.substr(1, val.length - 2).split(',');\r\n                    for (i = val.length; i--;) {\r\n                        val[i] = normalizeValue(val[i].replace(/(^\\s*)|(\\s*$)/g, ''));\r\n                    }\r\n                } else if (val.substr(0, 1) === '{') {\r\n                    pairs = val.substr(1, val.length - 2).split(',');\r\n                    val = {};\r\n                    for (i = pairs.length; i--;) {\r\n                        keyval = pairs[i].split(':', 2);\r\n                        val[keyval[0].replace(/(^\\s*)|(\\s*$)/g, '')] = normalizeValue(keyval[1].replace(/(^\\s*)|(\\s*$)/g, ''));\r\n                    }\r\n                } else {\r\n                    val = normalizeValue(val);\r\n                }\r\n                this.tagValCache.key = val;\r\n            }\r\n            return val;\r\n        },\r\n\r\n        get: function (key, defaultval) {\r\n            var tagOption = this.getTagSetting(key),\r\n                result;\r\n            if (tagOption !== UNSET_OPTION) {\r\n                return tagOption;\r\n            }\r\n            return (result = this.mergedOptions[key]) === undefined ? defaultval : result;\r\n        }\r\n    });\r\n\r\n\r\n    $.fn.sparkline._base = createClass({\r\n        disabled: false,\r\n\r\n        init: function (el, values, options, width, height) {\r\n            this.el = el;\r\n            this.$el = $(el);\r\n            this.values = values;\r\n            this.options = options;\r\n            this.width = width;\r\n            this.height = height;\r\n            this.currentRegion = undefined;\r\n        },\r\n\r\n        /**\r\n         * Setup the canvas\r\n         */\r\n        initTarget: function () {\r\n            var interactive = !this.options.get('disableInteraction');\r\n            if (!(this.target = this.$el.simpledraw(this.width, this.height, this.options.get('composite'), interactive))) {\r\n                this.disabled = true;\r\n            } else {\r\n                this.canvasWidth = this.target.pixelWidth;\r\n                this.canvasHeight = this.target.pixelHeight;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Actually render the chart to the canvas\r\n         */\r\n        render: function () {\r\n            if (this.disabled) {\r\n                this.el.innerHTML = '';\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Return a region id for a given x/y co-ordinate\r\n         */\r\n        getRegion: function (x, y) {\r\n        },\r\n\r\n        /**\r\n         * Highlight an item based on the moused-over x,y co-ordinate\r\n         */\r\n        setRegionHighlight: function (el, x, y) {\r\n            var currentRegion = this.currentRegion,\r\n                highlightEnabled = !this.options.get('disableHighlight'),\r\n                newRegion;\r\n            if (x > this.canvasWidth || y > this.canvasHeight || x < 0 || y < 0) {\r\n                return null;\r\n            }\r\n            newRegion = this.getRegion(el, x, y);\r\n            if (currentRegion !== newRegion) {\r\n                if (currentRegion !== undefined && highlightEnabled) {\r\n                    this.removeHighlight();\r\n                }\r\n                this.currentRegion = newRegion;\r\n                if (newRegion !== undefined && highlightEnabled) {\r\n                    this.renderHighlight();\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Reset any currently highlighted item\r\n         */\r\n        clearRegionHighlight: function () {\r\n            if (this.currentRegion !== undefined) {\r\n                this.removeHighlight();\r\n                this.currentRegion = undefined;\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n\r\n        renderHighlight: function () {\r\n            this.changeHighlight(true);\r\n        },\r\n\r\n        removeHighlight: function () {\r\n            this.changeHighlight(false);\r\n        },\r\n\r\n        changeHighlight: function (highlight)  {},\r\n\r\n        /**\r\n         * Fetch the HTML to display as a tooltip\r\n         */\r\n        getCurrentRegionTooltip: function () {\r\n            var options = this.options,\r\n                header = '',\r\n                entries = [],\r\n                fields, formats, formatlen, fclass, text, i,\r\n                showFields, showFieldsKey, newFields, fv,\r\n                formatter, format, fieldlen, j;\r\n            if (this.currentRegion === undefined) {\r\n                return '';\r\n            }\r\n            fields = this.getCurrentRegionFields();\r\n            formatter = options.get('tooltipFormatter');\r\n            if (formatter) {\r\n                return formatter(this, options, fields);\r\n            }\r\n            if (options.get('tooltipChartTitle')) {\r\n                header += '<div class=\"jqs jqstitle\">' + options.get('tooltipChartTitle') + '</div>\\n';\r\n            }\r\n            formats = this.options.get('tooltipFormat');\r\n            if (!formats) {\r\n                return '';\r\n            }\r\n            if (!$.isArray(formats)) {\r\n                formats = [formats];\r\n            }\r\n            if (!$.isArray(fields)) {\r\n                fields = [fields];\r\n            }\r\n            showFields = this.options.get('tooltipFormatFieldlist');\r\n            showFieldsKey = this.options.get('tooltipFormatFieldlistKey');\r\n            if (showFields && showFieldsKey) {\r\n                // user-selected ordering of fields\r\n                newFields = [];\r\n                for (i = fields.length; i--;) {\r\n                    fv = fields[i][showFieldsKey];\r\n                    if ((j = $.inArray(fv, showFields)) != -1) {\r\n                        newFields[j] = fields[i];\r\n                    }\r\n                }\r\n                fields = newFields;\r\n            }\r\n            formatlen = formats.length;\r\n            fieldlen = fields.length;\r\n            for (i = 0; i < formatlen; i++) {\r\n                format = formats[i];\r\n                if (typeof format === 'string') {\r\n                    format = new SPFormat(format);\r\n                }\r\n                fclass = format.fclass || 'jqsfield';\r\n                for (j = 0; j < fieldlen; j++) {\r\n                    if (!fields[j].isNull || !options.get('tooltipSkipNull')) {\r\n                        $.extend(fields[j], {\r\n                            prefix: options.get('tooltipPrefix'),\r\n                            suffix: options.get('tooltipSuffix')\r\n                        });\r\n                        text = format.render(fields[j], options.get('tooltipValueLookups'), options);\r\n                        entries.push('<div class=\"' + fclass + '\">' + text + '</div>');\r\n                    }\r\n                }\r\n            }\r\n            if (entries.length) {\r\n                return header + entries.join('\\n');\r\n            }\r\n            return '';\r\n        },\r\n\r\n        getCurrentRegionFields: function () {},\r\n\r\n        calcHighlightColor: function (color, options) {\r\n            var highlightColor = options.get('highlightColor'),\r\n                lighten = options.get('highlightLighten'),\r\n                parse, mult, rgbnew, i;\r\n            if (highlightColor) {\r\n                return highlightColor;\r\n            }\r\n            if (lighten) {\r\n                // extract RGB values\r\n                parse = /^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(color) || /^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(color);\r\n                if (parse) {\r\n                    rgbnew = [];\r\n                    mult = color.length === 4 ? 16 : 1;\r\n                    for (i = 0; i < 3; i++) {\r\n                        rgbnew[i] = clipval(Math.round(parseInt(parse[i + 1], 16) * mult * lighten), 0, 255);\r\n                    }\r\n                    return 'rgb(' + rgbnew.join(',') + ')';\r\n                }\r\n\r\n            }\r\n            return color;\r\n        }\r\n\r\n    });\r\n\r\n    barHighlightMixin = {\r\n        changeHighlight: function (highlight) {\r\n            var currentRegion = this.currentRegion,\r\n                target = this.target,\r\n                shapeids = this.regionShapes[currentRegion],\r\n                newShapes;\r\n            // will be null if the region value was null\r\n            if (shapeids) {\r\n                newShapes = this.renderRegion(currentRegion, highlight);\r\n                if ($.isArray(newShapes) || $.isArray(shapeids)) {\r\n                    target.replaceWithShapes(shapeids, newShapes);\r\n                    this.regionShapes[currentRegion] = $.map(newShapes, function (newShape) {\r\n                        return newShape.id;\r\n                    });\r\n                } else {\r\n                    target.replaceWithShape(shapeids, newShapes);\r\n                    this.regionShapes[currentRegion] = newShapes.id;\r\n                }\r\n            }\r\n        },\r\n\r\n        render: function () {\r\n            var values = this.values,\r\n                target = this.target,\r\n                regionShapes = this.regionShapes,\r\n                shapes, ids, i, j;\r\n\r\n            if (!this.cls._super.render.call(this)) {\r\n                return;\r\n            }\r\n            for (i = values.length; i--;) {\r\n                shapes = this.renderRegion(i);\r\n                if (shapes) {\r\n                    if ($.isArray(shapes)) {\r\n                        ids = [];\r\n                        for (j = shapes.length; j--;) {\r\n                            shapes[j].append();\r\n                            ids.push(shapes[j].id);\r\n                        }\r\n                        regionShapes[i] = ids;\r\n                    } else {\r\n                        shapes.append();\r\n                        regionShapes[i] = shapes.id; // store just the shapeid\r\n                    }\r\n                } else {\r\n                    // null value\r\n                    regionShapes[i] = null;\r\n                }\r\n            }\r\n            target.render();\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * Line charts\r\n     */\r\n    $.fn.sparkline.line = line = createClass($.fn.sparkline._base, {\r\n        type: 'line',\r\n\r\n        init: function (el, values, options, width, height) {\r\n            line._super.init.call(this, el, values, options, width, height);\r\n            this.vertices = [];\r\n            this.regionMap = [];\r\n            this.xvalues = [];\r\n            this.yvalues = [];\r\n            this.yminmax = [];\r\n            this.hightlightSpotId = null;\r\n            this.lastShapeId = null;\r\n            this.initTarget();\r\n        },\r\n\r\n        getRegion: function (el, x, y) {\r\n            var i,\r\n                regionMap = this.regionMap; // maps regions to value positions\r\n            for (i = regionMap.length; i--;) {\r\n                if (regionMap[i] !== null && x >= regionMap[i][0] && x <= regionMap[i][1]) {\r\n                    return regionMap[i][2];\r\n                }\r\n            }\r\n            return undefined;\r\n        },\r\n\r\n        getCurrentRegionFields: function () {\r\n            var currentRegion = this.currentRegion;\r\n            return {\r\n                isNull: this.yvalues[currentRegion] === null,\r\n                x: this.xvalues[currentRegion],\r\n                y: this.yvalues[currentRegion],\r\n                color: this.options.get('lineColor'),\r\n                fillColor: this.options.get('fillColor'),\r\n                offset: currentRegion\r\n            };\r\n        },\r\n\r\n        renderHighlight: function () {\r\n            var currentRegion = this.currentRegion,\r\n                target = this.target,\r\n                vertex = this.vertices[currentRegion],\r\n                options = this.options,\r\n                spotRadius = options.get('spotRadius'),\r\n                highlightSpotColor = options.get('highlightSpotColor'),\r\n                highlightLineColor = options.get('highlightLineColor'),\r\n                highlightSpot, highlightLine;\r\n\r\n            if (!vertex) {\r\n                return;\r\n            }\r\n            if (spotRadius && highlightSpotColor) {\r\n                highlightSpot = target.drawCircle(vertex[0], vertex[1],\r\n                    spotRadius, undefined, highlightSpotColor);\r\n                this.highlightSpotId = highlightSpot.id;\r\n                target.insertAfterShape(this.lastShapeId, highlightSpot);\r\n            }\r\n            if (highlightLineColor) {\r\n                highlightLine = target.drawLine(vertex[0], this.canvasTop, vertex[0],\r\n                    this.canvasTop + this.canvasHeight, highlightLineColor);\r\n                this.highlightLineId = highlightLine.id;\r\n                target.insertAfterShape(this.lastShapeId, highlightLine);\r\n            }\r\n        },\r\n\r\n        removeHighlight: function () {\r\n            var target = this.target;\r\n            if (this.highlightSpotId) {\r\n                target.removeShapeId(this.highlightSpotId);\r\n                this.highlightSpotId = null;\r\n            }\r\n            if (this.highlightLineId) {\r\n                target.removeShapeId(this.highlightLineId);\r\n                this.highlightLineId = null;\r\n            }\r\n        },\r\n\r\n        scanValues: function () {\r\n            var values = this.values,\r\n                valcount = values.length,\r\n                xvalues = this.xvalues,\r\n                yvalues = this.yvalues,\r\n                yminmax = this.yminmax,\r\n                i, val, isStr, isArray, sp;\r\n            for (i = 0; i < valcount; i++) {\r\n                val = values[i];\r\n                isStr = typeof(values[i]) === 'string';\r\n                isArray = typeof(values[i]) === 'object' && values[i] instanceof Array;\r\n                sp = isStr && values[i].split(':');\r\n                if (isStr && sp.length === 2) { // x:y\r\n                    xvalues.push(Number(sp[0]));\r\n                    yvalues.push(Number(sp[1]));\r\n                    yminmax.push(Number(sp[1]));\r\n                } else if (isArray) {\r\n                    xvalues.push(val[0]);\r\n                    yvalues.push(val[1]);\r\n                    yminmax.push(val[1]);\r\n                } else {\r\n                    xvalues.push(i);\r\n                    if (values[i] === null || values[i] === 'null') {\r\n                        yvalues.push(null);\r\n                    } else {\r\n                        yvalues.push(Number(val));\r\n                        yminmax.push(Number(val));\r\n                    }\r\n                }\r\n            }\r\n            if (this.options.get('xvalues')) {\r\n                xvalues = this.options.get('xvalues');\r\n            }\r\n\r\n            this.maxy = this.maxyorg = Math.max.apply(Math, yminmax);\r\n            this.miny = this.minyorg = Math.min.apply(Math, yminmax);\r\n\r\n            this.maxx = Math.max.apply(Math, xvalues);\r\n            this.minx = Math.min.apply(Math, xvalues);\r\n\r\n            this.xvalues = xvalues;\r\n            this.yvalues = yvalues;\r\n            this.yminmax = yminmax;\r\n\r\n        },\r\n\r\n        processRangeOptions: function () {\r\n            var options = this.options,\r\n                normalRangeMin = options.get('normalRangeMin'),\r\n                normalRangeMax = options.get('normalRangeMax');\r\n\r\n            if (normalRangeMin !== undefined) {\r\n                if (normalRangeMin < this.miny) {\r\n                    this.miny = normalRangeMin;\r\n                }\r\n                if (normalRangeMax > this.maxy) {\r\n                    this.maxy = normalRangeMax;\r\n                }\r\n            }\r\n            if (options.get('chartRangeMin') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMin') < this.miny)) {\r\n                this.miny = options.get('chartRangeMin');\r\n            }\r\n            if (options.get('chartRangeMax') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMax') > this.maxy)) {\r\n                this.maxy = options.get('chartRangeMax');\r\n            }\r\n            if (options.get('chartRangeMinX') !== undefined && (options.get('chartRangeClipX') || options.get('chartRangeMinX') < this.minx)) {\r\n                this.minx = options.get('chartRangeMinX');\r\n            }\r\n            if (options.get('chartRangeMaxX') !== undefined && (options.get('chartRangeClipX') || options.get('chartRangeMaxX') > this.maxx)) {\r\n                this.maxx = options.get('chartRangeMaxX');\r\n            }\r\n\r\n        },\r\n\r\n        drawNormalRange: function (canvasLeft, canvasTop, canvasHeight, canvasWidth, rangey) {\r\n            var normalRangeMin = this.options.get('normalRangeMin'),\r\n                normalRangeMax = this.options.get('normalRangeMax'),\r\n                ytop = canvasTop + Math.round(canvasHeight - (canvasHeight * ((normalRangeMax - this.miny) / rangey))),\r\n                height = Math.round((canvasHeight * (normalRangeMax - normalRangeMin)) / rangey);\r\n            this.target.drawRect(canvasLeft, ytop, canvasWidth, height, undefined, this.options.get('normalRangeColor')).append();\r\n        },\r\n\r\n        render: function () {\r\n            var options = this.options,\r\n                target = this.target,\r\n                canvasWidth = this.canvasWidth,\r\n                canvasHeight = this.canvasHeight,\r\n                vertices = this.vertices,\r\n                spotRadius = options.get('spotRadius'),\r\n                regionMap = this.regionMap,\r\n                rangex, rangey, yvallast,\r\n                canvasTop, canvasLeft,\r\n                vertex, path, paths, x, y, xnext, xpos, xposnext,\r\n                last, next, yvalcount, lineShapes, fillShapes, plen,\r\n                valueSpots, hlSpotsEnabled, color, xvalues, yvalues, i;\r\n\r\n            if (!line._super.render.call(this)) {\r\n                return;\r\n            }\r\n\r\n            this.scanValues();\r\n            this.processRangeOptions();\r\n\r\n            xvalues = this.xvalues;\r\n            yvalues = this.yvalues;\r\n\r\n            if (!this.yminmax.length || this.yvalues.length < 2) {\r\n                // empty or all null valuess\r\n                return;\r\n            }\r\n\r\n            canvasTop = canvasLeft = 0;\r\n\r\n            rangex = this.maxx - this.minx === 0 ? 1 : this.maxx - this.minx;\r\n            rangey = this.maxy - this.miny === 0 ? 1 : this.maxy - this.miny;\r\n            yvallast = this.yvalues.length - 1;\r\n\r\n            if (spotRadius && (canvasWidth < (spotRadius * 4) || canvasHeight < (spotRadius * 4))) {\r\n                spotRadius = 0;\r\n            }\r\n            if (spotRadius) {\r\n                // adjust the canvas size as required so that spots will fit\r\n                hlSpotsEnabled = options.get('highlightSpotColor') &&  !options.get('disableInteraction');\r\n                if (hlSpotsEnabled || options.get('minSpotColor') || (options.get('spotColor') && yvalues[yvallast] === this.miny)) {\r\n                    canvasHeight -= Math.ceil(spotRadius);\r\n                }\r\n                if (hlSpotsEnabled || options.get('maxSpotColor') || (options.get('spotColor') && yvalues[yvallast] === this.maxy)) {\r\n                    canvasHeight -= Math.ceil(spotRadius);\r\n                    canvasTop += Math.ceil(spotRadius);\r\n                }\r\n                if (hlSpotsEnabled ||\r\n                     ((options.get('minSpotColor') || options.get('maxSpotColor')) && (yvalues[0] === this.miny || yvalues[0] === this.maxy))) {\r\n                    canvasLeft += Math.ceil(spotRadius);\r\n                    canvasWidth -= Math.ceil(spotRadius);\r\n                }\r\n                if (hlSpotsEnabled || options.get('spotColor') ||\r\n                    (options.get('minSpotColor') || options.get('maxSpotColor') &&\r\n                        (yvalues[yvallast] === this.miny || yvalues[yvallast] === this.maxy))) {\r\n                    canvasWidth -= Math.ceil(spotRadius);\r\n                }\r\n            }\r\n\r\n\r\n            canvasHeight--;\r\n\r\n            if (options.get('normalRangeMin') !== undefined && !options.get('drawNormalOnTop')) {\r\n                this.drawNormalRange(canvasLeft, canvasTop, canvasHeight, canvasWidth, rangey);\r\n            }\r\n\r\n            path = [];\r\n            paths = [path];\r\n            last = next = null;\r\n            yvalcount = yvalues.length;\r\n            for (i = 0; i < yvalcount; i++) {\r\n                x = xvalues[i];\r\n                xnext = xvalues[i + 1];\r\n                y = yvalues[i];\r\n                xpos = canvasLeft + Math.round((x - this.minx) * (canvasWidth / rangex));\r\n                xposnext = i < yvalcount - 1 ? canvasLeft + Math.round((xnext - this.minx) * (canvasWidth / rangex)) : canvasWidth;\r\n                next = xpos + ((xposnext - xpos) / 2);\r\n                regionMap[i] = [last || 0, next, i];\r\n                last = next;\r\n                if (y === null) {\r\n                    if (i) {\r\n                        if (yvalues[i - 1] !== null) {\r\n                            path = [];\r\n                            paths.push(path);\r\n                        }\r\n                        vertices.push(null);\r\n                    }\r\n                } else {\r\n                    if (y < this.miny) {\r\n                        y = this.miny;\r\n                    }\r\n                    if (y > this.maxy) {\r\n                        y = this.maxy;\r\n                    }\r\n                    if (!path.length) {\r\n                        // previous value was null\r\n                        path.push([xpos, canvasTop + canvasHeight]);\r\n                    }\r\n                    vertex = [xpos, canvasTop + Math.round(canvasHeight - (canvasHeight * ((y - this.miny) / rangey)))];\r\n                    path.push(vertex);\r\n                    vertices.push(vertex);\r\n                }\r\n            }\r\n\r\n            lineShapes = [];\r\n            fillShapes = [];\r\n            plen = paths.length;\r\n            for (i = 0; i < plen; i++) {\r\n                path = paths[i];\r\n                if (path.length) {\r\n                    if (options.get('fillColor')) {\r\n                        path.push([path[path.length - 1][0], (canvasTop + canvasHeight)]);\r\n                        fillShapes.push(path.slice(0));\r\n                        path.pop();\r\n                    }\r\n                    // if there's only a single point in this path, then we want to display it\r\n                    // as a vertical line which means we keep path[0]  as is\r\n                    if (path.length > 2) {\r\n                        // else we want the first value\r\n                        path[0] = [path[0][0], path[1][1]];\r\n                    }\r\n                    lineShapes.push(path);\r\n                }\r\n            }\r\n\r\n            // draw the fill first, then optionally the normal range, then the line on top of that\r\n            plen = fillShapes.length;\r\n            for (i = 0; i < plen; i++) {\r\n                target.drawShape(fillShapes[i],\r\n                    options.get('fillColor'), options.get('fillColor')).append();\r\n            }\r\n\r\n            if (options.get('normalRangeMin') !== undefined && options.get('drawNormalOnTop')) {\r\n                this.drawNormalRange(canvasLeft, canvasTop, canvasHeight, canvasWidth, rangey);\r\n            }\r\n\r\n            plen = lineShapes.length;\r\n            for (i = 0; i < plen; i++) {\r\n                target.drawShape(lineShapes[i], options.get('lineColor'), undefined,\r\n                    options.get('lineWidth')).append();\r\n            }\r\n\r\n            if (spotRadius && options.get('valueSpots')) {\r\n                valueSpots = options.get('valueSpots');\r\n                if (valueSpots.get === undefined) {\r\n                    valueSpots = new RangeMap(valueSpots);\r\n                }\r\n                for (i = 0; i < yvalcount; i++) {\r\n                    color = valueSpots.get(yvalues[i]);\r\n                    if (color) {\r\n                        target.drawCircle(canvasLeft + Math.round((xvalues[i] - this.minx) * (canvasWidth / rangex)),\r\n                            canvasTop + Math.round(canvasHeight - (canvasHeight * ((yvalues[i] - this.miny) / rangey))),\r\n                            spotRadius, undefined,\r\n                            color).append();\r\n                    }\r\n                }\r\n\r\n            }\r\n            if (spotRadius && options.get('spotColor') && yvalues[yvallast] !== null) {\r\n                target.drawCircle(canvasLeft + Math.round((xvalues[xvalues.length - 1] - this.minx) * (canvasWidth / rangex)),\r\n                    canvasTop + Math.round(canvasHeight - (canvasHeight * ((yvalues[yvallast] - this.miny) / rangey))),\r\n                    spotRadius, undefined,\r\n                    options.get('spotColor')).append();\r\n            }\r\n            if (this.maxy !== this.minyorg) {\r\n                if (spotRadius && options.get('minSpotColor')) {\r\n                    x = xvalues[$.inArray(this.minyorg, yvalues)];\r\n                    target.drawCircle(canvasLeft + Math.round((x - this.minx) * (canvasWidth / rangex)),\r\n                        canvasTop + Math.round(canvasHeight - (canvasHeight * ((this.minyorg - this.miny) / rangey))),\r\n                        spotRadius, undefined,\r\n                        options.get('minSpotColor')).append();\r\n                }\r\n                if (spotRadius && options.get('maxSpotColor')) {\r\n                    x = xvalues[$.inArray(this.maxyorg, yvalues)];\r\n                    target.drawCircle(canvasLeft + Math.round((x - this.minx) * (canvasWidth / rangex)),\r\n                        canvasTop + Math.round(canvasHeight - (canvasHeight * ((this.maxyorg - this.miny) / rangey))),\r\n                        spotRadius, undefined,\r\n                        options.get('maxSpotColor')).append();\r\n                }\r\n            }\r\n\r\n            this.lastShapeId = target.getLastShapeId();\r\n            this.canvasTop = canvasTop;\r\n            target.render();\r\n        }\r\n    });\r\n\r\n\r\n    /**\r\n     * Bar charts\r\n     */\r\n    $.fn.sparkline.bar = bar = createClass($.fn.sparkline._base, barHighlightMixin, {\r\n        type: 'bar',\r\n\r\n        init: function (el, values, options, width, height) {\r\n            var barWidth = parseInt(options.get('barWidth'), 10),\r\n                barSpacing = parseInt(options.get('barSpacing'), 10),\r\n                chartRangeMin = options.get('chartRangeMin'),\r\n                chartRangeMax = options.get('chartRangeMax'),\r\n                chartRangeClip = options.get('chartRangeClip'),\r\n                stackMin = Infinity,\r\n                stackMax = -Infinity,\r\n                isStackString, groupMin, groupMax, stackRanges,\r\n                numValues, i, vlen, range, zeroAxis, xaxisOffset, min, max, clipMin, clipMax,\r\n                stacked, vlist, j, slen, svals, val, yoffset, yMaxCalc, canvasHeightEf;\r\n            bar._super.init.call(this, el, values, options, width, height);\r\n\r\n            // scan values to determine whether to stack bars\r\n            for (i = 0, vlen = values.length; i < vlen; i++) {\r\n                val = values[i];\r\n                isStackString = typeof(val) === 'string' && val.indexOf(':') > -1;\r\n                if (isStackString || $.isArray(val)) {\r\n                    stacked = true;\r\n                    if (isStackString) {\r\n                        val = values[i] = normalizeValues(val.split(':'));\r\n                    }\r\n                    val = remove(val, null); // min/max will treat null as zero\r\n                    groupMin = Math.min.apply(Math, val);\r\n                    groupMax = Math.max.apply(Math, val);\r\n                    if (groupMin < stackMin) {\r\n                        stackMin = groupMin;\r\n                    }\r\n                    if (groupMax > stackMax) {\r\n                        stackMax = groupMax;\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.stacked = stacked;\r\n            this.regionShapes = {};\r\n            this.barWidth = barWidth;\r\n            this.barSpacing = barSpacing;\r\n            this.totalBarWidth = barWidth + barSpacing;\r\n            this.width = width = (values.length * barWidth) + ((values.length - 1) * barSpacing);\r\n\r\n            this.initTarget();\r\n\r\n            if (chartRangeClip) {\r\n                clipMin = chartRangeMin === undefined ? -Infinity : chartRangeMin;\r\n                clipMax = chartRangeMax === undefined ? Infinity : chartRangeMax;\r\n            }\r\n\r\n            numValues = [];\r\n            stackRanges = stacked ? [] : numValues;\r\n            var stackTotals = [];\r\n            var stackRangesNeg = [];\r\n            for (i = 0, vlen = values.length; i < vlen; i++) {\r\n                if (stacked) {\r\n                    vlist = values[i];\r\n                    values[i] = svals = [];\r\n                    stackTotals[i] = 0;\r\n                    stackRanges[i] = stackRangesNeg[i] = 0;\r\n                    for (j = 0, slen = vlist.length; j < slen; j++) {\r\n                        val = svals[j] = chartRangeClip ? clipval(vlist[j], clipMin, clipMax) : vlist[j];\r\n                        if (val !== null) {\r\n                            if (val > 0) {\r\n                                stackTotals[i] += val;\r\n                            }\r\n                            if (stackMin < 0 && stackMax > 0) {\r\n                                if (val < 0) {\r\n                                    stackRangesNeg[i] += Math.abs(val);\r\n                                } else {\r\n                                    stackRanges[i] += val;\r\n                                }\r\n                            } else {\r\n                                stackRanges[i] += Math.abs(val - (val < 0 ? stackMax : stackMin));\r\n                            }\r\n                            numValues.push(val);\r\n                        }\r\n                    }\r\n                } else {\r\n                    val = chartRangeClip ? clipval(values[i], clipMin, clipMax) : values[i];\r\n                    val = values[i] = normalizeValue(val);\r\n                    if (val !== null) {\r\n                        numValues.push(val);\r\n                    }\r\n                }\r\n            }\r\n            this.max = max = Math.max.apply(Math, numValues);\r\n            this.min = min = Math.min.apply(Math, numValues);\r\n            this.stackMax = stackMax = stacked ? Math.max.apply(Math, stackTotals) : max;\r\n            this.stackMin = stackMin = stacked ? Math.min.apply(Math, numValues) : min;\r\n\r\n            if (options.get('chartRangeMin') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMin') < min)) {\r\n                min = options.get('chartRangeMin');\r\n            }\r\n            if (options.get('chartRangeMax') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMax') > max)) {\r\n                max = options.get('chartRangeMax');\r\n            }\r\n\r\n            this.zeroAxis = zeroAxis = options.get('zeroAxis', true);\r\n            if (min <= 0 && max >= 0 && zeroAxis) {\r\n                xaxisOffset = 0;\r\n            } else if (zeroAxis == false) {\r\n                xaxisOffset = min;\r\n            } else if (min > 0) {\r\n                xaxisOffset = min;\r\n            } else {\r\n                xaxisOffset = max;\r\n            }\r\n            this.xaxisOffset = xaxisOffset;\r\n\r\n            range = stacked ? (Math.max.apply(Math, stackRanges) + Math.max.apply(Math, stackRangesNeg)) : max - min;\r\n\r\n            // as we plot zero/min values a single pixel line, we add a pixel to all other\r\n            // values - Reduce the effective canvas size to suit\r\n            this.canvasHeightEf = (zeroAxis && min < 0) ? this.canvasHeight - 2 : this.canvasHeight - 1;\r\n\r\n            if (min < xaxisOffset) {\r\n                yMaxCalc = (stacked && max >= 0) ? stackMax : max;\r\n                yoffset = (yMaxCalc - xaxisOffset) / range * this.canvasHeight;\r\n                if (yoffset !== Math.ceil(yoffset)) {\r\n                    this.canvasHeightEf -= 2;\r\n                    yoffset = Math.ceil(yoffset);\r\n                }\r\n            } else {\r\n                yoffset = this.canvasHeight;\r\n            }\r\n            this.yoffset = yoffset;\r\n\r\n            if ($.isArray(options.get('colorMap'))) {\r\n                this.colorMapByIndex = options.get('colorMap');\r\n                this.colorMapByValue = null;\r\n            } else {\r\n                this.colorMapByIndex = null;\r\n                this.colorMapByValue = options.get('colorMap');\r\n                if (this.colorMapByValue && this.colorMapByValue.get === undefined) {\r\n                    this.colorMapByValue = new RangeMap(this.colorMapByValue);\r\n                }\r\n            }\r\n\r\n            this.range = range;\r\n        },\r\n\r\n        getRegion: function (el, x, y) {\r\n            var result = Math.floor(x / this.totalBarWidth);\r\n            return (result < 0 || result >= this.values.length) ? undefined : result;\r\n        },\r\n\r\n        getCurrentRegionFields: function () {\r\n            var currentRegion = this.currentRegion,\r\n                values = ensureArray(this.values[currentRegion]),\r\n                result = [],\r\n                value, i;\r\n            for (i = values.length; i--;) {\r\n                value = values[i];\r\n                result.push({\r\n                    isNull: value === null,\r\n                    value: value,\r\n                    color: this.calcColor(i, value, currentRegion),\r\n                    offset: currentRegion\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n\r\n        calcColor: function (stacknum, value, valuenum) {\r\n            var colorMapByIndex = this.colorMapByIndex,\r\n                colorMapByValue = this.colorMapByValue,\r\n                options = this.options,\r\n                color, newColor;\r\n            if (this.stacked) {\r\n                color = options.get('stackedBarColor');\r\n            } else {\r\n                color = (value < 0) ? options.get('negBarColor') : options.get('barColor');\r\n            }\r\n            if (value === 0 && options.get('zeroColor') !== undefined) {\r\n                color = options.get('zeroColor');\r\n            }\r\n            if (colorMapByValue && (newColor = colorMapByValue.get(value))) {\r\n                color = newColor;\r\n            } else if (colorMapByIndex && colorMapByIndex.length > valuenum) {\r\n                color = colorMapByIndex[valuenum];\r\n            }\r\n            return $.isArray(color) ? color[stacknum % color.length] : color;\r\n        },\r\n\r\n        /**\r\n         * Render bar(s) for a region\r\n         */\r\n        renderRegion: function (valuenum, highlight) {\r\n            var vals = this.values[valuenum],\r\n                options = this.options,\r\n                xaxisOffset = this.xaxisOffset,\r\n                result = [],\r\n                range = this.range,\r\n                stacked = this.stacked,\r\n                target = this.target,\r\n                x = valuenum * this.totalBarWidth,\r\n                canvasHeightEf = this.canvasHeightEf,\r\n                yoffset = this.yoffset,\r\n                y, height, color, isNull, yoffsetNeg, i, valcount, val, minPlotted, allMin;\r\n\r\n            vals = $.isArray(vals) ? vals : [vals];\r\n            valcount = vals.length;\r\n            val = vals[0];\r\n            isNull = all(null, vals);\r\n            allMin = all(xaxisOffset, vals, true);\r\n\r\n            if (isNull) {\r\n                if (options.get('nullColor')) {\r\n                    color = highlight ? options.get('nullColor') : this.calcHighlightColor(options.get('nullColor'), options);\r\n                    y = (yoffset > 0) ? yoffset - 1 : yoffset;\r\n                    return target.drawRect(x, y, this.barWidth - 1, 0, color, color);\r\n                } else {\r\n                    return undefined;\r\n                }\r\n            }\r\n            yoffsetNeg = yoffset;\r\n            for (i = 0; i < valcount; i++) {\r\n                val = vals[i];\r\n\r\n                if (stacked && val === xaxisOffset) {\r\n                    if (!allMin || minPlotted) {\r\n                        continue;\r\n                    }\r\n                    minPlotted = true;\r\n                }\r\n\r\n                if (range > 0) {\r\n                    height = Math.floor(canvasHeightEf * ((Math.abs(val - xaxisOffset) / range))) + 1;\r\n                } else {\r\n                    height = 1;\r\n                }\r\n                if (val < xaxisOffset || (val === xaxisOffset && yoffset === 0)) {\r\n                    y = yoffsetNeg;\r\n                    yoffsetNeg += height;\r\n                } else {\r\n                    y = yoffset - height;\r\n                    yoffset -= height;\r\n                }\r\n                color = this.calcColor(i, val, valuenum);\r\n                if (highlight) {\r\n                    color = this.calcHighlightColor(color, options);\r\n                }\r\n                result.push(target.drawRect(x, y, this.barWidth - 1, height - 1, color, color));\r\n            }\r\n            if (result.length === 1) {\r\n                return result[0];\r\n            }\r\n            return result;\r\n        }\r\n    });\r\n\r\n\r\n    /**\r\n     * Tristate charts\r\n     */\r\n    $.fn.sparkline.tristate = tristate = createClass($.fn.sparkline._base, barHighlightMixin, {\r\n        type: 'tristate',\r\n\r\n        init: function (el, values, options, width, height) {\r\n            var barWidth = parseInt(options.get('barWidth'), 10),\r\n                barSpacing = parseInt(options.get('barSpacing'), 10);\r\n            tristate._super.init.call(this, el, values, options, width, height);\r\n\r\n            this.regionShapes = {};\r\n            this.barWidth = barWidth;\r\n            this.barSpacing = barSpacing;\r\n            this.totalBarWidth = barWidth + barSpacing;\r\n            this.values = $.map(values, Number);\r\n            this.width = width = (values.length * barWidth) + ((values.length - 1) * barSpacing);\r\n\r\n            if ($.isArray(options.get('colorMap'))) {\r\n                this.colorMapByIndex = options.get('colorMap');\r\n                this.colorMapByValue = null;\r\n            } else {\r\n                this.colorMapByIndex = null;\r\n                this.colorMapByValue = options.get('colorMap');\r\n                if (this.colorMapByValue && this.colorMapByValue.get === undefined) {\r\n                    this.colorMapByValue = new RangeMap(this.colorMapByValue);\r\n                }\r\n            }\r\n            this.initTarget();\r\n        },\r\n\r\n        getRegion: function (el, x, y) {\r\n            return Math.floor(x / this.totalBarWidth);\r\n        },\r\n\r\n        getCurrentRegionFields: function () {\r\n            var currentRegion = this.currentRegion;\r\n            return {\r\n                isNull: this.values[currentRegion] === undefined,\r\n                value: this.values[currentRegion],\r\n                color: this.calcColor(this.values[currentRegion], currentRegion),\r\n                offset: currentRegion\r\n            };\r\n        },\r\n\r\n        calcColor: function (value, valuenum) {\r\n            var values = this.values,\r\n                options = this.options,\r\n                colorMapByIndex = this.colorMapByIndex,\r\n                colorMapByValue = this.colorMapByValue,\r\n                color, newColor;\r\n\r\n            if (colorMapByValue && (newColor = colorMapByValue.get(value))) {\r\n                color = newColor;\r\n            } else if (colorMapByIndex && colorMapByIndex.length > valuenum) {\r\n                color = colorMapByIndex[valuenum];\r\n            } else if (values[valuenum] < 0) {\r\n                color = options.get('negBarColor');\r\n            } else if (values[valuenum] > 0) {\r\n                color = options.get('posBarColor');\r\n            } else {\r\n                color = options.get('zeroBarColor');\r\n            }\r\n            return color;\r\n        },\r\n\r\n        renderRegion: function (valuenum, highlight) {\r\n            var values = this.values,\r\n                options = this.options,\r\n                target = this.target,\r\n                canvasHeight, height, halfHeight,\r\n                x, y, color;\r\n\r\n            canvasHeight = target.pixelHeight;\r\n            halfHeight = Math.round(canvasHeight / 2);\r\n\r\n            x = valuenum * this.totalBarWidth;\r\n            if (values[valuenum] < 0) {\r\n                y = halfHeight;\r\n                height = halfHeight - 1;\r\n            } else if (values[valuenum] > 0) {\r\n                y = 0;\r\n                height = halfHeight - 1;\r\n            } else {\r\n                y = halfHeight - 1;\r\n                height = 2;\r\n            }\r\n            color = this.calcColor(values[valuenum], valuenum);\r\n            if (color === null) {\r\n                return;\r\n            }\r\n            if (highlight) {\r\n                color = this.calcHighlightColor(color, options);\r\n            }\r\n            return target.drawRect(x, y, this.barWidth - 1, height - 1, color, color);\r\n        }\r\n    });\r\n\r\n\r\n    /**\r\n     * Discrete charts\r\n     */\r\n    $.fn.sparkline.discrete = discrete = createClass($.fn.sparkline._base, barHighlightMixin, {\r\n        type: 'discrete',\r\n\r\n        init: function (el, values, options, width, height) {\r\n            discrete._super.init.call(this, el, values, options, width, height);\r\n\r\n            this.regionShapes = {};\r\n            this.values = values = $.map(values, Number);\r\n            this.min = Math.min.apply(Math, values);\r\n            this.max = Math.max.apply(Math, values);\r\n            this.range = this.max - this.min;\r\n            this.width = width = options.get('width') === 'auto' ? values.length * 2 : this.width;\r\n            this.interval = Math.floor(width / values.length);\r\n            this.itemWidth = width / values.length;\r\n            if (options.get('chartRangeMin') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMin') < this.min)) {\r\n                this.min = options.get('chartRangeMin');\r\n            }\r\n            if (options.get('chartRangeMax') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMax') > this.max)) {\r\n                this.max = options.get('chartRangeMax');\r\n            }\r\n            this.initTarget();\r\n            if (this.target) {\r\n                this.lineHeight = options.get('lineHeight') === 'auto' ? Math.round(this.canvasHeight * 0.3) : options.get('lineHeight');\r\n            }\r\n        },\r\n\r\n        getRegion: function (el, x, y) {\r\n            return Math.floor(x / this.itemWidth);\r\n        },\r\n\r\n        getCurrentRegionFields: function () {\r\n            var currentRegion = this.currentRegion;\r\n            return {\r\n                isNull: this.values[currentRegion] === undefined,\r\n                value: this.values[currentRegion],\r\n                offset: currentRegion\r\n            };\r\n        },\r\n\r\n        renderRegion: function (valuenum, highlight) {\r\n            var values = this.values,\r\n                options = this.options,\r\n                min = this.min,\r\n                max = this.max,\r\n                range = this.range,\r\n                interval = this.interval,\r\n                target = this.target,\r\n                canvasHeight = this.canvasHeight,\r\n                lineHeight = this.lineHeight,\r\n                pheight = canvasHeight - lineHeight,\r\n                ytop, val, color, x;\r\n\r\n            val = clipval(values[valuenum], min, max);\r\n            x = valuenum * interval;\r\n            ytop = Math.round(pheight - pheight * ((val - min) / range));\r\n            color = (options.get('thresholdColor') && val < options.get('thresholdValue')) ? options.get('thresholdColor') : options.get('lineColor');\r\n            if (highlight) {\r\n                color = this.calcHighlightColor(color, options);\r\n            }\r\n            return target.drawLine(x, ytop, x, ytop + lineHeight, color);\r\n        }\r\n    });\r\n\r\n\r\n    /**\r\n     * Bullet charts\r\n     */\r\n    $.fn.sparkline.bullet = bullet = createClass($.fn.sparkline._base, {\r\n        type: 'bullet',\r\n\r\n        init: function (el, values, options, width, height) {\r\n            var min, max, vals;\r\n            bullet._super.init.call(this, el, values, options, width, height);\r\n\r\n            // values: target, performance, range1, range2, range3\r\n            this.values = values = normalizeValues(values);\r\n            // target or performance could be null\r\n            vals = values.slice();\r\n            vals[0] = vals[0] === null ? vals[2] : vals[0];\r\n            vals[1] = values[1] === null ? vals[2] : vals[1];\r\n            min = Math.min.apply(Math, values);\r\n            max = Math.max.apply(Math, values);\r\n            if (options.get('base') === undefined) {\r\n                min = min < 0 ? min : 0;\r\n            } else {\r\n                min = options.get('base');\r\n            }\r\n            this.min = min;\r\n            this.max = max;\r\n            this.range = max - min;\r\n            this.shapes = {};\r\n            this.valueShapes = {};\r\n            this.regiondata = {};\r\n            this.width = width = options.get('width') === 'auto' ? '4.0em' : width;\r\n            this.target = this.$el.simpledraw(width, height, options.get('composite'));\r\n            if (!values.length) {\r\n                this.disabled = true;\r\n            }\r\n            this.initTarget();\r\n        },\r\n\r\n        getRegion: function (el, x, y) {\r\n            var shapeid = this.target.getShapeAt(el, x, y);\r\n            return (shapeid !== undefined && this.shapes[shapeid] !== undefined) ? this.shapes[shapeid] : undefined;\r\n        },\r\n\r\n        getCurrentRegionFields: function () {\r\n            var currentRegion = this.currentRegion;\r\n            return {\r\n                fieldkey: currentRegion.substr(0, 1),\r\n                value: this.values[currentRegion.substr(1)],\r\n                region: currentRegion\r\n            };\r\n        },\r\n\r\n        changeHighlight: function (highlight) {\r\n            var currentRegion = this.currentRegion,\r\n                shapeid = this.valueShapes[currentRegion],\r\n                shape;\r\n            delete this.shapes[shapeid];\r\n            switch (currentRegion.substr(0, 1)) {\r\n                case 'r':\r\n                    shape = this.renderRange(currentRegion.substr(1), highlight);\r\n                    break;\r\n                case 'p':\r\n                    shape = this.renderPerformance(highlight);\r\n                    break;\r\n                case 't':\r\n                    shape = this.renderTarget(highlight);\r\n                    break;\r\n            }\r\n            this.valueShapes[currentRegion] = shape.id;\r\n            this.shapes[shape.id] = currentRegion;\r\n            this.target.replaceWithShape(shapeid, shape);\r\n        },\r\n\r\n        renderRange: function (rn, highlight) {\r\n            var rangeval = this.values[rn],\r\n                rangewidth = Math.round(this.canvasWidth * ((rangeval - this.min) / this.range)),\r\n                color = this.options.get('rangeColors')[rn - 2];\r\n            if (highlight) {\r\n                color = this.calcHighlightColor(color, this.options);\r\n            }\r\n            return this.target.drawRect(0, 0, rangewidth - 1, this.canvasHeight - 1, color, color);\r\n        },\r\n\r\n        renderPerformance: function (highlight) {\r\n            var perfval = this.values[1],\r\n                perfwidth = Math.round(this.canvasWidth * ((perfval - this.min) / this.range)),\r\n                color = this.options.get('performanceColor');\r\n            if (highlight) {\r\n                color = this.calcHighlightColor(color, this.options);\r\n            }\r\n            return this.target.drawRect(0, Math.round(this.canvasHeight * 0.3), perfwidth - 1,\r\n                Math.round(this.canvasHeight * 0.4) - 1, color, color);\r\n        },\r\n\r\n        renderTarget: function (highlight) {\r\n            var targetval = this.values[0],\r\n                x = Math.round(this.canvasWidth * ((targetval - this.min) / this.range) - (this.options.get('targetWidth') / 2)),\r\n                targettop = Math.round(this.canvasHeight * 0.10),\r\n                targetheight = this.canvasHeight - (targettop * 2),\r\n                color = this.options.get('targetColor');\r\n            if (highlight) {\r\n                color = this.calcHighlightColor(color, this.options);\r\n            }\r\n            return this.target.drawRect(x, targettop, this.options.get('targetWidth') - 1, targetheight - 1, color, color);\r\n        },\r\n\r\n        render: function () {\r\n            var vlen = this.values.length,\r\n                target = this.target,\r\n                i, shape;\r\n            if (!bullet._super.render.call(this)) {\r\n                return;\r\n            }\r\n            for (i = 2; i < vlen; i++) {\r\n                shape = this.renderRange(i).append();\r\n                this.shapes[shape.id] = 'r' + i;\r\n                this.valueShapes['r' + i] = shape.id;\r\n            }\r\n            if (this.values[1] !== null) {\r\n                shape = this.renderPerformance().append();\r\n                this.shapes[shape.id] = 'p1';\r\n                this.valueShapes.p1 = shape.id;\r\n            }\r\n            if (this.values[0] !== null) {\r\n                shape = this.renderTarget().append();\r\n                this.shapes[shape.id] = 't0';\r\n                this.valueShapes.t0 = shape.id;\r\n            }\r\n            target.render();\r\n        }\r\n    });\r\n\r\n\r\n    /**\r\n     * Pie charts\r\n     */\r\n    $.fn.sparkline.pie = pie = createClass($.fn.sparkline._base, {\r\n        type: 'pie',\r\n\r\n        init: function (el, values, options, width, height) {\r\n            var total = 0, i;\r\n\r\n            pie._super.init.call(this, el, values, options, width, height);\r\n\r\n            this.shapes = {}; // map shape ids to value offsets\r\n            this.valueShapes = {}; // maps value offsets to shape ids\r\n            this.values = values = $.map(values, Number);\r\n\r\n            if (options.get('width') === 'auto') {\r\n                this.width = this.height;\r\n            }\r\n\r\n            if (values.length > 0) {\r\n                for (i = values.length; i--;) {\r\n                    total += values[i];\r\n                }\r\n            }\r\n            this.total = total;\r\n            this.initTarget();\r\n            this.radius = Math.floor(Math.min(this.canvasWidth, this.canvasHeight) / 2);\r\n        },\r\n\r\n        getRegion: function (el, x, y) {\r\n            var shapeid = this.target.getShapeAt(el, x, y);\r\n            return (shapeid !== undefined && this.shapes[shapeid] !== undefined) ? this.shapes[shapeid] : undefined;\r\n        },\r\n\r\n        getCurrentRegionFields: function () {\r\n            var currentRegion = this.currentRegion;\r\n            return {\r\n                isNull: this.values[currentRegion] === undefined,\r\n                value: this.values[currentRegion],\r\n                percent: this.values[currentRegion] / this.total * 100,\r\n                color: this.options.get('sliceColors')[currentRegion % this.options.get('sliceColors').length],\r\n                offset: currentRegion\r\n            };\r\n        },\r\n\r\n        changeHighlight: function (highlight) {\r\n            var currentRegion = this.currentRegion,\r\n                 newslice = this.renderSlice(currentRegion, highlight),\r\n                 shapeid = this.valueShapes[currentRegion];\r\n            delete this.shapes[shapeid];\r\n            this.target.replaceWithShape(shapeid, newslice);\r\n            this.valueShapes[currentRegion] = newslice.id;\r\n            this.shapes[newslice.id] = currentRegion;\r\n        },\r\n\r\n        renderSlice: function (valuenum, highlight) {\r\n            var target = this.target,\r\n                options = this.options,\r\n                radius = this.radius,\r\n                borderWidth = options.get('borderWidth'),\r\n                offset = options.get('offset'),\r\n                circle = 2 * Math.PI,\r\n                values = this.values,\r\n                total = this.total,\r\n                next = offset ? (2*Math.PI)*(offset/360) : 0,\r\n                start, end, i, vlen, color;\r\n\r\n            vlen = values.length;\r\n            for (i = 0; i < vlen; i++) {\r\n                start = next;\r\n                end = next;\r\n                if (total > 0) {  // avoid divide by zero\r\n                    end = next + (circle * (values[i] / total));\r\n                }\r\n                if (valuenum === i) {\r\n                    color = options.get('sliceColors')[i % options.get('sliceColors').length];\r\n                    if (highlight) {\r\n                        color = this.calcHighlightColor(color, options);\r\n                    }\r\n\r\n                    return target.drawPieSlice(radius, radius, radius - borderWidth, start, end, undefined, color);\r\n                }\r\n                next = end;\r\n            }\r\n        },\r\n\r\n        render: function () {\r\n            var target = this.target,\r\n                values = this.values,\r\n                options = this.options,\r\n                radius = this.radius,\r\n                borderWidth = options.get('borderWidth'),\r\n                shape, i;\r\n\r\n            if (!pie._super.render.call(this)) {\r\n                return;\r\n            }\r\n            if (borderWidth) {\r\n                target.drawCircle(radius, radius, Math.floor(radius - (borderWidth / 2)),\r\n                    options.get('borderColor'), undefined, borderWidth).append();\r\n            }\r\n            for (i = values.length; i--;) {\r\n                if (values[i]) { // don't render zero values\r\n                    shape = this.renderSlice(i).append();\r\n                    this.valueShapes[i] = shape.id; // store just the shapeid\r\n                    this.shapes[shape.id] = i;\r\n                }\r\n            }\r\n            target.render();\r\n        }\r\n    });\r\n\r\n\r\n    /**\r\n     * Box plots\r\n     */\r\n    $.fn.sparkline.box = box = createClass($.fn.sparkline._base, {\r\n        type: 'box',\r\n\r\n        init: function (el, values, options, width, height) {\r\n            box._super.init.call(this, el, values, options, width, height);\r\n            this.values = $.map(values, Number);\r\n            this.width = options.get('width') === 'auto' ? '4.0em' : width;\r\n            this.initTarget();\r\n            if (!this.values.length) {\r\n                this.disabled = 1;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Simulate a single region\r\n         */\r\n        getRegion: function () {\r\n            return 1;\r\n        },\r\n\r\n        getCurrentRegionFields: function () {\r\n            var result = [\r\n                { field: 'lq', value: this.quartiles[0] },\r\n                { field: 'med', value: this.quartiles[1] },\r\n                { field: 'uq', value: this.quartiles[2] }\r\n            ];\r\n            if (this.loutlier !== undefined) {\r\n                result.push({ field: 'lo', value: this.loutlier});\r\n            }\r\n            if (this.routlier !== undefined) {\r\n                result.push({ field: 'ro', value: this.routlier});\r\n            }\r\n            if (this.lwhisker !== undefined) {\r\n                result.push({ field: 'lw', value: this.lwhisker});\r\n            }\r\n            if (this.rwhisker !== undefined) {\r\n                result.push({ field: 'rw', value: this.rwhisker});\r\n            }\r\n            return result;\r\n        },\r\n\r\n        render: function () {\r\n            var target = this.target,\r\n                values = this.values,\r\n                vlen = values.length,\r\n                options = this.options,\r\n                canvasWidth = this.canvasWidth,\r\n                canvasHeight = this.canvasHeight,\r\n                minValue = options.get('chartRangeMin') === undefined ? Math.min.apply(Math, values) : options.get('chartRangeMin'),\r\n                maxValue = options.get('chartRangeMax') === undefined ? Math.max.apply(Math, values) : options.get('chartRangeMax'),\r\n                canvasLeft = 0,\r\n                lwhisker, loutlier, iqr, q1, q2, q3, rwhisker, routlier, i,\r\n                size, unitSize;\r\n\r\n            if (!box._super.render.call(this)) {\r\n                return;\r\n            }\r\n\r\n            if (options.get('raw')) {\r\n                if (options.get('showOutliers') && values.length > 5) {\r\n                    loutlier = values[0];\r\n                    lwhisker = values[1];\r\n                    q1 = values[2];\r\n                    q2 = values[3];\r\n                    q3 = values[4];\r\n                    rwhisker = values[5];\r\n                    routlier = values[6];\r\n                } else {\r\n                    lwhisker = values[0];\r\n                    q1 = values[1];\r\n                    q2 = values[2];\r\n                    q3 = values[3];\r\n                    rwhisker = values[4];\r\n                }\r\n            } else {\r\n                values.sort(function (a, b) { return a - b; });\r\n                q1 = quartile(values, 1);\r\n                q2 = quartile(values, 2);\r\n                q3 = quartile(values, 3);\r\n                iqr = q3 - q1;\r\n                if (options.get('showOutliers')) {\r\n                    lwhisker = rwhisker = undefined;\r\n                    for (i = 0; i < vlen; i++) {\r\n                        if (lwhisker === undefined && values[i] > q1 - (iqr * options.get('outlierIQR'))) {\r\n                            lwhisker = values[i];\r\n                        }\r\n                        if (values[i] < q3 + (iqr * options.get('outlierIQR'))) {\r\n                            rwhisker = values[i];\r\n                        }\r\n                    }\r\n                    loutlier = values[0];\r\n                    routlier = values[vlen - 1];\r\n                } else {\r\n                    lwhisker = values[0];\r\n                    rwhisker = values[vlen - 1];\r\n                }\r\n            }\r\n            this.quartiles = [q1, q2, q3];\r\n            this.lwhisker = lwhisker;\r\n            this.rwhisker = rwhisker;\r\n            this.loutlier = loutlier;\r\n            this.routlier = routlier;\r\n\r\n            unitSize = canvasWidth / (maxValue - minValue + 1);\r\n            if (options.get('showOutliers')) {\r\n                canvasLeft = Math.ceil(options.get('spotRadius'));\r\n                canvasWidth -= 2 * Math.ceil(options.get('spotRadius'));\r\n                unitSize = canvasWidth / (maxValue - minValue + 1);\r\n                if (loutlier < lwhisker) {\r\n                    target.drawCircle((loutlier - minValue) * unitSize + canvasLeft,\r\n                        canvasHeight / 2,\r\n                        options.get('spotRadius'),\r\n                        options.get('outlierLineColor'),\r\n                        options.get('outlierFillColor')).append();\r\n                }\r\n                if (routlier > rwhisker) {\r\n                    target.drawCircle((routlier - minValue) * unitSize + canvasLeft,\r\n                        canvasHeight / 2,\r\n                        options.get('spotRadius'),\r\n                        options.get('outlierLineColor'),\r\n                        options.get('outlierFillColor')).append();\r\n                }\r\n            }\r\n\r\n            // box\r\n            target.drawRect(\r\n                Math.round((q1 - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight * 0.1),\r\n                Math.round((q3 - q1) * unitSize),\r\n                Math.round(canvasHeight * 0.8),\r\n                options.get('boxLineColor'),\r\n                options.get('boxFillColor')).append();\r\n            // left whisker\r\n            target.drawLine(\r\n                Math.round((lwhisker - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight / 2),\r\n                Math.round((q1 - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight / 2),\r\n                options.get('lineColor')).append();\r\n            target.drawLine(\r\n                Math.round((lwhisker - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight / 4),\r\n                Math.round((lwhisker - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight - canvasHeight / 4),\r\n                options.get('whiskerColor')).append();\r\n            // right whisker\r\n            target.drawLine(Math.round((rwhisker - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight / 2),\r\n                Math.round((q3 - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight / 2),\r\n                options.get('lineColor')).append();\r\n            target.drawLine(\r\n                Math.round((rwhisker - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight / 4),\r\n                Math.round((rwhisker - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight - canvasHeight / 4),\r\n                options.get('whiskerColor')).append();\r\n            // median line\r\n            target.drawLine(\r\n                Math.round((q2 - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight * 0.1),\r\n                Math.round((q2 - minValue) * unitSize + canvasLeft),\r\n                Math.round(canvasHeight * 0.9),\r\n                options.get('medianColor')).append();\r\n            if (options.get('target')) {\r\n                size = Math.ceil(options.get('spotRadius'));\r\n                target.drawLine(\r\n                    Math.round((options.get('target') - minValue) * unitSize + canvasLeft),\r\n                    Math.round((canvasHeight / 2) - size),\r\n                    Math.round((options.get('target') - minValue) * unitSize + canvasLeft),\r\n                    Math.round((canvasHeight / 2) + size),\r\n                    options.get('targetColor')).append();\r\n                target.drawLine(\r\n                    Math.round((options.get('target') - minValue) * unitSize + canvasLeft - size),\r\n                    Math.round(canvasHeight / 2),\r\n                    Math.round((options.get('target') - minValue) * unitSize + canvasLeft + size),\r\n                    Math.round(canvasHeight / 2),\r\n                    options.get('targetColor')).append();\r\n            }\r\n            target.render();\r\n        }\r\n    });\r\n\r\n\r\n    // Setup a very simple \"virtual canvas\" to make drawing the few shapes we need easier\r\n    // This is accessible as $(foo).simpledraw()\r\n\r\n    VShape = createClass({\r\n        init: function (target, id, type, args) {\r\n            this.target = target;\r\n            this.id = id;\r\n            this.type = type;\r\n            this.args = args;\r\n        },\r\n        append: function () {\r\n            this.target.appendShape(this);\r\n            return this;\r\n        }\r\n    });\r\n\r\n    VCanvas_base = createClass({\r\n        _pxregex: /(\\d+)(px)?\\s*$/i,\r\n\r\n        init: function (width, height, target) {\r\n            if (!width) {\r\n                return;\r\n            }\r\n            this.width = width;\r\n            this.height = height;\r\n            this.target = target;\r\n            this.lastShapeId = null;\r\n            if (target[0]) {\r\n                target = target[0];\r\n            }\r\n            $.data(target, '_jqs_vcanvas', this);\r\n        },\r\n\r\n        drawLine: function (x1, y1, x2, y2, lineColor, lineWidth) {\r\n            return this.drawShape([[x1, y1], [x2, y2]], lineColor, lineWidth);\r\n        },\r\n\r\n        drawShape: function (path, lineColor, fillColor, lineWidth) {\r\n            return this._genShape('Shape', [path, lineColor, fillColor, lineWidth]);\r\n        },\r\n\r\n        drawCircle: function (x, y, radius, lineColor, fillColor, lineWidth) {\r\n            return this._genShape('Circle', [x, y, radius, lineColor, fillColor, lineWidth]);\r\n        },\r\n\r\n        drawPieSlice: function (x, y, radius, startAngle, endAngle, lineColor, fillColor) {\r\n            return this._genShape('PieSlice', [x, y, radius, startAngle, endAngle, lineColor, fillColor]);\r\n        },\r\n\r\n        drawRect: function (x, y, width, height, lineColor, fillColor) {\r\n            return this._genShape('Rect', [x, y, width, height, lineColor, fillColor]);\r\n        },\r\n\r\n        getElement: function () {\r\n            return this.canvas;\r\n        },\r\n\r\n        /**\r\n         * Return the most recently inserted shape id\r\n         */\r\n        getLastShapeId: function () {\r\n            return this.lastShapeId;\r\n        },\r\n\r\n        /**\r\n         * Clear and reset the canvas\r\n         */\r\n        reset: function () {\r\n            alert('reset not implemented');\r\n        },\r\n\r\n        _insert: function (el, target) {\r\n            $(target).html(el);\r\n        },\r\n\r\n        /**\r\n         * Calculate the pixel dimensions of the canvas\r\n         */\r\n        _calculatePixelDims: function (width, height, canvas) {\r\n            // XXX This should probably be a configurable option\r\n            var match;\r\n            match = this._pxregex.exec(height);\r\n            if (match) {\r\n                this.pixelHeight = match[1];\r\n            } else {\r\n                this.pixelHeight = $(canvas).height();\r\n            }\r\n            match = this._pxregex.exec(width);\r\n            if (match) {\r\n                this.pixelWidth = match[1];\r\n            } else {\r\n                this.pixelWidth = $(canvas).width();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Generate a shape object and id for later rendering\r\n         */\r\n        _genShape: function (shapetype, shapeargs) {\r\n            var id = shapeCount++;\r\n            shapeargs.unshift(id);\r\n            return new VShape(this, id, shapetype, shapeargs);\r\n        },\r\n\r\n        /**\r\n         * Add a shape to the end of the render queue\r\n         */\r\n        appendShape: function (shape) {\r\n            alert('appendShape not implemented');\r\n        },\r\n\r\n        /**\r\n         * Replace one shape with another\r\n         */\r\n        replaceWithShape: function (shapeid, shape) {\r\n            alert('replaceWithShape not implemented');\r\n        },\r\n\r\n        /**\r\n         * Insert one shape after another in the render queue\r\n         */\r\n        insertAfterShape: function (shapeid, shape) {\r\n            alert('insertAfterShape not implemented');\r\n        },\r\n\r\n        /**\r\n         * Remove a shape from the queue\r\n         */\r\n        removeShapeId: function (shapeid) {\r\n            alert('removeShapeId not implemented');\r\n        },\r\n\r\n        /**\r\n         * Find a shape at the specified x/y co-ordinates\r\n         */\r\n        getShapeAt: function (el, x, y) {\r\n            alert('getShapeAt not implemented');\r\n        },\r\n\r\n        /**\r\n         * Render all queued shapes onto the canvas\r\n         */\r\n        render: function () {\r\n            alert('render not implemented');\r\n        }\r\n    });\r\n\r\n\r\n    VCanvas_canvas = createClass(VCanvas_base, {\r\n        init: function (width, height, target, interact) {\r\n            VCanvas_canvas._super.init.call(this, width, height, target);\r\n            this.canvas = document.createElement('canvas');\r\n            if (target[0]) {\r\n                target = target[0];\r\n            }\r\n            this.context = this.canvas.getContext('2d');\r\n            var devicePixelRatio = window.devicePixelRatio || 1,\r\n                backingStoreRatio = this.context.webkitBackingStorePixelRatio || this.context.mozBackingStorePixelRatio || this.context.msBackingStorePixelRatio || this.context.oBackingStorePixelRatio || this.context.backingStorePixelRatio || 1,\r\n                ratio = devicePixelRatio / backingStoreRatio;\r\n            $.data(target, '_jqs_vcanvas', this);\r\n            $(this.canvas).css({ display: 'inline-block', width: width, height: height, verticalAlign: 'top' });\r\n            this._insert(this.canvas, target);\r\n            this._calculatePixelDims(width, height, this.canvas);\r\n            this.canvas.width = this.pixelWidth * ratio;\r\n            this.canvas.height = this.pixelHeight * ratio;\r\n            this.context.scale(ratio, ratio);\r\n            this.interact = interact;\r\n            this.shapes = {};\r\n            this.shapeseq = [];\r\n            this.currentTargetShapeId = undefined;\r\n            $(this.canvas).css({width: this.pixelWidth, height: this.pixelHeight});\r\n        },\r\n\r\n        _getContext: function (lineColor, fillColor, lineWidth) {\r\n            var context = this.canvas.getContext('2d');\r\n            if (lineColor !== undefined) {\r\n                context.strokeStyle = lineColor;\r\n            }\r\n            context.lineWidth = lineWidth === undefined ? 1 : lineWidth;\r\n            if (fillColor !== undefined) {\r\n                context.fillStyle = fillColor;\r\n            }\r\n            return context;\r\n        },\r\n\r\n        reset: function () {\r\n            var context = this._getContext();\r\n            context.clearRect(0, 0, this.pixelWidth, this.pixelHeight);\r\n            this.shapes = {};\r\n            this.shapeseq = [];\r\n            this.currentTargetShapeId = undefined;\r\n        },\r\n\r\n        _drawShape: function (shapeid, path, lineColor, fillColor, lineWidth) {\r\n            var context = this._getContext(lineColor, fillColor, lineWidth),\r\n                i, plen;\r\n            context.beginPath();\r\n            context.moveTo(path[0][0] + 0.5, path[0][1] + 0.5);\r\n            for (i = 1, plen = path.length; i < plen; i++) {\r\n                context.lineTo(path[i][0] + 0.5, path[i][1] + 0.5); // the 0.5 offset gives us crisp pixel-width lines\r\n            }\r\n            if (lineColor !== undefined) {\r\n                context.stroke();\r\n            }\r\n            if (fillColor !== undefined) {\r\n                context.fill();\r\n            }\r\n            if (this.targetX !== undefined && this.targetY !== undefined &&\r\n                context.isPointInPath(this.targetX, this.targetY)) {\r\n                this.currentTargetShapeId = shapeid;\r\n            }\r\n        },\r\n\r\n        _drawCircle: function (shapeid, x, y, radius, lineColor, fillColor, lineWidth) {\r\n            var context = this._getContext(lineColor, fillColor, lineWidth);\r\n            context.beginPath();\r\n            context.arc(x, y, radius, 0, 2 * Math.PI, false);\r\n            if (this.targetX !== undefined && this.targetY !== undefined &&\r\n                context.isPointInPath(this.targetX, this.targetY)) {\r\n                this.currentTargetShapeId = shapeid;\r\n            }\r\n            if (lineColor !== undefined) {\r\n                context.stroke();\r\n            }\r\n            if (fillColor !== undefined) {\r\n                context.fill();\r\n            }\r\n        },\r\n\r\n        _drawPieSlice: function (shapeid, x, y, radius, startAngle, endAngle, lineColor, fillColor) {\r\n            var context = this._getContext(lineColor, fillColor);\r\n            context.beginPath();\r\n            context.moveTo(x, y);\r\n            context.arc(x, y, radius, startAngle, endAngle, false);\r\n            context.lineTo(x, y);\r\n            context.closePath();\r\n            if (lineColor !== undefined) {\r\n                context.stroke();\r\n            }\r\n            if (fillColor) {\r\n                context.fill();\r\n            }\r\n            if (this.targetX !== undefined && this.targetY !== undefined &&\r\n                context.isPointInPath(this.targetX, this.targetY)) {\r\n                this.currentTargetShapeId = shapeid;\r\n            }\r\n        },\r\n\r\n        _drawRect: function (shapeid, x, y, width, height, lineColor, fillColor) {\r\n            return this._drawShape(shapeid, [[x, y], [x + width, y], [x + width, y + height], [x, y + height], [x, y]], lineColor, fillColor);\r\n        },\r\n\r\n        appendShape: function (shape) {\r\n            this.shapes[shape.id] = shape;\r\n            this.shapeseq.push(shape.id);\r\n            this.lastShapeId = shape.id;\r\n            return shape.id;\r\n        },\r\n\r\n        replaceWithShape: function (shapeid, shape) {\r\n            var shapeseq = this.shapeseq,\r\n                i;\r\n            this.shapes[shape.id] = shape;\r\n            for (i = shapeseq.length; i--;) {\r\n                if (shapeseq[i] == shapeid) {\r\n                    shapeseq[i] = shape.id;\r\n                }\r\n            }\r\n            delete this.shapes[shapeid];\r\n        },\r\n\r\n        replaceWithShapes: function (shapeids, shapes) {\r\n            var shapeseq = this.shapeseq,\r\n                shapemap = {},\r\n                sid, i, first;\r\n\r\n            for (i = shapeids.length; i--;) {\r\n                shapemap[shapeids[i]] = true;\r\n            }\r\n            for (i = shapeseq.length; i--;) {\r\n                sid = shapeseq[i];\r\n                if (shapemap[sid]) {\r\n                    shapeseq.splice(i, 1);\r\n                    delete this.shapes[sid];\r\n                    first = i;\r\n                }\r\n            }\r\n            for (i = shapes.length; i--;) {\r\n                shapeseq.splice(first, 0, shapes[i].id);\r\n                this.shapes[shapes[i].id] = shapes[i];\r\n            }\r\n\r\n        },\r\n\r\n        insertAfterShape: function (shapeid, shape) {\r\n            var shapeseq = this.shapeseq,\r\n                i;\r\n            for (i = shapeseq.length; i--;) {\r\n                if (shapeseq[i] === shapeid) {\r\n                    shapeseq.splice(i + 1, 0, shape.id);\r\n                    this.shapes[shape.id] = shape;\r\n                    return;\r\n                }\r\n            }\r\n        },\r\n\r\n        removeShapeId: function (shapeid) {\r\n            var shapeseq = this.shapeseq,\r\n                i;\r\n            for (i = shapeseq.length; i--;) {\r\n                if (shapeseq[i] === shapeid) {\r\n                    shapeseq.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            delete this.shapes[shapeid];\r\n        },\r\n\r\n        getShapeAt: function (el, x, y) {\r\n            this.targetX = x;\r\n            this.targetY = y;\r\n            this.render();\r\n            return this.currentTargetShapeId;\r\n        },\r\n\r\n        render: function () {\r\n            var shapeseq = this.shapeseq,\r\n                shapes = this.shapes,\r\n                shapeCount = shapeseq.length,\r\n                context = this._getContext(),\r\n                shapeid, shape, i;\r\n            context.clearRect(0, 0, this.pixelWidth, this.pixelHeight);\r\n            for (i = 0; i < shapeCount; i++) {\r\n                shapeid = shapeseq[i];\r\n                shape = shapes[shapeid];\r\n                this['_draw' + shape.type].apply(this, shape.args);\r\n            }\r\n            if (!this.interact) {\r\n                // not interactive so no need to keep the shapes array\r\n                this.shapes = {};\r\n                this.shapeseq = [];\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n\r\n    VCanvas_vml = createClass(VCanvas_base, {\r\n        init: function (width, height, target) {\r\n            var groupel;\r\n            VCanvas_vml._super.init.call(this, width, height, target);\r\n            if (target[0]) {\r\n                target = target[0];\r\n            }\r\n            $.data(target, '_jqs_vcanvas', this);\r\n            this.canvas = document.createElement('span');\r\n            $(this.canvas).css({ display: 'inline-block', position: 'relative', overflow: 'hidden', width: width, height: height, margin: '0px', padding: '0px', verticalAlign: 'top'});\r\n            this._insert(this.canvas, target);\r\n            this._calculatePixelDims(width, height, this.canvas);\r\n            this.canvas.width = this.pixelWidth;\r\n            this.canvas.height = this.pixelHeight;\r\n            groupel = '<v:group coordorigin=\"0 0\" coordsize=\"' + this.pixelWidth + ' ' + this.pixelHeight + '\"' +\r\n                    ' style=\"position:absolute;top:0;left:0;width:' + this.pixelWidth + 'px;height=' + this.pixelHeight + 'px;\"></v:group>';\r\n            this.canvas.insertAdjacentHTML('beforeEnd', groupel);\r\n            this.group = $(this.canvas).children()[0];\r\n            this.rendered = false;\r\n            this.prerender = '';\r\n        },\r\n\r\n        _drawShape: function (shapeid, path, lineColor, fillColor, lineWidth) {\r\n            var vpath = [],\r\n                initial, stroke, fill, closed, vel, plen, i;\r\n            for (i = 0, plen = path.length; i < plen; i++) {\r\n                vpath[i] = '' + (path[i][0]) + ',' + (path[i][1]);\r\n            }\r\n            initial = vpath.splice(0, 1);\r\n            lineWidth = lineWidth === undefined ? 1 : lineWidth;\r\n            stroke = lineColor === undefined ? ' stroked=\"false\" ' : ' strokeWeight=\"' + lineWidth + 'px\" strokeColor=\"' + lineColor + '\" ';\r\n            fill = fillColor === undefined ? ' filled=\"false\"' : ' fillColor=\"' + fillColor + '\" filled=\"true\" ';\r\n            closed = vpath[0] === vpath[vpath.length - 1] ? 'x ' : '';\r\n            vel = '<v:shape coordorigin=\"0 0\" coordsize=\"' + this.pixelWidth + ' ' + this.pixelHeight + '\" ' +\r\n                 ' id=\"jqsshape' + shapeid + '\" ' +\r\n                 stroke +\r\n                 fill +\r\n                ' style=\"position:absolute;left:0px;top:0px;height:' + this.pixelHeight + 'px;width:' + this.pixelWidth + 'px;padding:0px;margin:0px;\" ' +\r\n                ' path=\"m ' + initial + ' l ' + vpath.join(', ') + ' ' + closed + 'e\">' +\r\n                ' </v:shape>';\r\n            return vel;\r\n        },\r\n\r\n        _drawCircle: function (shapeid, x, y, radius, lineColor, fillColor, lineWidth) {\r\n            var stroke, fill, vel;\r\n            x -= radius;\r\n            y -= radius;\r\n            stroke = lineColor === undefined ? ' stroked=\"false\" ' : ' strokeWeight=\"' + lineWidth + 'px\" strokeColor=\"' + lineColor + '\" ';\r\n            fill = fillColor === undefined ? ' filled=\"false\"' : ' fillColor=\"' + fillColor + '\" filled=\"true\" ';\r\n            vel = '<v:oval ' +\r\n                 ' id=\"jqsshape' + shapeid + '\" ' +\r\n                stroke +\r\n                fill +\r\n                ' style=\"position:absolute;top:' + y + 'px; left:' + x + 'px; width:' + (radius * 2) + 'px; height:' + (radius * 2) + 'px\"></v:oval>';\r\n            return vel;\r\n\r\n        },\r\n\r\n        _drawPieSlice: function (shapeid, x, y, radius, startAngle, endAngle, lineColor, fillColor) {\r\n            var vpath, startx, starty, endx, endy, stroke, fill, vel;\r\n            if (startAngle === endAngle) {\r\n                return '';  // VML seems to have problem when start angle equals end angle.\r\n            }\r\n            if ((endAngle - startAngle) === (2 * Math.PI)) {\r\n                startAngle = 0.0;  // VML seems to have a problem when drawing a full circle that doesn't start 0\r\n                endAngle = (2 * Math.PI);\r\n            }\r\n\r\n            startx = x + Math.round(Math.cos(startAngle) * radius);\r\n            starty = y + Math.round(Math.sin(startAngle) * radius);\r\n            endx = x + Math.round(Math.cos(endAngle) * radius);\r\n            endy = y + Math.round(Math.sin(endAngle) * radius);\r\n\r\n            if (startx === endx && starty === endy) {\r\n                if ((endAngle - startAngle) < Math.PI) {\r\n                    // Prevent very small slices from being mistaken as a whole pie\r\n                    return '';\r\n                }\r\n                // essentially going to be the entire circle, so ignore startAngle\r\n                startx = endx = x + radius;\r\n                starty = endy = y;\r\n            }\r\n\r\n            if (startx === endx && starty === endy && (endAngle - startAngle) < Math.PI) {\r\n                return '';\r\n            }\r\n\r\n            vpath = [x - radius, y - radius, x + radius, y + radius, startx, starty, endx, endy];\r\n            stroke = lineColor === undefined ? ' stroked=\"false\" ' : ' strokeWeight=\"1px\" strokeColor=\"' + lineColor + '\" ';\r\n            fill = fillColor === undefined ? ' filled=\"false\"' : ' fillColor=\"' + fillColor + '\" filled=\"true\" ';\r\n            vel = '<v:shape coordorigin=\"0 0\" coordsize=\"' + this.pixelWidth + ' ' + this.pixelHeight + '\" ' +\r\n                 ' id=\"jqsshape' + shapeid + '\" ' +\r\n                 stroke +\r\n                 fill +\r\n                ' style=\"position:absolute;left:0px;top:0px;height:' + this.pixelHeight + 'px;width:' + this.pixelWidth + 'px;padding:0px;margin:0px;\" ' +\r\n                ' path=\"m ' + x + ',' + y + ' wa ' + vpath.join(', ') + ' x e\">' +\r\n                ' </v:shape>';\r\n            return vel;\r\n        },\r\n\r\n        _drawRect: function (shapeid, x, y, width, height, lineColor, fillColor) {\r\n            return this._drawShape(shapeid, [[x, y], [x, y + height], [x + width, y + height], [x + width, y], [x, y]], lineColor, fillColor);\r\n        },\r\n\r\n        reset: function () {\r\n            this.group.innerHTML = '';\r\n        },\r\n\r\n        appendShape: function (shape) {\r\n            var vel = this['_draw' + shape.type].apply(this, shape.args);\r\n            if (this.rendered) {\r\n                this.group.insertAdjacentHTML('beforeEnd', vel);\r\n            } else {\r\n                this.prerender += vel;\r\n            }\r\n            this.lastShapeId = shape.id;\r\n            return shape.id;\r\n        },\r\n\r\n        replaceWithShape: function (shapeid, shape) {\r\n            var existing = $('#jqsshape' + shapeid),\r\n                vel = this['_draw' + shape.type].apply(this, shape.args);\r\n            existing[0].outerHTML = vel;\r\n        },\r\n\r\n        replaceWithShapes: function (shapeids, shapes) {\r\n            // replace the first shapeid with all the new shapes then toast the remaining old shapes\r\n            var existing = $('#jqsshape' + shapeids[0]),\r\n                replace = '',\r\n                slen = shapes.length,\r\n                i;\r\n            for (i = 0; i < slen; i++) {\r\n                replace += this['_draw' + shapes[i].type].apply(this, shapes[i].args);\r\n            }\r\n            existing[0].outerHTML = replace;\r\n            for (i = 1; i < shapeids.length; i++) {\r\n                $('#jqsshape' + shapeids[i]).remove();\r\n            }\r\n        },\r\n\r\n        insertAfterShape: function (shapeid, shape) {\r\n            var existing = $('#jqsshape' + shapeid),\r\n                 vel = this['_draw' + shape.type].apply(this, shape.args);\r\n            existing[0].insertAdjacentHTML('afterEnd', vel);\r\n        },\r\n\r\n        removeShapeId: function (shapeid) {\r\n            var existing = $('#jqsshape' + shapeid);\r\n            this.group.removeChild(existing[0]);\r\n        },\r\n\r\n        getShapeAt: function (el, x, y) {\r\n            var shapeid = el.id.substr(8);\r\n            return shapeid;\r\n        },\r\n\r\n        render: function () {\r\n            if (!this.rendered) {\r\n                // batch the intial render into a single repaint\r\n                this.group.innerHTML = this.prerender;\r\n                this.rendered = true;\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n}))}(document, Math));\r\n;/*!\r\nloadCSS: load a CSS file asynchronously.\r\n[c]2014 @scottjehl, Filament Group, Inc.\r\nLicensed MIT\r\n*/\r\nfunction loadCSS( href, before, media ){\r\n\t\"use strict\";\r\n\t// Arguments explained:\r\n\t// `href` is the URL for your CSS file.\r\n\t// `before` optionally defines the element we'll use as a reference for injecting our <link>\r\n\t// By default, `before` uses the first <script> element in the page.\r\n\t// However, since the order in which stylesheets are referenced matters, you might need a more specific location in your document.\r\n\t// If so, pass a different reference element to the `before` argument and it'll insert before that instead\r\n\t// note: `insertBefore` is used instead of `appendChild`, for safety re: http://www.paulirish.com/2011/surefire-dom-element-insertion/\r\n\tvar ss = window.document.createElement( \"link\" );\r\n\tvar ref = before || window.document.getElementsByTagName( \"script\" )[ 0 ];\r\n\tss.rel = \"stylesheet\";\r\n\tss.href = href;\r\n\t// temporarily, set media to something non-matching to ensure it'll fetch without blocking render\r\n\tss.media = \"only x\";\r\n\t// inject link\r\n\tref.parentNode.insertBefore( ss, ref );\r\n\t// set media back to `all` so that the styleshet applies once it loads\r\n\tsetTimeout( function(){\r\n\t\tss.media = media || \"all\";\r\n\t} );\r\n\treturn ss;\r\n }\r\n;/*! loadJS: load a JS file asynchronously. [c]2014 @scottjehl, Filament Group, Inc. (Based on http://goo.gl/REQGQ by Paul Irish). Licensed MIT */\r\nfunction loadJS( src ){\r\n\t\"use strict\";\r\n\tvar ref = window.document.getElementsByTagName( \"script\" )[ 0 ];\r\n\tvar script = window.document.createElement( \"script\" );\r\n\tscript.src = src;\r\n\tref.parentNode.insertBefore( script, ref );\r\n\treturn script;\r\n}\r\n;// moment.js locale configuration\r\n// Locale: Arabic (ar)\r\n// Author: Abdel Said: https://github.com/abdelsaid\r\n// Changes in months, weekdays: Ahmed Elkhatib\r\n// Native plural forms: forabi https://github.com/forabi\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['moment'], factory); // AMD\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('../moment')); // Node\r\n    } else {\r\n        factory(window.moment); // Browser global\r\n    }\r\n}(function (moment) {\r\n    var symbolMap = {\r\n        '1': '',\r\n        '2': '',\r\n        '3': '',\r\n        '4': '',\r\n        '5': '',\r\n        '6': '',\r\n        '7': '',\r\n        '8': '',\r\n        '9': '',\r\n        '0': ''\r\n    }, numberMap = {\r\n        '': '1',\r\n        '': '2',\r\n        '': '3',\r\n        '': '4',\r\n        '': '5',\r\n        '': '6',\r\n        '': '7',\r\n        '': '8',\r\n        '': '9',\r\n        '': '0'\r\n    }, pluralForm = function (n) {\r\n        return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;\r\n    }, plurals = {\r\n        s : ['  ', ' ', ['', ''], '%d ', '%d ', '%d '],\r\n        m : ['  ', ' ', ['', ''], '%d ', '%d ', '%d '],\r\n        h : ['  ', ' ', ['', ''], '%d ', '%d ', '%d '],\r\n        d : ['  ', ' ', ['', ''], '%d ', '%d ', '%d '],\r\n        M : ['  ', ' ', ['', ''], '%d ', '%d ', '%d '],\r\n        y : ['  ', ' ', ['', ''], '%d ', '%d ', '%d ']\r\n    }, pluralize = function (u) {\r\n        return function (number, withoutSuffix, string, isFuture) {\r\n            var f = pluralForm(number),\r\n                str = plurals[u][pluralForm(number)];\r\n            if (f === 2) {\r\n                str = str[withoutSuffix ? 0 : 1];\r\n            }\r\n            return str.replace(/%d/i, number);\r\n        };\r\n    }, months = [\r\n        '  ',\r\n        ' ',\r\n        ' ',\r\n        ' ',\r\n        ' ',\r\n        ' ',\r\n        ' ',\r\n        ' ',\r\n        ' ',\r\n        '  ',\r\n        '  ',\r\n        '  '\r\n    ];\r\n\r\n    return moment.defineLocale('ar', {\r\n        months : months,\r\n        monthsShort : months,\r\n        weekdays : '______'.split('_'),\r\n        weekdaysShort : '______'.split('_'),\r\n        weekdaysMin : '______'.split('_'),\r\n        longDateFormat : {\r\n            LT : 'HH:mm',\r\n            L : 'DD/MM/YYYY',\r\n            LL : 'D MMMM YYYY',\r\n            LLL : 'D MMMM YYYY LT',\r\n            LLLL : 'dddd D MMMM YYYY LT'\r\n        },\r\n        meridiem : function (hour, minute, isLower) {\r\n            if (hour < 12) {\r\n                return '';\r\n            } else {\r\n                return '';\r\n            }\r\n        },\r\n        calendar : {\r\n            sameDay: '[  ] LT',\r\n            nextDay: '[  ] LT',\r\n            nextWeek: 'dddd [ ] LT',\r\n            lastDay: '[  ] LT',\r\n            lastWeek: 'dddd [ ] LT',\r\n            sameElse: 'L'\r\n        },\r\n        relativeTime : {\r\n            future : ' %s',\r\n            past : ' %s',\r\n            s : pluralize('s'),\r\n            m : pluralize('m'),\r\n            mm : pluralize('m'),\r\n            h : pluralize('h'),\r\n            hh : pluralize('h'),\r\n            d : pluralize('d'),\r\n            dd : pluralize('d'),\r\n            M : pluralize('M'),\r\n            MM : pluralize('M'),\r\n            y : pluralize('y'),\r\n            yy : pluralize('y')\r\n        },\r\n        preparse: function (string) {\r\n            return string.replace(/[-]/g, function (match) {\r\n                return numberMap[match];\r\n            }).replace(//g, ',');\r\n        },\r\n        postformat: function (string) {\r\n            return string.replace(/\\d/g, function (match) {\r\n                return symbolMap[match];\r\n            }).replace(/,/g, '');\r\n        },\r\n        week : {\r\n            dow : 6, // Saturday is the first day of the week.\r\n            doy : 12  // The week that contains Jan 1st is the first week of the year.\r\n        }\r\n    });\r\n}));\r\n;// moment.js locale configuration\r\n// locale : german (de)\r\n// author : lluchs : https://github.com/lluchs\r\n// author: Menelion Elensle: https://github.com/Oire\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['moment'], factory); // AMD\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('../moment')); // Node\r\n    } else {\r\n        factory(window.moment); // Browser global\r\n    }\r\n}(function (moment) {\r\n    function processRelativeTime(number, withoutSuffix, key, isFuture) {\r\n        var format = {\r\n            'm': ['eine Minute', 'einer Minute'],\r\n            'h': ['eine Stunde', 'einer Stunde'],\r\n            'd': ['ein Tag', 'einem Tag'],\r\n            'dd': [number + ' Tage', number + ' Tagen'],\r\n            'M': ['ein Monat', 'einem Monat'],\r\n            'MM': [number + ' Monate', number + ' Monaten'],\r\n            'y': ['ein Jahr', 'einem Jahr'],\r\n            'yy': [number + ' Jahre', number + ' Jahren']\r\n        };\r\n        return withoutSuffix ? format[key][0] : format[key][1];\r\n    }\r\n\r\n    return moment.defineLocale('de', {\r\n        months : \"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember\".split(\"_\"),\r\n        monthsShort : \"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.\".split(\"_\"),\r\n        weekdays : \"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag\".split(\"_\"),\r\n        weekdaysShort : \"So._Mo._Di._Mi._Do._Fr._Sa.\".split(\"_\"),\r\n        weekdaysMin : \"So_Mo_Di_Mi_Do_Fr_Sa\".split(\"_\"),\r\n        longDateFormat : {\r\n            LT: \"HH:mm [Uhr]\",\r\n            L : \"DD.MM.YYYY\",\r\n            LL : \"D. MMMM YYYY\",\r\n            LLL : \"D. MMMM YYYY LT\",\r\n            LLLL : \"dddd, D. MMMM YYYY LT\"\r\n        },\r\n        calendar : {\r\n            sameDay: \"[Heute um] LT\",\r\n            sameElse: \"L\",\r\n            nextDay: '[Morgen um] LT',\r\n            nextWeek: 'dddd [um] LT',\r\n            lastDay: '[Gestern um] LT',\r\n            lastWeek: '[letzten] dddd [um] LT'\r\n        },\r\n        relativeTime : {\r\n            future : \"in %s\",\r\n            past : \"vor %s\",\r\n            s : \"ein paar Sekunden\",\r\n            m : processRelativeTime,\r\n            mm : \"%d Minuten\",\r\n            h : processRelativeTime,\r\n            hh : \"%d Stunden\",\r\n            d : processRelativeTime,\r\n            dd : processRelativeTime,\r\n            M : processRelativeTime,\r\n            MM : processRelativeTime,\r\n            y : processRelativeTime,\r\n            yy : processRelativeTime\r\n        },\r\n        ordinal : '%d.',\r\n        week : {\r\n            dow : 1, // Monday is the first day of the week.\r\n            doy : 4  // The week that contains Jan 4th is the first week of the year.\r\n        }\r\n    });\r\n}));\r\n;// moment.js locale configuration\r\n// locale : spanish (es)\r\n// author : Julio Napur : https://github.com/julionc\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['moment'], factory); // AMD\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('../moment')); // Node\r\n    } else {\r\n        factory(window.moment); // Browser global\r\n    }\r\n}(function (moment) {\r\n    var monthsShortDot = \"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.\".split(\"_\"),\r\n        monthsShort = \"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic\".split(\"_\");\r\n\r\n    return moment.defineLocale('es', {\r\n        months : \"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre\".split(\"_\"),\r\n        monthsShort : function (m, format) {\r\n            if (/-MMM-/.test(format)) {\r\n                return monthsShort[m.month()];\r\n            } else {\r\n                return monthsShortDot[m.month()];\r\n            }\r\n        },\r\n        weekdays : \"domingo_lunes_martes_mircoles_jueves_viernes_sbado\".split(\"_\"),\r\n        weekdaysShort : \"dom._lun._mar._mi._jue._vie._sb.\".split(\"_\"),\r\n        weekdaysMin : \"Do_Lu_Ma_Mi_Ju_Vi_S\".split(\"_\"),\r\n        longDateFormat : {\r\n            LT : \"H:mm\",\r\n            L : \"DD/MM/YYYY\",\r\n            LL : \"D [de] MMMM [del] YYYY\",\r\n            LLL : \"D [de] MMMM [del] YYYY LT\",\r\n            LLLL : \"dddd, D [de] MMMM [del] YYYY LT\"\r\n        },\r\n        calendar : {\r\n            sameDay : function () {\r\n                return '[hoy a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';\r\n            },\r\n            nextDay : function () {\r\n                return '[maana a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';\r\n            },\r\n            nextWeek : function () {\r\n                return 'dddd [a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';\r\n            },\r\n            lastDay : function () {\r\n                return '[ayer a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';\r\n            },\r\n            lastWeek : function () {\r\n                return '[el] dddd [pasado a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';\r\n            },\r\n            sameElse : 'L'\r\n        },\r\n        relativeTime : {\r\n            future : \"en %s\",\r\n            past : \"hace %s\",\r\n            s : \"unos segundos\",\r\n            m : \"un minuto\",\r\n            mm : \"%d minutos\",\r\n            h : \"una hora\",\r\n            hh : \"%d horas\",\r\n            d : \"un da\",\r\n            dd : \"%d das\",\r\n            M : \"un mes\",\r\n            MM : \"%d meses\",\r\n            y : \"un ao\",\r\n            yy : \"%d aos\"\r\n        },\r\n        ordinal : '%d',\r\n        week : {\r\n            dow : 1, // Monday is the first day of the week.\r\n            doy : 4  // The week that contains Jan 4th is the first week of the year.\r\n        }\r\n    });\r\n}));\r\n;// moment.js locale configuration\r\n// locale : french (fr)\r\n// author : John Fischer : https://github.com/jfroffice\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['moment'], factory); // AMD\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('../moment')); // Node\r\n    } else {\r\n        factory(window.moment); // Browser global\r\n    }\r\n}(function (moment) {\r\n    return moment.defineLocale('fr', {\r\n        months : \"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre\".split(\"_\"),\r\n        monthsShort : \"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.\".split(\"_\"),\r\n        weekdays : \"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi\".split(\"_\"),\r\n        weekdaysShort : \"dim._lun._mar._mer._jeu._ven._sam.\".split(\"_\"),\r\n        weekdaysMin : \"Di_Lu_Ma_Me_Je_Ve_Sa\".split(\"_\"),\r\n        longDateFormat : {\r\n            LT : \"HH:mm\",\r\n            L : \"DD/MM/YYYY\",\r\n            LL : \"D MMMM YYYY\",\r\n            LLL : \"D MMMM YYYY LT\",\r\n            LLLL : \"dddd D MMMM YYYY LT\"\r\n        },\r\n        calendar : {\r\n            sameDay: \"[Aujourd'hui ] LT\",\r\n            nextDay: '[Demain ] LT',\r\n            nextWeek: 'dddd [] LT',\r\n            lastDay: '[Hier ] LT',\r\n            lastWeek: 'dddd [dernier ] LT',\r\n            sameElse: 'L'\r\n        },\r\n        relativeTime : {\r\n            future : \"dans %s\",\r\n            past : \"il y a %s\",\r\n            s : \"quelques secondes\",\r\n            m : \"une minute\",\r\n            mm : \"%d minutes\",\r\n            h : \"une heure\",\r\n            hh : \"%d heures\",\r\n            d : \"un jour\",\r\n            dd : \"%d jours\",\r\n            M : \"un mois\",\r\n            MM : \"%d mois\",\r\n            y : \"un an\",\r\n            yy : \"%d ans\"\r\n        },\r\n        ordinal : function (number) {\r\n            return number + (number === 1 ? 'er' : '');\r\n        },\r\n        week : {\r\n            dow : 1, // Monday is the first day of the week.\r\n            doy : 4  // The week that contains Jan 4th is the first week of the year.\r\n        }\r\n    });\r\n}));\r\n;// moment.js locale configuration\r\n// locale : Bahasa Indonesia (id)\r\n// author : Mohammad Satrio Utomo : https://github.com/tyok\r\n// reference: http://id.wikisource.org/wiki/Pedoman_Umum_Ejaan_Bahasa_Indonesia_yang_Disempurnakan\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['moment'], factory); // AMD\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('../moment')); // Node\r\n    } else {\r\n        factory(window.moment); // Browser global\r\n    }\r\n}(function (moment) {\r\n    return moment.defineLocale('id', {\r\n        months : \"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember\".split(\"_\"),\r\n        monthsShort : \"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des\".split(\"_\"),\r\n        weekdays : \"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu\".split(\"_\"),\r\n        weekdaysShort : \"Min_Sen_Sel_Rab_Kam_Jum_Sab\".split(\"_\"),\r\n        weekdaysMin : \"Mg_Sn_Sl_Rb_Km_Jm_Sb\".split(\"_\"),\r\n        longDateFormat : {\r\n            LT : \"HH.mm\",\r\n            L : \"DD/MM/YYYY\",\r\n            LL : \"D MMMM YYYY\",\r\n            LLL : \"D MMMM YYYY [pukul] LT\",\r\n            LLLL : \"dddd, D MMMM YYYY [pukul] LT\"\r\n        },\r\n        meridiem : function (hours, minutes, isLower) {\r\n            if (hours < 11) {\r\n                return 'pagi';\r\n            } else if (hours < 15) {\r\n                return 'siang';\r\n            } else if (hours < 19) {\r\n                return 'sore';\r\n            } else {\r\n                return 'malam';\r\n            }\r\n        },\r\n        calendar : {\r\n            sameDay : '[Hari ini pukul] LT',\r\n            nextDay : '[Besok pukul] LT',\r\n            nextWeek : 'dddd [pukul] LT',\r\n            lastDay : '[Kemarin pukul] LT',\r\n            lastWeek : 'dddd [lalu pukul] LT',\r\n            sameElse : 'L'\r\n        },\r\n        relativeTime : {\r\n            future : \"dalam %s\",\r\n            past : \"%s yang lalu\",\r\n            s : \"beberapa detik\",\r\n            m : \"semenit\",\r\n            mm : \"%d menit\",\r\n            h : \"sejam\",\r\n            hh : \"%d jam\",\r\n            d : \"sehari\",\r\n            dd : \"%d hari\",\r\n            M : \"sebulan\",\r\n            MM : \"%d bulan\",\r\n            y : \"setahun\",\r\n            yy : \"%d tahun\"\r\n        },\r\n        week : {\r\n            dow : 1, // Monday is the first day of the week.\r\n            doy : 7  // The week that contains Jan 1st is the first week of the year.\r\n        }\r\n    });\r\n}));\r\n;// moment.js locale configuration\r\n// locale : polish (pl)\r\n// author : Rafal Hirsz : https://github.com/evoL\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['moment'], factory); // AMD\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('../moment')); // Node\r\n    } else {\r\n        factory(window.moment); // Browser global\r\n    }\r\n}(function (moment) {\r\n    var monthsNominative = \"stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie\".split(\"_\"),\r\n        monthsSubjective = \"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia\".split(\"_\");\r\n\r\n    function plural(n) {\r\n        return (n % 10 < 5) && (n % 10 > 1) && ((~~(n / 10) % 10) !== 1);\r\n    }\r\n\r\n    function translate(number, withoutSuffix, key) {\r\n        var result = number + \" \";\r\n        switch (key) {\r\n        case 'm':\r\n            return withoutSuffix ? 'minuta' : 'minut';\r\n        case 'mm':\r\n            return result + (plural(number) ? 'minuty' : 'minut');\r\n        case 'h':\r\n            return withoutSuffix  ? 'godzina'  : 'godzin';\r\n        case 'hh':\r\n            return result + (plural(number) ? 'godziny' : 'godzin');\r\n        case 'MM':\r\n            return result + (plural(number) ? 'miesice' : 'miesicy');\r\n        case 'yy':\r\n            return result + (plural(number) ? 'lata' : 'lat');\r\n        }\r\n    }\r\n\r\n    return moment.defineLocale('pl', {\r\n        months : function (momentToFormat, format) {\r\n            if (/D MMMM/.test(format)) {\r\n                return monthsSubjective[momentToFormat.month()];\r\n            } else {\r\n                return monthsNominative[momentToFormat.month()];\r\n            }\r\n        },\r\n        monthsShort : \"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru\".split(\"_\"),\r\n        weekdays : \"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota\".split(\"_\"),\r\n        weekdaysShort : \"nie_pon_wt_r_czw_pt_sb\".split(\"_\"),\r\n        weekdaysMin : \"N_Pn_Wt_r_Cz_Pt_So\".split(\"_\"),\r\n        longDateFormat : {\r\n            LT : \"HH:mm\",\r\n            L : \"DD.MM.YYYY\",\r\n            LL : \"D MMMM YYYY\",\r\n            LLL : \"D MMMM YYYY LT\",\r\n            LLLL : \"dddd, D MMMM YYYY LT\"\r\n        },\r\n        calendar : {\r\n            sameDay: '[Dzi o] LT',\r\n            nextDay: '[Jutro o] LT',\r\n            nextWeek: '[W] dddd [o] LT',\r\n            lastDay: '[Wczoraj o] LT',\r\n            lastWeek: function () {\r\n                switch (this.day()) {\r\n                case 0:\r\n                    return '[W zesz niedziel o] LT';\r\n                case 3:\r\n                    return '[W zesz rod o] LT';\r\n                case 6:\r\n                    return '[W zesz sobot o] LT';\r\n                default:\r\n                    return '[W zeszy] dddd [o] LT';\r\n                }\r\n            },\r\n            sameElse: 'L'\r\n        },\r\n        relativeTime : {\r\n            future : \"za %s\",\r\n            past : \"%s temu\",\r\n            s : \"kilka sekund\",\r\n            m : translate,\r\n            mm : translate,\r\n            h : translate,\r\n            hh : translate,\r\n            d : \"1 dzie\",\r\n            dd : '%d dni',\r\n            M : \"miesic\",\r\n            MM : translate,\r\n            y : \"rok\",\r\n            yy : translate\r\n        },\r\n        ordinal : '%d.',\r\n        week : {\r\n            dow : 1, // Monday is the first day of the week.\r\n            doy : 4  // The week that contains Jan 4th is the first week of the year.\r\n        }\r\n    });\r\n}));\r\n;// moment.js locale configuration\r\n// locale : portuguese (pt)\r\n// author : Jefferson : https://github.com/jalex79\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['moment'], factory); // AMD\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('../moment')); // Node\r\n    } else {\r\n        factory(window.moment); // Browser global\r\n    }\r\n}(function (moment) {\r\n    return moment.defineLocale('pt', {\r\n        months : \"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro\".split(\"_\"),\r\n        monthsShort : \"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez\".split(\"_\"),\r\n        weekdays : \"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado\".split(\"_\"),\r\n        weekdaysShort : \"dom_seg_ter_qua_qui_sex_sb\".split(\"_\"),\r\n        weekdaysMin : \"dom_2_3_4_5_6_sb\".split(\"_\"),\r\n        longDateFormat : {\r\n            LT : \"HH:mm\",\r\n            L : \"DD/MM/YYYY\",\r\n            LL : \"D [de] MMMM [de] YYYY\",\r\n            LLL : \"D [de] MMMM [de] YYYY LT\",\r\n            LLLL : \"dddd, D [de] MMMM [de] YYYY LT\"\r\n        },\r\n        calendar : {\r\n            sameDay: '[Hoje s] LT',\r\n            nextDay: '[Amanh s] LT',\r\n            nextWeek: 'dddd [s] LT',\r\n            lastDay: '[Ontem s] LT',\r\n            lastWeek: function () {\r\n                return (this.day() === 0 || this.day() === 6) ?\r\n                    '[ltimo] dddd [s] LT' : // Saturday + Sunday\r\n                    '[ltima] dddd [s] LT'; // Monday - Friday\r\n            },\r\n            sameElse: 'L'\r\n        },\r\n        relativeTime : {\r\n            future : \"em %s\",\r\n            past : \"h %s\",\r\n            s : \"segundos\",\r\n            m : \"um minuto\",\r\n            mm : \"%d minutos\",\r\n            h : \"uma hora\",\r\n            hh : \"%d horas\",\r\n            d : \"um dia\",\r\n            dd : \"%d dias\",\r\n            M : \"um ms\",\r\n            MM : \"%d meses\",\r\n            y : \"um ano\",\r\n            yy : \"%d anos\"\r\n        },\r\n        ordinal : '%d',\r\n        week : {\r\n            dow : 1, // Monday is the first day of the week.\r\n            doy : 4  // The week that contains Jan 4th is the first week of the year.\r\n        }\r\n    });\r\n}));\r\n;// moment.js locale configuration\r\n// locale : russian (ru)\r\n// author : Viktorminator : https://github.com/Viktorminator\r\n// Author : Menelion Elensle : https://github.com/Oire\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['moment'], factory); // AMD\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('../moment')); // Node\r\n    } else {\r\n        factory(window.moment); // Browser global\r\n    }\r\n}(function (moment) {\r\n    function plural(word, num) {\r\n        var forms = word.split('_');\r\n        return num % 10 === 1 && num % 100 !== 11 ? forms[0] : (num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2]);\r\n    }\r\n\r\n    function relativeTimeWithPlural(number, withoutSuffix, key) {\r\n        var format = {\r\n            'mm': withoutSuffix ? '__' : '__',\r\n            'hh': '__',\r\n            'dd': '__',\r\n            'MM': '__',\r\n            'yy': '__'\r\n        };\r\n        if (key === 'm') {\r\n            return withoutSuffix ? '' : '';\r\n        }\r\n        else {\r\n            return number + ' ' + plural(format[key], +number);\r\n        }\r\n    }\r\n\r\n    function monthsCaseReplace(m, format) {\r\n        var months = {\r\n            'nominative': '___________'.split('_'),\r\n            'accusative': '___________'.split('_')\r\n        },\r\n\r\n        nounCase = (/D[oD]?(\\[[^\\[\\]]*\\]|\\s+)+MMMM?/).test(format) ?\r\n            'accusative' :\r\n            'nominative';\r\n\r\n        return months[nounCase][m.month()];\r\n    }\r\n\r\n    function monthsShortCaseReplace(m, format) {\r\n        var monthsShort = {\r\n            'nominative': '___________'.split('_'),\r\n            'accusative': '___________'.split('_')\r\n        },\r\n\r\n        nounCase = (/D[oD]?(\\[[^\\[\\]]*\\]|\\s+)+MMMM?/).test(format) ?\r\n            'accusative' :\r\n            'nominative';\r\n\r\n        return monthsShort[nounCase][m.month()];\r\n    }\r\n\r\n    function weekdaysCaseReplace(m, format) {\r\n        var weekdays = {\r\n            'nominative': '______'.split('_'),\r\n            'accusative': '______'.split('_')\r\n        },\r\n\r\n        nounCase = (/\\[ ?[] ?(?:|)? ?\\] ?dddd/).test(format) ?\r\n            'accusative' :\r\n            'nominative';\r\n\r\n        return weekdays[nounCase][m.day()];\r\n    }\r\n\r\n    return moment.defineLocale('ru', {\r\n        months : monthsCaseReplace,\r\n        monthsShort : monthsShortCaseReplace,\r\n        weekdays : weekdaysCaseReplace,\r\n        weekdaysShort : \"______\".split(\"_\"),\r\n        weekdaysMin : \"______\".split(\"_\"),\r\n        monthsParse : [/^/i, /^/i, /^/i, /^/i, /^[|]/i, /^/i, /^/i, /^/i, /^/i, /^/i, /^/i, /^/i],\r\n        longDateFormat : {\r\n            LT : \"HH:mm\",\r\n            L : \"DD.MM.YYYY\",\r\n            LL : \"D MMMM YYYY .\",\r\n            LLL : \"D MMMM YYYY ., LT\",\r\n            LLLL : \"dddd, D MMMM YYYY ., LT\"\r\n        },\r\n        calendar : {\r\n            sameDay: '[ ] LT',\r\n            nextDay: '[ ] LT',\r\n            lastDay: '[ ] LT',\r\n            nextWeek: function () {\r\n                return this.day() === 2 ? '[] dddd [] LT' : '[] dddd [] LT';\r\n            },\r\n            lastWeek: function () {\r\n                switch (this.day()) {\r\n                case 0:\r\n                    return '[ ] dddd [] LT';\r\n                case 1:\r\n                case 2:\r\n                case 4:\r\n                    return '[ ] dddd [] LT';\r\n                case 3:\r\n                case 5:\r\n                case 6:\r\n                    return '[ ] dddd [] LT';\r\n                }\r\n            },\r\n            sameElse: 'L'\r\n        },\r\n        relativeTime : {\r\n            future : \" %s\",\r\n            past : \"%s \",\r\n            s : \" \",\r\n            m : relativeTimeWithPlural,\r\n            mm : relativeTimeWithPlural,\r\n            h : \"\",\r\n            hh : relativeTimeWithPlural,\r\n            d : \"\",\r\n            dd : relativeTimeWithPlural,\r\n            M : \"\",\r\n            MM : relativeTimeWithPlural,\r\n            y : \"\",\r\n            yy : relativeTimeWithPlural\r\n        },\r\n\r\n        meridiemParse: /|||/i,\r\n        isPM : function (input) {\r\n            return /^(|)$/.test(input);\r\n        },\r\n\r\n        meridiem : function (hour, minute, isLower) {\r\n            if (hour < 4) {\r\n                return \"\";\r\n            } else if (hour < 12) {\r\n                return \"\";\r\n            } else if (hour < 17) {\r\n                return \"\";\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n\r\n        ordinal: function (number, period) {\r\n            switch (period) {\r\n            case 'M':\r\n            case 'd':\r\n            case 'DDD':\r\n                return number + '-';\r\n            case 'D':\r\n                return number + '-';\r\n            case 'w':\r\n            case 'W':\r\n                return number + '-';\r\n            default:\r\n                return number;\r\n            }\r\n        },\r\n\r\n        week : {\r\n            dow : 1, // Monday is the first day of the week.\r\n            doy : 7  // The week that contains Jan 1st is the first week of the year.\r\n        }\r\n    });\r\n}));\r\n;// moment.js locale configuration\r\n// locale : chinese\r\n// author : suupic : https://github.com/suupic\r\n// author : Zeno Zeng : https://github.com/zenozeng\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['moment'], factory); // AMD\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('../moment')); // Node\r\n    } else {\r\n        factory(window.moment); // Browser global\r\n    }\r\n}(function (moment) {\r\n    return moment.defineLocale('zh-cn', {\r\n        months : \"___________\".split(\"_\"),\r\n        monthsShort : \"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),\r\n        weekdays : \"______\".split(\"_\"),\r\n        weekdaysShort : \"______\".split(\"_\"),\r\n        weekdaysMin : \"______\".split(\"_\"),\r\n        longDateFormat : {\r\n            LT : \"Ahmm\",\r\n            L : \"YYYY-MM-DD\",\r\n            LL : \"YYYYMMMD\",\r\n            LLL : \"YYYYMMMDLT\",\r\n            LLLL : \"YYYYMMMDddddLT\",\r\n            l : \"YYYY-MM-DD\",\r\n            ll : \"YYYYMMMD\",\r\n            lll : \"YYYYMMMDLT\",\r\n            llll : \"YYYYMMMDddddLT\"\r\n        },\r\n        meridiem : function (hour, minute, isLower) {\r\n            var hm = hour * 100 + minute;\r\n            if (hm < 600) {\r\n                return \"\";\r\n            } else if (hm < 900) {\r\n                return \"\";\r\n            } else if (hm < 1130) {\r\n                return \"\";\r\n            } else if (hm < 1230) {\r\n                return \"\";\r\n            } else if (hm < 1800) {\r\n                return \"\";\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n        calendar : {\r\n            sameDay : function () {\r\n                return this.minutes() === 0 ? \"[]Ah[]\" : \"[]LT\";\r\n            },\r\n            nextDay : function () {\r\n                return this.minutes() === 0 ? \"[]Ah[]\" : \"[]LT\";\r\n            },\r\n            lastDay : function () {\r\n                return this.minutes() === 0 ? \"[]Ah[]\" : \"[]LT\";\r\n            },\r\n            nextWeek : function () {\r\n                var startOfWeek, prefix;\r\n                startOfWeek = moment().startOf('week');\r\n                prefix = this.unix() - startOfWeek.unix() >= 7 * 24 * 3600 ? '[]' : '[]';\r\n                return this.minutes() === 0 ? prefix + \"dddAh\" : prefix + \"dddAhmm\";\r\n            },\r\n            lastWeek : function () {\r\n                var startOfWeek, prefix;\r\n                startOfWeek = moment().startOf('week');\r\n                prefix = this.unix() < startOfWeek.unix()  ? '[]' : '[]';\r\n                return this.minutes() === 0 ? prefix + \"dddAh\" : prefix + \"dddAhmm\";\r\n            },\r\n            sameElse : 'LL'\r\n        },\r\n        ordinal : function (number, period) {\r\n            switch (period) {\r\n            case \"d\":\r\n            case \"D\":\r\n            case \"DDD\":\r\n                return number + \"\";\r\n            case \"M\":\r\n                return number + \"\";\r\n            case \"w\":\r\n            case \"W\":\r\n                return number + \"\";\r\n            default:\r\n                return number;\r\n            }\r\n        },\r\n        relativeTime : {\r\n            future : \"%s\",\r\n            past : \"%s\",\r\n            s : \"\",\r\n            m : \"1\",\r\n            mm : \"%d\",\r\n            h : \"1\",\r\n            hh : \"%d\",\r\n            d : \"1\",\r\n            dd : \"%d\",\r\n            M : \"1\",\r\n            MM : \"%d\",\r\n            y : \"1\",\r\n            yy : \"%d\"\r\n        },\r\n        week : {\r\n            // GB/T 7408-1994ISO 8601:1988\r\n            dow : 1, // Monday is the first day of the week.\r\n            doy : 4  // The week that contains Jan 4th is the first week of the year.\r\n        }\r\n    });\r\n}));\r\n;/*!\r\n * pickadate.js v3.5.6, 2015/04/20\r\n * By Amsul, http://amsul.ca\r\n * Hosted on http://amsul.github.io/pickadate.js\r\n * Licensed under MIT\r\n */\r\n\r\n(function ( factory ) {\r\n\r\n    // AMD.\r\n    if ( typeof define == 'function' && define.amd )\r\n        define( 'picker', ['jquery'], factory )\r\n\r\n    // Node.js/browserify.\r\n    else if ( typeof exports == 'object' )\r\n        module.exports = factory( require('jquery') )\r\n\r\n    // Browser globals.\r\n    else this.Picker = factory( jQuery )\r\n\r\n}(function( $ ) {\r\n\r\nvar $window = $( window )\r\nvar $document = $( document )\r\nvar $html = $( document.documentElement )\r\nvar supportsTransitions = document.documentElement.style.transition != null\r\n\r\n\r\n/**\r\n * The picker constructor that creates a blank picker.\r\n */\r\nfunction PickerConstructor( ELEMENT, NAME, COMPONENT, OPTIONS ) {\r\n\r\n    // If theres no element, return the picker constructor.\r\n    if ( !ELEMENT ) return PickerConstructor\r\n\r\n\r\n    var\r\n        IS_DEFAULT_THEME = false,\r\n\r\n\r\n        // The state of the picker.\r\n        STATE = {\r\n            id: ELEMENT.id || 'P' + Math.abs( ~~(Math.random() * new Date()) )\r\n        },\r\n\r\n\r\n        // Merge the defaults and options passed.\r\n        SETTINGS = COMPONENT ? $.extend( true, {}, COMPONENT.defaults, OPTIONS ) : OPTIONS || {},\r\n\r\n\r\n        // Merge the default classes with the settings classes.\r\n        CLASSES = $.extend( {}, PickerConstructor.klasses(), SETTINGS.klass ),\r\n\r\n\r\n        // The element node wrapper into a jQuery object.\r\n        $ELEMENT = $( ELEMENT ),\r\n\r\n\r\n        // Pseudo picker constructor.\r\n        PickerInstance = function() {\r\n            return this.start()\r\n        },\r\n\r\n\r\n        // The picker prototype.\r\n        P = PickerInstance.prototype = {\r\n\r\n            constructor: PickerInstance,\r\n\r\n            $node: $ELEMENT,\r\n\r\n\r\n            /**\r\n             * Initialize everything\r\n             */\r\n            start: function() {\r\n\r\n                // If its already started, do nothing.\r\n                if ( STATE && STATE.start ) return P\r\n\r\n\r\n                // Update the picker states.\r\n                STATE.methods = {}\r\n                STATE.start = true\r\n                STATE.open = false\r\n                STATE.type = ELEMENT.type\r\n\r\n\r\n                // Confirm focus state, convert into text input to remove UA stylings,\r\n                // and set as readonly to prevent keyboard popup.\r\n                ELEMENT.autofocus = ELEMENT == getActiveElement()\r\n                ELEMENT.readOnly = !SETTINGS.editable\r\n                ELEMENT.id = ELEMENT.id || STATE.id\r\n                if ( ELEMENT.type != 'text' ) {\r\n                    ELEMENT.type = 'text'\r\n                }\r\n\r\n\r\n                // Create a new picker component with the settings.\r\n                P.component = new COMPONENT(P, SETTINGS)\r\n\r\n\r\n                // Create the picker root and then prepare it.\r\n                P.$root = $( '<div class=\"' + CLASSES.picker + '\" id=\"' + ELEMENT.id + '_root\" />' )\r\n                prepareElementRoot()\r\n\r\n\r\n                // Create the picker holder and then prepare it.\r\n                P.$holder = $( createWrappedComponent() ).appendTo( P.$root )\r\n                prepareElementHolder()\r\n\r\n\r\n                // If theres a format for the hidden input element, create the element.\r\n                if ( SETTINGS.formatSubmit ) {\r\n                    prepareElementHidden()\r\n                }\r\n\r\n\r\n                // Prepare the input element.\r\n                prepareElement()\r\n\r\n\r\n                // Insert the hidden input as specified in the settings.\r\n                if ( SETTINGS.containerHidden ) $( SETTINGS.containerHidden ).append( P._hidden )\r\n                else $ELEMENT.after( P._hidden )\r\n\r\n\r\n                // Insert the root as specified in the settings.\r\n                if ( SETTINGS.container ) $( SETTINGS.container ).append( P.$root )\r\n                else $ELEMENT.after( P.$root )\r\n\r\n\r\n                // Bind the default component and settings events.\r\n                P.on({\r\n                    start: P.component.onStart,\r\n                    render: P.component.onRender,\r\n                    stop: P.component.onStop,\r\n                    open: P.component.onOpen,\r\n                    close: P.component.onClose,\r\n                    set: P.component.onSet\r\n                }).on({\r\n                    start: SETTINGS.onStart,\r\n                    render: SETTINGS.onRender,\r\n                    stop: SETTINGS.onStop,\r\n                    open: SETTINGS.onOpen,\r\n                    close: SETTINGS.onClose,\r\n                    set: SETTINGS.onSet\r\n                })\r\n\r\n\r\n                // Once were all set, check the theme in use.\r\n                IS_DEFAULT_THEME = isUsingDefaultTheme( P.$holder[0] )\r\n\r\n\r\n                // If the element has autofocus, open the picker.\r\n                if ( ELEMENT.autofocus ) {\r\n                    P.open()\r\n                }\r\n\r\n\r\n                // Trigger queued the start and render events.\r\n                return P.trigger( 'start' ).trigger( 'render' )\r\n            }, //start\r\n\r\n\r\n            /**\r\n             * Render a new picker\r\n             */\r\n            render: function( entireComponent ) {\r\n\r\n                // Insert a new component holder in the root or box.\r\n                if ( entireComponent ) {\r\n                    P.$holder = $( createWrappedComponent() )\r\n                    prepareElementHolder()\r\n                    P.$root.html( P.$holder )\r\n                }\r\n                else P.$root.find( '.' + CLASSES.box ).html( P.component.nodes( STATE.open ) )\r\n\r\n                // Trigger the queued render events.\r\n                return P.trigger( 'render' )\r\n            }, //render\r\n\r\n\r\n            /**\r\n             * Destroy everything\r\n             */\r\n            stop: function() {\r\n\r\n                // If its already stopped, do nothing.\r\n                if ( !STATE.start ) return P\r\n\r\n                // Then close the picker.\r\n                P.close()\r\n\r\n                // Remove the hidden field.\r\n                if ( P._hidden ) {\r\n                    P._hidden.parentNode.removeChild( P._hidden )\r\n                }\r\n\r\n                // Remove the root.\r\n                P.$root.remove()\r\n\r\n                // Remove the input class, remove the stored data, and unbind\r\n                // the events (after a tick for IE - see `P.close`).\r\n                $ELEMENT.removeClass( CLASSES.input ).removeData( NAME )\r\n                setTimeout( function() {\r\n                    $ELEMENT.off( '.' + STATE.id )\r\n                }, 0)\r\n\r\n                // Restore the element state\r\n                ELEMENT.type = STATE.type\r\n                ELEMENT.readOnly = false\r\n\r\n                // Trigger the queued stop events.\r\n                P.trigger( 'stop' )\r\n\r\n                // Reset the picker states.\r\n                STATE.methods = {}\r\n                STATE.start = false\r\n\r\n                return P\r\n            }, //stop\r\n\r\n\r\n            /**\r\n             * Open up the picker\r\n             */\r\n            open: function( dontGiveFocus ) {\r\n\r\n                // If its already open, do nothing.\r\n                if ( STATE.open ) return P\r\n\r\n                // Add the active class.\r\n                $ELEMENT.addClass( CLASSES.active )\r\n                aria( ELEMENT, 'expanded', true )\r\n\r\n                // * A Firefox bug, when `html` has `overflow:hidden`, results in\r\n                //   killing transitions :(. So add the opened state on the next tick.\r\n                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289\r\n                setTimeout( function() {\r\n\r\n                    // Add the opened class to the picker root.\r\n                    P.$root.addClass( CLASSES.opened )\r\n                    aria( P.$root[0], 'hidden', false )\r\n\r\n                }, 0 )\r\n\r\n                // If we have to give focus, bind the element and doc events.\r\n                if ( dontGiveFocus !== false ) {\r\n\r\n                    // Set it as open.\r\n                    STATE.open = true\r\n\r\n                    // Prevent the page from scrolling.\r\n                    if ( IS_DEFAULT_THEME ) {\r\n                        $html.\r\n                            css( 'overflow', 'hidden' ).\r\n                            css( 'padding-right', '+=' + getScrollbarWidth() )\r\n                    }\r\n\r\n                    // Pass focus to the root elements jQuery object.\r\n                    focusPickerOnceOpened()\r\n\r\n                    // Bind the document events.\r\n                    $document.on( 'click.' + STATE.id + ' focusin.' + STATE.id, function( event ) {\r\n\r\n                        var target = event.target\r\n\r\n                        // If the target of the event is not the element, close the picker picker.\r\n                        // * Dont worry about clicks or focusins on the root because those dont bubble up.\r\n                        //   Also, for Firefox, a click on an `option` element bubbles up directly\r\n                        //   to the doc. So make sure the target wasn't the doc.\r\n                        // * In Firefox stopPropagation() doesnt prevent right-click events from bubbling,\r\n                        //   which causes the picker to unexpectedly close when right-clicking it. So make\r\n                        //   sure the event wasnt a right-click.\r\n                        if ( target != ELEMENT && target != document && event.which != 3 ) {\r\n\r\n                            // If the target was the holder that covers the screen,\r\n                            // keep the element focused to maintain tabindex.\r\n                            P.close( target === P.$holder[0] )\r\n                        }\r\n\r\n                    }).on( 'keydown.' + STATE.id, function( event ) {\r\n\r\n                        var\r\n                            // Get the keycode.\r\n                            keycode = event.keyCode,\r\n\r\n                            // Translate that to a selection change.\r\n                            keycodeToMove = P.component.key[ keycode ],\r\n\r\n                            // Grab the target.\r\n                            target = event.target\r\n\r\n\r\n                        // On escape, close the picker and give focus.\r\n                        if ( keycode == 27 ) {\r\n                            P.close( true )\r\n                        }\r\n\r\n\r\n                        // Check if there is a key movement or enter keypress on the element.\r\n                        else if ( target == P.$holder[0] && ( keycodeToMove || keycode == 13 ) ) {\r\n\r\n                            // Prevent the default action to stop page movement.\r\n                            event.preventDefault()\r\n\r\n                            // Trigger the key movement action.\r\n                            if ( keycodeToMove ) {\r\n                                PickerConstructor._.trigger( P.component.key.go, P, [ PickerConstructor._.trigger( keycodeToMove ) ] )\r\n                            }\r\n\r\n                            // On enter, if the highlighted item isnt disabled, set the value and close.\r\n                            else if ( !P.$root.find( '.' + CLASSES.highlighted ).hasClass( CLASSES.disabled ) ) {\r\n                                P.set( 'select', P.component.item.highlight )\r\n                                if ( SETTINGS.closeOnSelect ) {\r\n                                    P.close( true )\r\n                                }\r\n                            }\r\n                        }\r\n\r\n\r\n                        // If the target is within the root and enter is pressed,\r\n                        // prevent the default action and trigger a click on the target instead.\r\n                        else if ( $.contains( P.$root[0], target ) && keycode == 13 ) {\r\n                            event.preventDefault()\r\n                            target.click()\r\n                        }\r\n                    })\r\n                }\r\n\r\n                // Trigger the queued open events.\r\n                return P.trigger( 'open' )\r\n            }, //open\r\n\r\n\r\n            /**\r\n             * Close the picker\r\n             */\r\n            close: function( giveFocus ) {\r\n\r\n                // If we need to give focus, do it before changing states.\r\n                if ( giveFocus ) {\r\n                    if ( SETTINGS.editable ) {\r\n                        ELEMENT.focus()\r\n                    }\r\n                    else {\r\n                        // ....ah yes! It wouldve been incomplete without a crazy workaround for IE :|\r\n                        // The focus is triggered *after* the close has completed - causing it\r\n                        // to open again. So unbind and rebind the event at the next tick.\r\n                        P.$holder.off( 'focus.toOpen' ).focus()\r\n                        setTimeout( function() {\r\n                            P.$holder.on( 'focus.toOpen', handleFocusToOpenEvent )\r\n                        }, 0 )\r\n                    }\r\n                }\r\n\r\n                // Remove the active class.\r\n                $ELEMENT.removeClass( CLASSES.active )\r\n                aria( ELEMENT, 'expanded', false )\r\n\r\n                // * A Firefox bug, when `html` has `overflow:hidden`, results in\r\n                //   killing transitions :(. So remove the opened state on the next tick.\r\n                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289\r\n                setTimeout( function() {\r\n\r\n                    // Remove the opened and focused class from the picker root.\r\n                    P.$root.removeClass( CLASSES.opened + ' ' + CLASSES.focused )\r\n                    aria( P.$root[0], 'hidden', true )\r\n\r\n                }, 0 )\r\n\r\n                // If its already closed, do nothing more.\r\n                if ( !STATE.open ) return P\r\n\r\n                // Set it as closed.\r\n                STATE.open = false\r\n\r\n                // Allow the page to scroll.\r\n                if ( IS_DEFAULT_THEME ) {\r\n                    $html.\r\n                        css( 'overflow', '' ).\r\n                        css( 'padding-right', '-=' + getScrollbarWidth() )\r\n                }\r\n\r\n                // Unbind the document events.\r\n                $document.off( '.' + STATE.id )\r\n\r\n                // Trigger the queued close events.\r\n                return P.trigger( 'close' )\r\n            }, //close\r\n\r\n\r\n            /**\r\n             * Clear the values\r\n             */\r\n            clear: function( options ) {\r\n                return P.set( 'clear', null, options )\r\n            }, //clear\r\n\r\n\r\n            /**\r\n             * Set something\r\n             */\r\n            set: function( thing, value, options ) {\r\n\r\n                var thingItem, thingValue,\r\n                    thingIsObject = $.isPlainObject( thing ),\r\n                    thingObject = thingIsObject ? thing : {}\r\n\r\n                // Make sure we have usable options.\r\n                options = thingIsObject && $.isPlainObject( value ) ? value : options || {}\r\n\r\n                if ( thing ) {\r\n\r\n                    // If the thing isnt an object, make it one.\r\n                    if ( !thingIsObject ) {\r\n                        thingObject[ thing ] = value\r\n                    }\r\n\r\n                    // Go through the things of items to set.\r\n                    for ( thingItem in thingObject ) {\r\n\r\n                        // Grab the value of the thing.\r\n                        thingValue = thingObject[ thingItem ]\r\n\r\n                        // First, if the item exists and theres a value, set it.\r\n                        if ( thingItem in P.component.item ) {\r\n                            if ( thingValue === undefined ) thingValue = null\r\n                            P.component.set( thingItem, thingValue, options )\r\n                        }\r\n\r\n                        // Then, check to update the element value and broadcast a change.\r\n                        if ( thingItem == 'select' || thingItem == 'clear' ) {\r\n                            $ELEMENT.\r\n                                val( thingItem == 'clear' ? '' : P.get( thingItem, SETTINGS.format ) ).\r\n                                trigger( 'change' )\r\n                        }\r\n                    }\r\n\r\n                    // Render a new picker.\r\n                    P.render()\r\n                }\r\n\r\n                // When the method isnt muted, trigger queued set events and pass the `thingObject`.\r\n                return options.muted ? P : P.trigger( 'set', thingObject )\r\n            }, //set\r\n\r\n\r\n            /**\r\n             * Get something\r\n             */\r\n            get: function( thing, format ) {\r\n\r\n                // Make sure theres something to get.\r\n                thing = thing || 'value'\r\n\r\n                // If a picker state exists, return that.\r\n                if ( STATE[ thing ] != null ) {\r\n                    return STATE[ thing ]\r\n                }\r\n\r\n                // Return the submission value, if that.\r\n                if ( thing == 'valueSubmit' ) {\r\n                    if ( P._hidden ) {\r\n                        return P._hidden.value\r\n                    }\r\n                    thing = 'value'\r\n                }\r\n\r\n                // Return the value, if that.\r\n                if ( thing == 'value' ) {\r\n                    return ELEMENT.value\r\n                }\r\n\r\n                // Check if a component item exists, return that.\r\n                if ( thing in P.component.item ) {\r\n                    if ( typeof format == 'string' ) {\r\n                        var thingValue = P.component.get( thing )\r\n                        return thingValue ?\r\n                            PickerConstructor._.trigger(\r\n                                P.component.formats.toString,\r\n                                P.component,\r\n                                [ format, thingValue ]\r\n                            ) : ''\r\n                    }\r\n                    return P.component.get( thing )\r\n                }\r\n            }, //get\r\n\r\n\r\n\r\n            /**\r\n             * Bind events on the things.\r\n             */\r\n            on: function( thing, method, internal ) {\r\n\r\n                var thingName, thingMethod,\r\n                    thingIsObject = $.isPlainObject( thing ),\r\n                    thingObject = thingIsObject ? thing : {}\r\n\r\n                if ( thing ) {\r\n\r\n                    // If the thing isnt an object, make it one.\r\n                    if ( !thingIsObject ) {\r\n                        thingObject[ thing ] = method\r\n                    }\r\n\r\n                    // Go through the things to bind to.\r\n                    for ( thingName in thingObject ) {\r\n\r\n                        // Grab the method of the thing.\r\n                        thingMethod = thingObject[ thingName ]\r\n\r\n                        // If it was an internal binding, prefix it.\r\n                        if ( internal ) {\r\n                            thingName = '_' + thingName\r\n                        }\r\n\r\n                        // Make sure the thing methods collection exists.\r\n                        STATE.methods[ thingName ] = STATE.methods[ thingName ] || []\r\n\r\n                        // Add the method to the relative method collection.\r\n                        STATE.methods[ thingName ].push( thingMethod )\r\n                    }\r\n                }\r\n\r\n                return P\r\n            }, //on\r\n\r\n\r\n\r\n            /**\r\n             * Unbind events on the things.\r\n             */\r\n            off: function() {\r\n                var i, thingName,\r\n                    names = arguments;\r\n                for ( i = 0, namesCount = names.length; i < namesCount; i += 1 ) {\r\n                    thingName = names[i]\r\n                    if ( thingName in STATE.methods ) {\r\n                        delete STATE.methods[thingName]\r\n                    }\r\n                }\r\n                return P\r\n            },\r\n\r\n\r\n            /**\r\n             * Fire off method events.\r\n             */\r\n            trigger: function( name, data ) {\r\n                var _trigger = function( name ) {\r\n                    var methodList = STATE.methods[ name ]\r\n                    if ( methodList ) {\r\n                        methodList.map( function( method ) {\r\n                            PickerConstructor._.trigger( method, P, [ data ] )\r\n                        })\r\n                    }\r\n                }\r\n                _trigger( '_' + name )\r\n                _trigger( name )\r\n                return P\r\n            } //trigger\r\n        } //PickerInstance.prototype\r\n\r\n\r\n    /**\r\n     * Wrap the picker holder components together.\r\n     */\r\n    function createWrappedComponent() {\r\n\r\n        // Create a picker wrapper holder\r\n        return PickerConstructor._.node( 'div',\r\n\r\n            // Create a picker wrapper node\r\n            PickerConstructor._.node( 'div',\r\n\r\n                // Create a picker frame\r\n                PickerConstructor._.node( 'div',\r\n\r\n                    // Create a picker box node\r\n                    PickerConstructor._.node( 'div',\r\n\r\n                        // Create the components nodes.\r\n                        P.component.nodes( STATE.open ),\r\n\r\n                        // The picker box class\r\n                        CLASSES.box\r\n                    ),\r\n\r\n                    // Picker wrap class\r\n                    CLASSES.wrap\r\n                ),\r\n\r\n                // Picker frame class\r\n                CLASSES.frame\r\n            ),\r\n\r\n            // Picker holder class\r\n            CLASSES.holder,\r\n\r\n            'tabindex=\"-1\"'\r\n        ) //endreturn\r\n    } //createWrappedComponent\r\n\r\n\r\n\r\n    /**\r\n     * Prepare the input element with all bindings.\r\n     */\r\n    function prepareElement() {\r\n\r\n        $ELEMENT.\r\n\r\n            // Store the picker data by component name.\r\n            data(NAME, P).\r\n\r\n            // Add the input class name.\r\n            addClass(CLASSES.input).\r\n\r\n            // If theres a `data-value`, update the value of the element.\r\n            val( $ELEMENT.data('value') ?\r\n                P.get('select', SETTINGS.format) :\r\n                ELEMENT.value\r\n            )\r\n\r\n\r\n        // Only bind keydown events if the element isnt editable.\r\n        if ( !SETTINGS.editable ) {\r\n\r\n            $ELEMENT.\r\n\r\n                // On focus/click, open the picker.\r\n                on( 'focus.' + STATE.id + ' click.' + STATE.id, function(event) {\r\n                    event.preventDefault()\r\n                    P.open()\r\n                }).\r\n\r\n                // Handle keyboard event based on the picker being opened or not.\r\n                on( 'keydown.' + STATE.id, handleKeydownEvent )\r\n        }\r\n\r\n\r\n        // Update the aria attributes.\r\n        aria(ELEMENT, {\r\n            haspopup: true,\r\n            expanded: false,\r\n            readonly: false,\r\n            owns: ELEMENT.id + '_root'\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * Prepare the root picker element with all bindings.\r\n     */\r\n    function prepareElementRoot() {\r\n        aria( P.$root[0], 'hidden', true )\r\n    }\r\n\r\n\r\n     /**\r\n      * Prepare the holder picker element with all bindings.\r\n      */\r\n    function prepareElementHolder() {\r\n\r\n        P.$holder.\r\n\r\n            on({\r\n\r\n                // For iOS8.\r\n                keydown: handleKeydownEvent,\r\n\r\n                'focus.toOpen': handleFocusToOpenEvent,\r\n\r\n                blur: function() {\r\n                    // Remove the target class.\r\n                    $ELEMENT.removeClass( CLASSES.target )\r\n                },\r\n\r\n                // When something within the holder is focused, stop from bubbling\r\n                // to the doc and remove the focused state from the root.\r\n                focusin: function( event ) {\r\n                    P.$root.removeClass( CLASSES.focused )\r\n                    event.stopPropagation()\r\n                },\r\n\r\n                // When something within the holder is clicked, stop it\r\n                // from bubbling to the doc.\r\n                'mousedown click': function( event ) {\r\n\r\n                    var target = event.target\r\n\r\n                    // Make sure the target isnt the root holder so it can bubble up.\r\n                    if ( target != P.$holder[0] ) {\r\n\r\n                        event.stopPropagation()\r\n\r\n                        // * For mousedown events, cancel the default action in order to\r\n                        //   prevent cases where focus is shifted onto external elements\r\n                        //   when using things like jQuery mobile or MagnificPopup (ref: #249 & #120).\r\n                        //   Also, for Firefox, dont prevent action on the `option` element.\r\n                        if ( event.type == 'mousedown' && !$( target ).is( 'input, select, textarea, button, option' )) {\r\n\r\n                            event.preventDefault()\r\n\r\n                            // Re-focus onto the holder so that users can click away\r\n                            // from elements focused within the picker.\r\n                            P.$holder[0].focus()\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }).\r\n\r\n            // If theres a click on an actionable element, carry out the actions.\r\n            on( 'click', '[data-pick], [data-nav], [data-clear], [data-close]', function() {\r\n\r\n                var $target = $( this ),\r\n                    targetData = $target.data(),\r\n                    targetDisabled = $target.hasClass( CLASSES.navDisabled ) || $target.hasClass( CLASSES.disabled ),\r\n\r\n                    // * For IE, non-focusable elements can be active elements as well\r\n                    //   (http://stackoverflow.com/a/2684561).\r\n                    activeElement = getActiveElement()\r\n                    activeElement = activeElement && ( activeElement.type || activeElement.href )\r\n\r\n                // If its disabled or nothing inside is actively focused, re-focus the element.\r\n                if ( targetDisabled || activeElement && !$.contains( P.$root[0], activeElement ) ) {\r\n                    P.$holder[0].focus()\r\n                }\r\n\r\n                // If something is superficially changed, update the `highlight` based on the `nav`.\r\n                if ( !targetDisabled && targetData.nav ) {\r\n                    P.set( 'highlight', P.component.item.highlight, { nav: targetData.nav } )\r\n                }\r\n\r\n                // If something is picked, set `select` then close with focus.\r\n                else if ( !targetDisabled && 'pick' in targetData ) {\r\n                    P.set( 'select', targetData.pick )\r\n                    if ( SETTINGS.closeOnSelect ) {\r\n                        P.close( true )\r\n                    }\r\n                }\r\n\r\n                // If a clear button is pressed, empty the values and close with focus.\r\n                else if ( targetData.clear ) {\r\n                    P.clear()\r\n                    if ( SETTINGS.closeOnClear ) {\r\n                        P.close( true )\r\n                    }\r\n                }\r\n\r\n                else if ( targetData.close ) {\r\n                    P.close( true )\r\n                }\r\n\r\n            }) //P.$holder\r\n\r\n    }\r\n\r\n\r\n     /**\r\n      * Prepare the hidden input element along with all bindings.\r\n      */\r\n    function prepareElementHidden() {\r\n\r\n        var name\r\n\r\n        if ( SETTINGS.hiddenName === true ) {\r\n            name = ELEMENT.name\r\n            ELEMENT.name = ''\r\n        }\r\n        else {\r\n            name = [\r\n                typeof SETTINGS.hiddenPrefix == 'string' ? SETTINGS.hiddenPrefix : '',\r\n                typeof SETTINGS.hiddenSuffix == 'string' ? SETTINGS.hiddenSuffix : '_submit'\r\n            ]\r\n            name = name[0] + ELEMENT.name + name[1]\r\n        }\r\n\r\n        P._hidden = $(\r\n            '<input ' +\r\n            'type=hidden ' +\r\n\r\n            // Create the name using the original inputs with a prefix and suffix.\r\n            'name=\"' + name + '\"' +\r\n\r\n            // If the element has a value, set the hidden value as well.\r\n            (\r\n                $ELEMENT.data('value') || ELEMENT.value ?\r\n                    ' value=\"' + P.get('select', SETTINGS.formatSubmit) + '\"' :\r\n                    ''\r\n            ) +\r\n            '>'\r\n        )[0]\r\n\r\n        $ELEMENT.\r\n\r\n            // If the value changes, update the hidden input with the correct format.\r\n            on('change.' + STATE.id, function() {\r\n                P._hidden.value = ELEMENT.value ?\r\n                    P.get('select', SETTINGS.formatSubmit) :\r\n                    ''\r\n            })\r\n    }\r\n\r\n\r\n    // Wait for transitions to end before focusing the holder. Otherwise, while\r\n    // using the `container` option, the view jumps to the container.\r\n    function focusPickerOnceOpened() {\r\n\r\n        if (IS_DEFAULT_THEME && supportsTransitions) {\r\n            P.$holder.find('.' + CLASSES.frame).one('transitionend', function() {\r\n                P.$holder[0].focus()\r\n            })\r\n        }\r\n        else {\r\n            P.$holder[0].focus()\r\n        }\r\n    }\r\n\r\n\r\n    function handleFocusToOpenEvent(event) {\r\n\r\n        // Stop the event from propagating to the doc.\r\n        event.stopPropagation()\r\n\r\n        // Add the target class.\r\n        $ELEMENT.addClass( CLASSES.target )\r\n\r\n        // Add the focused class to the root.\r\n        P.$root.addClass( CLASSES.focused )\r\n\r\n        // And then finally open the picker.\r\n        P.open()\r\n    }\r\n\r\n\r\n    // For iOS8.\r\n    function handleKeydownEvent( event ) {\r\n\r\n        var keycode = event.keyCode,\r\n\r\n            // Check if one of the delete keys was pressed.\r\n            isKeycodeDelete = /^(8|46)$/.test(keycode)\r\n\r\n        // For some reason IE clears the input value on escape.\r\n        if ( keycode == 27 ) {\r\n            P.close( true )\r\n            return false\r\n        }\r\n\r\n        // Check if `space` or `delete` was pressed or the picker is closed with a key movement.\r\n        if ( keycode == 32 || isKeycodeDelete || !STATE.open && P.component.key[keycode] ) {\r\n\r\n            // Prevent it from moving the page and bubbling to doc.\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n\r\n            // If `delete` was pressed, clear the values and close the picker.\r\n            // Otherwise open the picker.\r\n            if ( isKeycodeDelete ) { P.clear().close() }\r\n            else { P.open() }\r\n        }\r\n    }\r\n\r\n\r\n    // Return a new picker instance.\r\n    return new PickerInstance()\r\n} //PickerConstructor\r\n\r\n\r\n\r\n/**\r\n * The default classes and prefix to use for the HTML classes.\r\n */\r\nPickerConstructor.klasses = function( prefix ) {\r\n    prefix = prefix || 'picker'\r\n    return {\r\n\r\n        picker: prefix,\r\n        opened: prefix + '--opened',\r\n        focused: prefix + '--focused',\r\n\r\n        input: prefix + '__input',\r\n        active: prefix + '__input--active',\r\n        target: prefix + '__input--target',\r\n\r\n        holder: prefix + '__holder',\r\n\r\n        frame: prefix + '__frame',\r\n        wrap: prefix + '__wrap',\r\n\r\n        box: prefix + '__box'\r\n    }\r\n} //PickerConstructor.klasses\r\n\r\n\r\n\r\n/**\r\n * Check if the default theme is being used.\r\n */\r\nfunction isUsingDefaultTheme( element ) {\r\n\r\n    var theme,\r\n        prop = 'position'\r\n\r\n    // For IE.\r\n    if ( element.currentStyle ) {\r\n        theme = element.currentStyle[prop]\r\n    }\r\n\r\n    // For normal browsers.\r\n    else if ( window.getComputedStyle ) {\r\n        theme = getComputedStyle( element )[prop]\r\n    }\r\n\r\n    return theme == 'fixed'\r\n}\r\n\r\n\r\n\r\n/**\r\n * Get the width of the browsers scrollbar.\r\n * Taken from: https://github.com/VodkaBears/Remodal/blob/master/src/jquery.remodal.js\r\n */\r\nfunction getScrollbarWidth() {\r\n\r\n    if ( $html.height() <= $window.height() ) {\r\n        return 0\r\n    }\r\n\r\n    var $outer = $( '<div style=\"visibility:hidden;width:100px\" />' ).\r\n        appendTo( 'body' )\r\n\r\n    // Get the width without scrollbars.\r\n    var widthWithoutScroll = $outer[0].offsetWidth\r\n\r\n    // Force adding scrollbars.\r\n    $outer.css( 'overflow', 'scroll' )\r\n\r\n    // Add the inner div.\r\n    var $inner = $( '<div style=\"width:100%\" />' ).appendTo( $outer )\r\n\r\n    // Get the width with scrollbars.\r\n    var widthWithScroll = $inner[0].offsetWidth\r\n\r\n    // Remove the divs.\r\n    $outer.remove()\r\n\r\n    // Return the difference between the widths.\r\n    return widthWithoutScroll - widthWithScroll\r\n}\r\n\r\n\r\n\r\n/**\r\n * PickerConstructor helper methods.\r\n */\r\nPickerConstructor._ = {\r\n\r\n    /**\r\n     * Create a group of nodes. Expects:\r\n     * `\r\n        {\r\n            min:    {Integer},\r\n            max:    {Integer},\r\n            i:      {Integer},\r\n            node:   {String},\r\n            item:   {Function}\r\n        }\r\n     * `\r\n     */\r\n    group: function( groupObject ) {\r\n\r\n        var\r\n            // Scope for the looped object\r\n            loopObjectScope,\r\n\r\n            // Create the nodes list\r\n            nodesList = '',\r\n\r\n            // The counter starts from the `min`\r\n            counter = PickerConstructor._.trigger( groupObject.min, groupObject )\r\n\r\n\r\n        // Loop from the `min` to `max`, incrementing by `i`\r\n        for ( ; counter <= PickerConstructor._.trigger( groupObject.max, groupObject, [ counter ] ); counter += groupObject.i ) {\r\n\r\n            // Trigger the `item` function within scope of the object\r\n            loopObjectScope = PickerConstructor._.trigger( groupObject.item, groupObject, [ counter ] )\r\n\r\n            // Splice the subgroup and create nodes out of the sub nodes\r\n            nodesList += PickerConstructor._.node(\r\n                groupObject.node,\r\n                loopObjectScope[ 0 ],   // the node\r\n                loopObjectScope[ 1 ],   // the classes\r\n                loopObjectScope[ 2 ]    // the attributes\r\n            )\r\n        }\r\n\r\n        // Return the list of nodes\r\n        return nodesList\r\n    }, //group\r\n\r\n\r\n    /**\r\n     * Create a dom node string\r\n     */\r\n    node: function( wrapper, item, klass, attribute ) {\r\n\r\n        // If the item is false-y, just return an empty string\r\n        if ( !item ) return ''\r\n\r\n        // If the item is an array, do a join\r\n        item = $.isArray( item ) ? item.join( '' ) : item\r\n\r\n        // Check for the class\r\n        klass = klass ? ' class=\"' + klass + '\"' : ''\r\n\r\n        // Check for any attributes\r\n        attribute = attribute ? ' ' + attribute : ''\r\n\r\n        // Return the wrapped item\r\n        return '<' + wrapper + klass + attribute + '>' + item + '</' + wrapper + '>'\r\n    }, //node\r\n\r\n\r\n    /**\r\n     * Lead numbers below 10 with a zero.\r\n     */\r\n    lead: function( number ) {\r\n        return ( number < 10 ? '0': '' ) + number\r\n    },\r\n\r\n\r\n    /**\r\n     * Trigger a function otherwise return the value.\r\n     */\r\n    trigger: function( callback, scope, args ) {\r\n        return typeof callback == 'function' ? callback.apply( scope, args || [] ) : callback\r\n    },\r\n\r\n\r\n    /**\r\n     * If the second character is a digit, length is 2 otherwise 1.\r\n     */\r\n    digits: function( string ) {\r\n        return ( /\\d/ ).test( string[ 1 ] ) ? 2 : 1\r\n    },\r\n\r\n\r\n    /**\r\n     * Tell if something is a date object.\r\n     */\r\n    isDate: function( value ) {\r\n        return {}.toString.call( value ).indexOf( 'Date' ) > -1 && this.isInteger( value.getDate() )\r\n    },\r\n\r\n\r\n    /**\r\n     * Tell if something is an integer.\r\n     */\r\n    isInteger: function( value ) {\r\n        return {}.toString.call( value ).indexOf( 'Number' ) > -1 && value % 1 === 0\r\n    },\r\n\r\n\r\n    /**\r\n     * Create ARIA attribute strings.\r\n     */\r\n    ariaAttr: ariaAttr\r\n} //PickerConstructor._\r\n\r\n\r\n\r\n/**\r\n * Extend the picker with a component and defaults.\r\n */\r\nPickerConstructor.extend = function( name, Component ) {\r\n\r\n    // Extend jQuery.\r\n    $.fn[ name ] = function( options, action ) {\r\n\r\n        // Grab the component data.\r\n        var componentData = this.data( name )\r\n\r\n        // If the picker is requested, return the data object.\r\n        if ( options == 'picker' ) {\r\n            return componentData\r\n        }\r\n\r\n        // If the component data exists and `options` is a string, carry out the action.\r\n        if ( componentData && typeof options == 'string' ) {\r\n            return PickerConstructor._.trigger( componentData[ options ], componentData, [ action ] )\r\n        }\r\n\r\n        // Otherwise go through each matched element and if the component\r\n        // doesnt exist, create a new picker using `this` element\r\n        // and merging the defaults and options with a deep copy.\r\n        return this.each( function() {\r\n            var $this = $( this )\r\n            if ( !$this.data( name ) ) {\r\n                new PickerConstructor( this, name, Component, options )\r\n            }\r\n        })\r\n    }\r\n\r\n    // Set the defaults.\r\n    $.fn[ name ].defaults = Component.defaults\r\n} //PickerConstructor.extend\r\n\r\n\r\n\r\nfunction aria(element, attribute, value) {\r\n    if ( $.isPlainObject(attribute) ) {\r\n        for ( var key in attribute ) {\r\n            ariaSet(element, key, attribute[key])\r\n        }\r\n    }\r\n    else {\r\n        ariaSet(element, attribute, value)\r\n    }\r\n}\r\nfunction ariaSet(element, attribute, value) {\r\n    element.setAttribute(\r\n        (attribute == 'role' ? '' : 'aria-') + attribute,\r\n        value\r\n    )\r\n}\r\nfunction ariaAttr(attribute, data) {\r\n    if ( !$.isPlainObject(attribute) ) {\r\n        attribute = { attribute: data }\r\n    }\r\n    data = ''\r\n    for ( var key in attribute ) {\r\n        var attr = (key == 'role' ? '' : 'aria-') + key,\r\n            attrVal = attribute[key]\r\n        data += attrVal == null ? '' : attr + '=\"' + attribute[key] + '\"'\r\n    }\r\n    return data\r\n}\r\n\r\n// IE8 bug throws an error for activeElements within iframes.\r\nfunction getActiveElement() {\r\n    try {\r\n        return document.activeElement\r\n    } catch ( err ) { }\r\n}\r\n\r\n\r\n\r\n// Expose the picker constructor.\r\nreturn PickerConstructor\r\n\r\n\r\n}));\r\n\r\n\r\n\r\n\r\n/*!\r\n * Date picker for pickadate.js v3.5.6\r\n * http://amsul.github.io/pickadate.js/date.htm\r\n */\r\n\r\n(function ( factory ) {\r\n\r\n    // AMD.\r\n    if ( typeof define == 'function' && define.amd )\r\n        define( ['picker', 'jquery'], factory )\r\n\r\n    // Node.js/browserify.\r\n    else if ( typeof exports == 'object' )\r\n        module.exports = factory( require('./picker.js'), require('jquery') )\r\n\r\n    // Browser globals.\r\n    else factory( Picker, jQuery )\r\n\r\n}(function( Picker, $ ) {\r\n\r\n\r\n/**\r\n * Globals and constants\r\n */\r\nvar DAYS_IN_WEEK = 7,\r\n    WEEKS_IN_CALENDAR = 6,\r\n    _ = Picker._\r\n\r\n\r\n\r\n/**\r\n * The date picker constructor\r\n */\r\nfunction DatePicker( picker, settings ) {\r\n\r\n    var calendar = this,\r\n        element = picker.$node[ 0 ],\r\n        elementValue = element.value,\r\n        elementDataValue = picker.$node.data( 'value' ),\r\n        valueString = elementDataValue || elementValue,\r\n        formatString = elementDataValue ? settings.formatSubmit : settings.format,\r\n        isRTL = function() {\r\n\r\n            return element.currentStyle ?\r\n\r\n                // For IE.\r\n                element.currentStyle.direction == 'rtl' :\r\n\r\n                // For normal browsers.\r\n                getComputedStyle( picker.$root[0] ).direction == 'rtl'\r\n        }\r\n\r\n    calendar.settings = settings\r\n    calendar.$node = picker.$node\r\n\r\n    // The queue of methods that will be used to build item objects.\r\n    calendar.queue = {\r\n        min: 'measure create',\r\n        max: 'measure create',\r\n        now: 'now create',\r\n        select: 'parse create validate',\r\n        highlight: 'parse navigate create validate',\r\n        view: 'parse create validate viewset',\r\n        disable: 'deactivate',\r\n        enable: 'activate'\r\n    }\r\n\r\n    // The component's item object.\r\n    calendar.item = {}\r\n\r\n    calendar.item.clear = null\r\n    calendar.item.disable = ( settings.disable || [] ).slice( 0 )\r\n    calendar.item.enable = -(function( collectionDisabled ) {\r\n        return collectionDisabled[ 0 ] === true ? collectionDisabled.shift() : -1\r\n    })( calendar.item.disable )\r\n\r\n    calendar.\r\n        set( 'min', settings.min ).\r\n        set( 'max', settings.max ).\r\n        set( 'now' )\r\n\r\n    // When theres a value, set the `select`, which in turn\r\n    // also sets the `highlight` and `view`.\r\n    if ( valueString ) {\r\n        calendar.set( 'select', valueString, {\r\n            format: formatString,\r\n            defaultValue: true\r\n        })\r\n    }\r\n\r\n    // If theres no value, default to highlighting today.\r\n    else {\r\n        calendar.\r\n            set( 'select', null ).\r\n            set( 'highlight', calendar.item.now )\r\n    }\r\n\r\n\r\n    // The keycode to movement mapping.\r\n    calendar.key = {\r\n        40: 7, // Down\r\n        38: -7, // Up\r\n        39: function() { return isRTL() ? -1 : 1 }, // Right\r\n        37: function() { return isRTL() ? 1 : -1 }, // Left\r\n        go: function( timeChange ) {\r\n            var highlightedObject = calendar.item.highlight,\r\n                targetDate = new Date( highlightedObject.year, highlightedObject.month, highlightedObject.date + timeChange )\r\n            calendar.set(\r\n                'highlight',\r\n                targetDate,\r\n                { interval: timeChange }\r\n            )\r\n            this.render()\r\n        }\r\n    }\r\n\r\n\r\n    // Bind some picker events.\r\n    picker.\r\n        on( 'render', function() {\r\n            picker.$root.find( '.' + settings.klass.selectMonth ).on( 'change', function() {\r\n                var value = this.value\r\n                if ( value ) {\r\n                    picker.set( 'highlight', [ picker.get( 'view' ).year, value, picker.get( 'highlight' ).date ] )\r\n                    picker.$root.find( '.' + settings.klass.selectMonth ).trigger( 'focus' )\r\n                }\r\n            })\r\n            picker.$root.find( '.' + settings.klass.selectYear ).on( 'change', function() {\r\n                var value = this.value\r\n                if ( value ) {\r\n                    picker.set( 'highlight', [ value, picker.get( 'view' ).month, picker.get( 'highlight' ).date ] )\r\n                    picker.$root.find( '.' + settings.klass.selectYear ).trigger( 'focus' )\r\n                }\r\n            })\r\n        }, 1 ).\r\n        on( 'open', function() {\r\n            var includeToday = ''\r\n            if ( calendar.disabled( calendar.get('now') ) ) {\r\n                includeToday = ':not(.' + settings.klass.buttonToday + ')'\r\n            }\r\n            picker.$root.find( 'button' + includeToday + ', select' ).attr( 'disabled', false )\r\n        }, 1 ).\r\n        on( 'close', function() {\r\n            picker.$root.find( 'button, select' ).attr( 'disabled', true )\r\n        }, 1 )\r\n\r\n} //DatePicker\r\n\r\n\r\n/**\r\n * Set a datepicker item object.\r\n */\r\nDatePicker.prototype.set = function( type, value, options ) {\r\n\r\n    var calendar = this,\r\n        calendarItem = calendar.item\r\n\r\n    // If the value is `null` just set it immediately.\r\n    if ( value === null ) {\r\n        if ( type == 'clear' ) type = 'select'\r\n        calendarItem[ type ] = value\r\n        return calendar\r\n    }\r\n\r\n    // Otherwise go through the queue of methods, and invoke the functions.\r\n    // Update this as the time unit, and set the final value as this item.\r\n    // * In the case of `enable`, keep the queue but set `disable` instead.\r\n    //   And in the case of `flip`, keep the queue but set `enable` instead.\r\n    calendarItem[ ( type == 'enable' ? 'disable' : type == 'flip' ? 'enable' : type ) ] = calendar.queue[ type ].split( ' ' ).map( function( method ) {\r\n        value = calendar[ method ]( type, value, options )\r\n        return value\r\n    }).pop()\r\n\r\n    // Check if we need to cascade through more updates.\r\n    if ( type == 'select' ) {\r\n        calendar.set( 'highlight', calendarItem.select, options )\r\n    }\r\n    else if ( type == 'highlight' ) {\r\n        calendar.set( 'view', calendarItem.highlight, options )\r\n    }\r\n    else if ( type.match( /^(flip|min|max|disable|enable)$/ ) ) {\r\n        if ( calendarItem.select && calendar.disabled( calendarItem.select ) ) {\r\n            calendar.set( 'select', calendarItem.select, options )\r\n        }\r\n        if ( calendarItem.highlight && calendar.disabled( calendarItem.highlight ) ) {\r\n            calendar.set( 'highlight', calendarItem.highlight, options )\r\n        }\r\n    }\r\n\r\n    return calendar\r\n} //DatePicker.prototype.set\r\n\r\n\r\n/**\r\n * Get a datepicker item object.\r\n */\r\nDatePicker.prototype.get = function( type ) {\r\n    return this.item[ type ]\r\n} //DatePicker.prototype.get\r\n\r\n\r\n/**\r\n * Create a picker date object.\r\n */\r\nDatePicker.prototype.create = function( type, value, options ) {\r\n\r\n    var isInfiniteValue,\r\n        calendar = this\r\n\r\n    // If theres no value, use the type as the value.\r\n    value = value === undefined ? type : value\r\n\r\n\r\n    // If its infinity, update the value.\r\n    if ( value == -Infinity || value == Infinity ) {\r\n        isInfiniteValue = value\r\n    }\r\n\r\n    // If its an object, use the native date object.\r\n    else if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {\r\n        value = value.obj\r\n    }\r\n\r\n    // If its an array, convert it into a date and make sure\r\n    // that its a valid date  otherwise default to today.\r\n    else if ( $.isArray( value ) ) {\r\n        value = new Date( value[ 0 ], value[ 1 ], value[ 2 ] )\r\n        value = _.isDate( value ) ? value : calendar.create().obj\r\n    }\r\n\r\n    // If its a number or date object, make a normalized date.\r\n    else if ( _.isInteger( value ) || _.isDate( value ) ) {\r\n        value = calendar.normalize( new Date( value ), options )\r\n    }\r\n\r\n    // If its a literal true or any other case, set it to now.\r\n    else /*if ( value === true )*/ {\r\n        value = calendar.now( type, value, options )\r\n    }\r\n\r\n    // Return the compiled object.\r\n    return {\r\n        year: isInfiniteValue || value.getFullYear(),\r\n        month: isInfiniteValue || value.getMonth(),\r\n        date: isInfiniteValue || value.getDate(),\r\n        day: isInfiniteValue || value.getDay(),\r\n        obj: isInfiniteValue || value,\r\n        pick: isInfiniteValue || value.getTime()\r\n    }\r\n} //DatePicker.prototype.create\r\n\r\n\r\n/**\r\n * Create a range limit object using an array, date object,\r\n * literal true, or integer relative to another time.\r\n */\r\nDatePicker.prototype.createRange = function( from, to ) {\r\n\r\n    var calendar = this,\r\n        createDate = function( date ) {\r\n            if ( date === true || $.isArray( date ) || _.isDate( date ) ) {\r\n                return calendar.create( date )\r\n            }\r\n            return date\r\n        }\r\n\r\n    // Create objects if possible.\r\n    if ( !_.isInteger( from ) ) {\r\n        from = createDate( from )\r\n    }\r\n    if ( !_.isInteger( to ) ) {\r\n        to = createDate( to )\r\n    }\r\n\r\n    // Create relative dates.\r\n    if ( _.isInteger( from ) && $.isPlainObject( to ) ) {\r\n        from = [ to.year, to.month, to.date + from ];\r\n    }\r\n    else if ( _.isInteger( to ) && $.isPlainObject( from ) ) {\r\n        to = [ from.year, from.month, from.date + to ];\r\n    }\r\n\r\n    return {\r\n        from: createDate( from ),\r\n        to: createDate( to )\r\n    }\r\n} //DatePicker.prototype.createRange\r\n\r\n\r\n/**\r\n * Check if a date unit falls within a date range object.\r\n */\r\nDatePicker.prototype.withinRange = function( range, dateUnit ) {\r\n    range = this.createRange(range.from, range.to)\r\n    return dateUnit.pick >= range.from.pick && dateUnit.pick <= range.to.pick\r\n}\r\n\r\n\r\n/**\r\n * Check if two date range objects overlap.\r\n */\r\nDatePicker.prototype.overlapRanges = function( one, two ) {\r\n\r\n    var calendar = this\r\n\r\n    // Convert the ranges into comparable dates.\r\n    one = calendar.createRange( one.from, one.to )\r\n    two = calendar.createRange( two.from, two.to )\r\n\r\n    return calendar.withinRange( one, two.from ) || calendar.withinRange( one, two.to ) ||\r\n        calendar.withinRange( two, one.from ) || calendar.withinRange( two, one.to )\r\n}\r\n\r\n\r\n/**\r\n * Get the date today.\r\n */\r\nDatePicker.prototype.now = function( type, value, options ) {\r\n    value = new Date()\r\n    if ( options && options.rel ) {\r\n        value.setDate( value.getDate() + options.rel )\r\n    }\r\n    return this.normalize( value, options )\r\n}\r\n\r\n\r\n/**\r\n * Navigate to next/prev month.\r\n */\r\nDatePicker.prototype.navigate = function( type, value, options ) {\r\n\r\n    var targetDateObject,\r\n        targetYear,\r\n        targetMonth,\r\n        targetDate,\r\n        isTargetArray = $.isArray( value ),\r\n        isTargetObject = $.isPlainObject( value ),\r\n        viewsetObject = this.item.view/*,\r\n        safety = 100*/\r\n\r\n\r\n    if ( isTargetArray || isTargetObject ) {\r\n\r\n        if ( isTargetObject ) {\r\n            targetYear = value.year\r\n            targetMonth = value.month\r\n            targetDate = value.date\r\n        }\r\n        else {\r\n            targetYear = +value[0]\r\n            targetMonth = +value[1]\r\n            targetDate = +value[2]\r\n        }\r\n\r\n        // If were navigating months but the view is in a different\r\n        // month, navigate to the views year and month.\r\n        if ( options && options.nav && viewsetObject && viewsetObject.month !== targetMonth ) {\r\n            targetYear = viewsetObject.year\r\n            targetMonth = viewsetObject.month\r\n        }\r\n\r\n        // Figure out the expected target year and month.\r\n        targetDateObject = new Date( targetYear, targetMonth + ( options && options.nav ? options.nav : 0 ), 1 )\r\n        targetYear = targetDateObject.getFullYear()\r\n        targetMonth = targetDateObject.getMonth()\r\n\r\n        // If the month were going to doesnt have enough days,\r\n        // keep decreasing the date until we reach the months last date.\r\n        while ( /*safety &&*/ new Date( targetYear, targetMonth, targetDate ).getMonth() !== targetMonth ) {\r\n            targetDate -= 1\r\n            /*safety -= 1\r\n            if ( !safety ) {\r\n                throw 'Fell into an infinite loop while navigating to ' + new Date( targetYear, targetMonth, targetDate ) + '.'\r\n            }*/\r\n        }\r\n\r\n        value = [ targetYear, targetMonth, targetDate ]\r\n    }\r\n\r\n    return value\r\n} //DatePicker.prototype.navigate\r\n\r\n\r\n/**\r\n * Normalize a date by setting the hours to midnight.\r\n */\r\nDatePicker.prototype.normalize = function( value/*, options*/ ) {\r\n    value.setHours( 0, 0, 0, 0 )\r\n    return value\r\n}\r\n\r\n\r\n/**\r\n * Measure the range of dates.\r\n */\r\nDatePicker.prototype.measure = function( type, value/*, options*/ ) {\r\n\r\n    var calendar = this\r\n\r\n    // If its anything false-y, remove the limits.\r\n    if ( !value ) {\r\n        value = type == 'min' ? -Infinity : Infinity\r\n    }\r\n\r\n    // If its a string, parse it.\r\n    else if ( typeof value == 'string' ) {\r\n        value = calendar.parse( type, value )\r\n    }\r\n\r\n    // If it's an integer, get a date relative to today.\r\n    else if ( _.isInteger( value ) ) {\r\n        value = calendar.now( type, value, { rel: value } )\r\n    }\r\n\r\n    return value\r\n} ///DatePicker.prototype.measure\r\n\r\n\r\n/**\r\n * Create a viewset object based on navigation.\r\n */\r\nDatePicker.prototype.viewset = function( type, dateObject/*, options*/ ) {\r\n    return this.create([ dateObject.year, dateObject.month, 1 ])\r\n}\r\n\r\n\r\n/**\r\n * Validate a date as enabled and shift if needed.\r\n */\r\nDatePicker.prototype.validate = function( type, dateObject, options ) {\r\n\r\n    var calendar = this,\r\n\r\n        // Keep a reference to the original date.\r\n        originalDateObject = dateObject,\r\n\r\n        // Make sure we have an interval.\r\n        interval = options && options.interval ? options.interval : 1,\r\n\r\n        // Check if the calendar enabled dates are inverted.\r\n        isFlippedBase = calendar.item.enable === -1,\r\n\r\n        // Check if we have any enabled dates after/before now.\r\n        hasEnabledBeforeTarget, hasEnabledAfterTarget,\r\n\r\n        // The min & max limits.\r\n        minLimitObject = calendar.item.min,\r\n        maxLimitObject = calendar.item.max,\r\n\r\n        // Check if weve reached the limit during shifting.\r\n        reachedMin, reachedMax,\r\n\r\n        // Check if the calendar is inverted and at least one weekday is enabled.\r\n        hasEnabledWeekdays = isFlippedBase && calendar.item.disable.filter( function( value ) {\r\n\r\n            // If theres a date, check where it is relative to the target.\r\n            if ( $.isArray( value ) ) {\r\n                var dateTime = calendar.create( value ).pick\r\n                if ( dateTime < dateObject.pick ) hasEnabledBeforeTarget = true\r\n                else if ( dateTime > dateObject.pick ) hasEnabledAfterTarget = true\r\n            }\r\n\r\n            // Return only integers for enabled weekdays.\r\n            return _.isInteger( value )\r\n        }).length/*,\r\n\r\n        safety = 100*/\r\n\r\n\r\n\r\n    // Cases to validate for:\r\n    // [1] Not inverted and date disabled.\r\n    // [2] Inverted and some dates enabled.\r\n    // [3] Not inverted and out of range.\r\n    //\r\n    // Cases to **not** validate for:\r\n    //  Navigating months.\r\n    //  Not inverted and date enabled.\r\n    //  Inverted and all dates disabled.\r\n    //  ..and anything else.\r\n    if ( !options || (!options.nav && !options.defaultValue) ) if (\r\n        /* 1 */ ( !isFlippedBase && calendar.disabled( dateObject ) ) ||\r\n        /* 2 */ ( isFlippedBase && calendar.disabled( dateObject ) && ( hasEnabledWeekdays || hasEnabledBeforeTarget || hasEnabledAfterTarget ) ) ||\r\n        /* 3 */ ( !isFlippedBase && (dateObject.pick <= minLimitObject.pick || dateObject.pick >= maxLimitObject.pick) )\r\n    ) {\r\n\r\n\r\n        // When inverted, flip the direction if there arent any enabled weekdays\r\n        // and there are no enabled dates in the direction of the interval.\r\n        if ( isFlippedBase && !hasEnabledWeekdays && ( ( !hasEnabledAfterTarget && interval > 0 ) || ( !hasEnabledBeforeTarget && interval < 0 ) ) ) {\r\n            interval *= -1\r\n        }\r\n\r\n\r\n        // Keep looping until we reach an enabled date.\r\n        while ( /*safety &&*/ calendar.disabled( dateObject ) ) {\r\n\r\n            /*safety -= 1\r\n            if ( !safety ) {\r\n                throw 'Fell into an infinite loop while validating ' + dateObject.obj + '.'\r\n            }*/\r\n\r\n\r\n            // If weve looped into the next/prev month with a large interval, return to the original date and flatten the interval.\r\n            if ( Math.abs( interval ) > 1 && ( dateObject.month < originalDateObject.month || dateObject.month > originalDateObject.month ) ) {\r\n                dateObject = originalDateObject\r\n                interval = interval > 0 ? 1 : -1\r\n            }\r\n\r\n\r\n            // If weve reached the min/max limit, reverse the direction, flatten the interval and set it to the limit.\r\n            if ( dateObject.pick <= minLimitObject.pick ) {\r\n                reachedMin = true\r\n                interval = 1\r\n                dateObject = calendar.create([\r\n                    minLimitObject.year,\r\n                    minLimitObject.month,\r\n                    minLimitObject.date + (dateObject.pick === minLimitObject.pick ? 0 : -1)\r\n                ])\r\n            }\r\n            else if ( dateObject.pick >= maxLimitObject.pick ) {\r\n                reachedMax = true\r\n                interval = -1\r\n                dateObject = calendar.create([\r\n                    maxLimitObject.year,\r\n                    maxLimitObject.month,\r\n                    maxLimitObject.date + (dateObject.pick === maxLimitObject.pick ? 0 : 1)\r\n                ])\r\n            }\r\n\r\n\r\n            // If weve reached both limits, just break out of the loop.\r\n            if ( reachedMin && reachedMax ) {\r\n                break\r\n            }\r\n\r\n\r\n            // Finally, create the shifted date using the interval and keep looping.\r\n            dateObject = calendar.create([ dateObject.year, dateObject.month, dateObject.date + interval ])\r\n        }\r\n\r\n    } //endif\r\n\r\n\r\n    // Return the date object settled on.\r\n    return dateObject\r\n} //DatePicker.prototype.validate\r\n\r\n\r\n/**\r\n * Check if a date is disabled.\r\n */\r\nDatePicker.prototype.disabled = function( dateToVerify ) {\r\n\r\n    var\r\n        calendar = this,\r\n\r\n        // Filter through the disabled dates to check if this is one.\r\n        isDisabledMatch = calendar.item.disable.filter( function( dateToDisable ) {\r\n\r\n            // If the date is a number, match the weekday with 0index and `firstDay` check.\r\n            if ( _.isInteger( dateToDisable ) ) {\r\n                return dateToVerify.day === ( calendar.settings.firstDay ? dateToDisable : dateToDisable - 1 ) % 7\r\n            }\r\n\r\n            // If its an array or a native JS date, create and match the exact date.\r\n            if ( $.isArray( dateToDisable ) || _.isDate( dateToDisable ) ) {\r\n                return dateToVerify.pick === calendar.create( dateToDisable ).pick\r\n            }\r\n\r\n            // If its an object, match a date within the from and to range.\r\n            if ( $.isPlainObject( dateToDisable ) ) {\r\n                return calendar.withinRange( dateToDisable, dateToVerify )\r\n            }\r\n        })\r\n\r\n    // If this date matches a disabled date, confirm its not inverted.\r\n    isDisabledMatch = isDisabledMatch.length && !isDisabledMatch.filter(function( dateToDisable ) {\r\n        return $.isArray( dateToDisable ) && dateToDisable[3] == 'inverted' ||\r\n            $.isPlainObject( dateToDisable ) && dateToDisable.inverted\r\n    }).length\r\n\r\n    // Check the calendar enabled flag and respectively flip the\r\n    // disabled state. Then also check if its beyond the min/max limits.\r\n    return calendar.item.enable === -1 ? !isDisabledMatch : isDisabledMatch ||\r\n        dateToVerify.pick < calendar.item.min.pick ||\r\n        dateToVerify.pick > calendar.item.max.pick\r\n\r\n} //DatePicker.prototype.disabled\r\n\r\n\r\n/**\r\n * Parse a string into a usable type.\r\n */\r\nDatePicker.prototype.parse = function( type, value, options ) {\r\n\r\n    var calendar = this,\r\n        parsingObject = {}\r\n\r\n    // If its already parsed, were good.\r\n    if ( !value || typeof value != 'string' ) {\r\n        return value\r\n    }\r\n\r\n    // We need a `.format` to parse the value with.\r\n    if ( !( options && options.format ) ) {\r\n        options = options || {}\r\n        options.format = calendar.settings.format\r\n    }\r\n\r\n    // Convert the format into an array and then map through it.\r\n    calendar.formats.toArray( options.format ).map( function( label ) {\r\n\r\n        var\r\n            // Grab the formatting label.\r\n            formattingLabel = calendar.formats[ label ],\r\n\r\n            // The format length is from the formatting label function or the\r\n            // label length without the escaping exclamation (!) mark.\r\n            formatLength = formattingLabel ? _.trigger( formattingLabel, calendar, [ value, parsingObject ] ) : label.replace( /^!/, '' ).length\r\n\r\n        // If there's a format label, split the value up to the format length.\r\n        // Then add it to the parsing object with appropriate label.\r\n        if ( formattingLabel ) {\r\n            parsingObject[ label ] = value.substr( 0, formatLength )\r\n        }\r\n\r\n        // Update the value as the substring from format length to end.\r\n        value = value.substr( formatLength )\r\n    })\r\n\r\n    // Compensate for month 0index.\r\n    return [\r\n        parsingObject.yyyy || parsingObject.yy,\r\n        +( parsingObject.mm || parsingObject.m ) - 1,\r\n        parsingObject.dd || parsingObject.d\r\n    ]\r\n} //DatePicker.prototype.parse\r\n\r\n\r\n/**\r\n * Various formats to display the object in.\r\n */\r\nDatePicker.prototype.formats = (function() {\r\n\r\n    // Return the length of the first word in a collection.\r\n    function getWordLengthFromCollection( string, collection, dateObject ) {\r\n\r\n        // Grab the first word from the string.\r\n        // Regex pattern from http://stackoverflow.com/q/150033\r\n        var word = string.match( /[^\\x00-\\x7F]+|\\w+/ )[ 0 ]\r\n\r\n        // If there's no month index, add it to the date object\r\n        if ( !dateObject.mm && !dateObject.m ) {\r\n            dateObject.m = collection.indexOf( word ) + 1\r\n        }\r\n\r\n        // Return the length of the word.\r\n        return word.length\r\n    }\r\n\r\n    // Get the length of the first word in a string.\r\n    function getFirstWordLength( string ) {\r\n        return string.match( /\\w+/ )[ 0 ].length\r\n    }\r\n\r\n    return {\r\n\r\n        d: function( string, dateObject ) {\r\n\r\n            // If there's string, then get the digits length.\r\n            // Otherwise return the selected date.\r\n            return string ? _.digits( string ) : dateObject.date\r\n        },\r\n        dd: function( string, dateObject ) {\r\n\r\n            // If there's a string, then the length is always 2.\r\n            // Otherwise return the selected date with a leading zero.\r\n            return string ? 2 : _.lead( dateObject.date )\r\n        },\r\n        ddd: function( string, dateObject ) {\r\n\r\n            // If there's a string, then get the length of the first word.\r\n            // Otherwise return the short selected weekday.\r\n            return string ? getFirstWordLength( string ) : this.settings.weekdaysShort[ dateObject.day ]\r\n        },\r\n        dddd: function( string, dateObject ) {\r\n\r\n            // If there's a string, then get the length of the first word.\r\n            // Otherwise return the full selected weekday.\r\n            return string ? getFirstWordLength( string ) : this.settings.weekdaysFull[ dateObject.day ]\r\n        },\r\n        m: function( string, dateObject ) {\r\n\r\n            // If there's a string, then get the length of the digits\r\n            // Otherwise return the selected month with 0index compensation.\r\n            return string ? _.digits( string ) : dateObject.month + 1\r\n        },\r\n        mm: function( string, dateObject ) {\r\n\r\n            // If there's a string, then the length is always 2.\r\n            // Otherwise return the selected month with 0index and leading zero.\r\n            return string ? 2 : _.lead( dateObject.month + 1 )\r\n        },\r\n        mmm: function( string, dateObject ) {\r\n\r\n            var collection = this.settings.monthsShort\r\n\r\n            // If there's a string, get length of the relevant month from the short\r\n            // months collection. Otherwise return the selected month from that collection.\r\n            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]\r\n        },\r\n        mmmm: function( string, dateObject ) {\r\n\r\n            var collection = this.settings.monthsFull\r\n\r\n            // If there's a string, get length of the relevant month from the full\r\n            // months collection. Otherwise return the selected month from that collection.\r\n            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]\r\n        },\r\n        yy: function( string, dateObject ) {\r\n\r\n            // If there's a string, then the length is always 2.\r\n            // Otherwise return the selected year by slicing out the first 2 digits.\r\n            return string ? 2 : ( '' + dateObject.year ).slice( 2 )\r\n        },\r\n        yyyy: function( string, dateObject ) {\r\n\r\n            // If there's a string, then the length is always 4.\r\n            // Otherwise return the selected year.\r\n            return string ? 4 : dateObject.year\r\n        },\r\n\r\n        // Create an array by splitting the formatting string passed.\r\n        toArray: function( formatString ) { return formatString.split( /(d{1,4}|m{1,4}|y{4}|yy|!.)/g ) },\r\n\r\n        // Format an object into a string using the formatting options.\r\n        toString: function ( formatString, itemObject ) {\r\n            var calendar = this\r\n            return calendar.formats.toArray( formatString ).map( function( label ) {\r\n                return _.trigger( calendar.formats[ label ], calendar, [ 0, itemObject ] ) || label.replace( /^!/, '' )\r\n            }).join( '' )\r\n        }\r\n    }\r\n})() //DatePicker.prototype.formats\r\n\r\n\r\n\r\n\r\n/**\r\n * Check if two date units are the exact.\r\n */\r\nDatePicker.prototype.isDateExact = function( one, two ) {\r\n\r\n    var calendar = this\r\n\r\n    // When were working with weekdays, do a direct comparison.\r\n    if (\r\n        ( _.isInteger( one ) && _.isInteger( two ) ) ||\r\n        ( typeof one == 'boolean' && typeof two == 'boolean' )\r\n     ) {\r\n        return one === two\r\n    }\r\n\r\n    // When were working with date representations, compare the pick value.\r\n    if (\r\n        ( _.isDate( one ) || $.isArray( one ) ) &&\r\n        ( _.isDate( two ) || $.isArray( two ) )\r\n    ) {\r\n        return calendar.create( one ).pick === calendar.create( two ).pick\r\n    }\r\n\r\n    // When were working with range objects, compare the from and to.\r\n    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {\r\n        return calendar.isDateExact( one.from, two.from ) && calendar.isDateExact( one.to, two.to )\r\n    }\r\n\r\n    return false\r\n}\r\n\r\n\r\n/**\r\n * Check if two date units overlap.\r\n */\r\nDatePicker.prototype.isDateOverlap = function( one, two ) {\r\n\r\n    var calendar = this,\r\n        firstDay = calendar.settings.firstDay ? 1 : 0\r\n\r\n    // When were working with a weekday index, compare the days.\r\n    if ( _.isInteger( one ) && ( _.isDate( two ) || $.isArray( two ) ) ) {\r\n        one = one % 7 + firstDay\r\n        return one === calendar.create( two ).day + 1\r\n    }\r\n    if ( _.isInteger( two ) && ( _.isDate( one ) || $.isArray( one ) ) ) {\r\n        two = two % 7 + firstDay\r\n        return two === calendar.create( one ).day + 1\r\n    }\r\n\r\n    // When were working with range objects, check if the ranges overlap.\r\n    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {\r\n        return calendar.overlapRanges( one, two )\r\n    }\r\n\r\n    return false\r\n}\r\n\r\n\r\n/**\r\n * Flip the enabled state.\r\n */\r\nDatePicker.prototype.flipEnable = function(val) {\r\n    var itemObject = this.item\r\n    itemObject.enable = val || (itemObject.enable == -1 ? 1 : -1)\r\n}\r\n\r\n\r\n/**\r\n * Mark a collection of dates as disabled.\r\n */\r\nDatePicker.prototype.deactivate = function( type, datesToDisable ) {\r\n\r\n    var calendar = this,\r\n        disabledItems = calendar.item.disable.slice(0)\r\n\r\n\r\n    // If were flipping, thats all we need to do.\r\n    if ( datesToDisable == 'flip' ) {\r\n        calendar.flipEnable()\r\n    }\r\n\r\n    else if ( datesToDisable === false ) {\r\n        calendar.flipEnable(1)\r\n        disabledItems = []\r\n    }\r\n\r\n    else if ( datesToDisable === true ) {\r\n        calendar.flipEnable(-1)\r\n        disabledItems = []\r\n    }\r\n\r\n    // Otherwise go through the dates to disable.\r\n    else {\r\n\r\n        datesToDisable.map(function( unitToDisable ) {\r\n\r\n            var matchFound\r\n\r\n            // When we have disabled items, check for matches.\r\n            // If something is matched, immediately break out.\r\n            for ( var index = 0; index < disabledItems.length; index += 1 ) {\r\n                if ( calendar.isDateExact( unitToDisable, disabledItems[index] ) ) {\r\n                    matchFound = true\r\n                    break\r\n                }\r\n            }\r\n\r\n            // If nothing was found, add the validated unit to the collection.\r\n            if ( !matchFound ) {\r\n                if (\r\n                    _.isInteger( unitToDisable ) ||\r\n                    _.isDate( unitToDisable ) ||\r\n                    $.isArray( unitToDisable ) ||\r\n                    ( $.isPlainObject( unitToDisable ) && unitToDisable.from && unitToDisable.to )\r\n                ) {\r\n                    disabledItems.push( unitToDisable )\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    // Return the updated collection.\r\n    return disabledItems\r\n} //DatePicker.prototype.deactivate\r\n\r\n\r\n/**\r\n * Mark a collection of dates as enabled.\r\n */\r\nDatePicker.prototype.activate = function( type, datesToEnable ) {\r\n\r\n    var calendar = this,\r\n        disabledItems = calendar.item.disable,\r\n        disabledItemsCount = disabledItems.length\r\n\r\n    // If were flipping, thats all we need to do.\r\n    if ( datesToEnable == 'flip' ) {\r\n        calendar.flipEnable()\r\n    }\r\n\r\n    else if ( datesToEnable === true ) {\r\n        calendar.flipEnable(1)\r\n        disabledItems = []\r\n    }\r\n\r\n    else if ( datesToEnable === false ) {\r\n        calendar.flipEnable(-1)\r\n        disabledItems = []\r\n    }\r\n\r\n    // Otherwise go through the disabled dates.\r\n    else {\r\n\r\n        datesToEnable.map(function( unitToEnable ) {\r\n\r\n            var matchFound,\r\n                disabledUnit,\r\n                index,\r\n                isExactRange\r\n\r\n            // Go through the disabled items and try to find a match.\r\n            for ( index = 0; index < disabledItemsCount; index += 1 ) {\r\n\r\n                disabledUnit = disabledItems[index]\r\n\r\n                // When an exact match is found, remove it from the collection.\r\n                if ( calendar.isDateExact( disabledUnit, unitToEnable ) ) {\r\n                    matchFound = disabledItems[index] = null\r\n                    isExactRange = true\r\n                    break\r\n                }\r\n\r\n                // When an overlapped match is found, add the inverted state to it.\r\n                else if ( calendar.isDateOverlap( disabledUnit, unitToEnable ) ) {\r\n                    if ( $.isPlainObject( unitToEnable ) ) {\r\n                        unitToEnable.inverted = true\r\n                        matchFound = unitToEnable\r\n                    }\r\n                    else if ( $.isArray( unitToEnable ) ) {\r\n                        matchFound = unitToEnable\r\n                        if ( !matchFound[3] ) matchFound.push( 'inverted' )\r\n                    }\r\n                    else if ( _.isDate( unitToEnable ) ) {\r\n                        matchFound = [ unitToEnable.getFullYear(), unitToEnable.getMonth(), unitToEnable.getDate(), 'inverted' ]\r\n                    }\r\n                    break\r\n                }\r\n            }\r\n\r\n            // If a match was found, remove a previous duplicate entry.\r\n            if ( matchFound ) for ( index = 0; index < disabledItemsCount; index += 1 ) {\r\n                if ( calendar.isDateExact( disabledItems[index], unitToEnable ) ) {\r\n                    disabledItems[index] = null\r\n                    break\r\n                }\r\n            }\r\n\r\n            // In the event that were dealing with an exact range of dates,\r\n            // make sure there are no inverted dates because of it.\r\n            if ( isExactRange ) for ( index = 0; index < disabledItemsCount; index += 1 ) {\r\n                if ( calendar.isDateOverlap( disabledItems[index], unitToEnable ) ) {\r\n                    disabledItems[index] = null\r\n                    break\r\n                }\r\n            }\r\n\r\n            // If something is still matched, add it into the collection.\r\n            if ( matchFound ) {\r\n                disabledItems.push( matchFound )\r\n            }\r\n        })\r\n    }\r\n\r\n    // Return the updated collection.\r\n    return disabledItems.filter(function( val ) { return val != null })\r\n} //DatePicker.prototype.activate\r\n\r\n\r\n/**\r\n * Create a string for the nodes in the picker.\r\n */\r\nDatePicker.prototype.nodes = function( isOpen ) {\r\n\r\n    var\r\n        calendar = this,\r\n        settings = calendar.settings,\r\n        calendarItem = calendar.item,\r\n        nowObject = calendarItem.now,\r\n        selectedObject = calendarItem.select,\r\n        highlightedObject = calendarItem.highlight,\r\n        viewsetObject = calendarItem.view,\r\n        disabledCollection = calendarItem.disable,\r\n        minLimitObject = calendarItem.min,\r\n        maxLimitObject = calendarItem.max,\r\n\r\n\r\n        // Create the calendar table head using a copy of weekday labels collection.\r\n        // * We do a copy so we don't mutate the original array.\r\n        tableHead = (function( collection, fullCollection ) {\r\n\r\n            // If the first day should be Monday, move Sunday to the end.\r\n            if ( settings.firstDay ) {\r\n                collection.push( collection.shift() )\r\n                fullCollection.push( fullCollection.shift() )\r\n            }\r\n\r\n            // Create and return the table head group.\r\n            return _.node(\r\n                'thead',\r\n                _.node(\r\n                    'tr',\r\n                    _.group({\r\n                        min: 0,\r\n                        max: DAYS_IN_WEEK - 1,\r\n                        i: 1,\r\n                        node: 'th',\r\n                        item: function( counter ) {\r\n                            return [\r\n                                collection[ counter ],\r\n                                settings.klass.weekdays,\r\n                                'scope=col title=\"' + fullCollection[ counter ] + '\"'\r\n                            ]\r\n                        }\r\n                    })\r\n                )\r\n            ) //endreturn\r\n        })( ( settings.showWeekdaysFull ? settings.weekdaysFull : settings.weekdaysShort ).slice( 0 ), settings.weekdaysFull.slice( 0 ) ), //tableHead\r\n\r\n\r\n        // Create the nav for next/prev month.\r\n        createMonthNav = function( next ) {\r\n\r\n            // Otherwise, return the created month tag.\r\n            return _.node(\r\n                'div',\r\n                ' ',\r\n                settings.klass[ 'nav' + ( next ? 'Next' : 'Prev' ) ] + (\r\n\r\n                    // If the focused month is outside the range, disabled the button.\r\n                    ( next && viewsetObject.year >= maxLimitObject.year && viewsetObject.month >= maxLimitObject.month ) ||\r\n                    ( !next && viewsetObject.year <= minLimitObject.year && viewsetObject.month <= minLimitObject.month ) ?\r\n                    ' ' + settings.klass.navDisabled : ''\r\n                ),\r\n                'data-nav=' + ( next || -1 ) + ' ' +\r\n                _.ariaAttr({\r\n                    role: 'button',\r\n                    controls: calendar.$node[0].id + '_table'\r\n                }) + ' ' +\r\n                'title=\"' + (next ? settings.labelMonthNext : settings.labelMonthPrev ) + '\"'\r\n            ) //endreturn\r\n        }, //createMonthNav\r\n\r\n\r\n        // Create the month label.\r\n        createMonthLabel = function() {\r\n\r\n            var monthsCollection = settings.showMonthsShort ? settings.monthsShort : settings.monthsFull\r\n\r\n            // If there are months to select, add a dropdown menu.\r\n            if ( settings.selectMonths ) {\r\n\r\n                return _.node( 'select',\r\n                    _.group({\r\n                        min: 0,\r\n                        max: 11,\r\n                        i: 1,\r\n                        node: 'option',\r\n                        item: function( loopedMonth ) {\r\n\r\n                            return [\r\n\r\n                                // The looped month and no classes.\r\n                                monthsCollection[ loopedMonth ], 0,\r\n\r\n                                // Set the value and selected index.\r\n                                'value=' + loopedMonth +\r\n                                ( viewsetObject.month == loopedMonth ? ' selected' : '' ) +\r\n                                (\r\n                                    (\r\n                                        ( viewsetObject.year == minLimitObject.year && loopedMonth < minLimitObject.month ) ||\r\n                                        ( viewsetObject.year == maxLimitObject.year && loopedMonth > maxLimitObject.month )\r\n                                    ) ?\r\n                                    ' disabled' : ''\r\n                                )\r\n                            ]\r\n                        }\r\n                    }),\r\n                    settings.klass.selectMonth,\r\n                    ( isOpen ? '' : 'disabled' ) + ' ' +\r\n                    _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +\r\n                    'title=\"' + settings.labelMonthSelect + '\"'\r\n                )\r\n            }\r\n\r\n            // If there's a need for a month selector\r\n            return _.node( 'div', monthsCollection[ viewsetObject.month ], settings.klass.month )\r\n        }, //createMonthLabel\r\n\r\n\r\n        // Create the year label.\r\n        createYearLabel = function() {\r\n\r\n            var focusedYear = viewsetObject.year,\r\n\r\n            // If years selector is set to a literal \"true\", set it to 5. Otherwise\r\n            // divide in half to get half before and half after focused year.\r\n            numberYears = settings.selectYears === true ? 5 : ~~( settings.selectYears / 2 )\r\n\r\n            // If there are years to select, add a dropdown menu.\r\n            if ( numberYears ) {\r\n\r\n                var\r\n                    minYear = minLimitObject.year,\r\n                    maxYear = maxLimitObject.year,\r\n                    lowestYear = focusedYear - numberYears,\r\n                    highestYear = focusedYear + numberYears\r\n\r\n                // If the min year is greater than the lowest year, increase the highest year\r\n                // by the difference and set the lowest year to the min year.\r\n                if ( minYear > lowestYear ) {\r\n                    highestYear += minYear - lowestYear\r\n                    lowestYear = minYear\r\n                }\r\n\r\n                // If the max year is less than the highest year, decrease the lowest year\r\n                // by the lower of the two: available and needed years. Then set the\r\n                // highest year to the max year.\r\n                if ( maxYear < highestYear ) {\r\n\r\n                    var availableYears = lowestYear - minYear,\r\n                        neededYears = highestYear - maxYear\r\n\r\n                    lowestYear -= availableYears > neededYears ? neededYears : availableYears\r\n                    highestYear = maxYear\r\n                }\r\n\r\n                return _.node( 'select',\r\n                    _.group({\r\n                        min: lowestYear,\r\n                        max: highestYear,\r\n                        i: 1,\r\n                        node: 'option',\r\n                        item: function( loopedYear ) {\r\n                            return [\r\n\r\n                                // The looped year and no classes.\r\n                                loopedYear, 0,\r\n\r\n                                // Set the value and selected index.\r\n                                'value=' + loopedYear + ( focusedYear == loopedYear ? ' selected' : '' )\r\n                            ]\r\n                        }\r\n                    }),\r\n                    settings.klass.selectYear,\r\n                    ( isOpen ? '' : 'disabled' ) + ' ' + _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +\r\n                    'title=\"' + settings.labelYearSelect + '\"'\r\n                )\r\n            }\r\n\r\n            // Otherwise just return the year focused\r\n            return _.node( 'div', focusedYear, settings.klass.year )\r\n        } //createYearLabel\r\n\r\n\r\n    // Create and return the entire calendar.\r\n    return _.node(\r\n        'div',\r\n        ( settings.selectYears ? createYearLabel() + createMonthLabel() : createMonthLabel() + createYearLabel() ) +\r\n        createMonthNav() + createMonthNav( 1 ),\r\n        settings.klass.header\r\n    ) + _.node(\r\n        'table',\r\n        tableHead +\r\n        _.node(\r\n            'tbody',\r\n            _.group({\r\n                min: 0,\r\n                max: WEEKS_IN_CALENDAR - 1,\r\n                i: 1,\r\n                node: 'tr',\r\n                item: function( rowCounter ) {\r\n\r\n                    // If Monday is the first day and the month starts on Sunday, shift the date back a week.\r\n                    var shiftDateBy = settings.firstDay && calendar.create([ viewsetObject.year, viewsetObject.month, 1 ]).day === 0 ? -7 : 0\r\n\r\n                    return [\r\n                        _.group({\r\n                            min: DAYS_IN_WEEK * rowCounter - viewsetObject.day + shiftDateBy + 1, // Add 1 for weekday 0index\r\n                            max: function() {\r\n                                return this.min + DAYS_IN_WEEK - 1\r\n                            },\r\n                            i: 1,\r\n                            node: 'td',\r\n                            item: function( targetDate ) {\r\n\r\n                                // Convert the time date from a relative date to a target date.\r\n                                targetDate = calendar.create([ viewsetObject.year, viewsetObject.month, targetDate + ( settings.firstDay ? 1 : 0 ) ])\r\n\r\n                                var isSelected = selectedObject && selectedObject.pick == targetDate.pick,\r\n                                    isHighlighted = highlightedObject && highlightedObject.pick == targetDate.pick,\r\n                                    isDisabled = disabledCollection && calendar.disabled( targetDate ) || targetDate.pick < minLimitObject.pick || targetDate.pick > maxLimitObject.pick,\r\n                                    formattedDate = _.trigger( calendar.formats.toString, calendar, [ settings.format, targetDate ] )\r\n\r\n                                return [\r\n                                    _.node(\r\n                                        'div',\r\n                                        targetDate.date,\r\n                                        (function( klasses ) {\r\n\r\n                                            // Add the `infocus` or `outfocus` classes based on month in view.\r\n                                            klasses.push( viewsetObject.month == targetDate.month ? settings.klass.infocus : settings.klass.outfocus )\r\n\r\n                                            // Add the `today` class if needed.\r\n                                            if ( nowObject.pick == targetDate.pick ) {\r\n                                                klasses.push( settings.klass.now )\r\n                                            }\r\n\r\n                                            // Add the `selected` class if something's selected and the time matches.\r\n                                            if ( isSelected ) {\r\n                                                klasses.push( settings.klass.selected )\r\n                                            }\r\n\r\n                                            // Add the `highlighted` class if something's highlighted and the time matches.\r\n                                            if ( isHighlighted ) {\r\n                                                klasses.push( settings.klass.highlighted )\r\n                                            }\r\n\r\n                                            // Add the `disabled` class if something's disabled and the object matches.\r\n                                            if ( isDisabled ) {\r\n                                                klasses.push( settings.klass.disabled )\r\n                                            }\r\n\r\n                                            return klasses.join( ' ' )\r\n                                        })([ settings.klass.day ]),\r\n                                        'data-pick=' + targetDate.pick + ' ' + _.ariaAttr({\r\n                                            role: 'gridcell',\r\n                                            label: formattedDate,\r\n                                            selected: isSelected && calendar.$node.val() === formattedDate ? true : null,\r\n                                            activedescendant: isHighlighted ? true : null,\r\n                                            disabled: isDisabled ? true : null\r\n                                        })\r\n                                    ),\r\n                                    '',\r\n                                    _.ariaAttr({ role: 'presentation' })\r\n                                ] //endreturn\r\n                            }\r\n                        })\r\n                    ] //endreturn\r\n                }\r\n            })\r\n        ),\r\n        settings.klass.table,\r\n        'id=\"' + calendar.$node[0].id + '_table' + '\" ' + _.ariaAttr({\r\n            role: 'grid',\r\n            controls: calendar.$node[0].id,\r\n            readonly: true\r\n        })\r\n    ) +\r\n\r\n    // * For Firefox forms to submit, make sure to set the buttons `type` attributes as button.\r\n    _.node(\r\n        'div',\r\n        _.node( 'button', settings.today, settings.klass.buttonToday,\r\n            'type=button data-pick=' + nowObject.pick +\r\n            ( isOpen && !calendar.disabled(nowObject) ? '' : ' disabled' ) + ' ' +\r\n            _.ariaAttr({ controls: calendar.$node[0].id }) ) +\r\n        _.node( 'button', settings.clear, settings.klass.buttonClear,\r\n            'type=button data-clear=1' +\r\n            ( isOpen ? '' : ' disabled' ) + ' ' +\r\n            _.ariaAttr({ controls: calendar.$node[0].id }) ) +\r\n        _.node('button', settings.close, settings.klass.buttonClose,\r\n            'type=button data-close=true ' +\r\n            ( isOpen ? '' : ' disabled' ) + ' ' +\r\n            _.ariaAttr({ controls: calendar.$node[0].id }) ),\r\n        settings.klass.footer\r\n    ) //endreturn\r\n} //DatePicker.prototype.nodes\r\n\r\n\r\n\r\n\r\n/**\r\n * The date picker defaults.\r\n */\r\nDatePicker.defaults = (function( prefix ) {\r\n\r\n    return {\r\n\r\n        // The title label to use for the month nav buttons\r\n        labelMonthNext: 'Next month',\r\n        labelMonthPrev: 'Previous month',\r\n\r\n        // The title label to use for the dropdown selectors\r\n        labelMonthSelect: 'Select a month',\r\n        labelYearSelect: 'Select a year',\r\n\r\n        // Months and weekdays\r\n        monthsFull: [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ],\r\n        monthsShort: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],\r\n        weekdaysFull: [ 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday' ],\r\n        weekdaysShort: [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],\r\n\r\n        // Today and clear\r\n        today: 'Today',\r\n        clear: 'Clear',\r\n        close: 'Close',\r\n\r\n        // Picker close behavior\r\n        closeOnSelect: true,\r\n        closeOnClear: true,\r\n\r\n        // The format to show on the `input` element\r\n        format: 'd mmmm, yyyy',\r\n\r\n        // Classes\r\n        klass: {\r\n\r\n            table: prefix + 'table',\r\n\r\n            header: prefix + 'header',\r\n\r\n            navPrev: prefix + 'nav--prev',\r\n            navNext: prefix + 'nav--next',\r\n            navDisabled: prefix + 'nav--disabled',\r\n\r\n            month: prefix + 'month',\r\n            year: prefix + 'year',\r\n\r\n            selectMonth: prefix + 'select--month',\r\n            selectYear: prefix + 'select--year',\r\n\r\n            weekdays: prefix + 'weekday',\r\n\r\n            day: prefix + 'day',\r\n            disabled: prefix + 'day--disabled',\r\n            selected: prefix + 'day--selected',\r\n            highlighted: prefix + 'day--highlighted',\r\n            now: prefix + 'day--today',\r\n            infocus: prefix + 'day--infocus',\r\n            outfocus: prefix + 'day--outfocus',\r\n\r\n            footer: prefix + 'footer',\r\n\r\n            buttonClear: prefix + 'button--clear',\r\n            buttonToday: prefix + 'button--today',\r\n            buttonClose: prefix + 'button--close'\r\n        }\r\n    }\r\n})( Picker.klasses().picker + '__' )\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Extend the picker to add the date picker.\r\n */\r\nPicker.extend( 'pickadate', DatePicker )\r\n\r\n\r\n}));\r\n\r\n\r\n\r\n/*!\r\n * Time picker for pickadate.js v3.5.6\r\n * http://amsul.github.io/pickadate.js/time.htm\r\n */\r\n\r\n(function ( factory ) {\r\n\r\n    // AMD.\r\n    if ( typeof define == 'function' && define.amd )\r\n        define( ['picker', 'jquery'], factory )\r\n\r\n    // Node.js/browserify.\r\n    else if ( typeof exports == 'object' )\r\n        module.exports = factory( require('./picker.js'), require('jquery') )\r\n\r\n    // Browser globals.\r\n    else factory( Picker, jQuery )\r\n\r\n}(function( Picker, $ ) {\r\n\r\n\r\n/**\r\n * Globals and constants\r\n */\r\nvar HOURS_IN_DAY = 24,\r\n    MINUTES_IN_HOUR = 60,\r\n    HOURS_TO_NOON = 12,\r\n    MINUTES_IN_DAY = HOURS_IN_DAY * MINUTES_IN_HOUR,\r\n    _ = Picker._\r\n\r\n\r\n\r\n/**\r\n * The time picker constructor\r\n */\r\nfunction TimePicker( picker, settings ) {\r\n\r\n    var clock = this,\r\n        elementValue = picker.$node[ 0 ].value,\r\n        elementDataValue = picker.$node.data( 'value' ),\r\n        valueString = elementDataValue || elementValue,\r\n        formatString = elementDataValue ? settings.formatSubmit : settings.format\r\n\r\n    clock.settings = settings\r\n    clock.$node = picker.$node\r\n\r\n    // The queue of methods that will be used to build item objects.\r\n    clock.queue = {\r\n        interval: 'i',\r\n        min: 'measure create',\r\n        max: 'measure create',\r\n        now: 'now create',\r\n        select: 'parse create validate',\r\n        highlight: 'parse create validate',\r\n        view: 'parse create validate',\r\n        disable: 'deactivate',\r\n        enable: 'activate'\r\n    }\r\n\r\n    // The component's item object.\r\n    clock.item = {}\r\n\r\n    clock.item.clear = null\r\n    clock.item.interval = settings.interval || 30\r\n    clock.item.disable = ( settings.disable || [] ).slice( 0 )\r\n    clock.item.enable = -(function( collectionDisabled ) {\r\n        return collectionDisabled[ 0 ] === true ? collectionDisabled.shift() : -1\r\n    })( clock.item.disable )\r\n\r\n    clock.\r\n        set( 'min', settings.min ).\r\n        set( 'max', settings.max ).\r\n        set( 'now' )\r\n\r\n    // When theres a value, set the `select`, which in turn\r\n    // also sets the `highlight` and `view`.\r\n    if ( valueString ) {\r\n        clock.set( 'select', valueString, {\r\n            format: formatString\r\n        })\r\n    }\r\n\r\n    // If theres no value, default to highlighting today.\r\n    else {\r\n        clock.\r\n            set( 'select', null ).\r\n            set( 'highlight', clock.item.now )\r\n    }\r\n\r\n    // The keycode to movement mapping.\r\n    clock.key = {\r\n        40: 1, // Down\r\n        38: -1, // Up\r\n        39: 1, // Right\r\n        37: -1, // Left\r\n        go: function( timeChange ) {\r\n            clock.set(\r\n                'highlight',\r\n                clock.item.highlight.pick + timeChange * clock.item.interval,\r\n                { interval: timeChange * clock.item.interval }\r\n            )\r\n            this.render()\r\n        }\r\n    }\r\n\r\n\r\n    // Bind some picker events.\r\n    picker.\r\n        on( 'render', function() {\r\n            var $pickerHolder = picker.$root.children(),\r\n                $viewset = $pickerHolder.find( '.' + settings.klass.viewset ),\r\n                vendors = function( prop ) {\r\n                    return ['webkit', 'moz', 'ms', 'o', ''].map(function( vendor ) {\r\n                        return ( vendor ? '-' + vendor + '-' : '' ) + prop\r\n                    })\r\n                },\r\n                animations = function( $el, state ) {\r\n                    vendors( 'transform' ).map(function( prop ) {\r\n                        $el.css( prop, state )\r\n                    })\r\n                    vendors( 'transition' ).map(function( prop ) {\r\n                        $el.css( prop, state )\r\n                    })\r\n                }\r\n            if ( $viewset.length ) {\r\n                animations( $pickerHolder, 'none' )\r\n                $pickerHolder[ 0 ].scrollTop = ~~$viewset.position().top - ( $viewset[ 0 ].clientHeight * 2 )\r\n                animations( $pickerHolder, '' )\r\n            }\r\n        }, 1 ).\r\n        on( 'open', function() {\r\n            picker.$root.find( 'button' ).attr( 'disabled', false )\r\n        }, 1 ).\r\n        on( 'close', function() {\r\n            picker.$root.find( 'button' ).attr( 'disabled', true )\r\n        }, 1 )\r\n\r\n} //TimePicker\r\n\r\n\r\n/**\r\n * Set a timepicker item object.\r\n */\r\nTimePicker.prototype.set = function( type, value, options ) {\r\n\r\n    var clock = this,\r\n        clockItem = clock.item\r\n\r\n    // If the value is `null` just set it immediately.\r\n    if ( value === null ) {\r\n        if ( type == 'clear' ) type = 'select'\r\n        clockItem[ type ] = value\r\n        return clock\r\n    }\r\n\r\n    // Otherwise go through the queue of methods, and invoke the functions.\r\n    // Update this as the time unit, and set the final value as this item.\r\n    // * In the case of `enable`, keep the queue but set `disable` instead.\r\n    //   And in the case of `flip`, keep the queue but set `enable` instead.\r\n    clockItem[ ( type == 'enable' ? 'disable' : type == 'flip' ? 'enable' : type ) ] = clock.queue[ type ].split( ' ' ).map( function( method ) {\r\n        value = clock[ method ]( type, value, options )\r\n        return value\r\n    }).pop()\r\n\r\n    // Check if we need to cascade through more updates.\r\n    if ( type == 'select' ) {\r\n        clock.set( 'highlight', clockItem.select, options )\r\n    }\r\n    else if ( type == 'highlight' ) {\r\n        clock.set( 'view', clockItem.highlight, options )\r\n    }\r\n    else if ( type == 'interval' ) {\r\n        clock.\r\n            set( 'min', clockItem.min, options ).\r\n            set( 'max', clockItem.max, options )\r\n    }\r\n    else if ( type.match( /^(flip|min|max|disable|enable)$/ ) ) {\r\n        if ( clockItem.select && clock.disabled( clockItem.select ) ) {\r\n            clock.set( 'select', value, options )\r\n        }\r\n        if ( clockItem.highlight && clock.disabled( clockItem.highlight ) ) {\r\n            clock.set( 'highlight', value, options )\r\n        }\r\n        if ( type == 'min' ) {\r\n            clock.set( 'max', clockItem.max, options )\r\n        }\r\n    }\r\n\r\n    return clock\r\n} //TimePicker.prototype.set\r\n\r\n\r\n/**\r\n * Get a timepicker item object.\r\n */\r\nTimePicker.prototype.get = function( type ) {\r\n    return this.item[ type ]\r\n} //TimePicker.prototype.get\r\n\r\n\r\n/**\r\n * Create a picker time object.\r\n */\r\nTimePicker.prototype.create = function( type, value, options ) {\r\n\r\n    var clock = this\r\n\r\n    // If theres no value, use the type as the value.\r\n    value = value === undefined ? type : value\r\n\r\n    // If its a date object, convert it into an array.\r\n    if ( _.isDate( value ) ) {\r\n        value = [ value.getHours(), value.getMinutes() ]\r\n    }\r\n\r\n    // If its an object, use the pick value.\r\n    if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {\r\n        value = value.pick\r\n    }\r\n\r\n    // If its an array, convert it into minutes.\r\n    else if ( $.isArray( value ) ) {\r\n        value = +value[ 0 ] * MINUTES_IN_HOUR + (+value[ 1 ])\r\n    }\r\n\r\n    // If no valid value is passed, set it to now.\r\n    else if ( !_.isInteger( value ) ) {\r\n        value = clock.now( type, value, options )\r\n    }\r\n\r\n    // If were setting the max, make sure its greater than the min.\r\n    if ( type == 'max' && value < clock.item.min.pick ) {\r\n        value += MINUTES_IN_DAY\r\n    }\r\n\r\n    // If the value doesnt fall directly on the interval,\r\n    // add one interval to indicate it as passed.\r\n    if ( type != 'min' && type != 'max' && (value - clock.item.min.pick) % clock.item.interval !== 0 ) {\r\n        value += clock.item.interval\r\n    }\r\n\r\n    // Normalize it into a reachable interval.\r\n    value = clock.normalize( type, value, options )\r\n\r\n    // Return the compiled object.\r\n    return {\r\n\r\n        // Divide to get hours from minutes.\r\n        hour: ~~( HOURS_IN_DAY + value / MINUTES_IN_HOUR ) % HOURS_IN_DAY,\r\n\r\n        // The remainder is the minutes.\r\n        mins: ( MINUTES_IN_HOUR + value % MINUTES_IN_HOUR ) % MINUTES_IN_HOUR,\r\n\r\n        // The time in total minutes.\r\n        time: ( MINUTES_IN_DAY + value ) % MINUTES_IN_DAY,\r\n\r\n        // Reference to the relative value to pick.\r\n        pick: value % MINUTES_IN_DAY\r\n    }\r\n} //TimePicker.prototype.create\r\n\r\n\r\n/**\r\n * Create a range limit object using an array, date object,\r\n * literal true, or integer relative to another time.\r\n */\r\nTimePicker.prototype.createRange = function( from, to ) {\r\n\r\n    var clock = this,\r\n        createTime = function( time ) {\r\n            if ( time === true || $.isArray( time ) || _.isDate( time ) ) {\r\n                return clock.create( time )\r\n            }\r\n            return time\r\n        }\r\n\r\n    // Create objects if possible.\r\n    if ( !_.isInteger( from ) ) {\r\n        from = createTime( from )\r\n    }\r\n    if ( !_.isInteger( to ) ) {\r\n        to = createTime( to )\r\n    }\r\n\r\n    // Create relative times.\r\n    if ( _.isInteger( from ) && $.isPlainObject( to ) ) {\r\n        from = [ to.hour, to.mins + ( from * clock.settings.interval ) ];\r\n    }\r\n    else if ( _.isInteger( to ) && $.isPlainObject( from ) ) {\r\n        to = [ from.hour, from.mins + ( to * clock.settings.interval ) ];\r\n    }\r\n\r\n    return {\r\n        from: createTime( from ),\r\n        to: createTime( to )\r\n    }\r\n} //TimePicker.prototype.createRange\r\n\r\n\r\n/**\r\n * Check if a time unit falls within a time range object.\r\n */\r\nTimePicker.prototype.withinRange = function( range, timeUnit ) {\r\n    range = this.createRange(range.from, range.to)\r\n    return timeUnit.pick >= range.from.pick && timeUnit.pick <= range.to.pick\r\n}\r\n\r\n\r\n/**\r\n * Check if two time range objects overlap.\r\n */\r\nTimePicker.prototype.overlapRanges = function( one, two ) {\r\n\r\n    var clock = this\r\n\r\n    // Convert the ranges into comparable times.\r\n    one = clock.createRange( one.from, one.to )\r\n    two = clock.createRange( two.from, two.to )\r\n\r\n    return clock.withinRange( one, two.from ) || clock.withinRange( one, two.to ) ||\r\n        clock.withinRange( two, one.from ) || clock.withinRange( two, one.to )\r\n}\r\n\r\n\r\n/**\r\n * Get the time relative to now.\r\n */\r\nTimePicker.prototype.now = function( type, value/*, options*/ ) {\r\n\r\n    var interval = this.item.interval,\r\n        date = new Date(),\r\n        nowMinutes = date.getHours() * MINUTES_IN_HOUR + date.getMinutes(),\r\n        isValueInteger = _.isInteger( value ),\r\n        isBelowInterval\r\n\r\n    // Make sure now falls within the interval range.\r\n    nowMinutes -= nowMinutes % interval\r\n\r\n    // Check if the difference is less than the interval itself.\r\n    isBelowInterval = value < 0 && interval * value + nowMinutes <= -interval\r\n\r\n    // Add an interval because the time has passed.\r\n    nowMinutes += type == 'min' && isBelowInterval ? 0 : interval\r\n\r\n    // If the value is a number, adjust by that many intervals.\r\n    if ( isValueInteger ) {\r\n        nowMinutes += interval * (\r\n            isBelowInterval && type != 'max' ?\r\n                value + 1 :\r\n                value\r\n            )\r\n    }\r\n\r\n    // Return the final calculation.\r\n    return nowMinutes\r\n} //TimePicker.prototype.now\r\n\r\n\r\n/**\r\n * Normalize minutes to be reachable based on the min and interval.\r\n */\r\nTimePicker.prototype.normalize = function( type, value/*, options*/ ) {\r\n\r\n    var interval = this.item.interval,\r\n        minTime = this.item.min && this.item.min.pick || 0\r\n\r\n    // If setting min time, dont shift anything.\r\n    // Otherwise get the value and min difference and then\r\n    // normalize the difference with the interval.\r\n    value -= type == 'min' ? 0 : ( value - minTime ) % interval\r\n\r\n    // Return the adjusted value.\r\n    return value\r\n} //TimePicker.prototype.normalize\r\n\r\n\r\n/**\r\n * Measure the range of minutes.\r\n */\r\nTimePicker.prototype.measure = function( type, value, options ) {\r\n\r\n    var clock = this\r\n\r\n    // If its anything false-y, set it to the default.\r\n    if ( !value ) {\r\n        value = type == 'min' ? [ 0, 0 ] : [ HOURS_IN_DAY - 1, MINUTES_IN_HOUR - 1 ]\r\n    }\r\n\r\n    // If its a string, parse it.\r\n    if ( typeof value == 'string' ) {\r\n        value = clock.parse( type, value )\r\n    }\r\n\r\n    // If its a literal true, or an integer, make it relative to now.\r\n    else if ( value === true || _.isInteger( value ) ) {\r\n        value = clock.now( type, value, options )\r\n    }\r\n\r\n    // If its an object already, just normalize it.\r\n    else if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {\r\n        value = clock.normalize( type, value.pick, options )\r\n    }\r\n\r\n    return value\r\n} ///TimePicker.prototype.measure\r\n\r\n\r\n/**\r\n * Validate an object as enabled.\r\n */\r\nTimePicker.prototype.validate = function( type, timeObject, options ) {\r\n\r\n    var clock = this,\r\n        interval = options && options.interval ? options.interval : clock.item.interval\r\n\r\n    // Check if the object is disabled.\r\n    if ( clock.disabled( timeObject ) ) {\r\n\r\n        // Shift with the interval until we reach an enabled time.\r\n        timeObject = clock.shift( timeObject, interval )\r\n    }\r\n\r\n    // Scope the object into range.\r\n    timeObject = clock.scope( timeObject )\r\n\r\n    // Do a second check to see if we landed on a disabled min/max.\r\n    // In that case, shift using the opposite interval as before.\r\n    if ( clock.disabled( timeObject ) ) {\r\n        timeObject = clock.shift( timeObject, interval * -1 )\r\n    }\r\n\r\n    // Return the final object.\r\n    return timeObject\r\n} //TimePicker.prototype.validate\r\n\r\n\r\n/**\r\n * Check if an object is disabled.\r\n */\r\nTimePicker.prototype.disabled = function( timeToVerify ) {\r\n\r\n    var clock = this,\r\n\r\n        // Filter through the disabled times to check if this is one.\r\n        isDisabledMatch = clock.item.disable.filter( function( timeToDisable ) {\r\n\r\n            // If the time is a number, match the hours.\r\n            if ( _.isInteger( timeToDisable ) ) {\r\n                return timeToVerify.hour == timeToDisable\r\n            }\r\n\r\n            // If its an array, create the object and match the times.\r\n            if ( $.isArray( timeToDisable ) || _.isDate( timeToDisable ) ) {\r\n                return timeToVerify.pick == clock.create( timeToDisable ).pick\r\n            }\r\n\r\n            // If its an object, match a time within the from and to range.\r\n            if ( $.isPlainObject( timeToDisable ) ) {\r\n                return clock.withinRange( timeToDisable, timeToVerify )\r\n            }\r\n        })\r\n\r\n    // If this time matches a disabled time, confirm its not inverted.\r\n    isDisabledMatch = isDisabledMatch.length && !isDisabledMatch.filter(function( timeToDisable ) {\r\n        return $.isArray( timeToDisable ) && timeToDisable[2] == 'inverted' ||\r\n            $.isPlainObject( timeToDisable ) && timeToDisable.inverted\r\n    }).length\r\n\r\n    // If the clock is \"enabled\" flag is flipped, flip the condition.\r\n    return clock.item.enable === -1 ? !isDisabledMatch : isDisabledMatch ||\r\n        timeToVerify.pick < clock.item.min.pick ||\r\n        timeToVerify.pick > clock.item.max.pick\r\n} //TimePicker.prototype.disabled\r\n\r\n\r\n/**\r\n * Shift an object by an interval until we reach an enabled object.\r\n */\r\nTimePicker.prototype.shift = function( timeObject, interval ) {\r\n\r\n    var clock = this,\r\n        minLimit = clock.item.min.pick,\r\n        maxLimit = clock.item.max.pick/*,\r\n        safety = 1000*/\r\n\r\n    interval = interval || clock.item.interval\r\n\r\n    // Keep looping as long as the time is disabled.\r\n    while ( /*safety &&*/ clock.disabled( timeObject ) ) {\r\n\r\n        /*safety -= 1\r\n        if ( !safety ) {\r\n            throw 'Fell into an infinite loop while shifting to ' + timeObject.hour + ':' + timeObject.mins + '.'\r\n        }*/\r\n\r\n        // Increase/decrease the time by the interval and keep looping.\r\n        timeObject = clock.create( timeObject.pick += interval )\r\n\r\n        // If we've looped beyond the limits, break out of the loop.\r\n        if ( timeObject.pick <= minLimit || timeObject.pick >= maxLimit ) {\r\n            break\r\n        }\r\n    }\r\n\r\n    // Return the final object.\r\n    return timeObject\r\n} //TimePicker.prototype.shift\r\n\r\n\r\n/**\r\n * Scope an object to be within range of min and max.\r\n */\r\nTimePicker.prototype.scope = function( timeObject ) {\r\n    var minLimit = this.item.min.pick,\r\n        maxLimit = this.item.max.pick\r\n    return this.create( timeObject.pick > maxLimit ? maxLimit : timeObject.pick < minLimit ? minLimit : timeObject )\r\n} //TimePicker.prototype.scope\r\n\r\n\r\n/**\r\n * Parse a string into a usable type.\r\n */\r\nTimePicker.prototype.parse = function( type, value, options ) {\r\n\r\n    var hour, minutes, isPM, item, parseValue,\r\n        clock = this,\r\n        parsingObject = {}\r\n\r\n    // If its already parsed, were good.\r\n    if ( !value || typeof value != 'string' ) {\r\n        return value\r\n    }\r\n\r\n    // We need a `.format` to parse the value with.\r\n    if ( !( options && options.format ) ) {\r\n        options = options || {}\r\n        options.format = clock.settings.format\r\n    }\r\n\r\n    // Convert the format into an array and then map through it.\r\n    clock.formats.toArray( options.format ).map( function( label ) {\r\n\r\n        var\r\n            substring,\r\n\r\n            // Grab the formatting label.\r\n            formattingLabel = clock.formats[ label ],\r\n\r\n            // The format length is from the formatting label function or the\r\n            // label length without the escaping exclamation (!) mark.\r\n            formatLength = formattingLabel ?\r\n                _.trigger( formattingLabel, clock, [ value, parsingObject ] ) :\r\n                label.replace( /^!/, '' ).length\r\n\r\n        // If there's a format label, split the value up to the format length.\r\n        // Then add it to the parsing object with appropriate label.\r\n        if ( formattingLabel ) {\r\n            substring = value.substr( 0, formatLength )\r\n            parsingObject[ label ] = substring.match(/^\\d+$/) ? +substring : substring\r\n        }\r\n\r\n        // Update the time value as the substring from format length to end.\r\n        value = value.substr( formatLength )\r\n    })\r\n\r\n    // Grab the hour and minutes from the parsing object.\r\n    for ( item in parsingObject ) {\r\n        parseValue = parsingObject[item]\r\n        if ( _.isInteger(parseValue) ) {\r\n            if ( item.match(/^(h|hh)$/i) ) {\r\n                hour = parseValue\r\n                if ( item == 'h' || item == 'hh' ) {\r\n                    hour %= 12\r\n                }\r\n            }\r\n            else if ( item == 'i' ) {\r\n                minutes = parseValue\r\n            }\r\n        }\r\n        else if ( item.match(/^a$/i) && parseValue.match(/^p/i) && ('h' in parsingObject || 'hh' in parsingObject) ) {\r\n            isPM = true\r\n        }\r\n    }\r\n\r\n    // Calculate it in minutes and return.\r\n    return (isPM ? hour + 12 : hour) * MINUTES_IN_HOUR + minutes\r\n} //TimePicker.prototype.parse\r\n\r\n\r\n/**\r\n * Various formats to display the object in.\r\n */\r\nTimePicker.prototype.formats = {\r\n\r\n    h: function( string, timeObject ) {\r\n\r\n        // If there's string, then get the digits length.\r\n        // Otherwise return the selected hour in \"standard\" format.\r\n        return string ? _.digits( string ) : timeObject.hour % HOURS_TO_NOON || HOURS_TO_NOON\r\n    },\r\n    hh: function( string, timeObject ) {\r\n\r\n        // If there's a string, then the length is always 2.\r\n        // Otherwise return the selected hour in \"standard\" format with a leading zero.\r\n        return string ? 2 : _.lead( timeObject.hour % HOURS_TO_NOON || HOURS_TO_NOON )\r\n    },\r\n    H: function( string, timeObject ) {\r\n\r\n        // If there's string, then get the digits length.\r\n        // Otherwise return the selected hour in \"military\" format as a string.\r\n        return string ? _.digits( string ) : '' + ( timeObject.hour % 24 )\r\n    },\r\n    HH: function( string, timeObject ) {\r\n\r\n        // If there's string, then get the digits length.\r\n        // Otherwise return the selected hour in \"military\" format with a leading zero.\r\n        return string ? _.digits( string ) : _.lead( timeObject.hour % 24 )\r\n    },\r\n    i: function( string, timeObject ) {\r\n\r\n        // If there's a string, then the length is always 2.\r\n        // Otherwise return the selected minutes.\r\n        return string ? 2 : _.lead( timeObject.mins )\r\n    },\r\n    a: function( string, timeObject ) {\r\n\r\n        // If there's a string, then the length is always 4.\r\n        // Otherwise check if it's more than \"noon\" and return either am/pm.\r\n        return string ? 4 : MINUTES_IN_DAY / 2 > timeObject.time % MINUTES_IN_DAY ? 'a.m.' : 'p.m.'\r\n    },\r\n    A: function( string, timeObject ) {\r\n\r\n        // If there's a string, then the length is always 2.\r\n        // Otherwise check if it's more than \"noon\" and return either am/pm.\r\n        return string ? 2 : MINUTES_IN_DAY / 2 > timeObject.time % MINUTES_IN_DAY ? 'AM' : 'PM'\r\n    },\r\n\r\n    // Create an array by splitting the formatting string passed.\r\n    toArray: function( formatString ) { return formatString.split( /(h{1,2}|H{1,2}|i|a|A|!.)/g ) },\r\n\r\n    // Format an object into a string using the formatting options.\r\n    toString: function ( formatString, itemObject ) {\r\n        var clock = this\r\n        return clock.formats.toArray( formatString ).map( function( label ) {\r\n            return _.trigger( clock.formats[ label ], clock, [ 0, itemObject ] ) || label.replace( /^!/, '' )\r\n        }).join( '' )\r\n    }\r\n} //TimePicker.prototype.formats\r\n\r\n\r\n\r\n\r\n/**\r\n * Check if two time units are the exact.\r\n */\r\nTimePicker.prototype.isTimeExact = function( one, two ) {\r\n\r\n    var clock = this\r\n\r\n    // When were working with minutes, do a direct comparison.\r\n    if (\r\n        ( _.isInteger( one ) && _.isInteger( two ) ) ||\r\n        ( typeof one == 'boolean' && typeof two == 'boolean' )\r\n     ) {\r\n        return one === two\r\n    }\r\n\r\n    // When were working with time representations, compare the pick value.\r\n    if (\r\n        ( _.isDate( one ) || $.isArray( one ) ) &&\r\n        ( _.isDate( two ) || $.isArray( two ) )\r\n    ) {\r\n        return clock.create( one ).pick === clock.create( two ).pick\r\n    }\r\n\r\n    // When were working with range objects, compare the from and to.\r\n    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {\r\n        return clock.isTimeExact( one.from, two.from ) && clock.isTimeExact( one.to, two.to )\r\n    }\r\n\r\n    return false\r\n}\r\n\r\n\r\n/**\r\n * Check if two time units overlap.\r\n */\r\nTimePicker.prototype.isTimeOverlap = function( one, two ) {\r\n\r\n    var clock = this\r\n\r\n    // When were working with an integer, compare the hours.\r\n    if ( _.isInteger( one ) && ( _.isDate( two ) || $.isArray( two ) ) ) {\r\n        return one === clock.create( two ).hour\r\n    }\r\n    if ( _.isInteger( two ) && ( _.isDate( one ) || $.isArray( one ) ) ) {\r\n        return two === clock.create( one ).hour\r\n    }\r\n\r\n    // When were working with range objects, check if the ranges overlap.\r\n    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {\r\n        return clock.overlapRanges( one, two )\r\n    }\r\n\r\n    return false\r\n}\r\n\r\n\r\n/**\r\n * Flip the enabled state.\r\n */\r\nTimePicker.prototype.flipEnable = function(val) {\r\n    var itemObject = this.item\r\n    itemObject.enable = val || (itemObject.enable == -1 ? 1 : -1)\r\n}\r\n\r\n\r\n/**\r\n * Mark a collection of times as disabled.\r\n */\r\nTimePicker.prototype.deactivate = function( type, timesToDisable ) {\r\n\r\n    var clock = this,\r\n        disabledItems = clock.item.disable.slice(0)\r\n\r\n\r\n    // If were flipping, thats all we need to do.\r\n    if ( timesToDisable == 'flip' ) {\r\n        clock.flipEnable()\r\n    }\r\n\r\n    else if ( timesToDisable === false ) {\r\n        clock.flipEnable(1)\r\n        disabledItems = []\r\n    }\r\n\r\n    else if ( timesToDisable === true ) {\r\n        clock.flipEnable(-1)\r\n        disabledItems = []\r\n    }\r\n\r\n    // Otherwise go through the times to disable.\r\n    else {\r\n\r\n        timesToDisable.map(function( unitToDisable ) {\r\n\r\n            var matchFound\r\n\r\n            // When we have disabled items, check for matches.\r\n            // If something is matched, immediately break out.\r\n            for ( var index = 0; index < disabledItems.length; index += 1 ) {\r\n                if ( clock.isTimeExact( unitToDisable, disabledItems[index] ) ) {\r\n                    matchFound = true\r\n                    break\r\n                }\r\n            }\r\n\r\n            // If nothing was found, add the validated unit to the collection.\r\n            if ( !matchFound ) {\r\n                if (\r\n                    _.isInteger( unitToDisable ) ||\r\n                    _.isDate( unitToDisable ) ||\r\n                    $.isArray( unitToDisable ) ||\r\n                    ( $.isPlainObject( unitToDisable ) && unitToDisable.from && unitToDisable.to )\r\n                ) {\r\n                    disabledItems.push( unitToDisable )\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    // Return the updated collection.\r\n    return disabledItems\r\n} //TimePicker.prototype.deactivate\r\n\r\n\r\n/**\r\n * Mark a collection of times as enabled.\r\n */\r\nTimePicker.prototype.activate = function( type, timesToEnable ) {\r\n\r\n    var clock = this,\r\n        disabledItems = clock.item.disable,\r\n        disabledItemsCount = disabledItems.length\r\n\r\n    // If were flipping, thats all we need to do.\r\n    if ( timesToEnable == 'flip' ) {\r\n        clock.flipEnable()\r\n    }\r\n\r\n    else if ( timesToEnable === true ) {\r\n        clock.flipEnable(1)\r\n        disabledItems = []\r\n    }\r\n\r\n    else if ( timesToEnable === false ) {\r\n        clock.flipEnable(-1)\r\n        disabledItems = []\r\n    }\r\n\r\n    // Otherwise go through the disabled times.\r\n    else {\r\n\r\n        timesToEnable.map(function( unitToEnable ) {\r\n\r\n            var matchFound,\r\n                disabledUnit,\r\n                index,\r\n                isRangeMatched\r\n\r\n            // Go through the disabled items and try to find a match.\r\n            for ( index = 0; index < disabledItemsCount; index += 1 ) {\r\n\r\n                disabledUnit = disabledItems[index]\r\n\r\n                // When an exact match is found, remove it from the collection.\r\n                if ( clock.isTimeExact( disabledUnit, unitToEnable ) ) {\r\n                    matchFound = disabledItems[index] = null\r\n                    isRangeMatched = true\r\n                    break\r\n                }\r\n\r\n                // When an overlapped match is found, add the inverted state to it.\r\n                else if ( clock.isTimeOverlap( disabledUnit, unitToEnable ) ) {\r\n                    if ( $.isPlainObject( unitToEnable ) ) {\r\n                        unitToEnable.inverted = true\r\n                        matchFound = unitToEnable\r\n                    }\r\n                    else if ( $.isArray( unitToEnable ) ) {\r\n                        matchFound = unitToEnable\r\n                        if ( !matchFound[2] ) matchFound.push( 'inverted' )\r\n                    }\r\n                    else if ( _.isDate( unitToEnable ) ) {\r\n                        matchFound = [ unitToEnable.getFullYear(), unitToEnable.getMonth(), unitToEnable.getDate(), 'inverted' ]\r\n                    }\r\n                    break\r\n                }\r\n            }\r\n\r\n            // If a match was found, remove a previous duplicate entry.\r\n            if ( matchFound ) for ( index = 0; index < disabledItemsCount; index += 1 ) {\r\n                if ( clock.isTimeExact( disabledItems[index], unitToEnable ) ) {\r\n                    disabledItems[index] = null\r\n                    break\r\n                }\r\n            }\r\n\r\n            // In the event that were dealing with an overlap of range times,\r\n            // make sure there are no inverted times because of it.\r\n            if ( isRangeMatched ) for ( index = 0; index < disabledItemsCount; index += 1 ) {\r\n                if ( clock.isTimeOverlap( disabledItems[index], unitToEnable ) ) {\r\n                    disabledItems[index] = null\r\n                    break\r\n                }\r\n            }\r\n\r\n            // If something is still matched, add it into the collection.\r\n            if ( matchFound ) {\r\n                disabledItems.push( matchFound )\r\n            }\r\n        })\r\n    }\r\n\r\n    // Return the updated collection.\r\n    return disabledItems.filter(function( val ) { return val != null })\r\n} //TimePicker.prototype.activate\r\n\r\n\r\n/**\r\n * The division to use for the range intervals.\r\n */\r\nTimePicker.prototype.i = function( type, value/*, options*/ ) {\r\n    return _.isInteger( value ) && value > 0 ? value : this.item.interval\r\n}\r\n\r\n\r\n/**\r\n * Create a string for the nodes in the picker.\r\n */\r\nTimePicker.prototype.nodes = function( isOpen ) {\r\n\r\n    var\r\n        clock = this,\r\n        settings = clock.settings,\r\n        selectedObject = clock.item.select,\r\n        highlightedObject = clock.item.highlight,\r\n        viewsetObject = clock.item.view,\r\n        disabledCollection = clock.item.disable\r\n\r\n    return _.node(\r\n        'ul',\r\n        _.group({\r\n            min: clock.item.min.pick,\r\n            max: clock.item.max.pick,\r\n            i: clock.item.interval,\r\n            node: 'li',\r\n            item: function( loopedTime ) {\r\n                loopedTime = clock.create( loopedTime )\r\n                var timeMinutes = loopedTime.pick,\r\n                    isSelected = selectedObject && selectedObject.pick == timeMinutes,\r\n                    isHighlighted = highlightedObject && highlightedObject.pick == timeMinutes,\r\n                    isDisabled = disabledCollection && clock.disabled( loopedTime ),\r\n                    formattedTime = _.trigger( clock.formats.toString, clock, [ settings.format, loopedTime ] )\r\n                return [\r\n                    _.trigger( clock.formats.toString, clock, [ _.trigger( settings.formatLabel, clock, [ loopedTime ] ) || settings.format, loopedTime ] ),\r\n                    (function( klasses ) {\r\n\r\n                        if ( isSelected ) {\r\n                            klasses.push( settings.klass.selected )\r\n                        }\r\n\r\n                        if ( isHighlighted ) {\r\n                            klasses.push( settings.klass.highlighted )\r\n                        }\r\n\r\n                        if ( viewsetObject && viewsetObject.pick == timeMinutes ) {\r\n                            klasses.push( settings.klass.viewset )\r\n                        }\r\n\r\n                        if ( isDisabled ) {\r\n                            klasses.push( settings.klass.disabled )\r\n                        }\r\n\r\n                        return klasses.join( ' ' )\r\n                    })( [ settings.klass.listItem ] ),\r\n                    'data-pick=' + loopedTime.pick + ' ' + _.ariaAttr({\r\n                        role: 'option',\r\n                        label: formattedTime,\r\n                        selected: isSelected && clock.$node.val() === formattedTime ? true : null,\r\n                        activedescendant: isHighlighted ? true : null,\r\n                        disabled: isDisabled ? true : null\r\n                    })\r\n                ]\r\n            }\r\n        }) +\r\n\r\n        // * For Firefox forms to submit, make sure to set the buttons `type` attribute as button.\r\n        _.node(\r\n            'li',\r\n            _.node(\r\n                'button',\r\n                settings.clear,\r\n                settings.klass.buttonClear,\r\n                'type=button data-clear=1' + ( isOpen ? '' : ' disabled' ) + ' ' +\r\n                _.ariaAttr({ controls: clock.$node[0].id })\r\n            ),\r\n            '', _.ariaAttr({ role: 'presentation' })\r\n        ),\r\n        settings.klass.list,\r\n        _.ariaAttr({ role: 'listbox', controls: clock.$node[0].id })\r\n    )\r\n} //TimePicker.prototype.nodes\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Extend the picker to add the component with the defaults.\r\n */\r\nTimePicker.defaults = (function( prefix ) {\r\n\r\n    return {\r\n\r\n        // Clear\r\n        clear: 'Clear',\r\n\r\n        // The format to show on the `input` element\r\n        format: 'h:i A',\r\n\r\n        // The interval between each time\r\n        interval: 30,\r\n\r\n        // Picker close behavior\r\n        closeOnSelect: true,\r\n        closeOnClear: true,\r\n\r\n        // Classes\r\n        klass: {\r\n\r\n            picker: prefix + ' ' + prefix + '--time',\r\n            holder: prefix + '__holder',\r\n\r\n            list: prefix + '__list',\r\n            listItem: prefix + '__list-item',\r\n\r\n            disabled: prefix + '__list-item--disabled',\r\n            selected: prefix + '__list-item--selected',\r\n            highlighted: prefix + '__list-item--highlighted',\r\n            viewset: prefix + '__list-item--viewset',\r\n            now: prefix + '__list-item--now',\r\n\r\n            buttonClear: prefix + '__button--clear'\r\n        }\r\n    }\r\n})( Picker.klasses().picker )\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Extend the picker to add the time picker.\r\n */\r\nPicker.extend( 'pickatime', TimePicker )\r\n\r\n\r\n}));\r\n;/**!\r\n * PJAX- Standalone (+ several custom changes for binary.com)\r\n *\r\n * A standalone implementation of Pushstate AJAX, for non-jQuery web pages.\r\n * jQuery are recommended to use the original implementation at: http://github.com/defunkt/jquery-pjax\r\n *\r\n * @version 0.6.1\r\n * @author Carl\r\n * @source https://github.com/thybag/PJAX-Standalone\r\n * @license MIT\r\n */\r\n(function(){\r\n\r\n\t// Object to store private values/methods.\r\n\tvar internal = {\r\n\t\t// Is this the first usage of PJAX? (Ensure history entry has required values if so.)\r\n\t\t\"firstrun\": true,\r\n\t\t// Borrowed wholesale from https://github.com/defunkt/jquery-pjax\r\n\t\t// Attempt to check that a device supports pushstate before attempting to use it.\r\n\t\t\"is_supported\": window.history && window.history.pushState && window.history.replaceState && !navigator.userAgent.match(/((iPod|iPhone|iPad).+\\bOS\\s+[1-4]|WebApps\\/.+CFNetwork)/),\r\n\t\t// Track which scripts have been included in to the page. (used if e)\r\n\t\t\"loaded_scripts\": []\r\n\t};\r\n\r\n\t// If PJAX isn't supported we can skip setting up the library all together\r\n\t// So as not to break any code expecting PJAX to be there, return a shell object containing\r\n\t// IE7 + compatible versions of connect (which needs to do nothing) and invoke ( which just changes the page)\r\n\tif(!internal.is_supported) {\r\n\t\t// PJAX shell, so any code expecting PJAX will work\r\n\t\tvar pjax_shell = {\r\n\t\t\t\"connect\": function() { return; },\r\n\t\t\t\"invoke\": function() {\r\n\t\t\t\tvar url = (arguments.length === 2) ? arguments[0] : arguments.url;\r\n\t\t\t\tdocument.location = url;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t};\r\n\t\t// AMD support\r\n\t\tif (typeof define === 'function' && define.amd) {\r\n\t\t\tdefine( function() { return pjax_shell; });\r\n\t\t} else {\r\n\t\t\twindow.pjax = pjax_shell;\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * AddEvent\r\n\t *\r\n\t * @scope private\r\n\t * @param obj Object to listen on\r\n\t * @param event Event to listen for.\r\n\t * @param callback Method to run when event is detected.\r\n\t */\r\n\tinternal.addEvent = function(obj, event, callback) {\r\n\t\tobj.addEventListener(event, callback, false);\r\n\t};\r\n\r\n\t/**\r\n\t * Clone\r\n\t * Util method to create copies of the options object (so they do not share references)\r\n\t * This allows custom settings on different links.\r\n\t *\r\n\t * @scope private\r\n\t * @param obj\r\n\t * @return obj\r\n\t */\r\n\tinternal.clone = function(obj) {\r\n\t\tvar object = {};\r\n\t\t// For every option in object, create it in the duplicate.\r\n\t\tfor (var i in obj) {\r\n\t\t\tobject[i] = obj[i];\r\n\t\t}\r\n\t\treturn object;\r\n\t};\r\n\r\n\t/**\r\n\t * triggerEvent\r\n\t * Fire an event on a given object (used for callbacks)\r\n\t *\r\n\t * @scope private\r\n\t * @param node. Objects to fire event on\r\n\t * @return event_name. type of event\r\n\t */\r\n\tinternal.triggerEvent = function(node, event_name, data) {\r\n\t\t// Good browsers\r\n\t\tvar evt = document.createEvent(\"HTMLEvents\");\r\n\t\tevt.initEvent(event_name, true, true);\r\n\t\t// If additional data was provided, add it to event\r\n\t\tif(typeof data !== 'undefined') evt.data = data;\r\n\t\tnode.dispatchEvent(evt);\r\n\t};\r\n\r\n\t/**\r\n\t * popstate listener\r\n\t * Listens for back/forward button events and updates page accordingly.\r\n\t */\r\n\tinternal.addEvent(window, 'popstate', function(st) {\r\n\t\tif(st.state !== null) {\r\n\r\n\t\t\tvar opt = {\r\n\t\t\t\t'url': st.state.url,\r\n\t\t\t\t'container': st.state.container,\r\n                'useClass': st.state.useClass,\r\n                'loggedin': st.state.loggedin,\r\n\t\t\t\t'title' : st.state.title,\r\n\t\t\t\t'history': false\r\n\t\t\t};\r\n\r\n\t\t\t// Merge original in original connect options\r\n\t\t\tif(typeof internal.options !== 'undefined'){\r\n\t\t\t\tfor(var a in internal.options){\r\n\t\t\t\t\tif(typeof opt[a] === 'undefined') opt[a] = internal.options[a];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Convert state data to PJAX options\r\n\t\t\tvar options = internal.parseOptions(opt);\r\n\t\t\t// If something went wrong, return.\r\n\t\t\tif(options === false) return;\r\n\t\t\t// If there is a state object, handle it as a page load.\r\n\t\t\tinternal.handle(options);\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * attach\r\n\t * Attach PJAX listeners to a link.\r\n\t * @scope private\r\n\t * @param link_node. link that will be clicked.\r\n\t * @param content_node.\r\n\t */\r\n\tinternal.attach = function(node, options) {\r\n\r\n\t\t// Ignore external links.\r\n\t\tif ( node.protocol !== document.location.protocol ||\r\n\t\t\tnode.host !== document.location.host ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore anchors on the same page\r\n\t\tif(node.pathname === location.pathname && node.hash.length > 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore common non-PJAX loadable media types (pdf/doc/zips & images) unless user provides alternate array\r\n\t\tvar ignoreFileTypes = ['pdf','doc','docx','zip','rar','7z','gif','jpeg','jpg','png'];\r\n\t\tif(typeof options.ignoreFileTypes === 'undefined') options.ignoreFileTypes = ignoreFileTypes;\r\n\t\t// Skip link if file type is within ignored types array\r\n\t\tif(options.ignoreFileTypes.indexOf( node.pathname.split('.').pop().toLowerCase() ) !== -1){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Add link HREF to object\r\n\t\toptions.url = node.href;\r\n\t\toptions.update_url = node.pathname + node.search + node.hash;\r\n\t\toptions.loggedin = node.classList.contains('with_login_cookies');\r\n\r\n\t\t// If PJAX data is specified, use as container\r\n\t\tif(node.getAttribute('data-pjax')) {\r\n\t\t\toptions.container = node.getAttribute('data-pjax');\r\n\t\t}\r\n\r\n\t\t// If data-title is specified, use as title.\r\n\t\tif(node.getAttribute('data-title')) {\r\n\t\t\toptions.title = node.getAttribute('data-title');\r\n\t\t}\r\n\r\n\t\t// Check options are valid.\r\n\t\toptions = internal.parseOptions(options);\r\n\t\tif(options === false) return;\r\n\r\n\t\t// Attach event.\r\n\t\tinternal.addEvent(node, 'click', function(event) {\r\n\t\t\t// Allow middle click (pages in new windows)\r\n\t\t\tif ( event.which > 1 || event.metaKey || event.ctrlKey ) return;\r\n\t\t\t// Don't fire normal event\r\n\t\t\tif(event.preventDefault){ event.preventDefault(); }else{ event.returnValue = false; }\r\n\t\t\t// Take no action if we are already on said page?\r\n\t\t\tif(document.location.href === options.url) return false;\r\n\t\t\t// handle the load.\r\n\t\t\tinternal.handle(options);\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * parseLinks\r\n\t * Parse all links within a DOM node, using settings provided in options.\r\n\t * @scope private\r\n\t * @param dom_obj. Dom node to parse for links.\r\n\t * @param options. Valid Options object.\r\n\t */\r\n\tinternal.parseLinks = function(dom_obj, options) {\r\n\r\n\t\tvar nodes;\r\n\r\n\t\tif(typeof options.useClass !== 'undefined'){\r\n\t\t\t// Get all nodes with the provided class name.\r\n\t\t\tnodes = dom_obj.getElementsByClassName(options.useClass);\r\n\t\t}else{\r\n\t\t\t// If no class was provided, just get all the links\r\n\t\t\tnodes = dom_obj.getElementsByTagName('a');\r\n\t\t}\r\n\r\n\t\t// For all returned nodes\r\n\t\tfor(var i=0,tmp_opt; i < nodes.length; i++) {\r\n\t\t\tvar node = nodes[i];\r\n\t\t\tif(typeof options.excludeClass !== 'undefined') {\r\n\t\t\t\tif(node.className.indexOf(options.excludeClass) !== -1) continue;\r\n\t\t\t}\r\n\t\t\t// Override options history to true, else link parsing could be triggered by back button (which runs in no-history mode)\r\n\t\t\ttmp_opt = internal.clone(options);\r\n\t\t\ttmp_opt.history = true;\r\n\t\t\tinternal.attach(node, tmp_opt);\r\n\t\t}\r\n\r\n\t\tif(internal.firstrun) {\r\n\t\t\t// Store array or all currently included script src's to avoid PJAX accidentally reloading existing libraries\r\n\t\t\tvar scripts = document.getElementsByTagName('script');\r\n\t\t\tfor(var c=0; c < scripts.length; c++) {\r\n\t\t\t\tif(scripts[c].src && internal.loaded_scripts.indexOf(scripts[c].src) === -1){\r\n\t\t\t\t\tinternal.loaded_scripts.push(scripts[c].src);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Fire ready event once all links are connected\r\n\t\t\tinternal.triggerEvent(internal.get_container_node(options.container), 'ready');\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * SmartLoad\r\n\t * Smartload checks the returned HTML to ensure PJAX ready content has been provided rather than\r\n\t * a full HTML page. If a full HTML has been returned, it will attempt to scan the page and extract\r\n\t * the correct HTML to update our container with in order to ensure PJAX still functions as expected.\r\n\t *\r\n\t * @scope private\r\n\t * @param HTML (HTML returned from AJAX)\r\n\t * @param options (Options object used to request page)\r\n\t * @return HTML to append to our page.\r\n\t */\r\n\tinternal.smartLoad = function(html, options) {\r\n\t\t// Grab the title if there is one\r\n\t\tvar title = html.getElementsByTagName('title')[0];\r\n\t\tif(title)\r\n\t\t\tdocument.title = title.innerHTML;\r\n\r\n\t\t// Going by caniuse all browsers that support the pushstate API also support querySelector's\r\n\t\t// see: http://caniuse.com/#search=push\r\n\t\t// see: http://caniuse.com/#search=querySelector\r\n\t\tvar container = html.querySelector(\"#\" + options.container.id);\r\n\t\tif(container !== null) return container;\r\n\r\n\t\t// If our container was not found, HTML will be returned as is.\r\n\t\treturn html;\r\n\t};\r\n\r\n\t/**\r\n\t * Update Content\r\n\t * Updates DOM with content loaded via PJAX\r\n\t *\r\n\t * @param html DOM fragment of loaded container\r\n\t * @param options PJAX configuration options\r\n\t * return options\r\n\t */\r\n\tinternal.updateContent = function(html, options){\r\n\t\t// Create in memory DOM node, to make parsing returned data easier\r\n\t\tvar tmp = document.createElement('div');\r\n\t\ttmp.innerHTML = html;\r\n\r\n\t\t// Ensure we have the correct HTML to apply to our container.\r\n\t\tif(options.smartLoad) tmp = internal.smartLoad(tmp, options);\r\n\r\n\t\t// If no title was provided, extract it\r\n\t\tif(typeof options.title === 'undefined'){\r\n\t\t\t// Use current doc title (this will be updated via smart load if its enabled)\r\n\t\t\toptions.title = document.title;\r\n\r\n\t\t\t// Attempt to grab title from non-smart loaded page contents\r\n\t\t\tif(!options.smartLoad){\r\n\t\t\t\tvar tmpTitle = tmp.getElementsByTagName('title');\r\n\t\t\t\tif(tmpTitle.length !== 0) options.title = tmpTitle[0].innerHTML;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Update the DOM with the new content\r\n\t\toptions.container.innerHTML = tmp.innerHTML;\r\n\r\n\t\t// Run included JS?\r\n\t\tif(options.parseJS) internal.runScripts(tmp);\r\n\r\n\t\t// Send data back to handle\r\n\t\treturn options;\r\n\t};\r\n\r\n\t/**\r\n\t * runScripts\r\n\t * Execute JavaScript on pages loaded via PJAX\r\n\t *\r\n\t * Note: In-line JavaScript is run each time a page is hit, while external JavaScript\r\n\t *\t\tis only loaded once (Although remains loaded while the user continues browsing)\r\n\t *\r\n\t * @param html DOM fragment of loaded container\r\n\t * return void\r\n\t */\r\n\tinternal.runScripts = function(html){\r\n\t\t// Extract JavaScript & eval it (if enabled)\r\n\t\tvar scripts = html.getElementsByTagName('script');\r\n\t\tfor(var sc=0; sc < scripts.length;sc++) {\r\n\t\t\t// If has an src & src isn't in \"loaded_scripts\", load the script.\r\n\t\t\tif(scripts[sc].src && internal.loaded_scripts.indexOf(scripts[sc].src) === -1){\r\n\t\t\t\t// Append to head to include\r\n\t\t\t\tvar s = document.createElement(\"script\");\r\n\t\t\t\ts.src = scripts[sc].src;\r\n\t\t\t\tdocument.head.appendChild(s);\r\n\t\t\t\t// Add to loaded list\r\n\t\t\t\tinternal.loaded_scripts.push(scripts[sc].src);\r\n\t\t\t}else{\r\n\t\t\t\t// If raw JS, eval it.\r\n\t\t\t\teval(scripts[sc].innerHTML);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * handle\r\n\t * Handle requests to load content via PJAX.\r\n\t * @scope private\r\n\t * @param url. Page to load.\r\n\t * @param node. Dom node to add returned content in to.\r\n\t * @param addtohistory. Does this load require a history event.\r\n\t */\r\n\tinternal.handle = function(options) {\r\n\r\n\t\t// Fire beforeSend Event.\r\n\t\tinternal.triggerEvent(options.container, 'beforeSend', options);\r\n\r\n\t\t// Do the request\r\n\t\tinternal.request(options.url, function(html) {\r\n\r\n\t\t\t// Fail if unable to load HTML via AJAX\r\n\t\t\tif(html === false){\r\n\t\t\t\tinternal.triggerEvent(options.container,'complete', options);\r\n\t\t\t\tinternal.triggerEvent(options.container,'error', options);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Parse page & update DOM\r\n\t\t\toptions = internal.updateContent(html, options);\r\n\r\n\t\t\t// Do we need to add this to the history?\r\n\t\t\tif(options.history) {\r\n\t\t\t\t// If this is the first time pjax has run, create a state object for the current page.\r\n\t\t\t\tif(internal.firstrun){\r\n\t\t\t\t\twindow.history.replaceState({'url': document.location.href, 'container':  options.container.id, 'useClass': options.useClass, 'loggedin': options.loggedin, 'title': document.title}, document.title);\r\n\t\t\t\t\tinternal.firstrun = false;\r\n\t\t\t\t}\r\n\t\t\t\t// Update browser history\r\n\t\t\t\twindow.history.pushState({'url': options.url, 'container': options.container.id, 'useClass': options.useClass, 'loggedin': options.loggedin, 'title': options.title }, options.title , options.url);\r\n\t\t\t}\r\n\r\n\t\t\t// Initialize any new links found within document (if enabled).\r\n\t\t\tif(options.parseLinksOnload){\r\n\t\t\t\tinternal.parseLinks(options.container, options);\r\n\t\t\t}\r\n\r\n\t\t\t// Fire Events\r\n\t\t\tinternal.triggerEvent(options.container,'complete', options);\r\n\t\t\tinternal.triggerEvent(options.container,'success', options);\r\n\r\n\t\t\t// Don't track if page isn't part of history, or if autoAnalytics is disabled\r\n\t\t\tif(options.autoAnalytics && options.history) {\r\n\t\t\t\t// If autoAnalytics is enabled and a Google analytics tracker is detected push\r\n\t\t\t\t// a trackPageView, so PJAX loaded pages can be tracked successfully.\r\n\t\t\t\tif(window._gaq) _gaq.push(['_trackPageview']);\r\n\t\t\t\tif(window.ga) ga('send', 'pageview', {'page': options.url, 'title': options.title});\r\n\t\t\t}\r\n\r\n\t\t\t// Set new title\r\n\t\t\tdocument.title = options.title;\r\n\r\n\t\t\t// Scroll page to top on new page load\r\n\t\t\tif(options.returnToTop) {\r\n\t\t\t\twindow.scrollTo(0, 0);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Request\r\n\t * Performs AJAX request to page and returns the result..\r\n\t *\r\n\t * @scope private\r\n\t * @param location. Page to request.\r\n\t * @param callback. Method to call when a page is loaded.\r\n\t */\r\n\tinternal.request = function(location, callback) {\r\n\t\t// Create xmlHttpRequest object.\r\n\t\tvar xmlhttp;\r\n\t\ttry {\r\n\t\t\txmlhttp = window.XMLHttpRequest? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n\t\t}  catch (e) {\r\n\t\t\tconsole.log(\"Unable to create XMLHTTP Request\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Add state listener.\r\n\t\txmlhttp.onreadystatechange = function() {\r\n\t\t\tif ((xmlhttp.readyState === 4) && (xmlhttp.status === 200)) {\r\n\t\t\t\t// Success, Return HTML\r\n\t\t\t\tcallback(xmlhttp.responseText);\r\n\t\t\t}else if((xmlhttp.readyState === 4) && (xmlhttp.status === 404 || xmlhttp.status === 500)){\r\n\t\t\t\t// error (return false)\r\n\t\t\t\tcallback(false);\r\n\t\t\t}\r\n\t\t};\r\n\t\t// Secret pjax ?get param so browser doesn't return pjax content from cache when we don't want it to\r\n\t\t// Switch between ? and & so as not to break any URL params (Based on change by zmasek https://github.com/zmasek/)\r\n\t\txmlhttp.open(\"GET\", location + ((!/[?&]/.test(location)) ? '?_pjax' : '&_pjax'), true);\r\n\t\t// Add headers so things can tell the request is being performed via AJAX.\r\n\t\txmlhttp.setRequestHeader('X-PJAX', 'true'); // PJAX header\r\n\t\txmlhttp.setRequestHeader('X-Requested-With', 'XMLHttpRequest');// Standard AJAX header.\r\n\r\n\t\txmlhttp.send(null);\r\n\t};\r\n\r\n\t/**\r\n\t * parseOptions\r\n\t * Validate and correct options object while connecting up any listeners.\r\n\t *\r\n\t * @scope private\r\n\t * @param options\r\n\t * @return false | valid options object\r\n\t */\r\n\tinternal.parseOptions = function(options) {\r\n\r\n\t\t/**  Defaults parse options. (if something isn't provided)\r\n\t\t *\r\n\t\t * - history: track event to history (on by default, set to off when performing back operation)\r\n\t\t * - parseLinksOnload: Enabled by default. Process pages loaded via PJAX and setup PJAX on any links found.\r\n\t\t * - smartLoad: Tries to ensure the correct HTML is loaded. If you are certain your back end\r\n\t\t *\t\twill only return PJAX ready content this can be disabled for a slight performance boost.\r\n\t\t * - autoAnalytics: Automatically attempt to log events to Google analytics (if tracker is available)\r\n\t\t * - returnToTop: Scroll user back to top of page, when new page is opened by PJAX\r\n\t\t * - parseJS: Disabled by default, when enabled PJAX will automatically run returned JavaScript\r\n\t\t */\r\n\t\tvar defaults = {\r\n\t\t\t\"history\": true,\r\n\t\t\t\"parseLinksOnload\": true,\r\n\t\t\t\"smartLoad\" : true,\r\n\t\t\t\"autoAnalytics\": true,\r\n\t\t\t\"returnToTop\": true,\r\n\t\t\t\"parseJS\": false\r\n\t\t};\r\n\r\n\t\t// Ensure a URL and container have been provided.\r\n\t\tif(typeof options.url === 'undefined' || typeof options.container === 'undefined' || options.container === null) {\r\n\t\t\tconsole.log(\"URL and Container must be provided.\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Check required options are defined, if not, use default\r\n\t\tfor(var o in defaults) {\r\n\t\t\tif(typeof options[o] === 'undefined') options[o] = defaults[o];\r\n\t\t}\r\n\r\n\t\t// Ensure history setting is a boolean.\r\n\t\toptions.history = (options.history === false) ? false : true;\r\n\r\n\t\t// Get container (if its an id, convert it to a DOM node.)\r\n\t\toptions.container = internal.get_container_node(options.container);\r\n\r\n\t\t// Events\r\n\t\tvar events = ['ready', 'beforeSend', 'complete', 'error', 'success'];\r\n\r\n\t\t// If everything went okay thus far, connect up listeners\r\n\t\tfor(var e in events){\r\n\t\t\tvar evt = events[e];\r\n\t\t\tif(typeof options[evt] === 'function'){\r\n\t\t\t\tinternal.addEvent(options.container, evt, options[evt]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Return valid options\r\n\t\treturn options;\r\n\t};\r\n\r\n\t/**\r\n\t * get_container_node\r\n\t * Returns container node\r\n\t *\r\n\t * @param container - (string) container ID | container DOM node.\r\n\t * @return container DOM node | false\r\n\t */\r\n\tinternal.get_container_node = function(container) {\r\n\t\tif(typeof container === 'string') {\r\n\t\t\tcontainer = document.getElementById(container);\r\n\t\t\tif(container === null){\r\n\t\t\t\tconsole.log(\"Could not find container with id:\" + container);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn container;\r\n\t};\r\n\r\n\t/**\r\n\t * connect\r\n\t * Attach links to PJAX handlers.\r\n\t * @scope public\r\n\t *\r\n\t * Can be called in 3 ways.\r\n\t * Calling as connect();\r\n\t *\t\tWill look for links with the data-pjax attribute.\r\n\t *\r\n\t * Calling as connect(container_id)\r\n\t *\t\tWill try to attach to all links, using the container_id as the target.\r\n\t *\r\n\t * Calling as connect(container_id, class_name)\r\n\t *\t\tWill try to attach any links with the given class name, using container_id as the target.\r\n\t *\r\n\t * Calling as connect({\r\n\t *\t\t\t\t\t\t'url':'somepage.php',\r\n\t *\t\t\t\t\t\t'container':'somecontainer',\r\n\t *\t\t\t\t\t\t'beforeSend': function(){console.log(\"sending\");}\r\n\t *\t\t\t\t\t})\r\n\t *\t\tWill use the provided JSON to configure the script in full (including callbacks)\r\n\t */\r\n\tthis.connect = function(/* options */) {\r\n\t\t// connect();\r\n\t\tvar options = {};\r\n\t\t// connect(container, class_to_apply_to)\r\n\t\tif(arguments.length === 2){\r\n\t\t\toptions.container = arguments[0];\r\n\t\t\toptions.useClass = arguments[1];\r\n\t\t}\r\n\t\t// Either JSON or container id\r\n\t\tif(arguments.length === 1){\r\n\t\t\tif(typeof arguments[0] === 'string' ) {\r\n\t\t\t\t//connect(container_id)\r\n\t\t\t\toptions.container = arguments[0];\r\n\t\t\t}else{\r\n\t\t\t\t//Else connect({url:'', container: ''});\r\n\t\t\t\toptions = arguments[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Delete history and title if provided. These options should only be provided via invoke();\r\n\t\tdelete options.title;\r\n\t\tdelete options.history;\r\n\r\n\t\tinternal.options = options;\r\n\t\tif(document.readyState === 'complete') {\r\n\t\t\tinternal.parseLinks(document, options);\r\n\t\t} else {\r\n\t\t\t//Don't run until the window is ready.\r\n\t\t\tinternal.addEvent(window, 'load', function(){\r\n\t\t\t\t//Parse links using specified options\r\n\t\t\t\tinternal.parseLinks(document, options);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * invoke\r\n\t * Directly invoke a pjax page load.\r\n\t * invoke({url: 'file.php', 'container':'content'});\r\n\t *\r\n\t * @scope public\r\n\t * @param options\r\n\t */\r\n\tthis.invoke = function(/* options */) {\r\n\r\n\t\tvar options = {};\r\n\t\t// url, container\r\n\t\tif(arguments.length === 2){\r\n\t\t\toptions.url = arguments[0];\r\n\t\t\toptions.container = arguments[1];\r\n\t\t}else{\r\n\t\t\toptions = arguments[0];\r\n\t\t}\r\n\r\n\t\t// Process options\r\n\t\toptions = internal.parseOptions(options);\r\n\t\t// If everything went okay, activate pjax.\r\n\t\tif(options !== false) internal.handle(options);\r\n\t};\r\n\r\n\t// Make object usable\r\n\tvar pjax_obj = this;\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// Register pjax as AMD module\r\n\t\tdefine( function() {\r\n\t\t\treturn pjax_obj;\r\n\t\t});\r\n\t}else{\r\n\t\t// Make PJAX object accessible in global name space\r\n\t\twindow.pjax = pjax_obj;\r\n\t}\r\n\r\n\r\n}).call({});\r\n"]}